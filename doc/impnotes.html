<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Implementation Notes for GNU CLISP.</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REV="MADE"
HREF="mailto:clisp-list@sf.net"><META
NAME="KEYWORD"
CONTENT="Lisp"><META
NAME="KEYWORD"
CONTENT="Common Lisp"><META
NAME="KEYWORD"
CONTENT="CLISP"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="impnotes.css"></HEAD
><BODY
CLASS="book"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="BOOK"
><A
NAME="impnotes-top"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
><A
NAME="book-info-title-page"
>Implementation Notes for <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</A
></H1
><H2
CLASS="subtitle"
>These notes document <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> version 2.32.</H2
><SPAN
CLASS="date"
>Last modified: 2003-12-30<BR></SPAN
><H3
CLASS="author"
><A
NAME="bruno"
></A
>Dr. Bruno Haible</H3
><H3
CLASS="author"
><A
NAME="sds"
></A
>Dr. Sam Steingold</H3
><DIV
CLASS="authorblurb"
><P
ALIGN="justify"
>Bugs in both these notes and <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> itself should
   be reported to the mailing list <CODE
CLASS="email"
>&#60;<A
HREF="mailto:clisp-list@sf.net"
>clisp-list@sf.net</A
>&#62;</CODE
>.</P
></DIV
><IMG
ALIGN="center"
SRC="clisp.png"
ALT=""><P
CLASS="copyright"
>Copyright &copy; 1992-2003 Bruno Haible</P
><P
CLASS="copyright"
>Copyright &copy; 1998-2003 Sam Steingold</P
><DIV
CLASS="legalnotice"
><P
></P
><A
NAME="legalese"
></A
><P
ALIGN="justify"
>These notes are covered by the <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>GFDL</A
>:</P
><P
ALIGN="justify"
>Permission is granted to copy, distribute and/or modify this
   document under the terms of the GNU Free Documentation License
   (<A
HREF="http://www.gnu.org/copyleft/fdl.html"
TARGET="_top"
>GFDL</A
>), Version 1.2 or any later version published by the <A
HREF="http://www.fsf.org"
TARGET="_top"
>Free Software Foundation (FSF)</A
>;
   with no Invariant Sections,
   with no Front-Cover Text, and
   with no Back-Cover Texts.
   A copy of the license is included in the section entitled
   <A
HREF="#gfdl"
>"GNU Free Documentation License."</A
></P
><P
></P
></DIV
><HR></DIV
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
><A
HREF="#preface"
>Overview</A
></DT
><DT
>I. <A
HREF="#clhs-chapters"
>Chapters or the <A
HREF="#CLHS"
>[<SPAN
CLASS="citation"
><A
HREF="#CLHS"
>Common Lisp HyperSpec</A
></SPAN
>]</A
></A
></DT
><DD
><DL
><DT
>1. <A
HREF="#intro"
>Introduction
  <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-1.html"
TARGET="_top"
>[CLHS-1]</A
></A
></DT
><DD
><DL
><DT
>1.1. <A
HREF="#spec-symb"
>Special Symbols
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-4-1-3.html"
TARGET="_top"
>[CLHS-1.4.1.3]</A
></A
></DT
><DT
>1.2. <A
HREF="#error-terms"
>Error Terminology
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-4-2.html"
TARGET="_top"
>[CLHS-1.4.2]</A
></A
></DT
><DT
>1.3. <A
HREF="#class-prec"
>Class Precedence Lists
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-4-4-5.html"
TARGET="_top"
>[CLHS-1.4.4.5]</A
></A
></DT
><DT
>1.4. <A
HREF="#cl-symb"
>Symbols in the Package <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-9.html"
TARGET="_top"
>[CLHS-1.9]</A
></A
></DT
></DL
></DD
><DT
>2. <A
HREF="#syntax"
>Syntax
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-2.html"
TARGET="_top"
>[CLHS-2]</A
></A
></DT
><DD
><DL
><DT
>2.1. <A
HREF="#reader-alg"
>Reader Algorithm
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-2.html"
TARGET="_top"
>[CLHS-2.2]</A
></A
></DT
><DT
>2.2. <A
HREF="#tokens"
>Symbols as Tokens
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-3-4.html"
TARGET="_top"
>[CLHS-2.3.4]</A
></A
></DT
><DT
>2.3. <A
HREF="#valid-patterns"
>Valid Patterns for Tokens
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-3-5.html"
TARGET="_top"
>[CLHS-2.3.5]</A
></A
></DT
><DT
>2.4. <A
HREF="#double-quote"
>Double-Quote
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-4-5.html"
TARGET="_top"
>[CLHS-2.4.5]</A
></A
></DT
><DT
>2.5. <A
HREF="#backquote"
>Backquote
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-4-6.html"
TARGET="_top"
>[CLHS-2.4.6]</A
></A
></DT
><DT
>2.6. <A
HREF="#sharpsign"
>Sharpsign
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-4-8.html"
TARGET="_top"
>[CLHS-2.4.8]</A
></A
></DT
></DL
></DD
><DT
>3. <A
HREF="#eval"
>Evaluation and Compilation
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-3.html"
TARGET="_top"
>[CLHS-3]</A
></A
></DT
><DD
><DL
><DT
>3.1. <A
HREF="#evaluation"
>Evaluation
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-1.html"
TARGET="_top"
>[CLHS-3.1]</A
></A
></DT
><DT
>3.2. <A
HREF="#compilation"
>Compilation
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-2.html"
TARGET="_top"
>[CLHS-3.2]</A
></A
></DT
><DT
>3.3. <A
HREF="#declarations"
>Declarations
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-3.html"
TARGET="_top"
>[CLHS-3.3]</A
></A
></DT
><DT
>3.4. <A
HREF="#lalist"
>Lambda Lists
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4.html"
TARGET="_top"
>[CLHS-3.4]</A
></A
></DT
><DT
>3.5. <A
HREF="#eval-comp"
>The Evaluation and Compilation Dictionary
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_evalu_n_dictionary.html"
TARGET="_top"
>[CLHS-3.8]</A
></A
></DT
></DL
></DD
><DT
>4. <A
HREF="#types-classes"
>Types and Classes
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-4.html"
TARGET="_top"
>[CLHS-4]</A
></A
></DT
><DD
><DL
><DT
>4.1. <A
HREF="#types"
>Types
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-2.html"
TARGET="_top"
>[CLHS-4.2]</A
></A
></DT
><DT
>4.2. <A
HREF="#classes"
>Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3.html"
TARGET="_top"
>[CLHS-4.3]</A
></A
></DT
><DT
>4.3. <A
HREF="#clos-diff"
>Deviations from <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
></A
></DT
><DT
>4.4. <A
HREF="#metaclasses"
>Standard Metaclasses
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-1-1.html"
TARGET="_top"
>[CLHS-4.3.1.1]</A
></A
></DT
><DT
>4.5. <A
HREF="#def-class"
>Defining Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-2.html"
TARGET="_top"
>[CLHS-4.3.2]</A
></A
></DT
><DT
>4.6. <A
HREF="#redef-class"
>Redefining Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-6.html"
TARGET="_top"
>[CLHS-4.3.6]</A
></A
></DT
><DT
>4.7. <A
HREF="#type-class-int"
>Integrating Types and Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html"
TARGET="_top"
>[CLHS-4.3.7]</A
></A
></DT
><DT
>4.8. <A
HREF="#type-class-dict"
>The Types and Classes Dictionary
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_types_s_dictionary.html"
TARGET="_top"
>[CLHS-4.4]</A
></A
></DT
></DL
></DD
><DT
>5. <A
HREF="#data"
>Data and Control Flow
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-5.html"
TARGET="_top"
>[CLHS-5]</A
></A
></DT
><DD
><DL
><DT
>5.1. <A
HREF="#flow-dict"
>The Data and Control Flow Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html"
TARGET="_top"
>[CLHS-5.3]</A
></A
></DT
></DL
></DD
><DT
>6. <A
HREF="#iteration"
>Iteration
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-6.html"
TARGET="_top"
>[CLHS-6]</A
></A
></DT
><DT
>7. <A
HREF="#objects"
>Objects
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-7.html"
TARGET="_top"
>[CLHS-7]</A
></A
></DT
><DD
><DL
><DT
>7.1. <A
HREF="#meth-combo"
>Declarative Method Combination
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-3.html"
TARGET="_top"
>[CLHS-7.6.6.3]</A
></A
></DT
><DT
>7.2. <A
HREF="#obj-dict"
>The Objects Dictionary
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_7-7.html"
TARGET="_top"
>[CLHS-7.7]</A
></A
></DT
></DL
></DD
><DT
>8. <A
HREF="#structures"
>Structures
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-8.html"
TARGET="_top"
>[CLHS-8]</A
></A
></DT
><DT
>9. <A
HREF="#conditions"
>Conditions
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-9.html"
TARGET="_top"
>[CLHS-9]</A
></A
></DT
><DD
><DL
><DT
>9.1. <A
HREF="#cond-nl"
>Embedded Newlines in Condition Reports
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_9-1-3-1-3.html"
TARGET="_top"
>[CLHS-9.1.3.1.3]</A
></A
></DT
><DT
>9.2. <A
HREF="#cond-dict"
>The Conditions Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_condi_s_dictionary.html"
TARGET="_top"
>[CLHS-9.2]</A
></A
></DT
></DL
></DD
><DT
>10. <A
HREF="#symbols"
>Symbols
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-10.html"
TARGET="_top"
>[CLHS-10]</A
></A
></DT
><DT
>11. <A
HREF="#packages"
>Packages
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-11.html"
TARGET="_top"
>[CLHS-11]</A
></A
></DT
><DD
><DL
><DT
>11.1. <A
HREF="#pack-lock"
>Constraints on the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> Package
  for Conforming Programs - package locking
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html"
TARGET="_top"
>[CLHS-11.1.2.1.2]</A
></A
></DT
><DT
>11.2. <A
HREF="#clupack"
>The
  <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP-USER"</SPAN
></STRONG
> Package
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
TARGET="_top"
>[CLHS-11.1.2.2]</A
></A
></DT
><DT
>11.3. <A
HREF="#imppack"
>Implementation-Defined Packages
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-4.html"
TARGET="_top"
>[CLHS-11.1.2.4]</A
></A
></DT
><DT
>11.4. <A
HREF="#pack-dict"
>The Packages Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_packa_s_dictionary.html"
TARGET="_top"
>[CLHS-11.2]</A
></A
></DT
></DL
></DD
><DT
>12. <A
HREF="#numbers"
>Numbers
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-12.html"
TARGET="_top"
>[CLHS-12]</A
></A
></DT
><DD
><DL
><DT
>12.1. <A
HREF="#num-types"
>Numeric Types</A
></DT
><DT
>12.2. <A
HREF="#num-concepts"
>Number Concepts
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1.html"
TARGET="_top"
>[CLHS-12.1]</A
></A
></DT
><DT
>12.3. <A
HREF="#num-dict"
>The Numbers Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_numbers_dictionary.html"
TARGET="_top"
>[CLHS-12.2]</A
></A
></DT
></DL
></DD
><DT
>13. <A
HREF="#characters"
>Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-13.html"
TARGET="_top"
>[CLHS-13]</A
></A
></DT
><DD
><DL
><DT
>13.1. <A
HREF="#input-char"
>Attributes</A
></DT
><DT
>13.2. <A
HREF="#char-script"
>Character Scripts
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-2-1.html"
TARGET="_top"
>[CLHS-13.1.2.1]</A
></A
></DT
><DT
>13.3. <A
HREF="#char-attrib"
>Character Attributes
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-3.html"
TARGET="_top"
>[CLHS-13.1.3]</A
></A
></DT
><DT
>13.4. <A
HREF="#graph-char"
>Graphic Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-1.html"
TARGET="_top"
>[CLHS-13.1.4.1]</A
></A
></DT
><DT
>13.5. <A
HREF="#alpha-char"
>Alphabetic Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-2.html"
TARGET="_top"
>[CLHS-13.1.4.2]</A
></A
></DT
><DT
>13.6. <A
HREF="#char-ext"
>Case of Implementation-Defined Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-3-4.html"
TARGET="_top"
>[CLHS-13.1.4.3.4]</A
></A
></DT
><DT
>13.7. <A
HREF="#num-char"
>Numeric Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-4.html"
TARGET="_top"
>[CLHS-13.1.4.4]</A
></A
></DT
><DT
>13.8. <A
HREF="#char-ord"
>Ordering of Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-6.html"
TARGET="_top"
>[CLHS-13.1.6]</A
></A
></DT
><DT
>13.9. <A
HREF="#clhs-newline"
>Treatment of Newline during Input and Output
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-8.html"
TARGET="_top"
>[CLHS-13.1.8]</A
></A
></DT
><DT
>13.10. <A
HREF="#char-int"
>Character Encodings
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-9.html"
TARGET="_top"
>[CLHS-13.1.9]</A
></A
></DT
><DT
>13.11. <A
HREF="#script-ext"
>Documentation
   of Implementation-Defined Scripts
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-10.html"
TARGET="_top"
>[CLHS-13.1.10]</A
></A
></DT
><DT
>13.12. <A
HREF="#char-dict"
>The Characters Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_chara_s_dictionary.html"
TARGET="_top"
>[CLHS-13.2]</A
></A
></DT
><DT
>13.13. <A
HREF="#char-width"
>Functions on characters</A
></DT
><DT
>13.14. <A
HREF="#char-platform-dep"
>Platform-Dependent Characters</A
></DT
><DT
>13.15. <A
HREF="#char-bits"
>Obsolete Constants</A
></DT
></DL
></DD
><DT
>14. <A
HREF="#conses"
>Conses
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-14.html"
TARGET="_top"
>[CLHS-14]</A
></A
></DT
><DD
><DL
><DT
>14.1. <A
HREF="#cons-dict"
>The Conses Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_conses_dictionary.html"
TARGET="_top"
>[CLHS-14.2]</A
></A
></DT
></DL
></DD
><DT
>15. <A
HREF="#arrays"
>Arrays
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-15.html"
TARGET="_top"
>[CLHS-15]</A
></A
></DT
><DD
><DL
><DT
>15.1. <A
HREF="#array-elts"
>Array Elements
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_15-1-1.html"
TARGET="_top"
>[CLHS-15.1.1]</A
></A
></DT
><DT
>15.2. <A
HREF="#array-dict"
>The Arrays Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_arrays_dictionary.html"
TARGET="_top"
>[CLHS-15.2]</A
></A
></DT
></DL
></DD
><DT
>16. <A
HREF="#strings"
>Strings
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-16.html"
TARGET="_top"
>[CLHS-16]</A
></A
></DT
><DD
><DL
><DT
>16.1. <A
HREF="#string-dict"
>The Strings Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_strings_dictionary.html"
TARGET="_top"
>[CLHS-16.2]</A
></A
></DT
></DL
></DD
><DT
>17. <A
HREF="#sequences"
>Sequences
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-17.html"
TARGET="_top"
>[CLHS-17]</A
></A
></DT
><DD
><DL
><DT
>17.1. <A
HREF="#seq-dict"
>The Sequences Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_seque_s_dictionary.html"
TARGET="_top"
>[CLHS-17.3]</A
></A
></DT
></DL
></DD
><DT
>18. <A
HREF="#hash"
>Hash Tables
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-18.html"
TARGET="_top"
>[CLHS-18]</A
></A
></DT
><DD
><DL
><DT
>18.1. <A
HREF="#hash-dict"
>The Hash Tables Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_hash__s_dictionary.html"
TARGET="_top"
>[CLHS-18.2]</A
></A
></DT
></DL
></DD
><DT
>19. <A
HREF="#filenames"
>Filenames
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-19.html"
TARGET="_top"
>[CLHS-19]</A
></A
></DT
><DD
><DL
><DT
>19.1. <A
HREF="#path-components"
>Pathname Components
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_19-2-1.html"
TARGET="_top"
>[CLHS-19.2.1]</A
></A
></DT
><DT
>19.2. <A
HREF="#unspecific"
>:UNSPECIFIC as a Component Value
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_19-2-2-2-3.html"
TARGET="_top"
>[CLHS-19.2.2.2.3]</A
></A
></DT
><DT
>19.3. <A
HREF="#path-external-notation"
>External notation.</A
></DT
><DT
>19.4. <A
HREF="#log-path"
>Logical Pathnames
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_19-3.html"
TARGET="_top"
>[CLHS-19.3]</A
></A
></DT
><DT
>19.5. <A
HREF="#filename-dict"
>The Filenames Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_filen_s_dictionary.html"
TARGET="_top"
>[CLHS-19.4]</A
></A
></DT
></DL
></DD
><DT
>20. <A
HREF="#files"
>Files
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-20.html"
TARGET="_top"
>[CLHS-20]</A
></A
></DT
><DD
><DL
><DT
>20.1. <A
HREF="#file-dict"
>The Files Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_files_dictionary.html"
TARGET="_top"
>[CLHS-20.2]</A
></A
></DT
></DL
></DD
><DT
>21. <A
HREF="#streams"
>Streams
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-21.html"
TARGET="_top"
>[CLHS-21]</A
></A
></DT
><DD
><DL
><DT
>21.1. <A
HREF="#streams-interactive"
>Interactive Streams
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_21-1-1-1-3.html"
TARGET="_top"
>[CLHS-21.1.1.1.3]</A
></A
></DT
><DT
>21.2. <A
HREF="#terminal"
>Terminal interaction.</A
></DT
><DT
>21.3. <A
HREF="#stream-dict"
>The Streams Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html"
TARGET="_top"
>[CLHS-21.2]</A
></A
></DT
></DL
></DD
><DT
>22. <A
HREF="#printer"
>Printer
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-22.html"
TARGET="_top"
>[CLHS-22]</A
></A
></DT
><DD
><DL
><DT
>22.1. <A
HREF="#multi-rep"
>Multiple Possible Textual Representations
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-1-1-1.html"
TARGET="_top"
>[CLHS-22.1.1.1]</A
></A
></DT
><DT
>22.2. <A
HREF="#print-vector"
>Printing Other Vectors
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-7.html"
TARGET="_top"
>[CLHS-22.1.3.7]</A
></A
></DT
><DT
>22.3. <A
HREF="#print-array"
>Printing Other Arrays
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-8.html"
TARGET="_top"
>[CLHS-22.1.3.8]</A
></A
></DT
><DT
>22.4. <A
HREF="#clpp"
>The Lisp Pretty Printer
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-2.html"
TARGET="_top"
>[CLHS-22.2]</A
></A
></DT
><DT
>22.5. <A
HREF="#print-dict"
>The Printer Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_printer_dictionary.html"
TARGET="_top"
>[CLHS-22.4]</A
></A
></DT
></DL
></DD
><DT
>23. <A
HREF="#reader"
>Reader
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-23.html"
TARGET="_top"
>[CLHS-23]</A
></A
></DT
><DD
><DL
><DT
>23.1. <A
HREF="#chario"
>characters</A
></DT
><DT
>23.2. <A
HREF="#read-dispatch-ext"
>Additional read dispatch macros</A
></DT
><DT
>23.3. <A
HREF="#rt-case"
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
TARGET="_top"
><CODE
CLASS="function"
>READTABLE-CASE</CODE
></A
></A
></DT
></DL
></DD
><DT
>24. <A
HREF="#system"
>System Construction
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-24.html"
TARGET="_top"
>[CLHS-24]</A
></A
></DT
><DD
><DL
><DT
>24.1. <A
HREF="#system-dict"
>The System Construction Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_syste_n_dictionary.html"
TARGET="_top"
>[CLHS-24.2]</A
></A
></DT
></DL
></DD
><DT
>25. <A
HREF="#environment"
>Environment
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-25.html"
TARGET="_top"
>[CLHS-25]</A
></A
></DT
><DD
><DL
><DT
>25.1. <A
HREF="#debugger"
>Debugging Utilities
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-2.html"
TARGET="_top"
>[CLHS-25.1.2]</A
></A
></DT
><DT
>25.2. <A
HREF="#environment-dict"
>The Environment Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_envir_t_dictionary.html"
TARGET="_top"
>[CLHS-25.2]</A
></A
></DT
></DL
></DD
><DT
>26. <A
HREF="#glossary"
>Glossary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-26.html"
TARGET="_top"
>[CLHS-26]</A
></A
></DT
><DT
>27. <A
HREF="#appendix"
>Appendix
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-a.html"
TARGET="_top"
>[CLHS-a]</A
></A
></DT
><DT
>28. <A
HREF="#issues"
>X3J13 Issue Index
   <A
HREF="http://www.lisp.org/HyperSpec/Issues/Issues-Categorized.html"
TARGET="_top"
>[CLHS-ic]</A
></A
></DT
></DL
></DD
><DT
>II. <A
HREF="#extensions"
>Extensions</A
></DT
><DD
><DL
><DT
>29. <A
HREF="#p-indep"
>Extensions-1: Platform independent Extensions</A
></DT
><DD
><DL
><DT
>29.1. <A
HREF="#image"
>Extensions-1.1. Saving an Image</A
></DT
><DT
>29.2. <A
HREF="#quit"
>Extensions-1.2. Quitting <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></DT
><DT
>29.3. <A
HREF="#i18n"
>Extensions-1.3. Internationalization</A
></DT
><DT
>29.4. <A
HREF="#encoding"
>Extensions-1.4. Encodings</A
></DT
><DT
>29.5. <A
HREF="#clos-stream"
>Extensions-1.5. Defining new kinds of Streams</A
></DT
><DT
>29.6. <A
HREF="#weak"
>Extensions-1.6. Weak Pointers</A
></DT
><DT
>29.7. <A
HREF="#final"
>Extensions-1.7. Finalization</A
></DT
><DT
>29.8. <A
HREF="#prompt"
>Extensions-1.8. The Prompt</A
></DT
><DT
>29.9. <A
HREF="#ansi"
>Extensions-1.9. Maximum ANSI CL compliance</A
></DT
><DT
>29.10. <A
HREF="#macros3"
>Extensions-1.10. Additional Fancy Macros</A
></DT
><DT
>29.11. <A
HREF="#customize"
>Extensions-1.11. Customizing <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> behavior.</A
></DT
><DT
>29.12. <A
HREF="#code-walk"
>Extensions-1.12. Code Walker</A
></DT
></DL
></DD
><DT
>30. <A
HREF="#platform"
>Extensions-2: Platform specific Extensions</A
></DT
><DD
><DL
><DT
>30.1. <A
HREF="#screen"
>Extensions-2.1. Random Screen Access</A
></DT
><DT
>30.2. <A
HREF="#modules"
>Extensions-2.2. External Modules</A
></DT
><DT
>30.3. <A
HREF="#dffi"
>Extensions-2.3. The Foreign Function Call Facility</A
></DT
><DT
>30.4. <A
HREF="#affi"
>Extensions-2.4. The Amiga Foreign Function Call Facility</A
></DT
><DT
>30.5. <A
HREF="#rexx"
>Extensions-2.5. ARexx</A
></DT
><DT
>30.6. <A
HREF="#socket"
>Extensions-2.6. Socket Streams</A
></DT
><DT
>30.7. <A
HREF="#quickstart"
>Extensions-2.7. Quickstarting delivery with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></DT
><DT
>30.8. <A
HREF="#app-dev"
>Extensions-2.8. Application delivery with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></DT
><DT
>30.9. <A
HREF="#shell"
>Extensions-2.9. Shell, Pipes and Printing</A
></DT
><DT
>30.10. <A
HREF="#getenv"
>Extensions-2.10. Operating System
  Environment.</A
></DT
><DT
>30.11. <A
HREF="#separate-io"
>Extensions-2.11. Other</A
></DT
></DL
></DD
></DL
></DD
><DT
>III. <A
HREF="#internals"
>Internals of the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> Implementation</A
></DT
><DD
><DL
><DT
>31. <A
HREF="#gc"
>Overview of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>'s Garbage Collection</A
></DT
><DD
><DL
><DT
>31.1. <A
HREF="#internals-intro"
>Introduction</A
></DT
><DT
>31.2. <A
HREF="#lisp-obj-in-c"
>Lisp objects in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></DT
><DT
>31.3. <A
HREF="#memory-models"
>Memory Models</A
></DT
><DT
>31.4. <A
HREF="#gc-safety"
>The burden of <A
HREF="#gc"
>garbage-collect</A
>ion upon the rest of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></DT
><DT
>31.5. <A
HREF="#foreign-pointers"
>Foreign Pointers</A
></DT
></DL
></DD
><DT
>32. <A
HREF="#extend"
>Extending <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</A
></DT
><DD
><DL
><DT
>32.1. <A
HREF="#add-fun"
>Adding a built-in function.</A
></DT
><DT
>32.2. <A
HREF="#add-var"
>Adding a built-in variable.</A
></DT
><DT
>32.3. <A
HREF="#recompile"
>Recompilation.</A
></DT
></DL
></DD
><DT
>33. <A
HREF="#bytecode"
>The <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> bytecode specification</A
></DT
><DD
><DL
><DT
>33.1. <A
HREF="#byte-intro"
>Introduction</A
></DT
><DT
>33.2. <A
HREF="#vm"
>The virtual machine</A
></DT
><DT
>33.3. <A
HREF="#comp-fun"
>The structure of compiled functions</A
></DT
><DT
>33.4. <A
HREF="#intr-struct"
>The general structure of the instructions</A
></DT
><DT
>33.5. <A
HREF="#intr-set"
>The instruction set</A
></DT
></DL
></DD
></DL
></DD
><DT
>A. <A
HREF="#gfdl"
>GNU Free Documentation License</A
></DT
><DD
><DL
><DT
>A.1. <A
HREF="#gfdl-0"
>PREAMBLE</A
></DT
><DT
>A.2. <A
HREF="#gfdl-1"
>APPLICABILITY AND DEFINITIONS</A
></DT
><DT
>A.3. <A
HREF="#gfdl-2"
>VERBATIM COPYING</A
></DT
><DT
>A.4. <A
HREF="#gfdl-3"
>COPYING IN QUANTITY</A
></DT
><DT
>A.5. <A
HREF="#gfdl-4"
>MODIFICATIONS</A
></DT
><DT
>A.6. <A
HREF="#gfdl-5"
>COMBINING DOCUMENTS</A
></DT
><DT
>A.7. <A
HREF="#gfdl-6"
>COLLECTIONS OF DOCUMENTS</A
></DT
><DT
>A.8. <A
HREF="#gfdl-7"
>AGGREGATION WITH INDEPENDENT WORKS</A
></DT
><DT
>A.9. <A
HREF="#gfdl-8"
>TRANSLATION</A
></DT
><DT
>A.10. <A
HREF="#gfdl-9"
>TERMINATION</A
></DT
><DT
>A.11. <A
HREF="#gfdl-10"
>FUTURE REVISIONS OF THIS LICENSE</A
></DT
><DT
>A.12. <A
HREF="#gfdl-addendum"
>ADDENDUM: How to use this License for
  your documents</A
></DT
></DL
></DD
><DT
><A
HREF="#idx"
>Index</A
></DT
><DT
><A
HREF="#references"
>References</A
></DT
></DL
></DIV
><DIV
CLASS="preface"
><HR><H1
><A
NAME="preface"
></A
>Overview</H1
><P
ALIGN="justify"
>These notes discuss the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> implementation of <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> by
<A
NAME="bruno-addr"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
CLASS="address"
><br>
&nbsp;<SPAN
CLASS="honorific"
>Dr</SPAN
>&nbsp;<SPAN
CLASS="firstname"
>Bruno</SPAN
>&nbsp;<SPAN
CLASS="surname"
>Haible</SPAN
><br>
&nbsp;<SPAN
CLASS="street"
>Louisenstraﬂe 103</SPAN
><br>
&nbsp;<SPAN
CLASS="city"
>Bad Homburg</SPAN
><br>
&nbsp;<SPAN
CLASS="postcode"
>D-61348</SPAN
>&nbsp;<SPAN
CLASS="country"
>Germany</SPAN
><br>
&nbsp;<SPAN
CLASS="otheraddr"
><A
HREF="http://www.haible.de/bruno/"
TARGET="_top"
>http://www.haible.de/bruno/</A
></SPAN
><br>
</P
></BLOCKQUOTE
>
 and
<A
NAME="stoll-addr"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
CLASS="address"
><br>
&nbsp;<SPAN
CLASS="honorific"
>Dr</SPAN
>&nbsp;<SPAN
CLASS="firstname"
>Michael</SPAN
>&nbsp;<SPAN
CLASS="surname"
>Stoll</SPAN
><br>
&nbsp;<SPAN
CLASS="street"
>Westerwaldweg 22</SPAN
><br>
&nbsp;<SPAN
CLASS="city"
>Remagen-Oberwinter</SPAN
><br>
&nbsp;<SPAN
CLASS="postcode"
>D-53424</SPAN
>&nbsp;<SPAN
CLASS="country"
>Germany</SPAN
><br>
&nbsp;<SPAN
CLASS="otheraddr"
><A
HREF="http://www.math.uni-duesseldorf.de/~stoll/"
TARGET="_top"
>http://www.math.uni-duesseldorf.de/~stoll/</A
></SPAN
><br>
</P
></BLOCKQUOTE
>
The current maintainers are
<A
NAME="bruno-addr1"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
CLASS="address"
><br>
&nbsp;&nbsp;<SPAN
CLASS="honorific"
>Dr</SPAN
>&nbsp;<SPAN
CLASS="firstname"
>Bruno</SPAN
>&nbsp;<SPAN
CLASS="surname"
>Haible</SPAN
><br>
</P
></BLOCKQUOTE
>
and
<A
NAME="sds-addr"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
CLASS="address"
><br>
&nbsp;&nbsp;<SPAN
CLASS="honorific"
>Dr</SPAN
>&nbsp;<SPAN
CLASS="firstname"
>Sam</SPAN
>&nbsp;<SPAN
CLASS="surname"
>Steingold</SPAN
><br>
&nbsp;&nbsp;<SPAN
CLASS="otheraddr"
><A
HREF="http://www.podval.org/~sds/"
TARGET="_top"
>http://www.podval.org/~sds/</A
></SPAN
><br>
</P
></BLOCKQUOTE
>
</P
><P
ALIGN="justify"
>This implementation is mostly conforming to the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>
 available on-line as the <A
HREF="#CLHS"
>[<SPAN
CLASS="citation"
><A
HREF="#CLHS"
>Common Lisp HyperSpec</A
></SPAN
>]</A
> (but the printed ANSI document
 remains the authoritative source of information).  <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> supersedes
 the earlier specifications <A
HREF="#CLtL1"
>[<SPAN
CLASS="citation"
><A
HREF="#CLtL1"
>CLtL1</A
></SPAN
>]</A
> and <A
HREF="#CLtL2"
>[<SPAN
CLASS="citation"
><A
HREF="#CLtL2"
>CLtL2</A
></SPAN
>]</A
>.</P
><P
ALIGN="justify"
>The <A
HREF="#clhs-chapters"
>first part</A
> of these notes
 is indexed in parallel to the <A
HREF="#CLHS"
>[<SPAN
CLASS="citation"
><A
HREF="#CLHS"
>Common Lisp HyperSpec</A
></SPAN
>]</A
> and documents how <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
 implements the standard <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>.</P
><P
ALIGN="justify"
>The <A
HREF="#extensions"
>second part</A
> documents the
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extensions, i.e., the functionality that goes beyond the
 <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> requirements.</P
><P
ALIGN="justify"
>The <A
HREF="#internals"
>third part</A
> is intended mostly
 for developers as it documents the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> internals, e.g., <A
HREF="#gc"
>garbage-collect</A
>ion,
 adding new built-ins, and the bytecodes generated by the compiler
 (i.e., what is printed by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
TARGET="_top"
><CODE
CLASS="function"
>DISASSEMBLE</CODE
></A
>).</P
></DIV
><DIV
CLASS="PART"
><A
NAME="clhs-chapters"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
>I. Chapters or the <A
HREF="#CLHS"
>[<SPAN
CLASS="citation"
><A
HREF="#CLHS"
>Common Lisp HyperSpec</A
></SPAN
>]</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>1. <A
HREF="#intro"
>Introduction
  <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-1.html"
TARGET="_top"
>[CLHS-1]</A
></A
></DT
><DT
>2. <A
HREF="#syntax"
>Syntax
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-2.html"
TARGET="_top"
>[CLHS-2]</A
></A
></DT
><DT
>3. <A
HREF="#eval"
>Evaluation and Compilation
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-3.html"
TARGET="_top"
>[CLHS-3]</A
></A
></DT
><DT
>4. <A
HREF="#types-classes"
>Types and Classes
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-4.html"
TARGET="_top"
>[CLHS-4]</A
></A
></DT
><DT
>5. <A
HREF="#data"
>Data and Control Flow
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-5.html"
TARGET="_top"
>[CLHS-5]</A
></A
></DT
><DT
>6. <A
HREF="#iteration"
>Iteration
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-6.html"
TARGET="_top"
>[CLHS-6]</A
></A
></DT
><DT
>7. <A
HREF="#objects"
>Objects
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-7.html"
TARGET="_top"
>[CLHS-7]</A
></A
></DT
><DT
>8. <A
HREF="#structures"
>Structures
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-8.html"
TARGET="_top"
>[CLHS-8]</A
></A
></DT
><DT
>9. <A
HREF="#conditions"
>Conditions
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-9.html"
TARGET="_top"
>[CLHS-9]</A
></A
></DT
><DT
>10. <A
HREF="#symbols"
>Symbols
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-10.html"
TARGET="_top"
>[CLHS-10]</A
></A
></DT
><DT
>11. <A
HREF="#packages"
>Packages
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-11.html"
TARGET="_top"
>[CLHS-11]</A
></A
></DT
><DT
>12. <A
HREF="#numbers"
>Numbers
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-12.html"
TARGET="_top"
>[CLHS-12]</A
></A
></DT
><DT
>13. <A
HREF="#characters"
>Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-13.html"
TARGET="_top"
>[CLHS-13]</A
></A
></DT
><DT
>14. <A
HREF="#conses"
>Conses
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-14.html"
TARGET="_top"
>[CLHS-14]</A
></A
></DT
><DT
>15. <A
HREF="#arrays"
>Arrays
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-15.html"
TARGET="_top"
>[CLHS-15]</A
></A
></DT
><DT
>16. <A
HREF="#strings"
>Strings
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-16.html"
TARGET="_top"
>[CLHS-16]</A
></A
></DT
><DT
>17. <A
HREF="#sequences"
>Sequences
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-17.html"
TARGET="_top"
>[CLHS-17]</A
></A
></DT
><DT
>18. <A
HREF="#hash"
>Hash Tables
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-18.html"
TARGET="_top"
>[CLHS-18]</A
></A
></DT
><DT
>19. <A
HREF="#filenames"
>Filenames
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-19.html"
TARGET="_top"
>[CLHS-19]</A
></A
></DT
><DT
>20. <A
HREF="#files"
>Files
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-20.html"
TARGET="_top"
>[CLHS-20]</A
></A
></DT
><DT
>21. <A
HREF="#streams"
>Streams
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-21.html"
TARGET="_top"
>[CLHS-21]</A
></A
></DT
><DT
>22. <A
HREF="#printer"
>Printer
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-22.html"
TARGET="_top"
>[CLHS-22]</A
></A
></DT
><DT
>23. <A
HREF="#reader"
>Reader
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-23.html"
TARGET="_top"
>[CLHS-23]</A
></A
></DT
><DT
>24. <A
HREF="#system"
>System Construction
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-24.html"
TARGET="_top"
>[CLHS-24]</A
></A
></DT
><DT
>25. <A
HREF="#environment"
>Environment
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-25.html"
TARGET="_top"
>[CLHS-25]</A
></A
></DT
><DT
>26. <A
HREF="#glossary"
>Glossary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-26.html"
TARGET="_top"
>[CLHS-26]</A
></A
></DT
><DT
>27. <A
HREF="#appendix"
>Appendix
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-a.html"
TARGET="_top"
>[CLHS-a]</A
></A
></DT
><DT
>28. <A
HREF="#issues"
>X3J13 Issue Index
   <A
HREF="http://www.lisp.org/HyperSpec/Issues/Issues-Categorized.html"
TARGET="_top"
>[CLHS-ic]</A
></A
></DT
></DL
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="intro"
></A
>Chapter 1. Introduction
  <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-1.html"
TARGET="_top"
>[CLHS-1]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="spec-symb"
>1.1. Special Symbols
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-4-1-3.html"
TARGET="_top"
>[CLHS-1.4.1.3]</A
></A
></H2
><P
ALIGN="justify"
>The final delimiter of an interactive stream: On <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, the user
 has to type <B
CLASS="keycap"
>Control</B
>-<SPAN
CLASS="keysym"
>D</SPAN
> at the
 beginning of a line. On <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
> or <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, the user has to type
 <B
CLASS="keycap"
>Control</B
>-<SPAN
CLASS="keysym"
>Z</SPAN
>, followed
 by <B
CLASS="keycap"
>Return</B
>.  This final delimiter is never actually
 seen by programs; no need to test for <SPAN
CLASS="keysym"
>#\^D</SPAN
> or
 <SPAN
CLASS="keysym"
>#\^Z</SPAN
> - use <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR-NO-HANG</CODE
></A
> to check for end of
 stream.  Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html"
TARGET="_top"
><CODE
CLASS="function"
>CLEAR-INPUT</CODE
></A
> on the stream removes the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> state,
 thus making it available for further input.</P
><P
ALIGN="justify"
>A newline character can be entered by the user by pressing the
 <B
CLASS="keycap"
>Newline</B
> key or, on the numeric keypad, the
 <B
CLASS="keycap"
>Enter</B
> key.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="error-terms"
>1.2. Error Terminology
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-4-2.html"
TARGET="_top"
>[CLHS-1.4.2]</A
></A
></H2
><P
ALIGN="justify"
>Safety settings are ignored; therefore where the standard uses the
 phrase <SPAN
CLASS="QUOTE"
>"should signal an error"</SPAN
>,
 an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>ed.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="class-prec"
>1.3. Class Precedence Lists
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-4-4-5.html"
TARGET="_top"
>[CLHS-1.4.4.5]</A
></A
></H2
><P
ALIGN="justify"
>The class precedence lists of the system classes <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_class.html"
TARGET="_top"
><CODE
CLASS="classname"
>CLASS</CODE
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>BUILT-IN-CLASS</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-CLASS</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-CLASS</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_standard-method.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-METHOD</CODE
></A
> contain the class <A
HREF="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-OBJECT</CODE
></A
>
 instead of the class <A
HREF="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-OBJECT</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="cl-symb"
>1.4. Symbols in the Package <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-9.html"
TARGET="_top"
>[CLHS-1.9]</A
></A
></H2
><P
ALIGN="justify"
>The 6 symbols missing from the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> package
 (out of 978 specified by the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>):</P
><P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html"
TARGET="_top"
><CODE
CLASS="function"
>CALL-METHOD</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFINE-METHOD-COMBINATION</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_invalid-method-error.html"
TARGET="_top"
><CODE
CLASS="function"
>INVALID-METHOD-ERROR</CODE
></A
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-METHOD</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_method-co_nation-error.html"
TARGET="_top"
><CODE
CLASS="function"
>METHOD-COMBINATION-ERROR</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html"
TARGET="_top"
><CODE
CLASS="classname"
>METHOD-COMBINATION</CODE
></A
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="syntax"
></A
>Chapter 2. Syntax
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-2.html"
TARGET="_top"
>[CLHS-2]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="reader-alg"
>2.1. Reader Algorithm
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-2.html"
TARGET="_top"
>[CLHS-2.2]</A
></A
></H2
><P
ALIGN="justify"
>The requirement of step 4 that a
 <SPAN
CLASS="QUOTE"
>"<A
HREF="http://www.lisp.org/HyperSpec/Body/glo_r.html#reader_macro_function"
TARGET="_top"
>reader
  macro function</A
> may return zero values or one value"</SPAN
>
 <B
CLASS="emphasis"
>is</B
> enforced.
 You can use the function <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_values.html"
TARGET="_top"
><CODE
CLASS="function"
>VALUES</CODE
></A
> to control the number of values
 returned.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="tokens"
>2.2. Symbols as Tokens
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-3-4.html"
TARGET="_top"
>[CLHS-2.3.4]</A
></A
></H2
><P
ALIGN="justify"
>A "reserved token", i.e., a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#token"
TARGET="_top"
>token</A
> that has
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#potential_number"
TARGET="_top"
>potential number</A
>
 syntax but cannot be interpreted as a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
>, is interpreted as
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
> when being read.</P
><P
ALIGN="justify"
>When creating a symbol from a token, no character attributes are
 removed.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="valid-patterns"
>2.3. Valid Patterns for Tokens
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-3-5.html"
TARGET="_top"
>[CLHS-2.3.5]</A
></A
></H2
><P
ALIGN="justify"
>When a token with package markers is read, then no checking is
 done whether the package part and the symbol-name part do not have
 number syntax. (What's the purpose of this check?) So we consider
 tokens like <SPAN
CLASS="token"
>USER::</SPAN
> or <SPAN
CLASS="token"
>:1</SPAN
> or
 <SPAN
CLASS="token"
>LISP::4711</SPAN
> or <SPAN
CLASS="token"
>21:3</SPAN
> as symbols.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="double-quote"
>2.4. Double-Quote
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-4-5.html"
TARGET="_top"
>[CLHS-2.4.5]</A
></A
></H2
><P
ALIGN="justify"
>When a string is read, no character attributes are removed.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="backquote"
>2.5. Backquote
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-4-6.html"
TARGET="_top"
>[CLHS-2.4.6]</A
></A
></H2
><P
ALIGN="justify"
>The backquote read macro also works when nested. Example:
<DIV
CLASS="informalexample"
><P
></P
><A
NAME="bq-nested"
></A
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;   (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL</CODE
></A
> ``(,#'(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><CODE
CLASS="function"
>LAMBDA</CODE
></A
> () ',a) ,#'(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><CODE
CLASS="function"
>LAMBDA</CODE
></A
> () ',b)))
 = (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL</CODE
></A
> `(list #'(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><CODE
CLASS="function"
>LAMBDA</CODE
></A
> () ',a) #'(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><CODE
CLASS="function"
>LAMBDA</CODE
></A
> () ',b)))
 = (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL</CODE
></A
> (list 'list (list 'function (list 'lambda nil (list 'quote a)))
                     (list 'function (list 'lambda nil (list 'quote b)))))
</PRE
></TD
></TR
></TABLE
><P
></P
></DIV
></P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="sharpsign"
>2.6. Sharpsign
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_2-4-8.html"
TARGET="_top"
>[CLHS-2.4.8]</A
></A
></H2
><P
ALIGN="justify"
>Reader macros are also defined for the following:

<DIV
CLASS="table"
><A
NAME="extra-read-macro-table"
></A
><P
><B
>Table 2-1. Additional reader macros</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>Macro</TH
><TH
>Meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
>#,</TD
><TD
>load-time evaluation</TD
></TR
><TR
><TD
>#Y</TD
><TD
>function objects and file
  <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>s</TD
></TR
><TR
><TD
>#""</TD
><TD
>pathname</TD
></TR
></TBODY
></TABLE
></DIV
>
</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="eval"
></A
>Chapter 3. Evaluation and Compilation
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-3.html"
TARGET="_top"
>[CLHS-3]</A
></H1
><P
ALIGN="justify"
>All the functions built by <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_function.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCTION</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE</CODE
></A
> and the like are
 atoms.  There are built-in functions written in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>, compiled
 functions (both of type <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPILED-FUNCTION</CODE
></A
>) and interpreted
 functions (of type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
>).</P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="evaluation"
>3.1. Evaluation
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-1.html"
TARGET="_top"
>[CLHS-3.1]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="eval-environ"
>3.1.1. Introduction to Environments
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-1-1.html"
TARGET="_top"
>[CLHS-3.1.1]</A
></A
></H3
><DIV
CLASS="formalpara"
><P
><A
NAME="the-env"
></A
><B
>Macro <A
HREF="#the-env"
><CODE
CLASS="function"
>EXT:THE-ENVIRONMENT</CODE
></A
>. </B
>As in Scheme, the macro <TT
CLASS="sexp"
>(<A
HREF="#the-env"
><CODE
CLASS="function"
>EXT:THE-ENVIRONMENT</CODE
></A
>)</TT
>
 returns the current lexical environment.  This works only in
 interpreted code and is not compilable!</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="eval-env"
></A
><B
>Function <TT
CLASS="sexp"
>(EXT:EVAL-ENV
 <VAR
CLASS="replaceable"
>form</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>env</VAR
>)</TT
>. </B
>evaluates a form in a given lexical environment, just as if the
 form had been a part of the program that the environment came from.
</P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="compilation"
>3.2. Compilation
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-2.html"
TARGET="_top"
>[CLHS-3.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="compiler-terms"
>3.2.1. Compiler Terminology
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-2-1.html"
TARGET="_top"
>[CLHS-3.2.1]</A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> compiles to platform-independent
 <A
HREF="#bytecode"
>byte-code</A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="compiler-macros"
>3.2.2. Compiler Macros
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-2-2-1.html"
TARGET="_top"
>[CLHS-3.2.2.1]</A
></A
></H3
><P
ALIGN="justify"
>Compiler macros are expanded in the compiled code only, and
ignored by the interpreter.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="similarity"
>3.2.3. Definition of Similarity
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-2-4-2-2.html"
TARGET="_top"
>[CLHS-3.2.4.2.2]</A
></A
></H3
><P
ALIGN="justify"
>Hash tables are <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#externalizable_object"
TARGET="_top"
>externalizable
 object</A
>s.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="declarations"
>3.3. Declarations
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-3.html"
TARGET="_top"
>[CLHS-3.3]</A
></A
></H2
><P
ALIGN="justify"
>The declarations
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/dec_type.html"
TARGET="_top"
><TT
CLASS="literal"
>TYPE</TT
></A
> <VAR
CLASS="replaceable"
>type</VAR
> <VAR
CLASS="replaceable"
>variable</VAR
> ...)</TT
>,
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/dec_ftype.html"
TARGET="_top"
><TT
CLASS="literal"
>FTYPE</TT
></A
> <VAR
CLASS="replaceable"
>type</VAR
>
        <VAR
CLASS="replaceable"
>function</VAR
> ...)</TT
>,
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/dec_optimize.html"
TARGET="_top"
><TT
CLASS="literal"
>OPTIMIZE</TT
></A
> (<VAR
CLASS="replaceable"
>quality</VAR
>
        <VAR
CLASS="replaceable"
>value</VAR
>) ...)</TT
>
   are ignored by the interpreter and the compiler.</P
><P
ALIGN="justify"
>The <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> declaration <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/dec_optimize.html"
TARGET="_top"
><TT
CLASS="literal"
>OPTIMIZE</TT
></A
>
 (debug ...))</TT
> is legal.</P
><P
ALIGN="justify"
>The <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> declaration <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/dec_ignorecm_ignorable.html"
TARGET="_top"
><TT
CLASS="literal"
>IGNORABLE</TT
></A
>
 <VAR
CLASS="replaceable"
>variable</VAR
> ...)</TT
> affects the variable
 binding for the variable <VAR
CLASS="replaceable"
>variable</VAR
>.  The compiler
 will not warn about the variable, regardless whether it is used or
 not.</P
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="compile-decl"
>3.3.1. Additional declarations</A
></H3
><P
ALIGN="justify"
>The declaration <TT
CLASS="sexp"
>(COMPILE)</TT
> has the
 effect that the current form is compiled prior to execution.
 Examples:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
TARGET="_top"
><CODE
CLASS="function"
>LOCALLY</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/sym_declare.html"
TARGET="_top"
><CODE
CLASS="function"
>DECLARE</CODE
></A
> (compile)) <VAR
CLASS="replaceable"
>form</VAR
>)
</PRE
></TD
></TR
></TABLE
>
executes a compiled version of form.</P
><P
ALIGN="justify"
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
TARGET="_top"
><CODE
CLASS="function"
>LET</CODE
></A
> ((x 0))
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>FLET</CODE
></A
> ((inc () (<A
HREF="http://www.lisp.org/HyperSpec/Body/sym_declare.html"
TARGET="_top"
><CODE
CLASS="function"
>DECLARE</CODE
></A
> (compile)) (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html"
TARGET="_top"
><CODE
CLASS="function"
>INCF</CODE
></A
> x))
         (dec () (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_incfcm_decf.html"
TARGET="_top"
><CODE
CLASS="function"
>DECF</CODE
></A
> x)))
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_values.html"
TARGET="_top"
><CODE
CLASS="function"
>VALUES</CODE
></A
> #'inc #'dec)))
</PRE
></TD
></TR
></TABLE
>
 returns two functions.  The first is compiled and increments <VAR
CLASS="replaceable"
>x</VAR
>, the
 second is interpreted (slower) and decrements the same <VAR
CLASS="replaceable"
>x</VAR
>.</P
><P
ALIGN="justify"
>The type assertion <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_the.html"
TARGET="_top"
><CODE
CLASS="function"
>THE</CODE
></A
> <VAR
CLASS="replaceable"
>value-type</VAR
>
 <VAR
CLASS="replaceable"
>form</VAR
>)</TT
> enforces a type check in interpreted code.
 No type check is done in compiled code.  See also the <A
HREF="#ethe"
><CODE
CLASS="function"
>EXT:ETHE</CODE
></A
> macro.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="lalist"
>3.4. Lambda Lists
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4.html"
TARGET="_top"
>[CLHS-3.4]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="boa-lalist"
>3.4.1. Boa Lambda Lists
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-6.html"
TARGET="_top"
>[CLHS-3.4.6]</A
></A
></H3
><P
ALIGN="justify"
>The initial value of an <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;AUX</TT
></A
> variable in a boa <A
HREF="#lalist"
>lambda list</A
> is
 the value of the corresponding slot's initial form.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="eval-comp"
>3.5. The Evaluation and Compilation Dictionary
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_evalu_n_dictionary.html"
TARGET="_top"
>[CLHS-3.8]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="spec-decl"
>3.5.1. Declaration <A
HREF="http://www.lisp.org/HyperSpec/Body/dec_special.html"
TARGET="_top"
><TT
CLASS="literal"
>SPECIAL</TT
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_proclaim.html"
TARGET="_top"
><CODE
CLASS="function"
>PROCLAIM</CODE
></A
> '(<A
HREF="http://www.lisp.org/HyperSpec/Body/dec_special.html"
TARGET="_top"
><TT
CLASS="literal"
>SPECIAL</TT
></A
>
 <VAR
CLASS="replaceable"
>variable</VAR
>))</TT
> declarations cannot be undone.  The same holds for
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFVAR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPARAMETER</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCONSTANT</CODE
></A
> declarations.</P
><P
ALIGN="justify"
>It is an error if a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCONSTANT</CODE
></A
> variable is bound at the moment
 the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCONSTANT</CODE
></A
> is executed, but <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCONSTANT</CODE
></A
> does not check
 this.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/glo_c.html#constant_variable"
TARGET="_top"
>constant variable</A
>s may not be bound dynamically or lexically.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="spe-var-p"
></A
><B
>Function <A
HREF="#spe-var-p"
><CODE
CLASS="function"
>EXT:SPECIAL-VARIABLE-P</CODE
></A
>. </B
>You can use the function <TT
CLASS="sexp"
>(<A
HREF="#spe-var-p"
><CODE
CLASS="function"
>EXT:SPECIAL-VARIABLE-P</CODE
></A
>
  <VAR
CLASS="replaceable"
>symbol</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>env</VAR
>)</TT
> to check whether the
 symbol is a special variable.  <VAR
CLASS="replaceable"
>env</VAR
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or omitted means use
 the global environment, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> means use current lexical environment.
 You can also obtain the current lexical environment using the macro
 <A
HREF="#the-env"
><CODE
CLASS="function"
>EXT:THE-ENVIRONMENT</CODE
></A
> (interpreted code only).
 This function will always return <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> for global special
 variables and constants.
 Note that this function will not work in compiled code as you expect:
 when called with <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> <VAR
CLASS="replaceable"
>env</VAR
>, it will be called at <I
CLASS="emphasis"
>run
  time</I
> and check for globally special variables,
 but when <VAR
CLASS="replaceable"
>env</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, it will be called at <I
CLASS="emphasis"
>compile
  time</I
> and the value will be used as a constant in the
 code.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="constantp"
>3.5.2. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_constantp.html"
TARGET="_top"
><CODE
CLASS="function"
>CONSTANTP</CODE
></A
>.</A
></H3
><P
ALIGN="justify"
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_constantp.html"
TARGET="_top"
><CODE
CLASS="function"
>CONSTANTP</CODE
></A
> fully complies with <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>.
Additionally, some non-trivial forms are identified as constants, e.g.,
<TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_constantp.html"
TARGET="_top"
><CODE
CLASS="function"
>CONSTANTP</CODE
></A
> '(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pl.html"
TARGET="_top"
><CODE
CLASS="function"
>+</CODE
></A
> 1 2 3))</TT
> returns
<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="eval-when"
>3.5.3. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL-WHEN</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL-WHEN</CODE
></A
> also accepts the situations <TT
CLASS="sexp"
>(NOT
 EVAL)</TT
> and <TT
CLASS="sexp"
>(NOT COMPILE)</TT
>.</P
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>Note that the situations <CODE
CLASS="constant"
>EVAL</CODE
>,
 <CODE
CLASS="constant"
>LOAD</CODE
> and <CODE
CLASS="constant"
>COMPILE</CODE
> are
 deprecated by the spec, and they are <I
CLASS="emphasis"
>not</I
> equivalent to the new
 standard situations <CODE
CLASS="constant"
>:EXECUTE</CODE
>,
 <CODE
CLASS="constant"
>:LOAD-TOPLEVEL</CODE
>
 and <CODE
CLASS="constant"
>:COMPILE-TOPLEVEL</CODE
> in that they ignore the
 top-level versus non-top-level distinction.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="types-classes"
></A
>Chapter 4. Types and Classes
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-4.html"
TARGET="_top"
>[CLHS-4]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="types"
>4.1. Types
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-2.html"
TARGET="_top"
>[CLHS-4.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="type-spec"
>4.1.1. Type Specifiers
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-2-3.html"
TARGET="_top"
>[CLHS-4.2.3]</A
></A
></H3
><P
ALIGN="justify"
>The general form of the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> type specifier is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> <VAR
CLASS="replaceable"
>type-of-real-part</VAR
>
 <VAR
CLASS="replaceable"
>type-of-imaginary-part</VAR
>)</TT
>.  The type
 specifier <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> <VAR
CLASS="replaceable"
>type</VAR
>)</TT
> is
 equivalent to <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> <VAR
CLASS="replaceable"
>type</VAR
>
 <VAR
CLASS="replaceable"
>type</VAR
>)</TT
>.</P
><P
ALIGN="justify"
>The <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> type specifier <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
TARGET="_top"
><CODE
CLASS="classname"
>REAL</CODE
></A
>
 <VAR
CLASS="replaceable"
>low</VAR
> <VAR
CLASS="replaceable"
>high</VAR
>)</TT
>
 denotes the real numbers between <VAR
CLASS="replaceable"
>low</VAR
> and
 <VAR
CLASS="replaceable"
>high</VAR
>.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_deftype.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFTYPE</CODE
></A
> <A
HREF="#lalist"
>lambda list</A
>s are subject to destructuring (nested <A
HREF="#lalist"
>lambda list</A
>s
 are allowed, as in <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFMACRO</CODE
></A
>) and may contain a <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;WHOLE</TT
></A
> marker,
 but not an <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ENVIRONMENT</TT
></A
> marker.</P
><DIV
CLASS="formalpara"
><P
><B
>Function
  <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:TYPE-EXPAND</CODE
>
   <VAR
CLASS="replaceable"
>typespec</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
   <VAR
CLASS="replaceable"
>once-p</VAR
>)</TT
>. </B
>If <VAR
CLASS="replaceable"
>typespec</VAR
> is a user-defined type,
 this will expand it recursively until it is no longer a user-defined
 type (unless <VAR
CLASS="replaceable"
>once-p</VAR
> is supplied and
 non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>).  Two values are returned - the expansion and an indicator
 (<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>) of whether the original
 <VAR
CLASS="replaceable"
>typespec</VAR
> was a user-defined type.
</P
></DIV
><P
></P
><P
><B
>The possible results of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_type-of.html"
TARGET="_top"
><CODE
CLASS="function"
>TYPE-OF</CODE
></A
></B
></P
><UL
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_null.html"
TARGET="_top"
><CODE
CLASS="classname"
>NULL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
TARGET="_top"
><CODE
CLASS="classname"
>BOOLEAN</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_bignum.html"
TARGET="_top"
><CODE
CLASS="classname"
>BIGNUM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIONAL</CODE
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_base-char.html"
TARGET="_top"
><CODE
CLASS="classname"
>BASE-CHAR</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
TARGET="_top"
><CODE
CLASS="classname"
>ARRAY</CODE
></A
> <VAR
CLASS="replaceable"
>element-type</VAR
>
  <VAR
CLASS="replaceable"
>dimensions</VAR
>)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-ARRAY</CODE
></A
>
  <VAR
CLASS="replaceable"
>element-type</VAR
> <VAR
CLASS="replaceable"
>dimensions</VAR
>)</TT
></P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
></P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
></P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_base-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>BASE-STRING</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-base-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-BASE-STRING</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
></P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>BIT-VECTOR</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-BIT-VECTOR</CODE
></A
>
  <VAR
CLASS="replaceable"
>size</VAR
>)</TT
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_compiled-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPILED-FUNCTION</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>FILE-STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYNONYM-STREAM</CODE
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>BROADCAST-STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONCATENATED-STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>TWO-WAY-STREAM</CODE
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>ECHO-STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING-STREAM</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_package.html"
TARGET="_top"
><CODE
CLASS="classname"
>PACKAGE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html"
TARGET="_top"
><CODE
CLASS="classname"
>READTABLE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>LOGICAL-PATHNAME</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html"
TARGET="_top"
><CODE
CLASS="classname"
>RANDOM-STATE</CODE
></A
>, <A
HREF="#byte-type"
><SPAN
CLASS="type"
>BYTE</SPAN
></A
></P
></LI
><LI
><P
ALIGN="justify"
><CODE
CLASS="classname"
>SPECIAL-OPERATOR</CODE
>,
  <CODE
CLASS="classname"
>LOAD-TIME-EVAL</CODE
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>, <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>,
  <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
>, <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>,
  <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
>;, <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="#weak"
><CODE
CLASS="classname"
>EXT:WEAK-POINTER</CODE
></A
>,
   <A
HREF="#reader"
><CODE
CLASS="classname"
>READ-LABEL</CODE
></A
>,
   <A
HREF="#reader"
><CODE
CLASS="classname"
>FRAME-POINTER</CODE
></A
>,
   <CODE
CLASS="classname"
>SYSTEM-INTERNAL</CODE
></P
></LI
><LI
><P
ALIGN="justify"
><CODE
CLASS="classname"
>ADDRESS</CODE
> (should not
  occur)</P
></LI
><LI
><P
ALIGN="justify"
>any other <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
> (structure types or <B
CLASS="command"
>CLOS</B
>
  classes)</P
></LI
><LI
><P
ALIGN="justify"
>a class object (<B
CLASS="command"
>CLOS</B
> classes without a proper
  name)</P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="classes"
>4.2. Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3.html"
TARGET="_top"
>[CLHS-4.3]</A
></A
></H2
><P
ALIGN="justify"
>The <B
CLASS="command"
>CLOS</B
> symbols are <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
>ed from the package <A
HREF="#classes"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CLOS"</SPAN
></STRONG
></A
>.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> uses (as in <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
TARGET="_top"
><CODE
CLASS="function"
>USE-PACKAGE</CODE
></A
>) <A
HREF="#classes"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CLOS"</SPAN
></STRONG
></A
> and <A
HREF="#re-export"
><CODE
CLASS="function"
>EXT:RE-EXPORT</CODE
></A
>s the
 <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> standard exported symbols (the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extensions, e.g.,
 <A
HREF="#class-proto"
><CODE
CLASS="function"
>CLOS:CLASS-PROTOTYPE</CODE
></A
>, are <I
CLASS="emphasis"
>not</I
> <A
HREF="#re-export"
><CODE
CLASS="function"
>EXT:RE-EXPORT</CODE
></A
>ed).
 Since <A
HREF="#make-pack"
>the default <CODE
CLASS="constant"
>:USE</CODE
> argument</A
>
 to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PACKAGE</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
>, the standard <B
CLASS="command"
>CLOS</B
> symbols are normally
 visible in all user-defined packages.
 If you do not want them (for example, if you want to use the
 <A
HREF="ftp://cvs2.cons.org/pub/lisp/clisp/packages/pcl.sept92f.clisp.tar.gz"
TARGET="_top"
>PCL</A
>
 implementation of <B
CLASS="command"
>CLOS</B
> instead of the native one), do the following:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "CL-NO-CLOS" (:use "CL"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html"
TARGET="_top"
><CODE
CLASS="function"
>DO-EXTERNAL-SYMBOLS</CODE
></A
> (<VAR
CLASS="replaceable"
>symbol</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
>)
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_shadow.html"
TARGET="_top"
><CODE
CLASS="function"
>SHADOW</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
> "CL-NO-CLOS"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_do-symbol_-all-symbols.html"
TARGET="_top"
><CODE
CLASS="function"
>DO-SYMBOLS</CODE
></A
> (<VAR
CLASS="replaceable"
>symbol</VAR
> "CL-NO-CLOS")
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
> "CL-NO-CLOS"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "CL-NO-CLOS")
(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> "pcl") ; or whatever
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "MY-USER" (:use "CL-NO-CLOS"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "MY-USER")
;; your code which uses PCL goes here
</PRE
></TD
></TR
></TABLE
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="clos-diff"
>4.3. Deviations from <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCLASS</CODE
></A
> supports the option <CODE
CLASS="constant"
>:METACLASS</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-CLASS</CODE
></A
>.
 This option is necessary in order to define a subclass of a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFSTRUCT</CODE
></A
>-defined structure type using <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCLASS</CODE
></A
> instead of
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFSTRUCT</CODE
></A
>.</P
><P
ALIGN="justify"
>When <A
HREF="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html"
TARGET="_top"
><CODE
CLASS="function"
>CALL-NEXT-METHOD</CODE
></A
> is called with arguments, the rule that
 the ordered set of applicable methods must be the same as for the
 original arguments is enforced by the implementation only in
 interpreted code.</P
><P
ALIGN="justify"
>There is a generic function
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#no-prim"
><CODE
CLASS="function"
>CLOS:NO-PRIMARY-METHOD</CODE
></A
></I
></STRONG
>
 (similar to <A
HREF="http://www.lisp.org/HyperSpec/Body/stagenfun_no-_cable-method.html"
TARGET="_top"
><CODE
CLASS="function"
>NO-APPLICABLE-METHOD</CODE
></A
>) which is called when a generic
 function of the class <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-GENERIC-FUNCTION</CODE
></A
> is invoked and
 no primary method on that generic function is applicable.</P
><P
ALIGN="justify"
><STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#gen-flet"
><CODE
CLASS="function"
>CLOS:GENERIC-FLET</CODE
></A
></I
></STRONG
>
 and
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#gen-labels"
><CODE
CLASS="function"
>CLOS:GENERIC-LABELS</CODE
></A
></I
></STRONG
>
 are implemented as macros, not as special operators (as permitted by
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html"
TARGET="_top"
>Section 3.1.2.1.2.2</A
>).
 They are not imported into the packages <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP-USER"</SPAN
></STRONG
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> because
 of the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> issue <A
HREF="http://www.lisp.org/HyperSpec/Issues/iss181.html"
TARGET="_top"
>GENERIC-FLET-POORLY-DESIGNED:DELETE</A
>.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/stagenfun_add-method.html"
TARGET="_top"
><CODE
CLASS="function"
>ADD-METHOD</CODE
></A
> can put methods into other generic functions
 than the one the method came from.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/stagenfun_print-object.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINT-OBJECT</CODE
></A
> is only called on objects of type
 <A
HREF="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-OBJECT</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-OBJECT</CODE
></A
>.
 It is not called on other objects, like <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
>es
 and <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
>s, due to the performance concerns.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="metaclasses"
>4.4. Standard Metaclasses
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-1-1.html"
TARGET="_top"
>[CLHS-4.3.1.1]</A
></A
></H2
><P
ALIGN="justify"
>Among those classes listed in <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html#classtypecorrespondence"
TARGET="_top"
>Figure
 4-8</A
>, only the following are instances of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_built-in-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>BUILT-IN-CLASS</CODE
></A
>:

<P
></P
><UL
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_t.html"
TARGET="_top"
><CODE
CLASS="classname"
>T</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
TARGET="_top"
><CODE
CLASS="classname"
>REAL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOAT</CODE
></A
>,
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIONAL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIO</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html"
TARGET="_top"
><CODE
CLASS="classname"
>SEQUENCE</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
TARGET="_top"
><CODE
CLASS="classname"
>ARRAY</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_bit-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>BIT-VECTOR</CODE
></A
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_null.html"
TARGET="_top"
><CODE
CLASS="classname"
>NULL</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>GENERIC-FUNCTION</CODE
></A
>,
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_standa_ric-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-GENERIC-FUNCTION</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_package.html"
TARGET="_top"
><CODE
CLASS="classname"
>PACKAGE</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>LOGICAL-PATHNAME</CODE
></A
>
  </P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_random-state.html"
TARGET="_top"
><CODE
CLASS="classname"
>RANDOM-STATE</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html"
TARGET="_top"
><CODE
CLASS="classname"
>READTABLE</CODE
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>BROADCAST-STREAM</CODE
></A
>,
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_concatenated-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONCATENATED-STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_echo-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>ECHO-STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING-STREAM</CODE
></A
>,
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>FILE-STREAM</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYNONYM-STREAM</CODE
></A
>,
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>TWO-WAY-STREAM</CODE
></A
></P
></LI
></UL
></P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="def-class"
>4.5. Defining Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-2.html"
TARGET="_top"
>[CLHS-4.3.2]</A
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCLASS</CODE
></A
> supports the <CODE
CLASS="constant"
>:METACLASS</CODE
> option.  Possible values are
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-CLASS</CODE
></A
> (the default) and <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-CLASS</CODE
></A
> (which creates
 structure classes, like <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFSTRUCT</CODE
></A
> does).</P
><P
ALIGN="justify"
>It is <I
CLASS="emphasis"
>not</I
> required that the superclasses of a class are
 defined before the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defclass.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCLASS</CODE
></A
> form for the class is evaluated.
 Use <A
HREF="#amop"
>[<SPAN
CLASS="citation"
><A
HREF="#amop"
>Metaobject Protocol</A
></SPAN
>]</A
> generic functions
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#class-fin-p"
><CODE
CLASS="function"
>CLOS:CLASS-FINALIZED-P</CODE
></A
></I
></STRONG
>
 to check whether the class has been finalized and thus its instances
 can be created, and
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#fin-inher"
><CODE
CLASS="function"
>CLOS:FINALIZE-INHERITANCE</CODE
></A
></I
></STRONG
>
 to force class finalization.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="redef-class"
>4.6. Redefining Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-6.html"
TARGET="_top"
>[CLHS-4.3.6]</A
></A
></H2
><P
ALIGN="justify"
>Trivial changes, e.g., those that can occur when doubly loading
 the same code, do not require updating the instances.
 These are the changes that do not modify the set of local slots
 accessible in instances, e.g., changes to slot options
 <CODE
CLASS="constant"
>:INITFORM</CODE
>, <CODE
CLASS="constant"
>:DOCUMENTATION</CODE
>,
 and changes to class options <CODE
CLASS="constant"
>:DEFAULT-INITARGS</CODE
>,
 <CODE
CLASS="constant"
>:DOCUMENTATION</CODE
>.</P
><P
ALIGN="justify"
>The instances are updated when they are first accessed, <I
CLASS="emphasis"
>not</I
> at
 the time when the class is redefined or <A
HREF="http://www.lisp.org/HyperSpec/Body/stagenfun_mak_ces-obsolete.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-INSTANCES-OBSOLETE</CODE
></A
> is
 called.  When the class has been redefined several times since the
 instance was last accessed, <A
HREF="http://www.lisp.org/HyperSpec/Body/stagenfun_upd_efined-class.html"
TARGET="_top"
><CODE
CLASS="function"
>UPDATE-INSTANCE-FOR-REDEFINED-CLASS</CODE
></A
> is
 still called just once.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="type-class-int"
>4.7. Integrating Types and Classes
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_4-3-7.html"
TARGET="_top"
>[CLHS-4.3.7]</A
></A
></H2
><P
ALIGN="justify"
>The class <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html"
TARGET="_top"
><CODE
CLASS="classname"
>METHOD-COMBINATION</CODE
></A
> is not implemented.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="type-class-dict"
>4.8. The Types and Classes Dictionary
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_types_s_dictionary.html"
TARGET="_top"
>[CLHS-4.4]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="fixnum-char-ansi"
>4.8.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
> is not a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_c.html#character_designator"
TARGET="_top"
>character
  designator</A
> in <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>, although <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> provides an
  obvious venue to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
> a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
> to a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.
  When <A
HREF="#fixnum-char-ansi"
><VAR
CLASS="varname"
>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
>s <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>s to
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s via <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
>.
  When <A
HREF="#fixnum-char-ansi"
><VAR
CLASS="varname"
>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>s cannot be
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
>d to <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s.</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="data"
></A
>Chapter 5. Data and Control Flow
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-5.html"
TARGET="_top"
>[CLHS-5]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="flow-dict"
>5.1. The Data and Control Flow Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_data__w_dictionary.html"
TARGET="_top"
>[CLHS-5.3]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><A
NAME="fle"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_function-_a-expression.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCTION-LAMBDA-EXPRESSION</CODE
></A
>. </B
>The <VAR
CLASS="replaceable"
>name</VAR
> of a <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
> is a <I
CLASS="emphasis"
>string</I
>
(the name of the underlying <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function), not a lisp
<A
HREF="http://www.lisp.org/HyperSpec/Body/glo_f.html#function_name"
TARGET="_top"
>function name</A
>.
</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_destructuring-bind.html"
TARGET="_top"
><CODE
CLASS="function"
>DESTRUCTURING-BIND</CODE
></A
>. </B
>This macro does not perform full error checking.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Macros <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html"
TARGET="_top"
><CODE
CLASS="function"
>PROG1</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_prog1cm_prog2.html"
TARGET="_top"
><CODE
CLASS="function"
>PROG2</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_and.html"
TARGET="_top"
><CODE
CLASS="function"
>AND</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_or.html"
TARGET="_top"
><CODE
CLASS="function"
>OR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_psetq.html"
TARGET="_top"
><CODE
CLASS="function"
>PSETQ</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html"
TARGET="_top"
><CODE
CLASS="function"
>WHEN</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html"
TARGET="_top"
><CODE
CLASS="function"
>UNLESS</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_cond.html"
TARGET="_top"
><CODE
CLASS="function"
>COND</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html"
TARGET="_top"
><CODE
CLASS="function"
>CASE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html"
TARGET="_top"
><CODE
CLASS="function"
>MULTIPLE-VALUE-LIST</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html"
TARGET="_top"
><CODE
CLASS="function"
>MULTIPLE-VALUE-BIND</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-setq.html"
TARGET="_top"
><CODE
CLASS="function"
>MULTIPLE-VALUE-SETQ</CODE
></A
>. </B
>These macros are implemented as special operators (as permitted by
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-1-2-1-2-2.html"
TARGET="_top"
>Section 3.1.2.1.2.2</A
>)
 and, as such, are rather efficient.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defconstant.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFCONSTANT</CODE
></A
>. </B
>The initial value is <I
CLASS="emphasis"
>not</I
> evaluated at compile time,
 just like with <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFVAR</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPARAMETER</CODE
></A
>.
 Use <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL-WHEN</CODE
></A
> if you need the value at compile time.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="fcase"
>5.1.1. Macro <CODE
CLASS="function"
>EXT:FCASE</CODE
></A
></H3
><P
ALIGN="justify"
>This macro allows specifying the test for <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_casecm_ccasecm_ecase.html"
TARGET="_top"
><CODE
CLASS="function"
>CASE</CODE
></A
>, e.g.,
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(fcase string= (subseq foo 0 (position #\Space foo))
  ("first" 1)
  (("second" "two") 2)
  (("true" "yes") t)
  (otherwise nil))
</PRE
></TD
></TR
></TABLE
>
is the same as
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(let ((var (subseq foo 0 (position #\Space foo))))
  (cond ((string= var "first") 1)
        ((or (string= var "second") (string= var "two")) 2)
        ((or (string= var "true") (string= var "yes")) t)
        (t nil)))
</PRE
></TD
></TR
></TABLE
>
</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="xor"
>5.1.2. Function <CODE
CLASS="function"
>EXT:XOR</CODE
></A
></H3
><P
ALIGN="justify"
>This function checks that exactly one of its arguments is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
 and, if this is the case, returns its value and index in the argument
 list as <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>, otherwise returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="eq"
>5.1.3. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> compares <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s and <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>s as <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
> does.
 No unnecessary copies are made of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s and <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
>s.
 Nevertheless, one should use <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
> as it is more portable across <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
>
 implementations.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(let ((x y)) (eq x x))</TT
> always
 returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, regardless of <VAR
CLASS="replaceable"
>y</VAR
>.</P
><P
ALIGN="justify"
>Note that <TT
CLASS="sexp"
>(eq x x)</TT
> might not be
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> for a <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> <VAR
CLASS="replaceable"
>x</VAR
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="sym-fun"
>5.1.4. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-FUNCTION</CODE
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-FUNCTION</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>)
 <VAR
CLASS="replaceable"
>object</VAR
>)</TT
> requires <VAR
CLASS="replaceable"
>object</VAR
> to be either a function, a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-FUNCTION</CODE
></A
> return value or a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
TARGET="_top"
>lambda expression</A
>.  The <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
TARGET="_top"
>lambda expression</A
>
 is thereby immediately converted to a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="setf"
>5.1.5. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
></A
></H3
><P
ALIGN="justify"
>Additional <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
>s:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
> #'<VAR
CLASS="replaceable"
>symbol</VAR
> ...)
     <VAR
CLASS="replaceable"
>object</VAR
>)</TT
>
    and
   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
> '<VAR
CLASS="replaceable"
>symbol</VAR
> ...)
     <VAR
CLASS="replaceable"
>object</VAR
>)</TT
>
   are equivalent to
   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<VAR
CLASS="replaceable"
>symbol</VAR
> ...) <VAR
CLASS="replaceable"
>object</VAR
>)</TT
>.
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
TARGET="_top"
><CODE
CLASS="function"
>PROGN</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
TARGET="_top"
><CODE
CLASS="function"
>PROGN</CODE
></A
> <VAR
CLASS="replaceable"
>form</VAR
> ... <VAR
CLASS="replaceable"
>place</VAR
>)
                                <VAR
CLASS="replaceable"
>object</VAR
>)</TT
>
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
TARGET="_top"
><CODE
CLASS="function"
>LOCALLY</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_locally.html"
TARGET="_top"
><CODE
CLASS="function"
>LOCALLY</CODE
></A
> <VAR
CLASS="replaceable"
>declaration</VAR
> ... <VAR
CLASS="replaceable"
>form</VAR
> ...
                                 <VAR
CLASS="replaceable"
>place</VAR
>) <VAR
CLASS="replaceable"
>object</VAR
>)</TT
>
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/speope_if.html"
TARGET="_top"
><CODE
CLASS="function"
>IF</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_if.html"
TARGET="_top"
><CODE
CLASS="function"
>IF</CODE
></A
> <VAR
CLASS="replaceable"
>condition</VAR
>
                                  <VAR
CLASS="replaceable"
>place<SUB
>1</SUB
></VAR
>
                                  <VAR
CLASS="replaceable"
>place<SUB
>2</SUB
></VAR
>)
                                <VAR
CLASS="replaceable"
>object</VAR
>)</TT
>
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
TARGET="_top"
><CODE
CLASS="function"
>GET-DISPATCH-MACRO-CHARACTER</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
TARGET="_top"
><CODE
CLASS="function"
>GET-DISPATCH-MACRO-CHARACTER</CODE
></A
> ...)
     ...)</TT
> calls <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set-dispa_ro-character.html"
TARGET="_top"
><CODE
CLASS="function"
>SET-DISPATCH-MACRO-CHARACTER</CODE
></A
>.
  </P
></DD
><DT
><A
HREF="#lfd"
><CODE
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</CODE
></A
>:</DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="#lfd"
><CODE
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</CODE
></A
>) <VAR
CLASS="replaceable"
>digits</VAR
>)</TT
> sets the
    default mantissa length of long floats to <VAR
CLASS="replaceable"
>digits</VAR
> bits.
   </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
TARGET="_top"
><CODE
CLASS="function"
>VALUES-LIST</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
TARGET="_top"
><CODE
CLASS="function"
>VALUES-LIST</CODE
></A
>
       <VAR
CLASS="replaceable"
>list</VAR
>) <VAR
CLASS="replaceable"
>form</VAR
>)</TT
>
    is equivalent to
   <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
TARGET="_top"
><CODE
CLASS="function"
>VALUES-LIST</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <VAR
CLASS="replaceable"
>list</VAR
>
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-list.html"
TARGET="_top"
><CODE
CLASS="function"
>MULTIPLE-VALUE-LIST</CODE
></A
> <VAR
CLASS="replaceable"
>form</VAR
>)))</TT
>
  </P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> markers in <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defsetf.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFSETF</CODE
></A
> <A
HREF="#lalist"
>lambda list</A
>s are supported, but the
 corresponding keywords must appear literally in the program text.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html"
TARGET="_top"
><CODE
CLASS="function"
>GET-SETF-EXPANSION</CODE
></A
> <VAR
CLASS="replaceable"
>form</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 <VAR
CLASS="replaceable"
>env</VAR
>)</TT
>, <TT
CLASS="sexp"
>(EXT:GET-SETF-METHOD <VAR
CLASS="replaceable"
>form</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 <VAR
CLASS="replaceable"
>env</VAR
>)</TT
>, and <TT
CLASS="sexp"
>(EXT:GET-SETF-METHOD-MULTIPLE-VALUE <VAR
CLASS="replaceable"
>form</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 <VAR
CLASS="replaceable"
>env</VAR
>)</TT
> receive as optional argument <VAR
CLASS="replaceable"
>env</VAR
>
 the environment necessary for macro expansions.  In
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-setf-expander.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFINE-SETF-EXPANDER</CODE
></A
> and <CODE
CLASS="function"
>EXT:DEFINE-SETF-METHOD</CODE
>
 <A
HREF="#lalist"
>lambda list</A
>s, one can specify <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ENVIRONMENT</TT
></A
> and a variable, which will
 be bound to the environment.  This environment should be passed to all
 calls of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_get-setf-expansion.html"
TARGET="_top"
><CODE
CLASS="function"
>GET-SETF-EXPANSION</CODE
></A
>,
 <CODE
CLASS="function"
>EXT:GET-SETF-METHOD</CODE
> and
 <CODE
CLASS="function"
>EXT:GET-SETF-METHOD-MULTIPLE-VALUE</CODE
>.  If this is
 done, even local macros will be interpreted as places correctly.</P
><P
ALIGN="justify"
>Attempts to modify read-only data will <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.
 Program text and quoted constants loaded from files are considered
 read-only data.  This check is only performed for strings, not for
 conses, other kinds of arrays, and user-defined data types.</P
><P
ALIGN="justify"
>See also the <A
HREF="#letf"
><CODE
CLASS="function"
>EXT:LETF</CODE
></A
> and <A
HREF="#letf"
><CODE
CLASS="function"
>EXT:LETF*</CODE
></A
> macros.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="func"
>5.1.6. Special Operator <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_function.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCTION</CODE
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_function.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCTION</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>)</TT
> returns the
 local function definition established by <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>FLET</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>LABELS</CODE
></A
>, if it
 exists, otherwise the global function definition.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_special-operator-p.html"
TARGET="_top"
><CODE
CLASS="function"
>SPECIAL-OPERATOR-P</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>)</TT
>
 returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.  If it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, then <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-FUNCTION</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>)</TT
> returns the
 (useless) special operator handler.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="def-sym-mac"
>5.1.7. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFINE-SYMBOL-MACRO</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFINE-SYMBOL-MACRO</CODE
></A
> establishes <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>s with
 global scope (as opposed to <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>s defined with
 <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-MACROLET</CODE
></A
>, which have local scope):
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFINE-SYMBOL-MACRO</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>
 <VAR
CLASS="replaceable"
>expansion</VAR
>)</TT
>.</P
><P
ALIGN="justify"
>The function
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#symbol-mex"
><CODE
CLASS="function"
>EXT:SYMBOL-MACRO-EXPAND</CODE
></A
></I
></STRONG
>
 tests for a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>: If <VAR
CLASS="replaceable"
>symbol</VAR
> is defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>,
 <TT
CLASS="sexp"
>(<A
HREF="#symbol-mex"
><CODE
CLASS="function"
>EXT:SYMBOL-MACRO-EXPAND</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>)</TT
> returns two
 values, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> and the expansion; otherwise it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
><P
ALIGN="justify"
>Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_boundp.html"
TARGET="_top"
><CODE
CLASS="function"
>BOUNDP</CODE
></A
> on a symbol defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> returns
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
><P
ALIGN="justify"
>Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-VALUE</CODE
></A
> on a symbol defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>
 returns the value of the expansion.  Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_set.html"
TARGET="_top"
><CODE
CLASS="function"
>SET</CODE
></A
> on a symbol defined
 as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> calls <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> on the expansion.</P
><P
ALIGN="justify"
>Calling <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_makunbound.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKUNBOUND</CODE
></A
> on a symbol defined as a <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>
 removes the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> definition.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="lambda"
>5.1.8. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><CODE
CLASS="function"
>LAMBDA</CODE
></A
></A
></H3
><DIV
CLASS="formalpara"
><P
><B
>Constant <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_lambda_ist-keywords.html"
TARGET="_top"
><CODE
CLASS="constant"
>LAMBDA-LIST-KEYWORDS</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ALLOW-OTHER-KEYS</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;AUX</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;WHOLE</TT
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ENVIRONMENT</TT
></A
>)
</TT
></P
></DIV
><DIV
CLASS="table"
><A
NAME="values-limits-table"
></A
><P
><B
>Table 5-1. Function call limits</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_call-a_uments-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>CALL-ARGUMENTS-LIMIT</CODE
></A
></TD
><TD
>2<SUP
>12</SUP
>=4096</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_multip_values-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>MULTIPLE-VALUES-LIMIT</CODE
></A
></TD
><TD
>2<SUP
>7</SUP
>=128</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_lambda_meters-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>LAMBDA-PARAMETERS-LIMIT</CODE
></A
></TD
><TD
>2<SUP
>12</SUP
>=4096</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="defun"
>5.1.9. Macros <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defun.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFUN</CODE
></A
> &#38; <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFMACRO</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defun.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFUN</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFMACRO</CODE
></A
> are allowed in non-toplevel positions. As
 an example, consider the old (<A
HREF="#CLtL1"
>[<SPAN
CLASS="citation"
><A
HREF="#CLtL1"
>CLtL1</A
></SPAN
>]</A
>) definition of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_gensym.html"
TARGET="_top"
><CODE
CLASS="function"
>GENSYM</CODE
></A
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(let ((gensym-prefix "G")
      (gensym-count 1))
  (defun gensym (&#38;optional (x nil s))
    (when s
      (cond ((stringp x) (setq gensym-prefix x))
            ((integerp x)
             (if (minusp x)
               (error "~S: index ~S is negative" 'gensym x)
               (setq gensym-count x)))
            (t (error "~S: argument ~S of wrong type" 'gensym x))))
    (prog1
      (make-symbol
        (concatenate 'string
          gensym-prefix
          (write-to-string gensym-count :base 10 :radix nil)))
      (incf gensym-count))))
</PRE
></TD
></TR
></TABLE
><DIV
CLASS="formalpara"
><P
><A
NAME="suppress-check-redef"
></A
><B
>Variable <A
HREF="#suppress-check-redef"
><VAR
CLASS="varname"
>CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</VAR
></A
>. </B
>When <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#suppress-check-redef"
><VAR
CLASS="varname"
>CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</VAR
></A
></I
></STRONG
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> issues a <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_warning.html"
TARGET="_top"
><CODE
CLASS="classname"
>WARNING</CODE
></A
> when a function (macro, variable, class,
 etc) is redefined in a different file than its original definition.
 It is <I
CLASS="emphasis"
>not</I
> a good idea to set this variable to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.
</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="iteration"
></A
>Chapter 6. Iteration
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-6.html"
TARGET="_top"
>[CLHS-6]</A
></H1
><P
ALIGN="justify"
>No notes.</P
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="objects"
></A
>Chapter 7. Objects
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-7.html"
TARGET="_top"
>[CLHS-7]</A
></H1
><P
ALIGN="justify"
>Only the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-2.html"
TARGET="_top"
><CODE
CLASS="function"
>STANDARD</CODE
></A
> method combination is implemented.</P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="meth-combo"
>7.1. Declarative Method Combination
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_7-6-6-3.html"
TARGET="_top"
>[CLHS-7.6.6.3]</A
></A
></H2
><P
ALIGN="justify"
>User-defined method combination is not supported.
 The macros <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-me_-combination.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFINE-METHOD-COMBINATION</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/locmac_call-m__make-method.html"
TARGET="_top"
><CODE
CLASS="function"
>CALL-METHOD</CODE
></A
> and the
 functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_invalid-method-error.html"
TARGET="_top"
><CODE
CLASS="function"
>INVALID-METHOD-ERROR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_method-co_nation-error.html"
TARGET="_top"
><CODE
CLASS="function"
>METHOD-COMBINATION-ERROR</CODE
></A
> are
 not implemented.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="obj-dict"
>7.2. The Objects Dictionary
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_7-7.html"
TARGET="_top"
>[CLHS-7.7]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="class-proto"
>7.2.1. Generic function <A
HREF="#class-proto"
><CODE
CLASS="function"
>CLOS:CLASS-PROTOTYPE</CODE
></A
>.</A
></H3
><P
ALIGN="justify"
>The <A
HREF="#amop"
>[<SPAN
CLASS="citation"
><A
HREF="#amop"
>Metaobject Protocol</A
></SPAN
>]</A
> generic function <A
HREF="#class-proto"
><CODE
CLASS="function"
>CLOS:CLASS-PROTOTYPE</CODE
></A
> is implemented.
 This allows non-consing access to slots with
 allocation <CODE
CLASS="constant"
>:CLASS</CODE
>:
 <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (defclass counter ()
    ((count :allocation :class :initform 0 :reader how-many)))
  (defmethod initialize-instance :after ((obj counter) &#38;rest args)
    (incf (slot-value obj 'count)))
  (defclass counted-object (counter) ((name :initarg :name)))
 </PRE
></TD
></TR
></TABLE
>
 Now you can find out how many <CODE
CLASS="classname"
>COUNTED-OBJECT</CODE
>s
 have been created by using
 <TT
CLASS="sexp"
>(HOW-MANY (<A
HREF="#class-proto"
><CODE
CLASS="function"
>CLOS:CLASS-PROTOTYPE</CODE
></A
> 'COUNTER))</TT
>:
 <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (make-instance 'counted-object :name 'foo)
    <SPAN
CLASS="returnvalue"
>#&#60;COUNTED-OBJECT #x203028C9&#62;</SPAN
>
  (how-many (clos:class-prototype 'counter))
    <SPAN
CLASS="returnvalue"
>1</SPAN
>
  (make-instance 'counted-object :name 'bar)
    <SPAN
CLASS="returnvalue"
>#&#60;COUNTED-OBJECT #x20306CB1&#62;</SPAN
>
  (how-many (clos:class-prototype 'counter))
    <SPAN
CLASS="returnvalue"
>2</SPAN
>
</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="structures"
></A
>Chapter 8. Structures
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-8.html"
TARGET="_top"
>[CLHS-8]</A
></H1
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:PRINT-FUNCTION</CODE
> option should contain a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
TARGET="_top"
>lambda expression</A
>
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><CODE
CLASS="function"
>LAMBDA</CODE
></A
> (object stream depth) (declare
 (ignore depth)) ...)</TT
>
 This <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_l.html#lambda_expression"
TARGET="_top"
>lambda expression</A
> names a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> whose task is to output the
 external representation of the <A
HREF="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-OBJECT</CODE
></A
> <VAR
CLASS="replaceable"
>object</VAR
> onto the
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>. This may be done by outputting text onto the
 stream using <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-CHAR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-str_m_write-line.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-STRING</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRIN1</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINC</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PPRINT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> and the like.
 The following rules must be obeyed:</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
>The value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-ESCAPE*</VAR
></A
> must be
  respected.</P
></LI
><LI
><P
ALIGN="justify"
>The treatment of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-PRETTY*</VAR
></A
> is up to you.
 </P
></LI
><LI
><P
ALIGN="justify"
>The value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-circlest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-CIRCLE*</VAR
></A
> need not be
  respected.  This is managed by the system.  (But the print-circle
  mechanism handles only those objects that are direct or indirect
  components of the structure.)</P
></LI
><LI
><P
ALIGN="justify"
>The value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-LEVEL*</VAR
></A
> is respected by
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRIN1</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINC</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PPRINT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> instructions
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~A</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~S</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~W</TT
></A
>, and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> instructions
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~R</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~D</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~B</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html"
TARGET="_top"
><TT
CLASS="literal"
>~O</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html"
TARGET="_top"
><TT
CLASS="literal"
>~X</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~F</TT
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~E</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~G</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html"
TARGET="_top"
><TT
CLASS="literal"
>~$</TT
></A
> with not-numerical arguments.
  Therefore the print-level mechanism works automatically if only these
  functions are used for outputting objects and if they are not called
  on objects with nesting level &#62; 1. (The print-level mechanism does
  not recognize how many parentheses you have output. It only counts how
  many times it was called recursively.)</P
></LI
><LI
><P
ALIGN="justify"
>The value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-LENGTH*</VAR
></A
> must be respected,
  especially if you are outputting an arbitrary number of components.
 </P
></LI
><LI
><P
ALIGN="justify"
>The value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> must be
  respected. Remember that the values of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-ESCAPE*</VAR
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-LEVEL*</VAR
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-l_int-lengthst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-LENGTH*</VAR
></A
> are ignored if
  <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> is true.  The value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> is
  respected by <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_print-unr_dable-object.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINT-UNREADABLE-OBJECT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRIN1</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINC</CODE
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PPRINT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> instructions <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~A</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~S</TT
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-4-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~W</TT
></A
>, and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> instructions <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~R</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~D</TT
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~B</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-4.html"
TARGET="_top"
><TT
CLASS="literal"
>~O</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-5.html"
TARGET="_top"
><TT
CLASS="literal"
>~X</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~F</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~E</TT
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~G</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html"
TARGET="_top"
><TT
CLASS="literal"
>~$</TT
></A
> with not-numerical arguments.  Therefore
  <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> will be respected automatically if only these
  functions are used for printing objects.</P
></LI
><LI
><P
ALIGN="justify"
>You need not worry about the values of
  <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-BASE*</VAR
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-RADIX*</VAR
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-CASE*</VAR
></A
>,
  <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-gensymst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-GENSYM*</VAR
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-ARRAY*</VAR
></A
>, <A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
>,
  <A
HREF="#pr-rpars"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-RPARS*</VAR
></A
>, <A
HREF="#pr-indent"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-INDENT-LISTS*</VAR
></A
>.</P
></LI
></UL
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:INHERIT</CODE
> option is exactly like <CODE
CLASS="constant"
>:INCLUDE</CODE
> except that it
 does not create new accessors for the inherited slots (this is a
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension).</P
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="conditions"
></A
>Chapter 9. Conditions
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-9.html"
TARGET="_top"
>[CLHS-9]</A
></H1
><P
ALIGN="justify"
>When an error occurred, you are in a break loop. You can evaluate
 forms as usual. The <B
CLASS="command"
>help</B
> command (or help key if
 there is one) lists the available <A
HREF="#debugger"
>debugging
 commands</A
>.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="muffle-cerrors"
></A
><B
>Macro <A
HREF="#muffle-cerrors"
><CODE
CLASS="function"
>EXT:MUFFLE-CERRORS</CODE
></A
>. </B
>The macro <TT
CLASS="sexp"
>(<A
HREF="#muffle-cerrors"
><CODE
CLASS="function"
>EXT:MUFFLE-CERRORS</CODE
></A
> {<VAR
CLASS="replaceable"
>form</VAR
>}*)</TT
>
 executes the <VAR
CLASS="replaceable"
>form</VAR
>s.  When a continuable error occurs, no message is
 printed, instead, the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html"
TARGET="_top"
><CODE
CLASS="function"
>CONTINUE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_restart.html"
TARGET="_top"
><CODE
CLASS="classname"
>RESTART</CODE
></A
> is invoked.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="appease-cerrors"
></A
><B
>Macro <A
HREF="#appease-cerrors"
><CODE
CLASS="function"
>EXT:APPEASE-CERRORS</CODE
></A
>. </B
>The macro <TT
CLASS="sexp"
>(<A
HREF="#appease-cerrors"
><CODE
CLASS="function"
>EXT:APPEASE-CERRORS</CODE
></A
> {<VAR
CLASS="replaceable"
>form</VAR
>}*)</TT
>
 executes the <VAR
CLASS="replaceable"
>form</VAR
>s.  Continuable errors are reported as warnings
 and the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_abortcm_c_cm_use-value.html"
TARGET="_top"
><CODE
CLASS="function"
>CONTINUE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_restart.html"
TARGET="_top"
><CODE
CLASS="classname"
>RESTART</CODE
></A
> is invoked.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="exit-on-error"
></A
><B
>Macro <A
HREF="#exit-on-error"
><CODE
CLASS="function"
>EXT:EXIT-ON-ERROR</CODE
></A
>. </B
>The macro <TT
CLASS="sexp"
>(<A
HREF="#exit-on-error"
><CODE
CLASS="function"
>EXT:EXIT-ON-ERROR</CODE
></A
> {<VAR
CLASS="replaceable"
>form</VAR
>}*)</TT
>
 executes the <VAR
CLASS="replaceable"
>form</VAR
>s.  When a non-continuable error or
 a <B
CLASS="keycap"
>Control</B
>-<SPAN
CLASS="keysym"
>C</SPAN
> interrupt occurs, the
 error message is printed and <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> terminates with an error
 status.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="with-restarts"
></A
><B
>Macro <A
HREF="#with-restarts"
><CODE
CLASS="function"
>EXT:WITH-RESTARTS</CODE
></A
>. </B
>The macro <A
HREF="#with-restarts"
><CODE
CLASS="function"
>EXT:WITH-RESTARTS</CODE
></A
> is like <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
TARGET="_top"
><CODE
CLASS="function"
>RESTART-CASE</CODE
></A
>, except that the
 forms are specified after the restart clauses instead of before them,
 and the restarts created are not implicitly associated with any <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_condition.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONDITION</CODE
></A
>.
 <TT
CLASS="sexp"
>(<A
HREF="#with-restarts"
><CODE
CLASS="function"
>EXT:WITH-RESTARTS</CODE
></A
> ({<VAR
CLASS="varname"
>restart-clause</VAR
>}*)
 {<VAR
CLASS="replaceable"
>form</VAR
>}*)</TT
> is therefore equivalent to
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
TARGET="_top"
><CODE
CLASS="function"
>RESTART-CASE</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
TARGET="_top"
><CODE
CLASS="function"
>PROGN</CODE
></A
> {<VAR
CLASS="replaceable"
>form</VAR
>}*)
 {<VAR
CLASS="varname"
>restart-clause</VAR
>}*)</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="cond-nl"
>9.1. Embedded Newlines in Condition Reports
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_9-1-3-1-3.html"
TARGET="_top"
>[CLHS-9.1.3.1.3]</A
></A
></H2
><P
ALIGN="justify"
>The error message prefix for the first line is "*** - ". There is
 no prefix for subsequent error lines. The aesthetics of <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_condition.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONDITION</CODE
></A
>
 reports containing an object which requires newlines when pretty
 printing is enabled, is undefined.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="cond-dict"
>9.2. The Conditions Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_condi_s_dictionary.html"
TARGET="_top"
>[CLHS-9.2]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
TARGET="_top"
><CODE
CLASS="function"
>RESTART-CASE</CODE
></A
>. </B
>In <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
TARGET="_top"
><CODE
CLASS="function"
>RESTART-CASE</CODE
></A
> clauses the argument list can also be specified
 after the keyword/value pairs instead of before them.  The syntax
 therefore is

<P
></P
><DIV
CLASS="variablelist"
><P
><B
>Macro <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
TARGET="_top"
><CODE
CLASS="function"
>RESTART-CASE</CODE
></A
> <VAR
CLASS="replaceable"
>form</VAR
>
 {<VAR
CLASS="varname"
>restart-clause</VAR
>}*)</TT
></B
></P
><DL
><DT
><VAR
CLASS="varname"
>restart-clause</VAR
> ::==</DT
><DD
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;   (<VAR
CLASS="varname"
>restart-name</VAR
> <VAR
CLASS="replaceable"
>arglist</VAR
>
    {<VAR
CLASS="varname"
>keyword-value</VAR
>}* {<VAR
CLASS="replaceable"
>form</VAR
>}*) |
   (<VAR
CLASS="varname"
>restart-name</VAR
> {<VAR
CLASS="varname"
>keyword-value</VAR
>}*
    <VAR
CLASS="replaceable"
>arglist</VAR
> {<VAR
CLASS="replaceable"
>form</VAR
>}*)
</PRE
></TD
></TR
></TABLE
></DD
></DL
></DIV
>
</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPUTE-RESTARTS</CODE
></A
>. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compute-restarts.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPUTE-RESTARTS</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_find-restart.html"
TARGET="_top"
><CODE
CLASS="function"
>FIND-RESTART</CODE
></A
> behave as specified in
 <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>: If the optional <VAR
CLASS="replaceable"
>condition</VAR
>
 argument is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, only restarts associated with that condition and
 restarts associated with no condition at all are considered.
 Therefore the effect of associating a restart to a condition is not to
 activate it, but to hide it from other conditions.
 This makes the syntax dependent implicit association performed by
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_restart-case.html"
TARGET="_top"
><CODE
CLASS="function"
>RESTART-CASE</CODE
></A
> nearly obsolete.</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="symbols"
></A
>Chapter 10. Symbols
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-10.html"
TARGET="_top"
>[CLHS-10]</A
></H1
><P
ALIGN="justify"
>No notes.</P
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="packages"
></A
>Chapter 11. Packages
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-11.html"
TARGET="_top"
>[CLHS-11]</A
></H1
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>The <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> packages present in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></B
></P
><DL
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>with the nicknames <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CL"</SPAN
></STRONG
>
    and <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"LISP"</SPAN
></STRONG
></P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP-USER"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>with the nicknames <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CL-USER"</SPAN
></STRONG
>
    and <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"USER"</SPAN
></STRONG
></P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"KEYWORD"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>with the nickname <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>""</SPAN
></STRONG
>
  </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The package <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
>s only those symbols
 from the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> that are actually implemented.</P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="pack-lock"
>11.1. Constraints on the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> Package
  for Conforming Programs - package locking
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html"
TARGET="_top"
>[CLHS-11.1.2.1.2]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="#pack-lock"
><CODE
CLASS="function"
>EXT:PACKAGE-LOCK</CODE
></A
>. </B
>
 Packages can be <SPAN
CLASS="QUOTE"
>"locked"</SPAN
>.
When a package is locked, attempts to change its symbol table or
redefine functions which its symbols name result in a continuable
<A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> (continuing overrides locking for this operation).
When <A
HREF="#suppress-check-redef"
><VAR
CLASS="varname"
>CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> (<I
CLASS="emphasis"
>not</I
> a good idea!), the <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>
is not <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>ed for redefine operations.
Function <TT
CLASS="sexp"
>(<A
HREF="#pack-lock"
><CODE
CLASS="function"
>EXT:PACKAGE-LOCK</CODE
></A
> <VAR
CLASS="replaceable"
>package</VAR
>)</TT
>
returns the generalized boolean indicating whether the <VAR
CLASS="replaceable"
>package</VAR
> is locked.
A package (or a list thereof) can be locked using <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="#pack-lock"
><CODE
CLASS="function"
>EXT:PACKAGE-LOCK</CODE
></A
> <VAR
CLASS="replaceable"
>package-or-list</VAR
>)
<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>)</TT
>.
<A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> locks its system packages (specified in the variable
<A
HREF="#pack-lock"
><VAR
CLASS="varname"
>CUSTOM:*SYSTEM-PACKAGE-LIST*</VAR
></A
>).</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Macro <A
HREF="#without-pack-lock"
><CODE
CLASS="function"
>EXT:WITHOUT-PACKAGE-LOCK</CODE
></A
>. </B
>If you want to evaluate some forms with certain packages unlocked,
 you can use
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#without-pack-lock"
><CODE
CLASS="function"
>EXT:WITHOUT-PACKAGE-LOCK</CODE
></A
>
  </I
></STRONG
>:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="#without-pack-lock"
><CODE
CLASS="function"
>EXT:WITHOUT-PACKAGE-LOCK</CODE
></A
> ("LISP" "EXT" "CLOS")
  (defun restart () ...))
</PRE
></TD
></TR
></TABLE
>
or
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="#without-pack-lock"
><CODE
CLASS="function"
>EXT:WITHOUT-PACKAGE-LOCK</CODE
></A
> ("LISP") (trace read-line))
</PRE
></TD
></TR
></TABLE
>
<TT
CLASS="sexp"
>(<A
HREF="#without-pack-lock"
><CODE
CLASS="function"
>EXT:WITHOUT-PACKAGE-LOCK</CODE
></A
> () ...)</TT
>
temporarily unlocks all packages in <A
HREF="#pack-lock"
><VAR
CLASS="varname"
>CUSTOM:*SYSTEM-PACKAGE-LIST*</VAR
></A
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Discussion - see also
  <A
HREF="http://groups.google.com/groups?hl=en&#38;lr=&#38;ie=UTF-8&#38;selm=3C3E7F57.7F80395%40pacbell.net"
TARGET="_top"
>the USENET posting</A
> by
  Steven M. Haflich. </B
>This should prevent you from accidentally hosing yourself with
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defstruct.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFSTRUCT</CODE
></A
> instance ...)
</PRE
></TD
></TR
></TABLE
>
and allow enforcing modularity.
Note that you will also get the continuable error when you try to
assign (with <A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_psetq.html"
TARGET="_top"
><CODE
CLASS="function"
>PSETQ</CODE
></A
>, etc.) a value to an internal special
variable living in a locked package and not accessible in your current
<A
HREF="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PACKAGE*</VAR
></A
>, but only in the interpreted code and during compilation.
There is no check for package locks in compiled code because of the
performance considerations.
</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="clupack"
>11.2. The
  <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP-USER"</SPAN
></STRONG
> Package
  <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
TARGET="_top"
>[CLHS-11.1.2.2]</A
></A
></H2
><P
ALIGN="justify"
>The <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP-USER"</SPAN
></STRONG
></A
> package uses the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> and <A
HREF="#ext-pac"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"EXT"</SPAN
></STRONG
></A
> packages.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="imppack"
>11.3. Implementation-Defined Packages
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-4.html"
TARGET="_top"
>[CLHS-11.1.2.4]</A
></A
></H2
><P
ALIGN="justify"
>The following additional packages exist:</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Implementation-Defined Packages</B
></P
><DL
><DT
><A
HREF="#classes"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CLOS"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
>s all <B
CLASS="command"
>CLOS</B
>-specific symbols, including some
    <A
HREF="#clos-diff"
>additional symbols</A
>.
 </P
></DD
><DT
><A
NAME="sys-pac"
></A
><A
HREF="#sys-pac"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"SYSTEM"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>has the nicknames <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"SYS"</SPAN
></STRONG
>
    and <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMPILER"</SPAN
></STRONG
>, and has no
    <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
>ed symbols.  It defines many system internals.
 </P
></DD
><DT
><A
NAME="ext-pac"
></A
><A
HREF="#ext-pac"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"EXT"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>&#13;    is the umbrella package for all extensions: it imports and <A
HREF="#re-export"
><CODE
CLASS="function"
>EXT:RE-EXPORT</CODE
></A
>s
    all the external symbols in all <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extensions, so a simple
    <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
TARGET="_top"
><CODE
CLASS="function"
>USE-PACKAGE</CODE
></A
> "EXT")</TT
> is enough to
    make all the extensions available in the current package.
    This package uses packages (in addition to <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
>):
    <A
HREF="#dir-key"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"LDAP"</SPAN
></STRONG
></A
>, <A
HREF="#syscalls"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"POSIX"</SPAN
></STRONG
></A
>, <A
HREF="#socket"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"SOCKET"</SPAN
></STRONG
></A
>, <A
HREF="#gstream"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"GSTREAM"</SPAN
></STRONG
></A
>, <A
HREF="#gray"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"GRAY"</SPAN
></STRONG
></A
>,
    <A
HREF="#i18n"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"I18N"</SPAN
></STRONG
></A
>, <A
HREF="#customize"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CUSTOM"</SPAN
></STRONG
></A
>.</P
></DD
><DT
><A
HREF="#encoding"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CHARSET"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>defines and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
>s some character sets, for use with
    <A
HREF="#make-encoding"
><CODE
CLASS="function"
>EXT:MAKE-ENCODING</CODE
></A
> and as <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> argument.
 </P
></DD
><DT
><A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>implements the <A
HREF="#dffi"
>foreign function
     interface</A
>.  Some platforms only.
 </P
></DD
><DT
><A
HREF="#screen"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"SCREEN"</SPAN
></STRONG
></A
></DT
><DD
><P
ALIGN="justify"
>defines an API for <A
HREF="#screen"
>random screen
     access</A
>.  Some platforms only.
 </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>All pre-existing packages except <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP-USER"</SPAN
></STRONG
></A
> belong to the
 implementation, in the sense that the programs that do not follow
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1-2.html"
TARGET="_top"
>Section 11.1.2.1.2</A
>
 ("Constraints on the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
> Package for Conforming Programs")
 cause undefined behavior.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="pack-dict"
>11.4. The Packages Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_packa_s_dictionary.html"
TARGET="_top"
>[CLHS-11.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="make-pack"
>11.4.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PACKAGE</CODE
></A
></A
></H3
><P
ALIGN="justify"
>For <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PACKAGE</CODE
></A
>, the default value of the <CODE
CLASS="constant"
>:USE</CODE
> argument is
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-1.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP"</SPAN
></STRONG
></A
>)</TT
>.
</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PACKAGE</CODE
></A
> accepts a keyword argument <CODE
CLASS="constant"
>:CASE-SENSITIVE</CODE
>.
 Similarly, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> accepts an option <CODE
CLASS="constant"
>:CASE-SENSITIVE</CODE
>.
 When its value is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the package will be case sensitive, i.e.,
 the reader will not case-convert symbol names before looking them up or
 creating them in this package.
 The package names are still subject to
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
TARGET="_top"
><CODE
CLASS="function"
>READTABLE-CASE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/var_streadtablest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*READTABLE*</VAR
></A
>)</TT
>,
 though.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="re-export"
>11.4.2. Function <A
HREF="#re-export"
><CODE
CLASS="function"
>EXT:RE-EXPORT</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="#re-export"
><CODE
CLASS="function"
>EXT:RE-EXPORT</CODE
></A
> <VAR
CLASS="replaceable"
>FROM-PACK</VAR
>
               <VAR
CLASS="replaceable"
>TO-PACK</VAR
>)</TT
>
 re-<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
>s all external <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>s from
 <VAR
CLASS="replaceable"
>FROM-PACK</VAR
> also from
 <VAR
CLASS="replaceable"
>TO-PACK</VAR
>, provided it already uses
 <VAR
CLASS="replaceable"
>FROM-PACK</VAR
>; and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>s an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> otherwise.
</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="numbers"
></A
>Chapter 12. Numbers
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-12.html"
TARGET="_top"
>[CLHS-12]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="num-types"
>12.1. Numeric Types</A
></H2
><P
ALIGN="justify"
>The type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
> is the disjoint union of the types
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
TARGET="_top"
><CODE
CLASS="classname"
>REAL</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#exhaustive_partition"
TARGET="_top"
><SPAN
CLASS="QUOTE"
>"exhaustive
 partition"</SPAN
></A
>)</P
><P
ALIGN="justify"
>The type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
TARGET="_top"
><CODE
CLASS="classname"
>REAL</CODE
></A
> is the disjoint union of the types
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIONAL</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOAT</CODE
></A
>.</P
><P
ALIGN="justify"
>The type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIONAL</CODE
></A
> is the disjoint union of the types
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIO</CODE
></A
>.</P
><P
ALIGN="justify"
>The type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> is the disjoint union of the types
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_bignum.html"
TARGET="_top"
><CODE
CLASS="classname"
>BIGNUM</CODE
></A
>.</P
><P
ALIGN="justify"
>The type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOAT</CODE
></A
> is the disjoint union of the types
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="num-concepts"
>12.2. Number Concepts
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1.html"
TARGET="_top"
>[CLHS-12.1]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="byte-type"
>12.2.1. Byte Operations on Integers
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-1-3-2.html"
TARGET="_top"
>[CLHS-12.1.1.3.2]</A
></A
></H3
><P
ALIGN="justify"
>Byte specifiers are objects of built-in type <A
HREF="#byte-type"
><SPAN
CLASS="type"
>BYTE</SPAN
></A
>,
 not <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>s.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="float-subst"
>12.2.2. Rule of Float Substitutability
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-3-3.html"
TARGET="_top"
>[CLHS-12.1.3.3]</A
></A
></H3
><P
ALIGN="justify"
>When a mathematical function may return an exact (<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIONAL</CODE
></A
>) or
 inexact (<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOAT</CODE
></A
>) result, it always returns the exact result.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="float-comp"
>12.2.3. Floating-point Computations
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-4.html"
TARGET="_top"
>[CLHS-12.1.4]</A
></A
></H3
><P
ALIGN="justify"
>There are four floating point types: <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
>:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="floating-types-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>type</TH
><TH
>sign</TH
><TH
>mantissa</TH
><TH
>exponent</TH
><TH
>comment</TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
></TD
><TD
>1 bit</TD
><TD
>16+1 bits</TD
><TD
>8 bits</TD
><TD
>immediate</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
></TD
><TD
>1 bit</TD
><TD
>23+1 bits</TD
><TD
>8 bits</TD
><TD
><A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
></TD
><TD
>1 bit</TD
><TD
>52+1 bits</TD
><TD
>11 bits</TD
><TD
><A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
></TD
><TD
>1 bit</TD
><TD
>&#62;=64 bits</TD
><TD
>32 bits</TD
><TD
>variable
 length</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
><P
ALIGN="justify"
>The single and double float formats are those of the <A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
>
 <SPAN
CLASS="QUOTE"
>"Standard for Binary Floating-Point Arithmetic"</SPAN
>,
 except that <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> does not support features like
 <TT
CLASS="literal"
>±0</TT
>, <TT
CLASS="literal"
>±inf</TT
>,
 <TT
CLASS="literal"
>NaN</TT
>, gradual underflow, etc.
 <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> does not make use of these features, so, to reduce portability
 problems, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> by design returns the same floating point results on
 all platforms (<A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> has a floating-point emulation built in for
 platforms that do not support <A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
>).  Note that
 <P
></P
><UL
><LI
><P
ALIGN="justify"
>When you got a <TT
CLASS="literal"
>NaN</TT
>
    in your program, your program is broken, so you will spend time
    determining where the <TT
CLASS="literal"
>NaN</TT
> came from.
    It is better to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> in this case.</P
></LI
><LI
><P
ALIGN="justify"
>When you got unnormalized floats in your program,
    your results will have a greatly reduced accuracy anyway.
    Since <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> has the means to cope with this - <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
>s of
    <A
HREF="#lfd"
>variable precision</A
> - it does not
    need unnormalized floats.</P
></LI
></UL
>
 This is why <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*FEATURES*</VAR
></A
> does not contain the
 <CODE
CLASS="constant"
>:IEEE-FLOATING-POINT</CODE
> keyword.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="lfd"
></A
><B
>Arbitrary Precision Floats. </B
>Long floats have variable mantissa length, which is a
 multiple of 16 (or 32, depending on the word size of the processor).
 The default length used when long floats are read is given by the
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> <TT
CLASS="sexp"
>(<A
HREF="#lfd"
><CODE
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</CODE
></A
>)</TT
>.  It can be set by <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>
 (<A
HREF="#lfd"
><CODE
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</CODE
></A
>) <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>, where <VAR
CLASS="replaceable"
>n</VAR
> is a positive integer.
 E.g., <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="#lfd"
><CODE
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</CODE
></A
>) 3322)</TT
> sets the
 default precision of long floats to about 1000 decimal digits.
</P
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="flocont"
>12.2.3.1. Rule of Float Precision Contagion
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html"
TARGET="_top"
>[CLHS-12.1.4.4]</A
></A
></H4
><P
ALIGN="justify"
>The floating point contagion is controlled by the variable
 <A
HREF="#flocont"
><VAR
CLASS="varname"
>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</VAR
></A
>.  When it is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, contagion is done as per the
 <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>: <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
> &#8594;
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Rationale:</DT
><DD
><P
ALIGN="justify"
>See it pragmatically: save what you can and let
  others worry about the rest.</P
></DD
><DT
>Brief:</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> knows the number's precision, not accuracy, so
  preserving the precision can be accomplished reliably, while anything
  relating to the accuracy is just a speculation - only the user
  (programmer) knows what it is in each case.
 </P
></DD
><DT
>Detailed:</DT
><DD
><P
ALIGN="justify"
>A computer float is an approximation of a real number.
  One can think of it as a random variable with the mean equal to
  itself and standard deviation equal to half the last significant digit.
  E.g., <TT
CLASS="literal"
>1.5</TT
> is actually <TT
CLASS="literal"
>1.5±0.05</TT
>.
  Consider adding <TT
CLASS="literal"
>1.5</TT
> and <TT
CLASS="literal"
>1.75</TT
>.
  <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> requires that <TT
CLASS="sexp"
>(+ 1.5 1.75)</TT
>
  return <TT
CLASS="literal"
>3.25</TT
>, while traditional <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> would return
  <TT
CLASS="literal"
>3.3</TT
>.  The implied random variables are:
  <TT
CLASS="literal"
>3.25±0.005</TT
> and <TT
CLASS="literal"
>3.3±0.05</TT
>.
  Note that the traditional <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> way <B
CLASS="emphasis"
>does</B
>
  lie about the mean: the mean <B
CLASS="emphasis"
>is</B
>
  <TT
CLASS="literal"
>3.25</TT
> and nothing else, while the standard way
  <B
CLASS="emphasis"
>could</B
> be lying about the deviation
  (accuracy): if the implied accuracy of <TT
CLASS="literal"
>1.5 (0.05)</TT
>
  is its actual accuracy, then the accuracy of the result cannot be
  smaller that that.  Therefore, since <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> has no way of knowing the
  actual accuracy, <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> (and all the other standard engineering
  programming languages, like <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>, FORTRAN etc) decides that
  keeping the accuracy correct is the business of the programmer, while
  the language should preserve what it can - the precision.
  </P
></DD
><DT
>Experience:</DT
><DD
><P
ALIGN="justify"
> Rounding errors accumulate, and if a computation
  is conducted with insufficient precision, an outright incorrect
  result can be returned.
  (E.g., <TT
CLASS="literal"
>E(x<SUP
>2</SUP
>) -
  E(x)<SUP
>2</SUP
></TT
> can be negative!)
  The user should not mix floats of different precision (that's what
  <A
HREF="#warn-fpc"
><VAR
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</VAR
></A
> is for), but one should not be penalized for this too
  harshly.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>When <A
HREF="#flocont"
><VAR
CLASS="varname"
>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the traditional <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> method is used,
 namely the result of an arithmetic operation whose arguments are of
 different float types is rounded to the float format of the shortest
 (least precise) of the arguments: <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIONAL</CODE
></A
> &#8594;
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
> &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
>
 &#8594; <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
> (in contrast to <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-4-4.html"
TARGET="_top"
>12.1.4.4 Rule of Float Precision
 Contagion</A
>!)</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Rationale:</DT
><DD
><P
ALIGN="justify"
> See it mathematically.  Add intervals:
  <TT
CLASS="literal"
>{1.0 ± 1e-8} + {1.0 ± 1e-16} = {2.0 ±
  1e-8}</TT
>.  So, if we add <TT
CLASS="literal"
>1.0s0</TT
> and
  <TT
CLASS="literal"
>1.0d0</TT
>, we should get <TT
CLASS="literal"
>2.0s0</TT
>.
  </P
></DD
><DT
>Brief:</DT
><DD
><P
ALIGN="justify"
>Do not suggest accuracy of a result by giving it a
  precision that is greater than its accuracy.
  </P
></DD
><DT
>Example:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(- (+ 1.7 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
>) <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
>)</TT
>
  should not return <TT
CLASS="literal"
>1.700000726342836417234L0</TT
>, it
  should return <TT
CLASS="literal"
>1.7f0</TT
> (or
  <TT
CLASS="literal"
>1.700001f0</TT
> if there were rounding errors).
  </P
></DD
><DT
>Experience:</DT
><DD
><P
ALIGN="justify"
>If in a computation using thousands of <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>s,
  a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
> (like <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
>) happens to be used, the long precision
  should not propagate throughout all the intermediate values.
  Otherwise, the long result would look precise, but its accuracy is
  only that of a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>; furthermore much computation time
  would be lost by calculating with <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
>s when only
  <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>s would be needed.
  </P
></DD
></DL
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="warn-fpc"
></A
><B
>Variable <A
HREF="#warn-fpc"
><VAR
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</VAR
></A
>. </B
>If the variable <A
HREF="#warn-fpc"
><VAR
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, a warning is emitted for
 every coercion involving different floating-point types.
 As explained above, float precision contagion is not a good idea,
 this is why <A
HREF="#warn-fpc"
><VAR
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</VAR
></A
> is set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> initially.
 You can avoid the contagion by doing all your computations with the
 same floating-point type (and using <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_float.html"
TARGET="_top"
><CODE
CLASS="function"
>FLOAT</CODE
></A
> to convert all constants,
 e.g., <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
>, to your preferred type).
 Set it to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_error.html"
TARGET="_top"
><CODE
CLASS="function"
>ERROR</CODE
></A
> to have <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> on float
 precision contagion.</P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="complex-comp"
>12.2.4. Complex Computations
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-5.html"
TARGET="_top"
>[CLHS-12.1.5]</A
></A
></H3
><P
ALIGN="justify"
>Complex numbers can have a real part and an imaginary part of
 different types. For example, <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html"
TARGET="_top"
><CODE
CLASS="function"
>SQRT</CODE
></A
>
 -9.0)</TT
> evaluates to the number <TT
CLASS="literal"
>#C(0 3.0)</TT
>,
 which has a real part of exactly <TT
CLASS="literal"
>0</TT
>, not only
 <TT
CLASS="literal"
>0.0</TT
> (which would mean "approximately 0").</P
><P
ALIGN="justify"
>The type specifier for this is <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
>)</TT
>, and <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> <VAR
CLASS="varname"
>type-of-real-part</VAR
>
 <VAR
CLASS="varname"
>type-of-imaginary-part</VAR
>)</TT
> in general.</P
><P
ALIGN="justify"
>The type specifier <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
>
 <VAR
CLASS="replaceable"
>type</VAR
>)</TT
> is equivalent to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> <VAR
CLASS="replaceable"
>type</VAR
> <VAR
CLASS="replaceable"
>type</VAR
>)</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="complex-rational"
>12.2.5. Rule of
   Canonical Representation for Complex Rationals
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_12-1-5-3.html"
TARGET="_top"
>[CLHS-12.1.5.3]</A
></A
></H3
><P
ALIGN="justify"
>Complex numbers can have a real part and an imaginary part of
 different types.  If the imaginary part is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
> to <TT
CLASS="literal"
>0</TT
>,
 the number is automatically converted to a real number.</P
><P
ALIGN="justify"
>This has the advantage that
   <TT
CLASS="sexp"
>(let ((x (sqrt -9.0))) (* x x))</TT
>
 - instead of evaluating to <TT
CLASS="literal"
>#C(-9.0 0.0)</TT
>,
 with <VAR
CLASS="replaceable"
>x</VAR
> = <TT
CLASS="literal"
>#C(0.0 3.0)</TT
> - evaluates to
 <TT
CLASS="literal"
>#C(-9.0 0)</TT
> = <TT
CLASS="literal"
>-9.0</TT
>,
 with <VAR
CLASS="replaceable"
>x</VAR
> = <TT
CLASS="literal"
>#C(0 3.0)</TT
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="num-dict"
>12.3. The Numbers Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_numbers_dictionary.html"
TARGET="_top"
>[CLHS-12.2]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html"
TARGET="_top"
><CODE
CLASS="function"
>UPGRADED-COMPLEX-PART-TYPE</CODE
></A
>. </B
>When the argument is not a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype"
TARGET="_top"
>recognizable subtype</A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
TARGET="_top"
><CODE
CLASS="classname"
>REAL</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_upgraded-_ex-part-type.html"
TARGET="_top"
><CODE
CLASS="function"
>UPGRADED-COMPLEX-PART-TYPE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>s an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>,
 otherwise it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
TARGET="_top"
><CODE
CLASS="classname"
>REAL</CODE
></A
>, since a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> number in
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> can always have <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html"
TARGET="_top"
><CODE
CLASS="function"
>REALPART</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_realpartcm_imagpart.html"
TARGET="_top"
><CODE
CLASS="function"
>IMAGPART</CODE
></A
> of any type.
</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="default-float-format"
></A
><B
>Variable <A
HREF="#default-float-format"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-FLOAT-FORMAT*</VAR
></A
>. </B
>When rational numbers are to be converted to floats (due to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_float.html"
TARGET="_top"
><CODE
CLASS="function"
>FLOAT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sqrtcm_isqrt.html"
TARGET="_top"
><CODE
CLASS="function"
>SQRT</CODE
></A
> or a transcendental function), the result
 type is given by the variable <A
HREF="#default-float-format"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-FLOAT-FORMAT*</VAR
></A
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="no-underflow"
></A
><B
>Macro <A
HREF="#no-underflow"
><CODE
CLASS="function"
>EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</CODE
></A
>. </B
>The macro <TT
CLASS="sexp"
>(<A
HREF="#no-underflow"
><CODE
CLASS="function"
>EXT:WITHOUT-FLOATING-POINT-UNDERFLOW</CODE
></A
>
 {<VAR
CLASS="replaceable"
>form</VAR
>}*)</TT
> executes the <VAR
CLASS="replaceable"
>form</VAR
>s, with errors of type
 <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOATING-POINT-UNDERFLOW</CODE
></A
> inhibited.  Floating point operations
 will silently return zero instead of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>ling an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> of type
 <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_floati_nt-underflow.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOATING-POINT-UNDERFLOW</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="int-func-ext"
>12.3.1. Additional Integer Functions</A
></H3
><DIV
CLASS="formalpara"
><P
><B
>Function <CODE
CLASS="function"
>EXT:!</CODE
> </B
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:!</CODE
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>
 returns the factorial of <VAR
CLASS="replaceable"
>n</VAR
>, <VAR
CLASS="replaceable"
>n</VAR
> being a nonnegative
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <CODE
CLASS="function"
>EXT:EXQUO</CODE
>. </B
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:EXQUO</CODE
> <VAR
CLASS="replaceable"
>x</VAR
>
 <VAR
CLASS="replaceable"
>y</VAR
>)</TT
> returns the integer quotient <VAR
CLASS="varname"
>x/y</VAR
> of
 two integers <VAR
CLASS="replaceable"
>x</VAR
>,<VAR
CLASS="replaceable"
>y</VAR
>, and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>s an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> when the quotient
 is not integer.  (This is more efficient than <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sl.html"
TARGET="_top"
><CODE
CLASS="function"
>/</CODE
></A
>.)</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <CODE
CLASS="function"
>EXT:XGCD</CODE
>. </B
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:XGCD</CODE
>
 <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
> ... <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>)</TT
>
 returns the values <VAR
CLASS="replaceable"
>l</VAR
>, <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
>, ..., <VAR
CLASS="replaceable"
>k<SUB
>n</SUB
></VAR
>, where <VAR
CLASS="replaceable"
>l</VAR
> is the
 greatest common divisor of the integers <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
>, ..., <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>, and
 <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
>, ..., <VAR
CLASS="replaceable"
>k<SUB
>n</SUB
></VAR
> are the integer coefficients such that
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; <VAR
CLASS="replaceable"
>l</VAR
> = (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_gcd.html"
TARGET="_top"
><CODE
CLASS="function"
>GCD</CODE
></A
> <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
> ... <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>)
   = (+ (* <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
>) ... (* <VAR
CLASS="replaceable"
>k<SUB
>n</SUB
></VAR
> <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>))
</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="float-notes"
>12.3.2. Floating Point</A
></H3
><DIV
CLASS="formalpara"
><P
><A
NAME="expt"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPT</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_expcm_expt.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPT</CODE
></A
> <VAR
CLASS="replaceable"
>base</VAR
>
 <VAR
CLASS="replaceable"
>exponent</VAR
>)</TT
> is not very precise if
 <VAR
CLASS="replaceable"
>exponent</VAR
> has a large absolute value.
</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="log"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_log.html"
TARGET="_top"
><CODE
CLASS="function"
>LOG</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_log.html"
TARGET="_top"
><CODE
CLASS="function"
>LOG</CODE
></A
> <VAR
CLASS="replaceable"
>number</VAR
> <VAR
CLASS="replaceable"
>base</VAR
>)</TT
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>s
 an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> if <TT
CLASS="literal"
><VAR
CLASS="replaceable"
>base</VAR
> = 1</TT
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="pi"
></A
><B
>Constant <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
>. </B
>The value of <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>LONG-FLOAT</CODE
></A
> with the precision given
  by <TT
CLASS="sexp"
>(<A
HREF="#lfd"
><CODE
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</CODE
></A
>)</TT
>.  When this precision is changed, the value of <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
> is
  automatically recomputed.  Therefore <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
> is <I
CLASS="emphasis"
>not</I
> a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_c.html#constant_variable"
TARGET="_top"
>constant variable</A
>.
</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="float-decode"
>12.3.3. Float Decoding
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
TARGET="_top"
>[CLHS]</A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
TARGET="_top"
><CODE
CLASS="function"
>FLOAT-RADIX</CODE
></A
> always returns <TT
CLASS="literal"
>2</TT
>.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
TARGET="_top"
><CODE
CLASS="function"
>FLOAT-DIGITS</CODE
></A
> <VAR
CLASS="replaceable"
>number</VAR
>
   <VAR
CLASS="replaceable"
>digits</VAR
>)</TT
> coerces <VAR
CLASS="replaceable"
>number</VAR
> (a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_real.html"
TARGET="_top"
><CODE
CLASS="classname"
>REAL</CODE
></A
> number) to a
  floating point number with at least <VAR
CLASS="replaceable"
>digits</VAR
> mantissa digits.
  The following always evaluates to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>:
  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;   (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html"
TARGET="_top"
><CODE
CLASS="function"
>&#62;=</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
TARGET="_top"
><CODE
CLASS="function"
>FLOAT-DIGITS</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_decode-fl_decode-float.html"
TARGET="_top"
><CODE
CLASS="function"
>FLOAT-DIGITS</CODE
></A
> <VAR
CLASS="replaceable"
>number</VAR
> <VAR
CLASS="replaceable"
>digits</VAR
>)) <VAR
CLASS="replaceable"
>digits</VAR
>)
 </PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="bool-ops"
>12.3.4. Boolean Operations
  <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
>[CLHS]</A
></A
></H3
><DIV
CLASS="table"
><A
NAME="bool-op-table"
></A
><P
><B
>Table 12-1. Boolean Operations</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>constant</TH
><TH
>value</TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-CLR</CODE
></A
></TD
><TD
>0</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-SET</CODE
></A
></TD
><TD
>15</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-1</CODE
></A
></TD
><TD
>10</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-2</CODE
></A
></TD
><TD
>12</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-C1</CODE
></A
></TD
><TD
>5</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-C2</CODE
></A
></TD
><TD
>3</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-AND</CODE
></A
></TD
><TD
>8</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-IOR</CODE
></A
></TD
><TD
>14</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-XOR</CODE
></A
></TD
><TD
>6</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-EQV</CODE
></A
></TD
><TD
>9</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-NAND</CODE
></A
></TD
><TD
>7</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-NOR</CODE
></A
></TD
><TD
>1</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-ANDC1</CODE
></A
></TD
><TD
>4</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-ANDC2</CODE
></A
></TD
><TD
>2</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-ORC1</CODE
></A
></TD
><TD
>13</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_boole-_cm_boole-xor.html"
TARGET="_top"
><CODE
CLASS="constant"
>BOOLE-ORC2</CODE
></A
></TD
><TD
>11</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="fixnum-lim"
>12.3.5. Fixnum Limits
  <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html"
TARGET="_top"
>[CLHS]</A
></A
></H3
><DIV
CLASS="table"
><A
NAME="fixnum-lim-table"
></A
><P
><B
>Table 12-2. Fixnum limits</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
TITLE="vars"><COL
WIDTH="1*"
TITLE="b16"><COL
WIDTH="1*"
TITLE="b32"><COL
WIDTH="1*"
TITLE="b64"><THEAD
><TR
><TH
>CPU type</TH
><TH
>16-bit CPU</TH
><TH
>32-bit CPU</TH
><TH
>64-bit CPU</TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html"
TARGET="_top"
><CODE
CLASS="constant"
>MOST-POSITIVE-FIXNUM</CODE
></A
></TD
><TD
COLSPAN="2"
ALIGN="center"
>2<SUP
>24</SUP
>-1 = 16777215</TD
><TD
>2<SUP
>32</SUP
>-1 = 4294967295</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html"
TARGET="_top"
><CODE
CLASS="constant"
>MOST-NEGATIVE-FIXNUM</CODE
></A
></TD
><TD
COLSPAN="2"
ALIGN="center"
>-2<SUP
>24</SUP
> = -16777216</TD
><TD
>-2<SUP
>32</SUP
> = -4294967296</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="float-lim"
>12.3.6. Float Limits
  <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
TARGET="_top"
>[CLHS]</A
></A
></H3
><P
ALIGN="justify"
>Together with <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_pi.html"
TARGET="_top"
><CODE
CLASS="constant"
>PI</CODE
></A
>, the other long float constants
  <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
TARGET="_top"
><CODE
CLASS="constant"
>LEAST-NEGATIVE-LONG-FLOAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
TARGET="_top"
><CODE
CLASS="constant"
>LEAST-NEGATIVE-NORMALIZED-LONG-FLOAT</CODE
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
TARGET="_top"
><CODE
CLASS="constant"
>LEAST-POSITIVE-LONG-FLOAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
TARGET="_top"
><CODE
CLASS="constant"
>LEAST-POSITIVE-NORMALIZED-LONG-FLOAT</CODE
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html"
TARGET="_top"
><CODE
CLASS="constant"
>LONG-FLOAT-EPSILON</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_short-_tive-epsilon.html"
TARGET="_top"
><CODE
CLASS="constant"
>LONG-FLOAT-NEGATIVE-EPSILON</CODE
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
TARGET="_top"
><CODE
CLASS="constant"
>MOST-NEGATIVE-LONG-FLOAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_d-long-float.html"
TARGET="_top"
><CODE
CLASS="constant"
>MOST-POSITIVE-LONG-FLOAT</CODE
></A
> are recomputed
  whenever <TT
CLASS="sexp"
>(<A
HREF="#lfd"
><CODE
CLASS="function"
>EXT:LONG-FLOAT-DIGITS</CODE
></A
>)</TT
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>ed.  They are <I
CLASS="emphasis"
>not</I
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_c.html#constant_variable"
TARGET="_top"
>constant variable</A
>s.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="float-invalid-op"
>12.3.7. Condition <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_floati_id-operation.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOATING-POINT-INVALID-OPERATION</CODE
></A
></A
></H3
><P
ALIGN="justify"
>This <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_condition.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONDITION</CODE
></A
> is never <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>ed by <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="float-inexact"
>12.3.8. Condition <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_floati_oint-inexact.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOATING-POINT-INEXACT</CODE
></A
></A
></H3
><P
ALIGN="justify"
>This <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_condition.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONDITION</CODE
></A
> is never <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>ed by <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="characters"
></A
>Chapter 13. Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-13.html"
TARGET="_top"
>[CLHS-13]</A
></H1
><P
ALIGN="justify"
>The characters are ordered according to a superset of the
 <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built
  <B
CLASS="emphasis"
>with</B
> the compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</DT
><DD
><P
ALIGN="justify"
>More precisely, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> uses the 21-bit <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> 3.2
 character set (ISO 10646, also known as UCS-4).
</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
> platforms only, and
   only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built <B
CLASS="emphasis"
>without</B
> compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</DT
><DD
><P
ALIGN="justify"
>More precisely, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> uses the IBM PC character set
 (code page 437):
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="ibmpc-charset-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>&nbsp;</TH
><TH
>#x0</TH
><TH
>#x1</TH
><TH
>#x2</TH
><TH
>#x3</TH
><TH
>#x4</TH
><TH
>#x5</TH
><TH
>#x6</TH
><TH
>#x7</TH
><TH
>#x8</TH
><TH
>#x9</TH
><TH
>#xA</TH
><TH
>#xB</TH
><TH
>#xC</TH
><TH
>#xD</TH
><TH
>#xE</TH
><TH
>#xF</TH
></TR
></THEAD
><TBODY
><TR
><TD
>#x00</TD
><TD
>**</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>∂</TD
><TD
>ß</TD
></TR
><TR
><TD
>#x10</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>**</TD
><TD
>**</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>#x20</TD
><TD
>†</TD
><TD
>!</TD
><TD
>"</TD
><TD
>#</TD
><TD
>$</TD
><TD
>%</TD
><TD
>&#38;</TD
><TD
>'</TD
><TD
>(</TD
><TD
>)</TD
><TD
>*</TD
><TD
>+</TD
><TD
>,</TD
><TD
>-</TD
><TD
>.</TD
><TD
>/</TD
></TR
><TR
><TD
>#x30</TD
><TD
>0</TD
><TD
>1</TD
><TD
>2</TD
><TD
>3</TD
><TD
>4</TD
><TD
>5</TD
><TD
>6</TD
><TD
>7</TD
><TD
>8</TD
><TD
>9</TD
><TD
>:</TD
><TD
>;</TD
><TD
>&#60;</TD
><TD
>=</TD
><TD
>&#62;</TD
><TD
>?</TD
></TR
><TR
><TD
>#x40</TD
><TD
>@</TD
><TD
>A</TD
><TD
>B</TD
><TD
>C</TD
><TD
>D</TD
><TD
>E</TD
><TD
>F</TD
><TD
>G</TD
><TD
>H</TD
><TD
>I</TD
><TD
>J</TD
><TD
>K</TD
><TD
>L</TD
><TD
>M</TD
><TD
>N</TD
><TD
>O</TD
></TR
><TR
><TD
>#x50</TD
><TD
>P</TD
><TD
>Q</TD
><TD
>R</TD
><TD
>S</TD
><TD
>T</TD
><TD
>U</TD
><TD
>V</TD
><TD
>W</TD
><TD
>X</TD
><TD
>Y</TD
><TD
>Z</TD
><TD
>[</TD
><TD
>\</TD
><TD
>]</TD
><TD
>^</TD
><TD
>_</TD
></TR
><TR
><TD
>#x60</TD
><TD
>`</TD
><TD
>a</TD
><TD
>b</TD
><TD
>c</TD
><TD
>d</TD
><TD
>e</TD
><TD
>f</TD
><TD
>g</TD
><TD
>h</TD
><TD
>i</TD
><TD
>j</TD
><TD
>k</TD
><TD
>l</TD
><TD
>m</TD
><TD
>n</TD
><TD
>o</TD
></TR
><TR
><TD
>#x70</TD
><TD
>p</TD
><TD
>q</TD
><TD
>r</TD
><TD
>s</TD
><TD
>t</TD
><TD
>u</TD
><TD
>v</TD
><TD
>w</TD
><TD
>x</TD
><TD
>y</TD
><TD
>z</TD
><TD
>{</TD
><TD
>|</TD
><TD
>}</TD
><TD
>~</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>#x80</TD
><TD
>«</TD
><TD
>¸</TD
><TD
>È</TD
><TD
>‚</TD
><TD
>‰</TD
><TD
>‡</TD
><TD
>Â</TD
><TD
>Á</TD
><TD
>Í</TD
><TD
>Î</TD
><TD
>Ë</TD
><TD
>Ô</TD
><TD
>Ó</TD
><TD
>Ï</TD
><TD
>ƒ</TD
><TD
>≈</TD
></TR
><TR
><TD
>#x90</TD
><TD
>…</TD
><TD
>Ê</TD
><TD
>∆</TD
><TD
>Ù</TD
><TD
>ˆ</TD
><TD
>Ú</TD
><TD
>˚</TD
><TD
>˘</TD
><TD
>ˇ</TD
><TD
>÷</TD
><TD
>‹</TD
><TD
>¢</TD
><TD
>£</TD
><TD
>•</TD
><TD
>&#8359;</TD
><TD
>&#402;</TD
></TR
><TR
><TD
>#xA0</TD
><TD
>·</TD
><TD
>Ì</TD
><TD
>Û</TD
><TD
>˙</TD
><TD
>Ò</TD
><TD
>—</TD
><TD
>™</TD
><TD
>∫</TD
><TD
>ø</TD
><TD
>&#8976;</TD
><TD
>¨</TD
><TD
>Ω</TD
><TD
>º</TD
><TD
>°</TD
><TD
>´</TD
><TD
>ª</TD
></TR
><TR
><TD
>#xB0</TD
><TD
>&#9617;</TD
><TD
>&#9618;</TD
><TD
>&#9619;</TD
><TD
>&#9474;</TD
><TD
>&#9508;</TD
><TD
>&#9569;</TD
><TD
>&#9570;</TD
><TD
>&#9558;</TD
><TD
>&#9557;</TD
><TD
>&#9571;</TD
><TD
>&#9553;</TD
><TD
>&#9559;</TD
><TD
>&#9565;</TD
><TD
>&#9564;</TD
><TD
>&#9563;</TD
><TD
>&#9488;</TD
></TR
><TR
><TD
>#xC0</TD
><TD
>&#9492;</TD
><TD
>&#9524;</TD
><TD
>&#9516;</TD
><TD
>&#9500;</TD
><TD
>&#9472;</TD
><TD
>&#9532;</TD
><TD
>&#9566;</TD
><TD
>&#9567;</TD
><TD
>&#9562;</TD
><TD
>&#9556;</TD
><TD
>&#9577;</TD
><TD
>&#9574;</TD
><TD
>&#9568;</TD
><TD
>&#9552;</TD
><TD
>&#9580;</TD
><TD
>&#9575;</TD
></TR
><TR
><TD
>#xD0</TD
><TD
>&#9576;</TD
><TD
>&#9572;</TD
><TD
>&#9573;</TD
><TD
>&#9561;</TD
><TD
>&#9560;</TD
><TD
>&#9554;</TD
><TD
>&#9555;</TD
><TD
>&#9563;</TD
><TD
>&#9562;</TD
><TD
>&#9496;</TD
><TD
>&#9484;</TD
><TD
>&#9608;</TD
><TD
>&#9604;</TD
><TD
>&#9612;</TD
><TD
>&#9616;</TD
><TD
>&#9600;</TD
></TR
><TR
><TD
>#xE0</TD
><TD
>&#945;</TD
><TD
>ﬂ</TD
><TD
>&#915;</TD
><TD
>&#960;</TD
><TD
>&#931;</TD
><TD
>&#963;</TD
><TD
>µ</TD
><TD
>&#964;</TD
><TD
>&#934;</TD
><TD
>&#920;</TD
><TD
>&#937;</TD
><TD
>&#948;</TD
><TD
>&#8734;</TD
><TD
>&#966;</TD
><TD
>&#8714;</TD
><TD
>&#8745;</TD
></TR
><TR
><TD
>#xF0</TD
><TD
>&#8801;</TD
><TD
>±</TD
><TD
>&#8805;</TD
><TD
>&#8804;</TD
><TD
>&#8992;</TD
><TD
>&#8993;</TD
><TD
>˜</TD
><TD
>&#8781;</TD
><TD
>∞</TD
><TD
>&#8729;</TD
><TD
>∑</TD
><TD
>&#8730;</TD
><TD
>&#8319;</TD
><TD
>≤</TD
><TD
>&#9632;</TD
><TD
>†</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
>
 Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> (except <A
HREF="http://www.next.com/"
TARGET="_top"
><B
CLASS="emphasis"
>NeXTstep</B
></A
>),
   <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>, <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms only, and only in
   <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built <B
CLASS="emphasis"
>without</B
> compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</DT
><DD
><P
ALIGN="justify"
>More precisely, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> uses the ISO Latin-1 (ISO
 8859-1) character set:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="latin-1-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>&nbsp;</TH
><TH
>#x0</TH
><TH
>#x1</TH
><TH
>#x2</TH
><TH
>#x3</TH
><TH
>#x4</TH
><TH
>#x5</TH
><TH
>#x6</TH
><TH
>#x7</TH
><TH
>#x8</TH
><TH
>#x9</TH
><TH
>#xA</TH
><TH
>#xB</TH
><TH
>#xC</TH
><TH
>#xD</TH
><TH
>#xE</TH
><TH
>#xF</TH
></TR
></THEAD
><TBODY
><TR
><TD
>#x00</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
></TR
><TR
><TD
>#x10</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
></TR
><TR
><TD
>#x20</TD
><TD
>†</TD
><TD
>!</TD
><TD
>"</TD
><TD
>#</TD
><TD
>$</TD
><TD
>%</TD
><TD
>&#38;</TD
><TD
>'</TD
><TD
>(</TD
><TD
>)</TD
><TD
>*</TD
><TD
>+</TD
><TD
>,</TD
><TD
>-</TD
><TD
>.</TD
><TD
>/</TD
></TR
><TR
><TD
>#x30</TD
><TD
>0</TD
><TD
>1</TD
><TD
>2</TD
><TD
>3</TD
><TD
>4</TD
><TD
>5</TD
><TD
>6</TD
><TD
>7</TD
><TD
>8</TD
><TD
>9</TD
><TD
>:</TD
><TD
>;</TD
><TD
>&#60;</TD
><TD
>=</TD
><TD
>&#62;</TD
><TD
>?</TD
></TR
><TR
><TD
>#x40</TD
><TD
>@</TD
><TD
>A</TD
><TD
>B</TD
><TD
>C</TD
><TD
>D</TD
><TD
>E</TD
><TD
>F</TD
><TD
>G</TD
><TD
>H</TD
><TD
>I</TD
><TD
>J</TD
><TD
>K</TD
><TD
>L</TD
><TD
>M</TD
><TD
>N</TD
><TD
>O</TD
></TR
><TR
><TD
>#x50</TD
><TD
>P</TD
><TD
>Q</TD
><TD
>R</TD
><TD
>S</TD
><TD
>T</TD
><TD
>U</TD
><TD
>V</TD
><TD
>W</TD
><TD
>X</TD
><TD
>Y</TD
><TD
>Z</TD
><TD
>[</TD
><TD
>\</TD
><TD
>]</TD
><TD
>^</TD
><TD
>_</TD
></TR
><TR
><TD
>#x60</TD
><TD
>`</TD
><TD
>a</TD
><TD
>b</TD
><TD
>c</TD
><TD
>d</TD
><TD
>e</TD
><TD
>f</TD
><TD
>g</TD
><TD
>h</TD
><TD
>i</TD
><TD
>j</TD
><TD
>k</TD
><TD
>l</TD
><TD
>m</TD
><TD
>n</TD
><TD
>o</TD
></TR
><TR
><TD
>#x70</TD
><TD
>p</TD
><TD
>q</TD
><TD
>r</TD
><TD
>s</TD
><TD
>t</TD
><TD
>u</TD
><TD
>v</TD
><TD
>w</TD
><TD
>x</TD
><TD
>y</TD
><TD
>z</TD
><TD
>{</TD
><TD
>|</TD
><TD
>}</TD
><TD
>~</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>#x80</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>#x90</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>#xA0</TD
><TD
>†</TD
><TD
>°</TD
><TD
>¢</TD
><TD
>£</TD
><TD
>§</TD
><TD
>•</TD
><TD
>¶</TD
><TD
>ß</TD
><TD
>®</TD
><TD
>©</TD
><TD
>™</TD
><TD
>´</TD
><TD
>¨</TD
><TD
>≠</TD
><TD
>Æ</TD
><TD
>Ø</TD
></TR
><TR
><TD
>#xB0</TD
><TD
>∞</TD
><TD
>±</TD
><TD
>≤</TD
><TD
>≥</TD
><TD
>¥</TD
><TD
>µ</TD
><TD
>∂</TD
><TD
>∑</TD
><TD
>∏</TD
><TD
>π</TD
><TD
>∫</TD
><TD
>ª</TD
><TD
>º</TD
><TD
>Ω</TD
><TD
>æ</TD
><TD
>ø</TD
></TR
><TR
><TD
>#xC0</TD
><TD
>¿</TD
><TD
>¡</TD
><TD
>¬</TD
><TD
>√</TD
><TD
>ƒ</TD
><TD
>≈</TD
><TD
>∆</TD
><TD
>«</TD
><TD
>»</TD
><TD
>…</TD
><TD
> </TD
><TD
>À</TD
><TD
>Ã</TD
><TD
>Õ</TD
><TD
>Œ</TD
><TD
>œ</TD
></TR
><TR
><TD
>#xD0</TD
><TD
>–</TD
><TD
>—</TD
><TD
>“</TD
><TD
>”</TD
><TD
>‘</TD
><TD
>’</TD
><TD
>÷</TD
><TD
>◊</TD
><TD
>ÿ</TD
><TD
>Ÿ</TD
><TD
>⁄</TD
><TD
>€</TD
><TD
>‹</TD
><TD
>›</TD
><TD
>ﬁ</TD
><TD
>ﬂ</TD
></TR
><TR
><TD
>#xE0</TD
><TD
>‡</TD
><TD
>·</TD
><TD
>‚</TD
><TD
>„</TD
><TD
>‰</TD
><TD
>Â</TD
><TD
>Ê</TD
><TD
>Á</TD
><TD
>Ë</TD
><TD
>È</TD
><TD
>Í</TD
><TD
>Î</TD
><TD
>Ï</TD
><TD
>Ì</TD
><TD
>Ó</TD
><TD
>Ô</TD
></TR
><TR
><TD
>#xF0</TD
><TD
></TD
><TD
>Ò</TD
><TD
>Ú</TD
><TD
>Û</TD
><TD
>Ù</TD
><TD
>ı</TD
><TD
>ˆ</TD
><TD
>˜</TD
><TD
>¯</TD
><TD
>˘</TD
><TD
>˙</TD
><TD
>˚</TD
><TD
>¸</TD
><TD
>˝</TD
><TD
>˛</TD
><TD
>ˇ</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.next.com/"
TARGET="_top"
><B
CLASS="emphasis"
>NeXTstep</B
></A
> platforms only, and
 only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built <B
CLASS="emphasis"
>without</B
> compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</DT
><DD
><P
ALIGN="justify"
>More precisely, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> uses the <A
HREF="http://www.next.com/"
TARGET="_top"
><B
CLASS="emphasis"
>NeXTstep</B
></A
> character set:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="next-charset-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>&nbsp;</TH
><TH
>#x0</TH
><TH
>#x1</TH
><TH
>#x2</TH
><TH
>#x3</TH
><TH
>#x4</TH
><TH
>#x5</TH
><TH
>#x6</TH
><TH
>#x7</TH
><TH
>#x8</TH
><TH
>#x9</TH
><TH
>#xA</TH
><TH
>#xB</TH
><TH
>#xC</TH
><TH
>#xD</TH
><TH
>#xE</TH
><TH
>#xF</TH
></TR
></THEAD
><TBODY
><TR
><TD
>#x00</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
></TR
><TR
><TD
>#x10</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
><TD
>**</TD
></TR
><TR
><TD
>#x20</TD
><TD
>†</TD
><TD
>!</TD
><TD
>"</TD
><TD
>#</TD
><TD
>$</TD
><TD
>%</TD
><TD
>&#38;</TD
><TD
>'</TD
><TD
>(</TD
><TD
>)</TD
><TD
>*</TD
><TD
>+</TD
><TD
>,</TD
><TD
>-</TD
><TD
>.</TD
><TD
>/</TD
></TR
><TR
><TD
>#x30</TD
><TD
>0</TD
><TD
>1</TD
><TD
>2</TD
><TD
>3</TD
><TD
>4</TD
><TD
>5</TD
><TD
>6</TD
><TD
>7</TD
><TD
>8</TD
><TD
>9</TD
><TD
>:</TD
><TD
>;</TD
><TD
>&#60;</TD
><TD
>=</TD
><TD
>&#62;</TD
><TD
>?</TD
></TR
><TR
><TD
>#x40</TD
><TD
>@</TD
><TD
>A</TD
><TD
>B</TD
><TD
>C</TD
><TD
>D</TD
><TD
>E</TD
><TD
>F</TD
><TD
>G</TD
><TD
>H</TD
><TD
>I</TD
><TD
>J</TD
><TD
>K</TD
><TD
>L</TD
><TD
>M</TD
><TD
>N</TD
><TD
>O</TD
></TR
><TR
><TD
>#x50</TD
><TD
>P</TD
><TD
>Q</TD
><TD
>R</TD
><TD
>S</TD
><TD
>T</TD
><TD
>U</TD
><TD
>V</TD
><TD
>W</TD
><TD
>X</TD
><TD
>Y</TD
><TD
>Z</TD
><TD
>[</TD
><TD
>\</TD
><TD
>]</TD
><TD
>^</TD
><TD
>_</TD
></TR
><TR
><TD
>#x60</TD
><TD
>`</TD
><TD
>a</TD
><TD
>b</TD
><TD
>c</TD
><TD
>d</TD
><TD
>e</TD
><TD
>f</TD
><TD
>g</TD
><TD
>h</TD
><TD
>i</TD
><TD
>j</TD
><TD
>k</TD
><TD
>l</TD
><TD
>m</TD
><TD
>n</TD
><TD
>o</TD
></TR
><TR
><TD
>#x70</TD
><TD
>p</TD
><TD
>q</TD
><TD
>r</TD
><TD
>s</TD
><TD
>t</TD
><TD
>u</TD
><TD
>v</TD
><TD
>w</TD
><TD
>x</TD
><TD
>y</TD
><TD
>z</TD
><TD
>{</TD
><TD
>|</TD
><TD
>}</TD
><TD
>~</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>#x80</TD
><TD
>†</TD
><TD
>¿</TD
><TD
>¡</TD
><TD
>¬</TD
><TD
>√</TD
><TD
>ƒ</TD
><TD
>≈</TD
><TD
>«</TD
><TD
>»</TD
><TD
>…</TD
><TD
> </TD
><TD
>À</TD
><TD
>Ã</TD
><TD
>Õ</TD
><TD
>Œ</TD
><TD
>œ</TD
></TR
><TR
><TD
>#x90</TD
><TD
>–</TD
><TD
>—</TD
><TD
>“</TD
><TD
>”</TD
><TD
>‘</TD
><TD
>’</TD
><TD
>÷</TD
><TD
>Ÿ</TD
><TD
>⁄</TD
><TD
>€</TD
><TD
>‹</TD
><TD
>›</TD
><TD
>ﬁ</TD
><TD
>µ</TD
><TD
>◊</TD
><TD
>˜</TD
></TR
><TR
><TD
>#xA0</TD
><TD
>©</TD
><TD
>°</TD
><TD
>¢</TD
><TD
>£</TD
><TD
>&#8260;</TD
><TD
>•</TD
><TD
>&#402;</TD
><TD
>ß</TD
><TD
>§</TD
><TD
>&#8217;</TD
><TD
>&#8220;</TD
><TD
>´</TD
><TD
>&#8249;</TD
><TD
>&#8250;</TD
><TD
>&#64257;</TD
><TD
>&#64258;</TD
></TR
><TR
><TD
>#xB0</TD
><TD
>Æ</TD
><TD
>&#8211;</TD
><TD
>&#8224;</TD
><TD
>&#8225;</TD
><TD
>∑</TD
><TD
>¶</TD
><TD
>∂</TD
><TD
>&#8226;</TD
><TD
>&#8218;</TD
><TD
>&#8222;</TD
><TD
>&#8221;</TD
><TD
>ª</TD
><TD
>&#8230;</TD
><TD
>&#8240;</TD
><TD
>¨</TD
><TD
>ø</TD
></TR
><TR
><TD
>#xC0</TD
><TD
>π</TD
><TD
>&#715;</TD
><TD
>¥</TD
><TD
>^</TD
><TD
>&#732;</TD
><TD
>Ø</TD
><TD
>&#728;</TD
><TD
>&#729;</TD
><TD
>®</TD
><TD
>≤</TD
><TD
>&#730;</TD
><TD
>∏</TD
><TD
>≥</TD
><TD
>&#733;</TD
><TD
>&#731;</TD
><TD
>&#711;</TD
></TR
><TR
><TD
>#xD0</TD
><TD
>&#8212;</TD
><TD
>±</TD
><TD
>º</TD
><TD
>Ω</TD
><TD
>æ</TD
><TD
>‡</TD
><TD
>·</TD
><TD
>‚</TD
><TD
>„</TD
><TD
>‰</TD
><TD
>Â</TD
><TD
>Á</TD
><TD
>Ë</TD
><TD
>È</TD
><TD
>Í</TD
><TD
>Î</TD
></TR
><TR
><TD
>#xE0</TD
><TD
>Ï</TD
><TD
>∆</TD
><TD
>Ì</TD
><TD
>™</TD
><TD
>Ó</TD
><TD
>Ô</TD
><TD
></TD
><TD
>Ò</TD
><TD
>&#321;</TD
><TD
>ÿ</TD
><TD
>&#338;</TD
><TD
>∫</TD
><TD
>Ú</TD
><TD
>Û</TD
><TD
>Ù</TD
><TD
>ı</TD
></TR
><TR
><TD
>#xF0</TD
><TD
>ˆ</TD
><TD
>Ê</TD
><TD
>˘</TD
><TD
>˙</TD
><TD
>˚</TD
><TD
>&#305;</TD
><TD
>¸</TD
><TD
>˝</TD
><TD
>&#322;</TD
><TD
>¯</TD
><TD
>&#339;</TD
><TD
>ﬂ</TD
><TD
>˛</TD
><TD
>ˇ</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
>
Here ** are control characters, not graphic
  characters.  (The characters left blank here cannot be represented in
  this character set).
</P
></DD
></DL
></DIV
><DIV
CLASS="table"
><A
NAME="standard-char-table"
></A
><P
><B
>Table 13-1. Standard characters</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>character</TH
><TH
>code</TH
></TR
></THEAD
><TBODY
><TR
><TD
><SPAN
CLASS="keysym"
>#\Space</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x20</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\Newline</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x0A</SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="semi-standard-char-table"
></A
><P
><B
>Table 13-2. Semi-standard characters</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>character</TH
><TH
>code</TH
></TR
></THEAD
><TBODY
><TR
><TD
><SPAN
CLASS="keysym"
>#\Backspace</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x08</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\Tab</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x09</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\Linefeed</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x0A</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\Page</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x0C</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\Return</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x0D</SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
><SPAN
CLASS="keysym"
>#\Newline</SPAN
> is the <A
HREF="#newline"
>line terminator</A
>.</P
><DIV
CLASS="table"
><A
NAME="extra-named-chars-table"
></A
><P
><B
>Table 13-3. Additional Named Characters</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>character</TH
><TH
>code</TH
></TR
></THEAD
><TBODY
><TR
><TD
><SPAN
CLASS="keysym"
>#\Null</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x00</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\Bell</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x07</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\Escape</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x1B</SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="ctrl-char-table"
></A
><P
><B
>Table 13-4. Additional syntax for characters with code from
   <SPAN
CLASS="keycode"
>#x00</SPAN
> to <SPAN
CLASS="keycode"
>#x1F</SPAN
>:</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>character</TH
><TH
>code</TH
></TR
></THEAD
><TBODY
><TR
><TD
><SPAN
CLASS="keysym"
>#\^@</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x00</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\^A</SPAN
> &#8230; <SPAN
CLASS="keysym"
>#\^Z</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x01</SPAN
> &#8230;
                   <SPAN
CLASS="keycode"
>#x1A</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\^[</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x1B</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\^\</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x1C</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\^]</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x1D</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\^^</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x1E</SPAN
></TD
></TR
><TR
><TD
><SPAN
CLASS="keysym"
>#\^_</SPAN
></TD
><TD
><SPAN
CLASS="keycode"
>#x1F</SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
>See also the section <A
HREF="#chario"
>Character
 I/O</A
>.</P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="input-char"
>13.1. Attributes</A
></H2
><P
ALIGN="justify"
>Characters do not have the <A
HREF="#CLtL1"
>[<SPAN
CLASS="citation"
><A
HREF="#CLtL1"
>CLtL1</A
></SPAN
>]</A
> font and bits attributes.
 For backward compatibility, there is a class <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
> representing
 either a character with font and bits, or a keystroke.
 The following functions work with objects of types <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>
 and <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
>.
 Note that <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_equal.html"
TARGET="_top"
><CODE
CLASS="function"
>EQUAL</CODE
></A
> are equivalent to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> on objects of type
 <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>ext:char-font-limit</CODE
> = 16</DT
><DD
><P
ALIGN="justify"
>The system uses only font 0.
  </P
></DD
><DT
><CODE
CLASS="constant"
>ext:char-bits-limit</CODE
> = 16</DT
><DD
><P
ALIGN="justify"
>Character bits:
    <DIV
CLASS="informaltable"
><P
></P
><A
NAME="bit-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>key</TH
><TH
>value</TH
></TR
></THEAD
><TBODY
><TR
><TD
><CODE
CLASS="constant"
>:CONTROL</CODE
></TD
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-CONTROL-BIT</CODE
></A
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:META</CODE
></TD
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-META-BIT</CODE
></A
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:SUPER</CODE
></TD
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-SUPER-BIT</CODE
></A
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:HYPER</CODE
></TD
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-HYPER-BIT</CODE
></A
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>ext:char-font</CODE
>
  <VAR
CLASS="replaceable"
>object</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns the font of a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> or <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>ext:char-bits</CODE
>
  <VAR
CLASS="replaceable"
>object</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns the bits of a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> or <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>ext:make-char</CODE
>
  <VAR
CLASS="replaceable"
>char</VAR
> [<VAR
CLASS="replaceable"
>bits</VAR
>
            [<VAR
CLASS="replaceable"
>font</VAR
>]])</TT
></DT
><DD
><P
ALIGN="justify"
>returns a new <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
>, or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if such a
 character cannot be created.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>ext:char-bit</CODE
>
  <VAR
CLASS="replaceable"
>object</VAR
> <VAR
CLASS="replaceable"
>name</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> if the named bit is set in <VAR
CLASS="replaceable"
>object</VAR
>,
  else <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>ext:set-char-bit</CODE
>
  <VAR
CLASS="replaceable"
>object</VAR
> <VAR
CLASS="replaceable"
>name</VAR
> <VAR
CLASS="replaceable"
>newvalue</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns a new <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
> with the named bit set or
  unset, depending on the boolean <VAR
CLASS="replaceable"
>newvalue</VAR
>.
  </P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
>The system itself uses this <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
> type only to
 mention special keys and <B
CLASS="keycap"
>Control</B
>/<B
CLASS="keycap"
>Alternate</B
>/<B
CLASS="keycap"
>Shift</B
> key status on return from
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
> <A
HREF="#terminal"
><VAR
CLASS="varname"
>EXT:*KEYBOARD-INPUT*</VAR
></A
>)</TT
>.
 </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-script"
>13.2. Character Scripts
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-2-1.html"
TARGET="_top"
>[CLHS-13.1.2.1]</A
></A
></H2
><P
ALIGN="justify"
>The only defined character script is the type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>
 itself.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-attrib"
>13.3. Character Attributes
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-3.html"
TARGET="_top"
>[CLHS-13.1.3]</A
></A
></H2
><P
ALIGN="justify"
>Characters have no implementation-defined attributes.  All characters
are simple characters.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="graph-char"
>13.4. Graphic Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-1.html"
TARGET="_top"
>[CLHS-13.1.4.1]</A
></A
></H2
><P
ALIGN="justify"
>The graphic characters are those <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> characters which are
 defined by the <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> standard, excluding the ranges
 <SPAN
CLASS="keycode"
>U0000</SPAN
> &#8230; <SPAN
CLASS="keycode"
>U001F</SPAN
> and
 <SPAN
CLASS="keycode"
>U007F</SPAN
> &#8230; <SPAN
CLASS="keycode"
>U009F</SPAN
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="alpha-char"
>13.5. Alphabetic Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-2.html"
TARGET="_top"
>[CLHS-13.1.4.2]</A
></A
></H2
><P
ALIGN="justify"
>The alphabetic characters are those <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> characters which are
 defined as letters by the <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> standard.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-ext"
>13.6. Case of Implementation-Defined Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-3-4.html"
TARGET="_top"
>[CLHS-13.1.4.3.4]</A
></A
></H2
><P
ALIGN="justify"
>The characters with case are those <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> characters <VAR
CLASS="replaceable"
>c</VAR
>, for
 which the upper case mapping <VAR
CLASS="replaceable"
>uc</VAR
> and the lower case mapping <VAR
CLASS="replaceable"
>lc</VAR
>
 have the following properties:
<P
></P
><UL
><LI
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>uc</VAR
> and <VAR
CLASS="replaceable"
>lc</VAR
> are different</P
></LI
><LI
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>c</VAR
> is one of <VAR
CLASS="replaceable"
>uc</VAR
> and <VAR
CLASS="replaceable"
>lc</VAR
></P
></LI
><LI
><P
ALIGN="justify"
>the upper case mapping of <VAR
CLASS="replaceable"
>uc</VAR
> and of <VAR
CLASS="replaceable"
>lc</VAR
>
   is <VAR
CLASS="replaceable"
>uc</VAR
></P
></LI
><LI
><P
ALIGN="justify"
>the lower case mapping of <VAR
CLASS="replaceable"
>uc</VAR
> and of <VAR
CLASS="replaceable"
>lc</VAR
>
   is <VAR
CLASS="replaceable"
>lc</VAR
></P
></LI
></UL
></P
><P
ALIGN="justify"
>The titlecase property of <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> characters has no equivalent in
 <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="num-char"
>13.7. Numeric Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-4-4.html"
TARGET="_top"
>[CLHS-13.1.4.4]</A
></A
></H2
><P
ALIGN="justify"
>The numeric characters are those <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> characters which are
 defined as digits by the <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> standard.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-ord"
>13.8. Ordering of Characters
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-6.html"
TARGET="_top"
>[CLHS-13.1.6]</A
></A
></H2
><P
ALIGN="justify"
>The characters are ordered according to their <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> code.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="clhs-newline"
>13.9. Treatment of Newline during Input and Output
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-8.html"
TARGET="_top"
>[CLHS-13.1.8]</A
></A
></H2
><P
ALIGN="justify"
>Newlines are written according to the stream's <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>, see the
 function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-external-format.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-EXTERNAL-FORMAT</CODE
></A
> and the description of <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>s,
 in particular, <A
HREF="#newline"
>line terminator</A
>s.
 The default behavior is as follows:</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
>When writing to a file, <SPAN
CLASS="keysym"
>#\Newline</SPAN
> is converted to
 <SPAN
CLASS="keycode"
>CR</SPAN
>/<SPAN
CLASS="keycode"
>LF</SPAN
>. (This is the usual convention on <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>.)
 For example, <SPAN
CLASS="keysym"
>#\Return</SPAN
>+<SPAN
CLASS="keysym"
>#\Newline</SPAN
> is written as <SPAN
CLASS="keycode"
>CR</SPAN
>/<SPAN
CLASS="keycode"
>CR</SPAN
>/<SPAN
CLASS="keycode"
>LF</SPAN
>.
</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>When reading from a file, <SPAN
CLASS="keycode"
>CR</SPAN
>/<SPAN
CLASS="keycode"
>LF</SPAN
> is converted to <SPAN
CLASS="keysym"
>#\Newline</SPAN
>
 (the usual convention on <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>), and <SPAN
CLASS="keycode"
>CR</SPAN
> not followed by <SPAN
CLASS="keycode"
>LF</SPAN
> is
 converted to <SPAN
CLASS="keysym"
>#\Newline</SPAN
> as well (the usual conversion on MacOS, also used
 by some programs on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>).</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-int"
>13.10. Character Encodings
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-9.html"
TARGET="_top"
>[CLHS-13.1.9]</A
></A
></H2
><P
ALIGN="justify"
>The integer returned by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_char-int.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-INT</CODE
></A
> is the same as the character's
 code.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="script-ext"
>13.11. Documentation
   of Implementation-Defined Scripts
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_13-1-10.html"
TARGET="_top"
>[CLHS-13.1.10]</A
></A
></H2
><P
ALIGN="justify"
>See the description of <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>s.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-dict"
>13.12. The Characters Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_chara_s_dictionary.html"
TARGET="_top"
>[CLHS-13.2]</A
></A
></H2
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_char-code.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-CODE</CODE
></A
> takes values from <TT
CLASS="literal"
>0</TT
> (inclusive) to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>CHAR-CODE-LIMIT</CODE
></A
> (exclusive), i.e., the implementation
 supports exactly <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>CHAR-CODE-LIMIT</CODE
></A
> characters.</P
><DIV
CLASS="table"
><A
NAME="char-code-limit-table"
></A
><P
><B
>Table 13-5. Number of characters</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>binaries built</TH
><TH
><B
CLASS="emphasis"
>without</B
> <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> support</TH
><TH
><B
CLASS="emphasis"
>with</B
> <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> support</TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_char-code-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>CHAR-CODE-LIMIT</CODE
></A
></TD
><TD
>2<SUP
>8</SUP
> = 256</TD
><TD
>17 * 2<SUP
>16</SUP
> = 1114112</TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
>The types <CODE
CLASS="classname"
>EXT:STRING-CHAR</CODE
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_base-char.html"
TARGET="_top"
><CODE
CLASS="classname"
>BASE-CHAR</CODE
></A
> are equivalent to <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.</P
><P
ALIGN="justify"
>The graphic characters have been described above.</P
><P
ALIGN="justify"
>The standard characters are <SPAN
CLASS="keysym"
>#\Newline</SPAN
> and the graphic characters with
 a code between 32 and 126 (inclusive).</P
><P
ALIGN="justify"
>The alphabetic characters are these characters:
<P
CLASS="literallayout"
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ABCDEFGHIJKLMNOPQRSTUVWXYZ<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abcdefghijklmnopqrstuvwxyz<br>
</P
>
and the international alphabetic characters from the character set:
<P
CLASS="literallayout"
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;«¸È‚‰‡ÂÁÍÎËÔÓÏƒ≈…Ê∆ÙˆÚ˚˘ˇ÷‹ﬂ·ÌÛ˙Ò—™∫„ıÿ¯¿√’&nbsp;etc.<br>
</P
></P
><P
ALIGN="justify"
>The functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-EQUAL</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-NOT-EQUAL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-LESSP</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-GREATERP</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-NOT-GREATERP</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR-NOT-LESSP</CODE
></A
> ignore bits and
 font attributes of their arguments.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-width"
>13.13. Functions on characters</A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Function
  <TT
CLASS="sexp"
>(<A
HREF="#char-width"
><CODE
CLASS="function"
>EXT:CHAR-WIDTH</CODE
></A
> <VAR
CLASS="replaceable"
>char</VAR
>)</TT
>. </B
>returns the number of screen columns occupied by <VAR
CLASS="replaceable"
>char</VAR
>.
 This is 0 for non-spacing characters
  (such as control characters and many combining characters),
 2 for double-width East Asian characters,
 and 1 for all other characters.
 See also function <A
HREF="#string-width"
><CODE
CLASS="function"
>EXT:STRING-WIDTH</CODE
></A
>.
</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-platform-dep"
>13.14. Platform-Dependent Characters</A
></H2
><P
ALIGN="justify"
>The characters that are not graphic chars and the space character
 have names:</P
><DIV
CLASS="table"
><A
NAME="amiga-chars-table"
></A
><P
><B
>Table 13-6. Platform dependent characters: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms.</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>code</TH
><TH
>char</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x00)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Null</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x01)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code1</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x02)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code2</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x03)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code3</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x04)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code4</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x05)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code5</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x06)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code6</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x07)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Bell</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Bel</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x08)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Backspace</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Bs</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x09)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Tab</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Ht</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0A)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Newline</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Linefeed</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Lf</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0B)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Vt</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0C)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Page</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Ff</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0D)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Return</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Cr</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0E)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\So</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0F)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Si</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x10)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code16</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x11)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code17</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x12)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code18</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x13)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code19</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x14)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code20</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x15)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code21</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x16)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code22</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x17)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code23</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x18)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code24</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x19)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code25</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1A)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code26</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1B)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Escape</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Esc</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1C)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code28</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1D)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code29</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1E)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code30</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1F)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code31</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x20)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Space</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x7F)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Rubout</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x9B)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Csi</SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="dos-win32-chars-table"
></A
><P
><B
>Table 13-7. Platform dependent characters: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms.</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>code</TH
><TH
>char</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x00)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Null</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x07)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Bell</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x08)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Backspace</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Rubout</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x09)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Tab</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0A)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Newline</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Linefeed</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0B)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code11</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0C)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Page</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0D)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Return</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1A)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Code26</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1B)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Escape</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x20)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Space</SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="unix-chars-table"
></A
><P
><B
>Table 13-8. Platform dependent characters: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms.</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>code</TH
><TH
>char</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x00)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Null</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Nul</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x01)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Soh</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x02)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Stx</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x03)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Etx</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x04)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Eot</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x05)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Enq</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x06)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Ack</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x07)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Bell</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Bel</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x08)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Backspace</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Bs</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x09)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Tab</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Ht</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0A)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Newline</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Nl</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Linefeed</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0B)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Vt</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0C)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Page</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Np</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0D)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Return</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Cr</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0E)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\So</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x0F)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Si</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x10)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Dle</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x11)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Dc1</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x12)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Dc2</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x13)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Dc3</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x14)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Dc4</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x15)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Nak</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x16)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Syn</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x17)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Etb</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x18)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Can</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x19)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Em</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1A)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Sub</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1B)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Escape</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Esc</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1C)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Fs</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1D)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Gs</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1E)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Rs</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x1F)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Us</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x20)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Space</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Sp</SPAN
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> #x7F)</TT
></TD
><TD
><SPAN
CLASS="keysym"
>#\Rubout</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Delete</SPAN
></TD
><TD
><SPAN
CLASS="keysym"
>#\Del</SPAN
></TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="char-bits"
>13.15. Obsolete Constants</A
></H2
><DIV
CLASS="table"
><A
NAME="char-bits-table"
></A
><P
><B
>Table 13-9. Character bit constants (obsolete)</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>constant</TH
><TH
>value</TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-CONTROL-BIT</CODE
></A
></TD
><TD
>1</TD
></TR
><TR
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-META-BIT</CODE
></A
></TD
><TD
>2</TD
></TR
><TR
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-SUPER-BIT</CODE
></A
></TD
><TD
>4</TD
></TR
><TR
><TD
><A
HREF="#char-bits"
><CODE
CLASS="constant"
>EXT:CHAR-HYPER-BIT</CODE
></A
></TD
><TD
>8</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="conses"
></A
>Chapter 14. Conses
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-14.html"
TARGET="_top"
>[CLHS-14]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="cons-dict"
>14.1. The Conses Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_conses_dictionary.html"
TARGET="_top"
>[CLHS-14.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="map-func"
>14.1.1. Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPCAR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPCAN</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPLIST</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPCON</CODE
></A
>, ...</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="mapcap"
>14.1.1.1. Function <A
HREF="#mapcap"
><CODE
CLASS="function"
>EXT:MAPCAP</CODE
></A
></A
></H4
><P
ALIGN="justify"
>The function <A
HREF="#mapcap"
><CODE
CLASS="function"
>EXT:MAPCAP</CODE
></A
> is like <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPCAN</CODE
></A
>, except that it
 concatenates the resulting lists with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_append.html"
TARGET="_top"
><CODE
CLASS="function"
>APPEND</CODE
></A
> instead of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_nconc.html"
TARGET="_top"
><CODE
CLASS="function"
>NCONC</CODE
></A
>:</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#mapcap"
><CODE
CLASS="function"
>EXT:MAPCAP</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
> <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
> ... <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>)</TT
> ==
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
> #'<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_append.html"
TARGET="_top"
><CODE
CLASS="function"
>APPEND</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPCAR</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
> <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
>
 ... <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>))</TT
></P
><P
ALIGN="justify"
>(Actually a bit more efficient that this would have been.)</P
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="maplap"
>14.1.1.2. Function <A
HREF="#mapcap"
><CODE
CLASS="function"
>EXT:MAPLAP</CODE
></A
></A
></H4
><P
ALIGN="justify"
>The function <A
HREF="#mapcap"
><CODE
CLASS="function"
>EXT:MAPLAP</CODE
></A
> is like <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPCON</CODE
></A
>, except that it
 concatenates the resulting lists with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_append.html"
TARGET="_top"
><CODE
CLASS="function"
>APPEND</CODE
></A
> instead of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_nconc.html"
TARGET="_top"
><CODE
CLASS="function"
>NCONC</CODE
></A
>:</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#mapcap"
><CODE
CLASS="function"
>EXT:MAPLAP</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
> <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
> ... <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>)</TT
> ==
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
> #'<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_append.html"
TARGET="_top"
><CODE
CLASS="function"
>APPEND</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPLIST</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
> <VAR
CLASS="replaceable"
>x<SUB
>1</SUB
></VAR
>
 ... <VAR
CLASS="replaceable"
>x<SUB
>n</SUB
></VAR
>))</TT
></P
><P
ALIGN="justify"
>(Actually a bit more efficient that this would have been.)</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="arrays"
></A
>Chapter 15. Arrays
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-15.html"
TARGET="_top"
>[CLHS-15]</A
></H1
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-array.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-ARRAY</CODE
></A
>. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-array.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-ARRAY</CODE
></A
> can return specialized arrays for the
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>ARRAY-ELEMENT-TYPE</CODE
></A
>s
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 2)</TT
>,
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 4)</TT
>,
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 16)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 32)</TT
>,
 and, of course, the required specializations <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_nil.html"
TARGET="_top"
><CODE
CLASS="classname"
>NIL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_bit.html"
TARGET="_top"
><CODE
CLASS="classname"
>BIT</CODE
></A
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="array-elts"
>15.1. Array Elements
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_15-1-1.html"
TARGET="_top"
>[CLHS-15.1.1]</A
></A
></H2
><DIV
CLASS="table"
><A
NAME="array-limit-table"
></A
><P
><B
>Table 15-1. Array limits</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
TITLE="vars"><COL
WIDTH="1*"
TITLE="b16"><COL
WIDTH="1*"
TITLE="b32"><COL
WIDTH="1*"
TITLE="b64"><THEAD
><TR
><TH
>CPU type</TH
><TH
>16-bit CPU</TH
><TH
>32-bit CPU</TH
><TH
>64-bit CPU</TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_array-rank-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>ARRAY-RANK-LIMIT</CODE
></A
></TD
><TD
COLSPAN="3"
ALIGN="center"
>2<SUP
>12</SUP
> = 4096</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_array-_ension-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>ARRAY-DIMENSION-LIMIT</CODE
></A
></TD
><TD
COLSPAN="2"
ALIGN="center"
>2<SUP
>24</SUP
> = 16777216</TD
><TD
>2<SUP
>32</SUP
> = 4294967296</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_array-_l-size-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>ARRAY-TOTAL-SIZE-LIMIT</CODE
></A
></TD
><TD
COLSPAN="2"
ALIGN="center"
>2<SUP
>24</SUP
> = 16777216</TD
><TD
>2<SUP
>32</SUP
> = 4294967296</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Note that <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_array-_ension-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>ARRAY-DIMENSION-LIMIT</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_array-_l-size-limit.html"
TARGET="_top"
><CODE
CLASS="constant"
>ARRAY-TOTAL-SIZE-LIMIT</CODE
></A
>
 are not fixnums (they are equal to
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_1plcm_1-.html"
TARGET="_top"
><CODE
CLASS="function"
>1+</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_most-p_ative-fixnum.html"
TARGET="_top"
><CODE
CLASS="constant"
>MOST-POSITIVE-FIXNUM</CODE
></A
>)</TT
>),
 contrary to the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> Issue <A
HREF="http://www.lisp.org/HyperSpec/Issues/iss014.html"
TARGET="_top"
>ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="array-dict"
>15.2. The Arrays Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_arrays_dictionary.html"
TARGET="_top"
>[CLHS-15.2]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html"
TARGET="_top"
><CODE
CLASS="function"
>ADJUST-ARRAY</CODE
></A
> for displaced arrays. </B
>An array to which another array is displaced should not be shrunk
 (using <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html"
TARGET="_top"
><CODE
CLASS="function"
>ADJUST-ARRAY</CODE
></A
>) in such a way that the other array points into
 void space.  This is not checked at the time <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_adjust-array.html"
TARGET="_top"
><CODE
CLASS="function"
>ADJUST-ARRAY</CODE
></A
> is
 called!</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="strings"
></A
>Chapter 16. Strings
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-16.html"
TARGET="_top"
>[CLHS-16]</A
></H1
><P
ALIGN="justify"
>String comparison is based on the function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_chareqcm__ar-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>CHAR&#60;=</CODE
></A
>.  Therefore
 diphthongs do not obey the usual national rules.  Example:
 <TT
CLASS="literal"
>o</TT
> &#60; <TT
CLASS="literal"
>oe</TT
> &#60;
 <TT
CLASS="literal"
>z</TT
> &#60; <TT
CLASS="literal"
>ˆ</TT
>.</P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="string-dict"
>16.1. The Strings Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_strings_dictionary.html"
TARGET="_top"
>[CLHS-16.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="string-width"
>16.1.1. Functions on strings</A
></H3
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="#string-width"
><CODE
CLASS="function"
>EXT:STRING-WIDTH</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="#string-width"
><CODE
CLASS="function"
>EXT:STRING-WIDTH</CODE
></A
> <VAR
CLASS="replaceable"
>string</VAR
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <VAR
CLASS="replaceable"
>start</VAR
> <VAR
CLASS="replaceable"
>end</VAR
>)</TT
>
  returns the number of screen columns occupied by <VAR
CLASS="replaceable"
>string</VAR
>.
  This is computed as the sum of all <A
HREF="#char-width"
><CODE
CLASS="function"
>EXT:CHAR-WIDTH</CODE
></A
>s
  of all of the <VAR
CLASS="replaceable"
>string</VAR
>'s characters.</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="sequences"
></A
>Chapter 17. Sequences
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-17.html"
TARGET="_top"
>[CLHS-17]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="seq-dict"
>17.1. The Sequences Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_seque_s_dictionary.html"
TARGET="_top"
>[CLHS-17.3]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="seq-macro-ext"
>17.1.1. Additional Macros</A
></H3
><DIV
CLASS="section"
><H4
CLASS="section"
><A
NAME="doseq"
>17.1.1.1. Macro <A
HREF="#doseq"
><CODE
CLASS="function"
>EXT:DOSEQ</CODE
></A
></A
></H4
><P
ALIGN="justify"
>For iteration through a sequence, a macro <A
HREF="#doseq"
><CODE
CLASS="function"
>EXT:DOSEQ</CODE
></A
>,
 similar to <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_dolist.html"
TARGET="_top"
><CODE
CLASS="function"
>DOLIST</CODE
></A
>, may be used instead of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_map.html"
TARGET="_top"
><CODE
CLASS="function"
>MAP</CODE
></A
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="#doseq"
><CODE
CLASS="function"
>EXT:DOSEQ</CODE
></A
> (<VAR
CLASS="replaceable"
>variable</VAR
> <VAR
CLASS="replaceable"
>seqform</VAR
> [<VAR
CLASS="replaceable"
>resultform</VAR
>])
  {<VAR
CLASS="replaceable"
>declaration</VAR
>}*
  {<VAR
CLASS="replaceable"
>tag</VAR
>|<VAR
CLASS="replaceable"
>form</VAR
>}*)
</PRE
></TD
></TR
></TABLE
><P
ALIGN="justify"
><A
HREF="#doseq"
><CODE
CLASS="function"
>EXT:DOSEQ</CODE
></A
> forms are <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form"
TARGET="_top"
>iteration form</A
>s.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="nreverse-nreconc"
>17.1.2. Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
TARGET="_top"
><CODE
CLASS="function"
>NREVERSE</CODE
></A
> &#38; <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html"
TARGET="_top"
><CODE
CLASS="function"
>NRECONC</CODE
></A
></A
></H3
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
TARGET="_top"
><CODE
CLASS="function"
>NREVERSE</CODE
></A
>. </B
>The result of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
TARGET="_top"
><CODE
CLASS="function"
>NREVERSE</CODE
></A
> is always <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> to the argument.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
TARGET="_top"
><CODE
CLASS="function"
>NREVERSE</CODE
></A
> on a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> swaps pairs of elements.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_reversecm_nreverse.html"
TARGET="_top"
><CODE
CLASS="function"
>NREVERSE</CODE
></A
> on a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
> swaps the first and the last
 element and reverses the list chaining between them.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html"
TARGET="_top"
><CODE
CLASS="function"
>NRECONC</CODE
></A
>. </B
>The result of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_revappendcm_nreconc.html"
TARGET="_top"
><CODE
CLASS="function"
>NRECONC</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> to the first argument unless it is
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, in which case the result is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> to the second argument.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="rem-del"
>17.1.3. Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>REMOVE</CODE
></A
> &#38; <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>DELETE</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>REMOVE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>REMOVE-IF</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>REMOVE-IF-NOT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html"
TARGET="_top"
><CODE
CLASS="function"
>REMOVE-DUPLICATES</CODE
></A
> return
 their argument unchanged, if no element has to be removed.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>DELETE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>DELETE-IF</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>DELETE-IF-NOT</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_remove-du_e-duplicates.html"
TARGET="_top"
><CODE
CLASS="function"
>DELETE-DUPLICATES</CODE
></A
>
 destructively modify their argument: If the argument is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
>,
 the <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
> parts are modified.  If the argument is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> with
 fill pointer, the fill pointer is lowered and the remaining elements are
 compacted below the new fill pointer.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="count-ansi"
></A
><B
>Variable <A
HREF="#count-ansi"
><VAR
CLASS="varname"
>CUSTOM:*SEQUENCE-COUNT-ANSI*</VAR
></A
>. </B
>Contrary to the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> issue 283 <A
HREF="http://www.lisp.org/HyperSpec/Issues/iss283.html"
TARGET="_top"
>RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</A
>,
 negative <CODE
CLASS="constant"
>:COUNT</CODE
> keyword arguments are not allowed unless you set
 <A
HREF="#count-ansi"
><VAR
CLASS="varname"
>CUSTOM:*SEQUENCE-COUNT-ANSI*</VAR
></A
> to a non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> value, in which case <SPAN
CLASS="QUOTE"
>"using a
 negative integer value is functionally equivalent to using a value of
 zero"</SPAN
>, as per the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> issue.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="sorting"
>17.1.4. Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>SORT</CODE
></A
> &#38; <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>STABLE-SORT</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>SORT</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>STABLE-SORT</CODE
></A
> have two additional keywords <CODE
CLASS="constant"
>:START</CODE
>
and <CODE
CLASS="constant"
>:END</CODE
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>SORT</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
> <VAR
CLASS="replaceable"
>predicate</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:KEY</CODE
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
>)
(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>STABLE-SORT</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
> <VAR
CLASS="replaceable"
>predicate</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:KEY</CODE
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
>)
</PRE
></TD
></TR
></TABLE
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>SORT</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>STABLE-SORT</CODE
></A
> are identical.
 They implement the mergesort algorithm.
 Worst case complexity: <VAR
CLASS="varname"
>O(n*log(n))</VAR
> comparisons,
 where <VAR
CLASS="replaceable"
>n</VAR
> is the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
> of the subsequence bounded
 by the <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> arguments.</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="hash"
></A
>Chapter 18. Hash Tables
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-18.html"
TARGET="_top"
>[CLHS-18]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="hash-dict"
>18.1. The Hash Tables Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_hash__s_dictionary.html"
TARGET="_top"
>[CLHS-18.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="make-hash"
>18.1.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-HASH-TABLE</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-HASH-TABLE</CODE
></A
> supports additional keywords
 <CODE
CLASS="constant"
>:INITIAL-CONTENTS</CODE
>
 and <CODE
CLASS="constant"
>:WEAK</CODE
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-HASH-TABLE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :test :initial-contents :size
                 :rehash-size :rehash-threshold :weak)
</PRE
></TD
></TR
></TABLE
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:INITIAL-CONTENTS</CODE
> argument is an
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list"
TARGET="_top"
>alist</A
> that is used to initialize the new hash table.
 The <CODE
CLASS="constant"
>:REHASH-THRESHOLD</CODE
> argument is ignored.</P
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:WEAK</CODE
> can take the following values:
 <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (default)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:KEY</CODE
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:VALUE</CODE
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:EITHER</CODE
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:BOTH</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
>
and specifies whether the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
> is <I
CLASS="emphasis"
>weak</I
>:
if the key, value, either or both are not accessible for the <A
HREF="#gc"
>garbage-collect</A
>ion
purposes, i.e., if they are only accessible via weak <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>s
and <A
HREF="#weak"
><CODE
CLASS="classname"
>EXT:WEAK-POINTER</CODE
></A
>s, it is <A
HREF="#gc"
>garbage-collect</A
>ed and removed from the weak
<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>.</P
><P
ALIGN="justify"
>The <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>able predicate <CODE
CLASS="function"
>EXT:HASH-TABLE-WEAK-P</CODE
>
checks whether the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
> is weak.</P
><P
ALIGN="justify"
>Just like <A
HREF="#weak"
><CODE
CLASS="classname"
>EXT:WEAK-POINTER</CODE
></A
>s, weak <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>s cannot be
printed readably.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="defhash"
>18.1.2. Macro <A
HREF="#defhash"
><CODE
CLASS="function"
>EXT:DEFINE-HASH-TABLE-TEST</CODE
></A
></A
></H3
><P
ALIGN="justify"
>You can define a new hash table test using the macro
 <A
HREF="#defhash"
><CODE
CLASS="function"
>EXT:DEFINE-HASH-TABLE-TEST</CODE
></A
>: <TT
CLASS="sexp"
>(<A
HREF="#defhash"
><CODE
CLASS="function"
>EXT:DEFINE-HASH-TABLE-TEST</CODE
></A
> test-name <VAR
CLASS="replaceable"
>test-function</VAR
>
  <VAR
CLASS="replaceable"
>hash-function</VAR
>)</TT
>, after which <VAR
CLASS="replaceable"
>test-name</VAR
>
 can be passed as the <CODE
CLASS="constant"
>:TEST</CODE
> argument to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-HASH-TABLE</CODE
></A
>.  E.g.: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (<A
HREF="#defhash"
><CODE
CLASS="function"
>EXT:DEFINE-HASH-TABLE-TEST</CODE
></A
> string <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stringeqc_ng-not-lessp.html"
TARGET="_top"
><CODE
CLASS="function"
>STRING=</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html"
TARGET="_top"
><CODE
CLASS="function"
>SXHASH</CODE
></A
>)
 (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-hash-table.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-HASH-TABLE</CODE
></A
> :test 'string)
</PRE
></TD
></TR
></TABLE
>
(which is not too useful because it is equivalent to an <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_equal.html"
TARGET="_top"
><CODE
CLASS="function"
>EQUAL</CODE
></A
>
<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
> but less efficient).</P
><P
ALIGN="justify"
>The fundamental requirement is that the <VAR
CLASS="replaceable"
>test-function</VAR
> and <VAR
CLASS="replaceable"
>hash-function</VAR
> are
 consistent: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
> <VAR
CLASS="replaceable"
>test-function</VAR
> <VAR
CLASS="replaceable"
>x</VAR
> <VAR
CLASS="replaceable"
>y</VAR
>) ==&#62;
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html"
TARGET="_top"
><CODE
CLASS="function"
>=</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
> <VAR
CLASS="replaceable"
>hash-function</VAR
> <VAR
CLASS="replaceable"
>x</VAR
>) (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
> <VAR
CLASS="replaceable"
>hash-function</VAR
> <VAR
CLASS="replaceable"
>y</VAR
>))
 </PRE
></TD
></TR
></TABLE
>
 This means that the following definition: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (<A
HREF="#defhash"
><CODE
CLASS="function"
>EXT:DEFINE-HASH-TABLE-TEST</CODE
></A
> number <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html"
TARGET="_top"
><CODE
CLASS="function"
>=</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html"
TARGET="_top"
><CODE
CLASS="function"
>SXHASH</CODE
></A
>) ; <B
CLASS="emphasis"
>BAD!</B
>
 </PRE
></TD
></TR
></TABLE
>
 is <I
CLASS="emphasis"
>not</I
> correct because <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html"
TARGET="_top"
><CODE
CLASS="function"
>=</CODE
></A
> 1 1d0)</TT
> is
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> but <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html"
TARGET="_top"
><CODE
CLASS="function"
>=</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html"
TARGET="_top"
><CODE
CLASS="function"
>SXHASH</CODE
></A
> 1) (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html"
TARGET="_top"
><CODE
CLASS="function"
>SXHASH</CODE
></A
> 1d0))</TT
>
 is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.  The correct way is, e.g.: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (<A
HREF="#defhash"
><CODE
CLASS="function"
>EXT:DEFINE-HASH-TABLE-TEST</CODE
></A
> number <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html"
TARGET="_top"
><CODE
CLASS="function"
>=</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_lambda.html"
TARGET="_top"
><CODE
CLASS="function"
>LAMBDA</CODE
></A
> (x) (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sxhash.html"
TARGET="_top"
><CODE
CLASS="function"
>SXHASH</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
> x '<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>))))
 </PRE
></TD
></TR
></TABLE
>
 (note that
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
> <VAR
CLASS="replaceable"
>x</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>)</TT
>
 does <I
CLASS="emphasis"
>not</I
> cons while
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
> <VAR
CLASS="replaceable"
>x</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
>)</TT
>
 does).</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="ht-test"
>18.1.3. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html"
TARGET="_top"
><CODE
CLASS="function"
>HASH-TABLE-TEST</CODE
></A
></A
></H3
><P
ALIGN="justify"
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html"
TARGET="_top"
><CODE
CLASS="function"
>HASH-TABLE-TEST</CODE
></A
> returns either one of the four standard
 symbols <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_equal.html"
TARGET="_top"
><CODE
CLASS="function"
>EQUAL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_equalp.html"
TARGET="_top"
><CODE
CLASS="function"
>EQUALP</CODE
></A
>, or, for <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>s
 created with a user-defined <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_hash-table-test.html"
TARGET="_top"
><CODE
CLASS="function"
>HASH-TABLE-TEST</CODE
></A
> (see macro <A
HREF="#defhash"
><CODE
CLASS="function"
>EXT:DEFINE-HASH-TABLE-TEST</CODE
></A
>),
 a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
> cell <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>test-function</VAR
> . <VAR
CLASS="replaceable"
>hash-function</VAR
>)</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dohash"
>18.1.4. Macro <A
HREF="#dohash"
><CODE
CLASS="function"
>EXT:DOHASH</CODE
></A
></A
></H3
><P
ALIGN="justify"
>For iteration through a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>, a macro <A
HREF="#dohash"
><CODE
CLASS="function"
>EXT:DOHASH</CODE
></A
>,
 similar to <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_dolist.html"
TARGET="_top"
><CODE
CLASS="function"
>DOLIST</CODE
></A
>, can be used instead of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_maphash.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPHASH</CODE
></A
>:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="#dohash"
><CODE
CLASS="function"
>EXT:DOHASH</CODE
></A
> (<VAR
CLASS="replaceable"
>key-var</VAR
> <VAR
CLASS="replaceable"
>value-var</VAR
> <VAR
CLASS="replaceable"
>hash-table-form</VAR
> [<VAR
CLASS="replaceable"
>resultform</VAR
>])
  {<VAR
CLASS="replaceable"
>declaration</VAR
>}*
  {<VAR
CLASS="replaceable"
>tag</VAR
>|<VAR
CLASS="replaceable"
>form</VAR
>}*)
</PRE
></TD
></TR
></TABLE
><P
ALIGN="justify"
><A
HREF="#dohash"
><CODE
CLASS="function"
>EXT:DOHASH</CODE
></A
> forms are <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#iteration_form"
TARGET="_top"
>iteration form</A
>s.</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="filenames"
></A
>Chapter 19. Filenames
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-19.html"
TARGET="_top"
>[CLHS-19]</A
></H1
><P
ALIGN="justify"
>For most operations, pathnames denoting files and pathnames
 denoting directories cannot be used interchangeably.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>For example, <TT
CLASS="filename"
>#P"foo/bar"</TT
> denotes
 the file <TT
CLASS="filename"
>#P"bar"</TT
> in the directory <TT
CLASS="filename"
>#P"foo"</TT
>,
 while <TT
CLASS="filename"
>#P"foo/bar/"</TT
> denotes the subdirectory
 <TT
CLASS="filename"
>#P"bar"</TT
> of the directory <TT
CLASS="filename"
>#P"foo"</TT
>.
</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
>For example, <TT
CLASS="filename"
>#P"foo\\bar"</TT
>
 denotes the file <TT
CLASS="filename"
>#P"bar"</TT
> in the directory <TT
CLASS="filename"
>#P"foo"</TT
>,
 while <TT
CLASS="filename"
>#P"foo\\bar\\"</TT
> denotes the subdirectory
 <TT
CLASS="filename"
>#P"bar"</TT
> of the directory <TT
CLASS="filename"
>#P"foo"</TT
>.
</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>For example, <TT
CLASS="filename"
>#P"foo.bar"</TT
> denotes
 the file <TT
CLASS="filename"
>#P"foo"</TT
> in the directory <TT
CLASS="filename"
>#P"bar"</TT
>,
 while <TT
CLASS="filename"
>#P"foo.bar."</TT
> denotes the subdirectory
 <TT
CLASS="filename"
>#P"bar"</TT
> of the directory <TT
CLASS="filename"
>#P"foo"</TT
>.
</P
></DD
><DT
><A
NAME="device-prefix"
></A
>Platform dependent: <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> and
  <A
HREF="http://cygwin.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Cygwin</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>User variable <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#device-prefix"
><VAR
CLASS="varname"
>CUSTOM:*DEVICE-PREFIX*</VAR
></A
></I
></STRONG
>
  controls translation between <A
HREF="http://cygwin.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Cygwin</B
></A
> pathnames
  (e.g., <TT
CLASS="filename"
>#P"/cygdrive/c/gnu/clisp/"</TT
>) and native
  <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> pathnames (e.g., <TT
CLASS="filename"
>#P"C:\\gnu\\clisp\\"</TT
>)
  When it is set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, no translations occur and the <A
HREF="http://cygwin.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Cygwin</B
></A
> port
  will not understand the native paths and the native <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> port will
  not understand the <A
HREF="http://cygwin.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Cygwin</B
></A
> paths.
  When its value is a string, it is used by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
> to
  translate into the appropriate platform-specific representation,
  so that on <A
HREF="http://cygwin.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Cygwin</B
></A
>,
  <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
> "c:/gnu/clisp/")</TT
>
  returns <TT
CLASS="sexp"
>#P"/cygdrive/c/gnu/clisp/"</TT
>,
  while on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
  <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
> "/cygdrive/c/gnu/clisp/")</TT
>
  returns <TT
CLASS="sexp"
>#P"C:/gnu/clisp/"</TT
>.
  The initial value is <TT
CLASS="literal"
>"cygdrive"</TT
>, you should edit
  <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
> to change it.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>This is especially important for the
 <A
HREF="#dir"
>directory-handling functions</A
>.</P
><DIV
CLASS="table"
><A
NAME="min-filename-syntax-table"
></A
><P
><B
>Table 19-1. The minimum filename syntax that may be used portably</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>pathname</TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="filename"
>"xxx"</TT
></TD
><TD
>for a file with name <VAR
CLASS="replaceable"
>xxx</VAR
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"xxx.yy"</TT
></TD
><TD
>for a file with name <VAR
CLASS="replaceable"
>xxx</VAR
> and type
   <VAR
CLASS="replaceable"
>yy</VAR
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>".yy"</TT
></TD
><TD
>for a pathname with type <VAR
CLASS="replaceable"
>yy</VAR
> and no
    name or with name <VAR
CLASS="replaceable"
>.yy</VAR
> and no type,
    depending on the value of <A
HREF="#name-type-split"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</VAR
></A
>.</TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
>Hereby <VAR
CLASS="replaceable"
>xxx</VAR
> denotes 1 to 8 characters,
 and <VAR
CLASS="replaceable"
>yy</VAR
> denotes 1 to 3 characters, each of
 which being either an alphanumeric character or the underscore
 <SPAN
CLASS="keysym"
>#\_</SPAN
>.  Other properties of pathname syntax vary between
 operating systems.</P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="path-components"
>19.1. Pathname Components
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_19-2-1.html"
TARGET="_top"
>[CLHS-19.2.1]</A
></A
></H2
><P
ALIGN="justify"
>When a pathname is to be fully specified (no wildcards), that
 means that no <CODE
CLASS="constant"
>:WILD</CODE
>, <CODE
CLASS="constant"
>:WILD-INFERIORS</CODE
> is allowed, no wildcard
 characters are allowed in the strings, and <VAR
CLASS="replaceable"
>name</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> may not
 be allowed either.</P
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="path-dir-canon"
>19.1.1. Directory canonicalization.</A
></H3
><P
ALIGN="justify"
>As permitted by the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PATHNAME</CODE
></A
> secification, the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
>
 directory component is canonicalized when the pathname is constructed:
 <P
></P
><OL
TYPE="1"
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>""</TT
> and
    <TT
CLASS="filename"
>"."</TT
> are removed</P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>".."</TT
>,
    <TT
CLASS="filename"
>"*"</TT
>, and <TT
CLASS="filename"
>"**"</TT
> are converted
    to <CODE
CLASS="constant"
>:UP</CODE
>, <CODE
CLASS="constant"
>:WILD</CODE
> and <CODE
CLASS="constant"
>:WILD-INFERIORS</CODE
>,
    respectively</P
></LI
><LI
><P
ALIGN="justify"
>patterns <TT
CLASS="filename"
>foo/../</TT
> are
    collapsed</P
></LI
></OL
>
</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="AEN5810"
>19.1.2. Platform-specific issues.</A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Pathname components</B
></P
><DL
><DT
><VAR
CLASS="replaceable"
>host</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></P
></DD
><DT
><VAR
CLASS="replaceable"
>device</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
></P
></DD
><DT
><TT
CLASS="sexp"
><VAR
CLASS="replaceable"
>directory</VAR
> = (<VAR
CLASS="replaceable"
>startpoint</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="amiga-dir-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>element</TH
><TH
>values</TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="replaceable"
>startpoint</VAR
></TD
><TD
><CODE
CLASS="constant"
>:RELATIVE</CODE
> | <CODE
CLASS="constant"
>:ABSOLUTE</CODE
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdirs</VAR
></TD
><TD
><TT
CLASS="sexp"
>()</TT
> | <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>subdir</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><CODE
CLASS="constant"
>:WILD-INFERIORS</CODE
></TD
><TD
><TT
CLASS="filename"
>**</TT
> or
  <TT
CLASS="filename"
>...</TT
>, all subdirectories </TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
   may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><CODE
CLASS="constant"
>:PARENT</CODE
></TD
><TD
><TT
CLASS="filename"
>"/"</TT
> instead of <TT
CLASS="filename"
>"subdir/"</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
><VAR
CLASS="replaceable"
>name</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>type</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>version</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
> or
   <CODE
CLASS="constant"
>:NEWEST</CODE
>)</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>Constraint: <VAR
CLASS="replaceable"
>startpoint</VAR
> = <CODE
CLASS="constant"
>:RELATIVE</CODE
> only if <VAR
CLASS="replaceable"
>device</VAR
> is
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.  If the device is specified, the pathname must be absolute!</P
><P
ALIGN="justify"
>An <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> filename is <A
HREF="#name-type-split"
>split into name and type</A
>.</P
><P
ALIGN="justify"
>Case is ignored in the strings on comparison.
  No case conversions are performed.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="pathnames-externally-amiga"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>External notation:</TD
><TD
><TT
CLASS="filename"
>"dev:sub1.typ/sub2.typ/name.typ"</TT
></TD
></TR
><TR
><TD
>using defaults:</TD
><TD
><TT
CLASS="filename"
>    "sub1.typ/sub2.typ/name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
><TT
CLASS="filename"
>                      "name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
><TT
CLASS="filename"
>    "sub1.typ/**/sub3.typ/x*.lisp"</TT
></TD
></TR
><TR
><TD
>or similar.</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Formal specification of the external notation</B
></P
><DL
><DT
>ch ::==</DT
><DD
><P
ALIGN="justify"
>any character except ':','/' and '*','?'
   </P
></DD
><DT
>name ::==</DT
><DD
><P
ALIGN="justify"
>{ch}+</P
></DD
><DT
>device ::==</DT
><DD
><P
ALIGN="justify"
>[ &#60;empty&#62; | ':' | name ':' ]
    <DIV
CLASS="informaltable"
><P
></P
><A
NAME="amiga-dev"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>empty</TD
><TD
>current device, relative to
     current directory</TD
></TR
><TR
><TD
>':'</TD
><TD
>current device, absolute (relative
     to root for disks)</TD
></TR
><TR
><TD
>name ':'</TD
><TD
>specified device, absolute
     (relative to root for disks)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></DD
><DT
>subdir ::==</DT
><DD
><P
ALIGN="justify"
>[ &#60;empty&#62; | name ]
    <DIV
CLASS="informaltable"
><P
></P
><A
NAME="amifa-subdir"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>empty</TD
><TD
>parent directory</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></DD
><DT
>pathname ::==</DT
><DD
><P
ALIGN="justify"
>device { subdir '/' }* name
   </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>Examples:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="amiga-path-examples-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><THEAD
><TR
><TH
>String</TH
><TH
>Device</TH
><TH
>Directory</TH
><TH
>our pathname</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="filename"
>"c:foo"</TT
></TD
><TD
>'C'</TD
><TD
><TT
CLASS="filename"
>"device-&#62;foo"</TT
></TD
><TD
><TT
CLASS="filename"
>"c"</TT
> (<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"c:foo/"</TT
></TD
><TD
>'C'</TD
><TD
><TT
CLASS="filename"
>"device-&#62;foo"</TT
></TD
><TD
><TT
CLASS="filename"
>"c"</TT
> (<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"c:foo/bar"</TT
></TD
><TD
>'C'</TD
><TD
><TT
CLASS="filename"
>"device-&#62;foo-&#62;bar"</TT
></TD
><TD
><TT
CLASS="filename"
>"c"</TT
> (<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
> <TT
CLASS="filename"
>#P"bar"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"c:/foo"</TT
></TD
><TD
>'C'</TD
><TD
><TT
CLASS="filename"
>"device-&#62;up-&#62;foo"</TT
></TD
><TD
><TT
CLASS="filename"
>"c"</TT
>
          (<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:PARENT</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"c:"</TT
></TD
><TD
>'C'</TD
><TD
><TT
CLASS="filename"
>"device"</TT
></TD
><TD
><TT
CLASS="filename"
>"c"</TT
> (<CODE
CLASS="constant"
>:ABSOLUTE</CODE
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>":foo"</TT
></TD
><TD
>current</TD
><TD
><TT
CLASS="filename"
>"device-&#62;root-&#62;foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
>current</TD
><TD
><TT
CLASS="filename"
>"device-&#62;foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (<CODE
CLASS="constant"
>:RELATIVE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"/foo"</TT
></TD
><TD
>current</TD
><TD
><TT
CLASS="filename"
>"device-&#62;up-&#62;foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (<CODE
CLASS="constant"
>:RELATIVE</CODE
> <CODE
CLASS="constant"
>:PARENT</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"//foo/bar"</TT
></TD
><TD
>current</TD
><TD
><TT
CLASS="filename"
>"device-&#62;up-&#62;up-&#62;foo-&#62;bar"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (<CODE
CLASS="constant"
>:RELATIVE</CODE
> <CODE
CLASS="constant"
>:PARENT</CODE
> <CODE
CLASS="constant"
>:PARENT</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>
                 <TT
CLASS="filename"
>#P"bar"</TT
>)</TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"\"</TT
></TD
><TD
>current</TD
><TD
><TT
CLASS="filename"
>"device"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (<CODE
CLASS="constant"
>:RELATIVE</CODE
>)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
><P
ALIGN="justify"
>Appending a <TT
CLASS="filename"
>"/"</TT
> to a path string that is non-empty and
 does not end with <TT
CLASS="filename"
>":"</TT
> or <TT
CLASS="filename"
>"/"</TT
> does not change its
 meaning.  This <TT
CLASS="filename"
>"/"</TT
> must be appended before another non-empty
 component can be appended.  But appending a <TT
CLASS="filename"
>"/"</TT
> to a path
 string that is empty or ends with <TT
CLASS="filename"
>":"</TT
> or <TT
CLASS="filename"
>"/"</TT
> means
 going up to the parent directory!</P
><P
ALIGN="justify"
>We interpret any path string that is empty or ends with
 <TT
CLASS="filename"
>":"</TT
> or <TT
CLASS="filename"
>"/"</TT
> as pathname of a directory (with both
 <VAR
CLASS="replaceable"
>name</VAR
> and <VAR
CLASS="replaceable"
>type</VAR
> being <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>).</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only.</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Pathname components</B
></P
><DL
><DT
><VAR
CLASS="replaceable"
>host</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></P
></DD
><DT
><VAR
CLASS="replaceable"
>device</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></P
></DD
><DT
><TT
CLASS="sexp"
><VAR
CLASS="replaceable"
>directory</VAR
> = (<VAR
CLASS="replaceable"
>startpoint</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="unix-dir-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>element</TH
><TH
>values</TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="replaceable"
>startpoint</VAR
></TD
><TD
><CODE
CLASS="constant"
>:RELATIVE</CODE
> | <CODE
CLASS="constant"
>:ABSOLUTE</CODE
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdirs</VAR
></TD
><TD
><TT
CLASS="sexp"
>()</TT
> | <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>subdir</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><CODE
CLASS="constant"
>:WILD-INFERIORS</CODE
></TD
><TD
><TT
CLASS="filename"
>**</TT
> or
  <TT
CLASS="filename"
>...</TT
>, all subdirectories </TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
   may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
><VAR
CLASS="replaceable"
>name</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>type</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>version</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
> or
   <CODE
CLASS="constant"
>:NEWEST</CODE
>)</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>A <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> filename is <A
HREF="#name-type-split"
>split into name and type</A
>.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="unix-filename-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>External notation:</TD
><TD
>&#13;  <TT
CLASS="filename"
>"server:sub1.typ/sub2.typ/name.typ"</TT
></TD
></TR
><TR
><TD
>using defaults:</TD
><TD
>&#13;  <TT
CLASS="filename"
>       "sub1.typ/sub2.typ/name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
>&#13;  <TT
CLASS="filename"
>                         "name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
>&#13;  <TT
CLASS="filename"
>       "sub1.typ/**/sub3.typ/x*.lisp"</TT
></TD
></TR
><TR
><TD
>or similar.</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
> platforms only.</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Pathname components</B
></P
><DL
><DT
><VAR
CLASS="replaceable"
>host</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></P
></DD
><DT
><VAR
CLASS="replaceable"
>device</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <CODE
CLASS="constant"
>:WILD</CODE
> or <TT
CLASS="filename"
>A</TT
>|...|<TT
CLASS="filename"
>Z</TT
>
 </P
></DD
><DT
><TT
CLASS="sexp"
><VAR
CLASS="replaceable"
>directory</VAR
> = (<VAR
CLASS="replaceable"
>startpoint</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="os2-dir-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>element</TH
><TH
>values</TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="replaceable"
>startpoint</VAR
></TD
><TD
><CODE
CLASS="constant"
>:RELATIVE</CODE
> | <CODE
CLASS="constant"
>:ABSOLUTE</CODE
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdirs</VAR
></TD
><TD
><TT
CLASS="sexp"
>()</TT
> | <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>subdir</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><CODE
CLASS="constant"
>:WILD-INFERIORS</CODE
></TD
><TD
><TT
CLASS="filename"
>**</TT
> or
  <TT
CLASS="filename"
>...</TT
>, all subdirectories </TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
   may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
><VAR
CLASS="replaceable"
>name</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>type</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>version</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
> or
   <CODE
CLASS="constant"
>:NEWEST</CODE
>)</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>An <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
> filename is <A
HREF="#name-type-split"
>split into name and type</A
>.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="os2-filename-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>External notation:</TD
><TD
><TT
CLASS="filename"
>"A:\sub1.typ\sub2.typ\name.typ"</TT
></TD
></TR
><TR
><TD
>using defaults:</TD
><TD
><TT
CLASS="filename"
>  "\sub1.typ\sub2.typ\name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
><TT
CLASS="filename"
>                     "name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
><TT
CLASS="filename"
>"*:\sub1.typ\**\sub3.typ\x*.lisp"</TT
></TD
></TR
><TR
><TD
>or similar.</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>Instead of <TT
CLASS="filename"
>"\"</TT
> one may use <TT
CLASS="filename"
>"/"</TT
>, as usual for
 <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
> calls.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms only.</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Pathname components</B
></P
><DL
><DT
><VAR
CLASS="replaceable"
>host</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>, wildcard characters may
   occur but do not act as wildcards</P
></DD
><DT
><VAR
CLASS="replaceable"
>device</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <CODE
CLASS="constant"
>:WILD</CODE
> or <TT
CLASS="filename"
>A</TT
>|...|<TT
CLASS="filename"
>Z</TT
>
 </P
></DD
><DT
><TT
CLASS="sexp"
><VAR
CLASS="replaceable"
>directory</VAR
> = (<VAR
CLASS="replaceable"
>startpoint</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="win32-dir-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>element</TH
><TH
>values</TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="replaceable"
>startpoint</VAR
></TD
><TD
><CODE
CLASS="constant"
>:RELATIVE</CODE
> | <CODE
CLASS="constant"
>:ABSOLUTE</CODE
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdirs</VAR
></TD
><TD
><TT
CLASS="sexp"
>()</TT
> | <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>subdir</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><CODE
CLASS="constant"
>:WILD-INFERIORS</CODE
></TD
><TD
><TT
CLASS="filename"
>**</TT
> or
  <TT
CLASS="filename"
>...</TT
>, all subdirectories </TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
   may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
><VAR
CLASS="replaceable"
>name</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>type</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>,
  may contain wildcard characters <TT
CLASS="filename"
>"?"</TT
> and
  <TT
CLASS="filename"
>"*"</TT
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>version</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
> or
   <CODE
CLASS="constant"
>:NEWEST</CODE
>)</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>If <VAR
CLASS="replaceable"
>host</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <VAR
CLASS="replaceable"
>device</VAR
> must be <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
><P
ALIGN="justify"
>A <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> filename is <A
HREF="#name-type-split"
>split into name and type</A
>.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="win32-filename-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>External notation:</TD
><TD
><TT
CLASS="filename"
>"A:\sub1.typ\sub2.typ\name.typ"</TT
></TD
></TR
><TR
><TD
>using defaults:</TD
><TD
><TT
CLASS="filename"
>  "\sub1.typ\sub2.typ\name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
><TT
CLASS="filename"
>                     "name.typ"</TT
></TD
></TR
><TR
><TD
>or</TD
><TD
><TT
CLASS="filename"
>"*:\sub1.typ\**\sub3.typ\x*.lisp"</TT
></TD
></TR
><TR
><TD
>or similar.</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>Instead of <TT
CLASS="filename"
>"\"</TT
> one may use <TT
CLASS="filename"
>"/"</TT
>, as usual for DOS
 calls.</P
><P
ALIGN="justify"
>If <VAR
CLASS="replaceable"
>host</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and the <VAR
CLASS="replaceable"
>directory</VAR
>'s <VAR
CLASS="replaceable"
>startpoint</VAR
>
 is not <CODE
CLASS="constant"
>:ABSOLUTE</CODE
>, <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>NAMESTRING</CODE
></A
>
 <VAR
CLASS="replaceable"
>pathname</VAR
>))</TT
> will not be the same as <VAR
CLASS="replaceable"
>pathname</VAR
>.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
    platforms only.</DT
><DD
><P
ALIGN="justify"
>The wildcard characters: <TT
CLASS="filename"
>"*"</TT
> matches any
 sequence of characters, <TT
CLASS="filename"
>"?"</TT
> matches any one character.
 </P
></DD
></DL
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="name-type-split"
></A
><B
>Name/type namestring split. </B
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent:  <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
>A filename is split into name and type according to the
 following rule: <P
></P
><UL
><LI
><P
ALIGN="justify"
>if there is no <TT
CLASS="filename"
>"."</TT
> in the filename, then the
   <VAR
CLASS="replaceable"
>name</VAR
> is everything, <VAR
CLASS="replaceable"
>type</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>;</P
></LI
><LI
><P
ALIGN="justify"
>if there is a <TT
CLASS="filename"
>"."</TT
>, then <VAR
CLASS="replaceable"
>name</VAR
> is the part
   before and <VAR
CLASS="replaceable"
>type</VAR
> the part after the last dot.</P
></LI
><LI
><P
ALIGN="justify"
>if the only <TT
CLASS="filename"
>"."</TT
> is the first character, then
   the behavior depends on the value of the user variable
    <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#name-type-split"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</VAR
></A
></I
></STRONG
>
   which can be either
   <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:TYPE</CODE
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> <VAR
CLASS="replaceable"
>name</VAR
>, everything after the <TT
CLASS="filename"
>"."</TT
>
     is the <VAR
CLASS="replaceable"
>type</VAR
>; or</P
></DD
><DT
><CODE
CLASS="constant"
>:NAME</CODE
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> <VAR
CLASS="replaceable"
>type</VAR
>, everything is the
     <VAR
CLASS="replaceable"
>name</VAR
></P
></DD
></DL
></DIV
>
   </P
></LI
></UL
></P
><P
ALIGN="justify"
>Due to this name/type splitting rule, there are pathnames that
 cannot result from <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
>.
 To get a pathname whose type contains a dot or whose name contains a
 dot and whose type is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PATHNAME</CODE
></A
> must be used.  Example:
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PATHNAME</CODE
></A
> <CODE
CLASS="constant"
>:NAME</CODE
> "foo.bar")</TT
>.
 </P
></DD
></DL
></DIV
></P
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>RISC OS provides several file systems as standard
  (ADFS, IDEFS, NetFS, RamFS, NetPrint) and support for extra file
  systems (DOSFS, ResourceFS and DeviceFS).</P
><P
ALIGN="justify"
>A module called FileSwitch is at the center of all file system
 operation in RISC OS.  FileSwitch provides a common core of functions
 used by all file systems.  It only provides the parts of these services
 that are device independent.  The device dependent services that
 control the hardware are provided by separate modules, which are the
 actual file systems.  FileSwitch keeps track of active file systems and
 switches between them as necessary.</P
><P
ALIGN="justify"
>One of the file system modules that RISC OS provides is
 FileCore.  It takes the normal calls that FileSwitch sends to a file
 system module, and converts them to a simpler set of calls to modules
 that control the hardware.  Unlike FileSwitch it creates a fresh
 instantiation of itself for each module that it supports.  Using
 FileCore to build file system modules imposes a more rigid structure on
 it, as more of the file system is predefined.</P
><P
ALIGN="justify"
>As well as standard file systems, FileSwitch supports image
 file systems.  These provide facilities for RISC OS to handle media in
 foreign formats, and to support `image files' (or partitions) in those
 formats.  Rather than accessing the hardware directly they rely on
 standard RISC OS file systems to do so.  DOSFS is an example of an
 image file system used to handle DOS format discs.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Terminology</DT
><DD
><P
ALIGN="justify"
>A pathname may include a file system name, a special
  field, a media name (e.g., a disc name), directory name(s), and the
  name of the object itself; each of these parts of a pathname is known
  as an `element' of the pathname.</P
></DD
><DT
>Filenames</DT
><DD
><P
ALIGN="justify"
>Filename `elements' may be up to ten characters in
  length on FileCore-based file systems and on NetFS.  These characters
  may be digits or letters.  FileSwitch makes no distinction between
  upper and lower case, although file systems can do so.  As a general
  rule, you should not use top-bit-set characters in filenames, although
  some file systems (such as FileCore-based ones) support them.  Other
  characters may be used provided they do not have a special
  significance.  Those that do are listed below:</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="filename"
>"."</TT
></DT
><DD
><P
ALIGN="justify"
>Separates directory specifications, e.g.,
   <TT
CLASS="filename"
>"$.fred"</TT
></P
></DD
><DT
><TT
CLASS="filename"
>":"</TT
></DT
><DD
><P
ALIGN="justify"
>Introduces a drive or disc specification, e.g.,
   <TT
CLASS="filename"
>":0"</TT
>, <TT
CLASS="filename"
>":bigdisc"</TT
>.  It also
   marks the end of a file system name, e.g.,
   <TT
CLASS="filename"
>"adfs:"</TT
></P
></DD
><DT
><TT
CLASS="filename"
>"*"</TT
></DT
><DD
><P
ALIGN="justify"
>Acts as a `wildcard' to match zero or more
   characters.</P
></DD
><DT
><TT
CLASS="filename"
>"#"</TT
></DT
><DD
><P
ALIGN="justify"
>Acts as a `wildcard' to match any single
   character.</P
></DD
><DT
><TT
CLASS="filename"
>"$"</TT
></DT
><DD
><P
ALIGN="justify"
>is the name of the root directory of the disc.
   </P
></DD
><DT
><TT
CLASS="filename"
>"&#38;"</TT
></DT
><DD
><P
ALIGN="justify"
>is the user root directory (URD)
   </P
></DD
><DT
><TT
CLASS="filename"
>"@"</TT
></DT
><DD
><P
ALIGN="justify"
>is the currently selected directory (CSD)
   </P
></DD
><DT
><TT
CLASS="filename"
>"^"</TT
></DT
><DD
><P
ALIGN="justify"
>is the `parent' directory
   </P
></DD
><DT
><TT
CLASS="filename"
>"%"</TT
></DT
><DD
><P
ALIGN="justify"
>is the currently selected library (CSL)
   </P
></DD
><DT
><TT
CLASS="filename"
>"\"</TT
></DT
><DD
><P
ALIGN="justify"
>is the previously selected directory (PSD)
   </P
></DD
></DL
></DIV
></DD
><DT
>Directories</DT
><DD
><P
ALIGN="justify"
>The root directory, <TT
CLASS="filename"
>"$"</TT
>, forms the top of
  the directory hierarchy of the media which contains the CSD.
  <TT
CLASS="filename"
>"$"</TT
> does not have a parent directory, trying to access its
  parent will just access <TT
CLASS="filename"
>"$"</TT
>.  Each directory name is separated
  by a <TT
CLASS="filename"
>"."</TT
> character.  For example:</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>"$.Documents.Memos"</TT
>
   </P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>"%.cc"</TT
></P
></LI
></UL
></DD
><DT
>File Systems</DT
><DD
><P
ALIGN="justify"
>Files may also be accessed on file systems other
  than the current one by prefixing the filename with a file system
  specification.  A file system name may appear between <TT
CLASS="filename"
>"-"</TT
>
  characters, or suffixed by a <TT
CLASS="filename"
>":"</TT
>, though the latter is
  advised since <TT
CLASS="filename"
>"-"</TT
> can also be used to introduce a parameter on
  a command line, or as part of a file name.  For example:</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>"-net-$.SystemMesg"</TT
>
   </P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>"adfs:%.aasm"</TT
></P
></LI
></UL
></DD
><DT
>Special Fields</DT
><DD
><P
ALIGN="justify"
>Special fields are used to supply more information
  to the file system than you can using standard path names; for example
  NetFS and NetPrint use them to specify server addresses or names. They
  are introduced by a <TT
CLASS="filename"
>"#"</TT
> character; a variety of syntaxes are
  possible:</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>  "net#MJHardy::disc1.mike"</TT
>
   </P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>     "#MJHardy::disc1.mike"</TT
>
   </P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
> "-net#MJHardy-:disc1.mike"</TT
>
   </P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>    "-#MJHardy-:disc1.mike"</TT
>
   </P
></LI
></UL
><P
ALIGN="justify"
>The special fields here are all MJHardy, and give the name of
  the fileserver to use.  Special fields may use any character except for
  control characters, double quote '"', solidus '|' and space.  If
  a special field contains a hyphen you may only use the first two
  syntaxes given above.</P
></DD
><DT
><TT
CLASS="filename"
>"File$Path"</TT
> and
  <TT
CLASS="filename"
>"Run$Path"</TT
></DT
><DD
><P
ALIGN="justify"
>These two special variables control exactly where a
  file will be looked for, according to the operation being performed on
  it.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="acorn-path-vars"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>name</TH
><TH
>purpose</TH
></TR
></THEAD
><TBODY
><TR
><TD
>File$Path</TD
><TD
>for read operations</TD
></TR
><TR
><TD
>Run$Path</TD
><TD
>for execute operations</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>The contents of each variable should expand to a list or
  prefixes, separated by commas.  When a read operation is performed
  then the prefixes in <TT
CLASS="filename"
>"File$Path"</TT
> are used in the
  order in which they are listed. The first object that matches is used,
  whether it be a file or directory.  Similarly any execute operation
  uses the prefixes in Run$Path.  These search paths are only used when
  the pathname does not contain an explicit file system reference, e.g.,
  executing <TT
CLASS="filename"
>"adfs:file"</TT
> will not use
  <TT
CLASS="filename"
>"Run$Path"</TT
>.</P
></DD
><DT
>Other path variables</DT
><DD
><P
ALIGN="justify"
>You can set up other path variables and use them as
  pseudo file systems.  For example if you typed:
  <P
CLASS="literallayout"
><KBD
CLASS="userinput"
>*Set Source$Path adfs:$.src.,adfs:$.public.src.</KBD
></P
>,
  you could then refer to the pseudo file system as
  <TT
CLASS="filename"
>"Source:"</TT
> or (less preferable) as
  <TT
CLASS="filename"
>"-Source-"</TT
>.  These path variables work in the same
  was as <TT
CLASS="filename"
>"File$Path"</TT
> and
  <TT
CLASS="filename"
>"Run$Path"</TT
>.</P
><P
ALIGN="justify"
>NOTE: Path variables are not implemented in this version of
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.  A workaround for this is to use "&#60;Foo$Path&#62;"
 instead of "Foo:" until they are made available.</P
></DD
><DT
><A
NAME="pathnames-externally-acorn"
></A
>from Lisp-string
  notation to internal representation</DT
><DD
><P
ALIGN="justify"
><I
CLASS="emphasis"
>No</I
> swapping.
   <TT
CLASS="filename"
>#P"foo.lisp"</TT
> means file type <TT
CLASS="filename"
>#P".lisp"</TT
> and file name <TT
CLASS="filename"
>#P"foo"</TT
>.
   This is pseudo-BNF:</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>legal character ::==</DT
><DD
><P
ALIGN="justify"
>any ISO latin-1 graphic character &#8805; ' ' except
    '.' ':' '*' '#' '$' '&#38;' '@' '^' '%' '\' '?'
    </P
></DD
><DT
>extended legal character ::==</DT
><DD
><P
ALIGN="justify"
>any ISO latin-1 graphic character &#8805; ' ' except
    ':' '"' '|'
    </P
></DD
><DT
>legal-wild char ::==</DT
><DD
><P
ALIGN="justify"
>legal char | '*' | '#' | '?'
    </P
></DD
><DT
>host ::==</DT
><DD
><P
ALIGN="justify"
> '-' { extended legal char except '-' }+ '-'
    | { extended legal char except '-' } { extended legal char }* ':' | empty
    </P
></DD
><DT
>device ::==</DT
><DD
><P
ALIGN="justify"
> ':' { legal char }+ '.' | empty
    </P
></DD
><DT
>directory ::==</DT
><DD
><P
ALIGN="justify"
> { '$' | '&#38;' | '@' | '%' | '\' } '.'
    { subdirectory }* | { subdirectory }+ | empty
    <DIV
CLASS="informaltable"
><P
></P
><A
NAME="acorn-directory"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>'$' -&#62;</TD
><TD
><CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
></TD
></TR
><TR
><TD
>'&#38;' -&#62;</TD
><TD
><CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:HOME</CODE
></TD
></TR
><TR
><TD
>'@' -&#62;</TD
><TD
><CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:CURRENT</CODE
></TD
></TR
><TR
><TD
>'%' -&#62;</TD
><TD
><CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:LIBRARY</CODE
></TD
></TR
><TR
><TD
>'\' -&#62;</TD
><TD
><CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:PRECIOUS</CODE
></TD
></TR
><TR
><TD
>else</TD
><TD
><CODE
CLASS="constant"
>:RELATIVE</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></DD
><DT
>subdirectory ::==</DT
><DD
><P
ALIGN="justify"
>{ '^' | { legal-wild char }+ } '.'
   <DIV
CLASS="informaltable"
><P
></P
><A
NAME="acorn-subdirectory"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>'^' -&#62;</TD
><TD
><CODE
CLASS="constant"
>:PARENT</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></DD
><DT
>filename ::==</DT
><DD
><P
ALIGN="justify"
>{ { legal-wild char }+ | empty }
   </P
></DD
><DT
>filetype ::==</DT
><DD
><P
ALIGN="justify"
>{ '.' { legal-wild char }+ | empty }
   </P
></DD
><DT
>pathname ::==</DT
><DD
><P
ALIGN="justify"
>host device directory filename filetype
   </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>Examples:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="acorn-path-example-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>String</TH
><TH
>Hostname</TH
><TH
>Device</TH
><TH
>Directory</TH
><TH
>Name</TH
><TH
>Type</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="filename"
>"-net-$.SystemMesg"</TT
></TD
><TD
><TT
CLASS="filename"
>"net"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>"SystemMesg"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"net#MJHardy::disc1.mike"</TT
></TD
><TD
><TT
CLASS="filename"
>"net#MJHardy"</TT
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>"mike"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"#MJHardy::disc1.mike"</TT
></TD
><TD
><TT
CLASS="filename"
>"#MJHardy"</TT
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>"mike"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"-net#MJHardy-:disc1.mike"</TT
></TD
><TD
><TT
CLASS="filename"
>"net#MJHardy"</TT
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>"mike"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"-#MJHardy-:disc1.mike"</TT
></TD
><TD
><TT
CLASS="filename"
>"#MJHardy"</TT
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>"mike"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"@.foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:CURRENT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"^."</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
> <CODE
CLASS="constant"
>:PARENT</CODE
>)</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"@.^."</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:CURRENT</CODE
>
        <CODE
CLASS="constant"
>:PARENT</CODE
>)</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"foo.bar"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"foo.bar.baz"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><TT
CLASS="filename"
>"baz"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"foo.bar."</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
> <TT
CLASS="filename"
>#P"bar"</TT
>)</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"foo.@."</TT
></TD
><TD
>illegal</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></DD
><DT
>From internal representation to RISCOS string</DT
><DD
><P
ALIGN="justify"
>with swapping <I
CLASS="emphasis"
>only</I
> of name/type
  components.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="acorn-name-type-swap"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>Hostname</TH
><TH
>Device</TH
><TH
>Directory</TH
><TH
>Name</TH
><TH
>Type</TH
><TH
>RISCOS String</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="filename"
>"net"</TT
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"net::disc1.$.foo"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"net#MJ"</TT
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>
          <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><TT
CLASS="filename"
>"baz"</TT
></TD
><TD
><TT
CLASS="filename"
>"net#MJ::disc1.$.foo.baz.bar"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>"adfs"</TT
></TD
><TD
><TT
CLASS="filename"
>"4"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>
          <TT
CLASS="filename"
>#P"bar"</TT
>)</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"adfs::4.$.foo.bar"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>
          <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>":disc1.$.foo.bar"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:CURRENT</CODE
>)</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
>illegal here</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
>)</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>":disc1."</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"disc1"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>":disc1."</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"$.foo"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:CURRENT</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"@.foo"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><TT
CLASS="filename"
>"bar.foo"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><TT
CLASS="filename"
>"baz"</TT
></TD
><TD
><TT
CLASS="filename"
>"foo.baz.bar"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:LIBRARY</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"%.bar"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:LIBRARY</CODE
>
          <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"%.foo.bar"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"foo"</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><TT
CLASS="filename"
>"bar.foo"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>"foo.bar"</TT
></TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RELATIVE</CODE
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>#P"bar"</TT
></TD
><TD
>illegal here</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>That is, the RISCOS string is the flattening-concatenation
 of</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (append
    (if (null hostname) "" (append hostname ":"))
    (if (null device) "" (append ":" device "."))
    (case (pop directory)
      (:absolute (case (pop directory)
                         (:root "$.")
                         (:home "&#38;.")
                         (:current "@.")
                         (:library "%.")
                         (:previous "\\.")))
      (:relative ""))
    (mapcar (lambda (subdir) (append subdir ".")) directory)
    (if (null name)
        (if (null type) "" (error "type with name illegal here"))
        (if (null type)
            name
            (append type "." name))))
</PRE
></TD
></TR
></TABLE
></DD
><DT
>internal representation</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Pathname components</B
></P
><DL
><DT
><VAR
CLASS="replaceable"
>host</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
></P
></DD
><DT
><VAR
CLASS="replaceable"
>device</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
></P
></DD
><DT
><TT
CLASS="sexp"
><VAR
CLASS="replaceable"
>directory</VAR
> = (<VAR
CLASS="replaceable"
>startpoint</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="acorn-dir-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>element</TH
><TH
>values</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="replaceable"
>startpoint</VAR
></TD
><TD
><CODE
CLASS="constant"
>:RELATIVE</CODE
> | <CODE
CLASS="constant"
>:ABSOLUTE</CODE
>
   <VAR
CLASS="replaceable"
>anchor</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>anchor</VAR
></TD
><TD
><CODE
CLASS="constant"
>:ROOT</CODE
> | <CODE
CLASS="constant"
>:HOME</CODE
> | <CODE
CLASS="constant"
>:CURRENT</CODE
> | <CODE
CLASS="constant"
>:LIBRARY</CODE
> |
   <CODE
CLASS="constant"
>:PRECIOUS</CODE
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdirs</VAR
></TD
><TD
><TT
CLASS="sexp"
>()</TT
> | <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>subdir</VAR
>
   . <VAR
CLASS="replaceable"
>subdirs</VAR
>)</TT
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><CODE
CLASS="constant"
>:PARENT</CODE
></TD
></TR
><TR
><TD
><VAR
CLASS="replaceable"
>subdir</VAR
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>, may contain wildcard characters
   <TT
CLASS="filename"
>"?"</TT
>, <TT
CLASS="filename"
>"#"</TT
> and <TT
CLASS="filename"
>"*"</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
><VAR
CLASS="replaceable"
>name</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, may contain wildcard
 characters <TT
CLASS="filename"
>"?"</TT
>,<TT
CLASS="filename"
>"#"</TT
> and <TT
CLASS="filename"
>"*"</TT
> (may also be
 specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>type</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>, may contain wildcard
 characters <TT
CLASS="filename"
>"?"</TT
>,<TT
CLASS="filename"
>"#"</TT
> and <TT
CLASS="filename"
>"*"</TT
> (may also be
 specified as <CODE
CLASS="constant"
>:WILD</CODE
>)</P
></DD
><DT
><VAR
CLASS="replaceable"
>version</VAR
></DT
><DD
><P
ALIGN="justify"
>always <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (may also be specified as <CODE
CLASS="constant"
>:WILD</CODE
> or
   <CODE
CLASS="constant"
>:NEWEST</CODE
>)</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>Constraint: <VAR
CLASS="replaceable"
>startpoint</VAR
> is not <CODE
CLASS="constant"
>:ABSOLUTE</CODE
> <CODE
CLASS="constant"
>:ROOT</CODE
> only if device
 is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>. If the device is specified, the pathname must be <CODE
CLASS="constant"
>:ABSOLUTE</CODE
>
 <CODE
CLASS="constant"
>:ROOT</CODE
>.</P
><P
ALIGN="justify"
>The wildcard characters: <TT
CLASS="filename"
>"*"</TT
> matches any sequence of
 characters, <TT
CLASS="filename"
>"#"</TT
> or <TT
CLASS="filename"
>"?"</TT
> matches any one character.</P
><P
ALIGN="justify"
>Due to the name/type swapping rule, there are pathnames that
 cannot result from <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
>.  To get a pathname whose type is
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PATHNAME</CODE
></A
> must be used.  Example: <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PATHNAME</CODE
></A
> :directory "!Clisp." <CODE
CLASS="constant"
>:NAME</CODE
>
 "README")</TT
>.</P
></DD
></DL
></DIV
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="unspecific"
>19.2. :UNSPECIFIC as a Component Value
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_19-2-2-2-3.html"
TARGET="_top"
>[CLHS-19.2.2.2.3]</A
></A
></H2
><P
ALIGN="justify"
>The symbol <CODE
CLASS="constant"
>:UNSPECIFIC</CODE
> is not permitted as a
 pathname component for any slot of any pathname.
 It is also illegal to pass it as an argument to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PATHNAME</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="path-external-notation"
>19.3. External notation.</A
></H2
><P
ALIGN="justify"
>External notation of pathnames (cf. <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>NAMESTRING</CODE
></A
>), of course without spaces, [,],{,}:</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
> platforms only.</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="dos-path-external-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>[ [drivespec] : ]</TD
><TD
>a letter <TT
CLASS="filename"
>"*"</TT
>|<TT
CLASS="filename"
>a</TT
>|...|<TT
CLASS="filename"
>z</TT
>|<TT
CLASS="filename"
>A</TT
>|...|<TT
CLASS="filename"
>Z</TT
></TD
></TR
><TR
><TD
>{ name [. type] \ }</TD
><TD
>each one a subdirectory, <TT
CLASS="filename"
>"\"</TT
> may be replaced by
    <TT
CLASS="filename"
>"/"</TT
></TD
></TR
><TR
><TD
>[ name [. type] ]</TD
><TD
>filename with type (extension)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>Name and type may be <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>s of any <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
>
 (consisting of alphanumeric characters and <TT
CLASS="filename"
>"-"</TT
>,
 <TT
CLASS="filename"
>"_"</TT
>).  They are shortened to 8 (respectively 3)
 characters and converted to upper case.  A single <TT
CLASS="filename"
>"*"</TT
> is
 allowed for <CODE
CLASS="constant"
>:WILD</CODE
>.</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>see <A
HREF="#pathnames-externally-amiga"
>above</A
>.
</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only.</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="unix-path-external-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>[ <TT
CLASS="filename"
>"/"</TT
> ]</TD
><TD
><TT
CLASS="filename"
>"/"</TT
> denotes absolute pathnames</TD
></TR
><TR
><TD
>{ <VAR
CLASS="replaceable"
>name</VAR
> <TT
CLASS="filename"
>"/"</TT
> }</TD
><TD
>each one a subdirectory</TD
></TR
><TR
><TD
>[ <VAR
CLASS="replaceable"
>name</VAR
> [<TT
CLASS="filename"
>"."</TT
> <VAR
CLASS="replaceable"
>type</VAR
>] ]</TD
><TD
>filename with type (extension)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>Name and type may be <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>s of any <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
>
 (consisting of printing <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> characters, except <TT
CLASS="filename"
>"/"</TT
>).</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms only.</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="win32-path-external-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><TBODY
><TR
><TD
>[ [<VAR
CLASS="replaceable"
>drivespec</VAR
>] : ]</TD
><TD
>a letter <TT
CLASS="filename"
>"*"</TT
>|<TT
CLASS="filename"
>a</TT
>|...|<TT
CLASS="filename"
>z</TT
>|<TT
CLASS="filename"
>A</TT
>|...|<TT
CLASS="filename"
>Z</TT
></TD
></TR
><TR
><TD
>{ <VAR
CLASS="replaceable"
>name</VAR
> [. <VAR
CLASS="replaceable"
>type</VAR
>] \ }</TD
><TD
>each one a subdirectory, <TT
CLASS="filename"
>"\"</TT
> may be
     replaced by <TT
CLASS="filename"
>"/"</TT
></TD
></TR
><TR
><TD
>[ <VAR
CLASS="replaceable"
>name</VAR
> [. <VAR
CLASS="replaceable"
>type</VAR
>] ]</TD
><TD
>filename with type (extension)</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>Name and type may be <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>s of any <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
>
 (consisting of printing <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> characters, except <TT
CLASS="filename"
>"/"</TT
>,
 <TT
CLASS="filename"
>"\"</TT
>, <TT
CLASS="filename"
>":"</TT
>).</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>see <A
HREF="#pathnames-externally-acorn"
>above</A
>.
</P
></DD
></DL
></DIV
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>NAMESTRING</CODE
></A
> has an optional flag argument: <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_namestrin_h-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>NAMESTRING</CODE
></A
> <VAR
CLASS="replaceable"
>pathname</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>)</TT
> returns an external
 notation suitable for passing to the operating system or other
 programs.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent:  <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
>The function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_user-homedir-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>USER-HOMEDIR-PATHNAME</CODE
></A
> is not implemented.
</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>If you really need that function, you can define it
    like this:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(defun user-homedir-pathname (<A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> host)
  (declare (ignore host))
  (or (<A
HREF="#getenv"
><CODE
CLASS="function"
>EXT:GETENV</CODE
></A
> "HOME") "\\"))
</PRE
></TD
></TR
></TABLE
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="log-path"
>19.4. Logical Pathnames
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_19-3.html"
TARGET="_top"
>[CLHS-19.3]</A
></A
></H2
><P
ALIGN="justify"
>When the argument of the function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_translate_cal-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>TRANSLATE-LOGICAL-PATHNAME</CODE
></A
> is
 a string, it is interpreted as a logical pathname string.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="filename-dict"
>19.5. The Filenames Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_filen_s_dictionary.html"
TARGET="_top"
>[CLHS-19.4]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><A
NAME="path-des"
></A
><B
>Pathname Designators. </B
>When <A
HREF="#parsename"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-ANSI*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
> is also treated as a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#pathname_designator"
TARGET="_top"
>pathname
   designator</A
>, namely its <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_symbol-name.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-NAME</CODE
></A
> is converted to the
  operating system's preferred pathname case.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>PATHNAME</CODE
></A
>. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>PATHNAME</CODE
></A
> always returns a physical pathname.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html"
TARGET="_top"
><CODE
CLASS="function"
>PATHNAME-MATCH-P</CODE
></A
>. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html"
TARGET="_top"
><CODE
CLASS="function"
>PATHNAME-MATCH-P</CODE
></A
> does not interpret missing components as
  wild.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="translate-pathname"
>19.5.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>TRANSLATE-PATHNAME</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>TRANSLATE-PATHNAME</CODE
></A
> has two additional keywords: <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_translate-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>TRANSLATE-PATHNAME</CODE
></A
> <VAR
CLASS="replaceable"
>source</VAR
>
 <VAR
CLASS="replaceable"
>from-wildname</VAR
>
 <VAR
CLASS="replaceable"
>to-wildname</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:ALL</CODE
>
 <CODE
CLASS="constant"
>:MERGE</CODE
>)</TT
></P
><P
ALIGN="justify"
>If <CODE
CLASS="constant"
>:ALL</CODE
> is specified and non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, a list of all resulting
 pathnames, corresponding to all matches of <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pathname-match-p.html"
TARGET="_top"
><CODE
CLASS="function"
>PATHNAME-MATCH-P</CODE
></A
> <VAR
CLASS="replaceable"
>source</VAR
>
 <VAR
CLASS="replaceable"
>from-wildname</VAR
>)</TT
>, is returned.  If
 <CODE
CLASS="constant"
>:MERGE</CODE
> is specified and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, unspecified pieces of
 <VAR
CLASS="replaceable"
>to-pathname</VAR
> are not replaced by
 corresponding pieces of <VAR
CLASS="replaceable"
>source</VAR
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="parsename"
>19.5.2. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-namestring.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-NAMESTRING</CODE
></A
> <VAR
CLASS="replaceable"
>string</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
   <VAR
CLASS="replaceable"
>host</VAR
> <VAR
CLASS="replaceable"
>defaults</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <VAR
CLASS="replaceable"
>start</VAR
> <VAR
CLASS="replaceable"
>end</VAR
>
   <VAR
CLASS="replaceable"
>junk-allowed</VAR
>)</TT
>
 returns a logical pathname only if <VAR
CLASS="replaceable"
>host</VAR
> is a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_l.html#logical_host"
TARGET="_top"
>logical host</A
>
 or <VAR
CLASS="replaceable"
>host</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and <VAR
CLASS="replaceable"
>defaults</VAR
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_logical-pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>LOGICAL-PATHNAME</CODE
></A
>.
 To construct a logical pathname from a string, the function
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>LOGICAL-PATHNAME</CODE
></A
> can be used.</P
><P
ALIGN="justify"
>The <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> behavior of recognizing logical pathnames when
 the <VAR
CLASS="replaceable"
>string</VAR
> begins with some alphanumeric characters followed by a
 colon (<SPAN
CLASS="keysym"
>#\:</SPAN
>) can be very confusing
 (cf. <TT
CLASS="filename"
>"c:/autoexec.bat"</TT
>,
 <TT
CLASS="filename"
>"home:.clisprc"</TT
> and
 <TT
CLASS="filename"
>"prep:/pub/gnu"</TT
>)
 and therefore is disabled by default.
 To enable the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> behavior, you should set <A
HREF="#parsename"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-ANSI*</VAR
></A
> to
 non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="pathmerge"
>19.5.3. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> <VAR
CLASS="replaceable"
>pathname</VAR
>
   [<VAR
CLASS="replaceable"
>default-pathname</VAR
>])</TT
> returns a
   logical pathname only if
 <VAR
CLASS="replaceable"
>default-pathname</VAR
> is a logical pathname.
 To construct a logical pathname from a string, the function
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_logical-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>LOGICAL-PATHNAME</CODE
></A
> can be used.</P
><P
ALIGN="justify"
>When both <VAR
CLASS="replaceable"
>pathname</VAR
> and <VAR
CLASS="replaceable"
>default-pathname</VAR
>
 are relative pathnames, the behavior depends on <A
HREF="#pathmerge"
><VAR
CLASS="varname"
>CUSTOM:*MERGE-PATHNAMES-ANSI*</VAR
></A
>: when it is
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, then <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> retains its traditional behavior:
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> #P"x/" #P"y/")</TT
>
 evaluates to <TT
CLASS="filename"
>#P"x/"</TT
></P
><DIV
CLASS="formalpara"
><P
><B
>Rationale. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> is used to specify default components for
 pathnames, so there is some analogy between
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> a b)</TT
> and
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_or.html"
TARGET="_top"
><CODE
CLASS="function"
>OR</CODE
></A
> a b)</TT
>.  Obviously, putting in the
 same default a second time should do the same as putting it in once:
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_or.html"
TARGET="_top"
><CODE
CLASS="function"
>OR</CODE
></A
> a b b)</TT
> is the same as
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_or.html"
TARGET="_top"
><CODE
CLASS="function"
>OR</CODE
></A
> a b)</TT
>, so
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> a b) b)</TT
>
 should be the same as
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> a b)</TT
>.</P
></DIV
><P
ALIGN="justify"
>(This question actually does matter because in <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> there is no
 distinction between <SPAN
CLASS="QUOTE"
>"pathnames with defaults merged-in"</SPAN
> and
 <SPAN
CLASS="QUOTE"
>"pathnames with defaults not yet applied"</SPAN
>.)</P
><P
ALIGN="justify"
>Now, <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
>
 #P"x/" #P"y/") #P"y/")</TT
> and <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> #P"x/" #P"y/")</TT
> are <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_equal.html"
TARGET="_top"
><CODE
CLASS="function"
>EQUAL</CODE
></A
>
 in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> (when <A
HREF="#pathmerge"
><VAR
CLASS="varname"
>CUSTOM:*MERGE-PATHNAMES-ANSI*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>), but not in implementations that
 strictly follow the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> spec.  In fact, the above twice-default =
 once-default rule holds for all pathnames in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
><P
ALIGN="justify"
>Reversely, when <A
HREF="#pathmerge"
><VAR
CLASS="varname"
>CUSTOM:*MERGE-PATHNAMES-ANSI*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
 the normal <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> behavior is exhibited:
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_merge-pathnames.html"
TARGET="_top"
><CODE
CLASS="function"
>MERGE-PATHNAMES</CODE
></A
> #P"x/" #P"y/")</TT
>
 evaluates to <TT
CLASS="filename"
>#P"y/x/"</TT
>.</P
><DIV
CLASS="formalpara"
><P
><B
>Rationale. </B
><SPAN
CLASS="QUOTE"
>"merge"</SPAN
> is <I
CLASS="emphasis"
>merge</I
> and
 not <I
CLASS="emphasis"
>or</I
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="load-lpt"
>19.5.4. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</CODE
></A
></A
></H3
><P
ALIGN="justify"
>When the <VAR
CLASS="replaceable"
>host</VAR
> argument to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</CODE
></A
>
is not a defined logical host yet, we proceed as follows:
<P
></P
><OL
TYPE="1"
><LI
><P
ALIGN="justify"
>If both <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>s
  <VAR
CLASS="envar"
>LOGICAL_HOST_<VAR
CLASS="replaceable"
>host</VAR
>_FROM</VAR
> and
  <VAR
CLASS="envar"
>LOGICAL_HOST_<VAR
CLASS="replaceable"
>host</VAR
>_TO</VAR
> exist, then their values
  define the map of the <VAR
CLASS="replaceable"
>host</VAR
>.</P
></LI
><LI
><P
ALIGN="justify"
>If the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>
  <VAR
CLASS="envar"
>LOGICAL_HOST_<VAR
CLASS="replaceable"
>host</VAR
></VAR
> exists, its value is read from,
  and the result is passed to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html"
TARGET="_top"
><CODE
CLASS="function"
>LOGICAL-PATHNAME-TRANSLATIONS</CODE
></A
>)</TT
>.</P
></LI
><LI
><P
ALIGN="justify"
>Variable <A
HREF="#load-lpt"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</VAR
></A
> is consulted.
  Its value should be a list of files and/or directories,
  which are searched for in the <A
HREF="#load-paths"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-PATHS*</VAR
></A
>, just like for <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
>.
  When the element is a file, it is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
TARGET="_top"
><CODE
CLASS="function"
>READ</CODE
></A
> from,
  <A
HREF="http://www.franz.com/support/documentation/6.0/doc/pathnames.htm#load-logical-pathname-translations-2"
TARGET="_top"
>Allegro CL-style</A
>,
  odd objects being host names and even object being their
  <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html"
TARGET="_top"
><CODE
CLASS="function"
>LOGICAL-PATHNAME-TRANSLATIONS</CODE
></A
>.
  When the element is a directory, a file, named <TT
CLASS="filename"
><VAR
CLASS="replaceable"
>host</VAR
></TT
>
  or <TT
CLASS="filename"
><VAR
CLASS="replaceable"
>host</VAR
>.host</TT
>, in that directory, is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
TARGET="_top"
><CODE
CLASS="function"
>READ</CODE
></A
>
  from once, <A
HREF="http://cvs2.cons.org/ftp-area/cmucl/doc/cmu-user/extensions.html#logical-pathnames"
TARGET="_top"
>CMUCL-style</A
>,
  the object read being the
  <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_logical-p_translations.html"
TARGET="_top"
><CODE
CLASS="function"
>LOGICAL-PATHNAME-TRANSLATIONS</CODE
></A
> of the <VAR
CLASS="replaceable"
>host</VAR
>.</P
></LI
></OL
></P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="files"
></A
>Chapter 20. Files
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-20.html"
TARGET="_top"
>[CLHS-20]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="file-dict"
>20.1. The Files Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_files_dictionary.html"
TARGET="_top"
>[CLHS-20.2]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_rename-file.html"
TARGET="_top"
><CODE
CLASS="function"
>RENAME-FILE</CODE
></A
>. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_rename-file.html"
TARGET="_top"
><CODE
CLASS="function"
>RENAME-FILE</CODE
></A
> always returns a non-logical pathname as
 its first value.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html"
TARGET="_top"
><CODE
CLASS="function"
>PROBE-FILE</CODE
></A
>. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html"
TARGET="_top"
><CODE
CLASS="function"
>PROBE-FILE</CODE
></A
> cannot be used to check whether a directory exists.
 Use functions <A
HREF="#probe-dir"
><CODE
CLASS="function"
>EXT:PROBE-DIRECTORY</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> for this.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-author.html"
TARGET="_top"
><CODE
CLASS="function"
>FILE-AUTHOR</CODE
></A
>. </B
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-author.html"
TARGET="_top"
><CODE
CLASS="function"
>FILE-AUTHOR</CODE
></A
> always returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, because the operating systems
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is ported to do not store a file's author in the file system.
 Some operating systems, such as Unix, have the notion of a file's
 owner, and some other <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> implementations return the user name of the
 file owner.  <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> does not do this, because
 <I
CLASS="emphasis"
>owner</I
> and <I
CLASS="emphasis"
>author</I
> are not the
 same; in particular, authorship is preserved by copying, while
 ownership is not.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="probe-dir"
></A
><B
>Function <A
HREF="#probe-dir"
><CODE
CLASS="function"
>EXT:PROBE-DIRECTORY</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="#probe-dir"
><CODE
CLASS="function"
>EXT:PROBE-DIRECTORY</CODE
></A
> <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
> tests
 whether <VAR
CLASS="replaceable"
>pathname</VAR
> exists and is a directory.
 It will, unlike <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_probe-file.html"
TARGET="_top"
><CODE
CLASS="function"
>PROBE-FILE</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_truename.html"
TARGET="_top"
><CODE
CLASS="function"
>TRUENAME</CODE
></A
>, not <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>
 if the parent directory of <VAR
CLASS="replaceable"
>pathname</VAR
> does not exist.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="del-file"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html"
TARGET="_top"
><CODE
CLASS="function"
>DELETE-FILE</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_delete-file.html"
TARGET="_top"
><CODE
CLASS="function"
>DELETE-FILE</CODE
></A
> <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
> deletes
 the pathname <VAR
CLASS="replaceable"
>pathname</VAR
>, not its <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_truename.html"
TARGET="_top"
><CODE
CLASS="function"
>TRUENAME</CODE
></A
>, and returns the absolute
 pathname it actually removed or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if <VAR
CLASS="replaceable"
>pathname</VAR
> did not exist.
 When <VAR
CLASS="replaceable"
>pathname</VAR
> points to a file which is currently open in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>, an
 <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>led.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dir"
>20.1.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>pathname</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
  :FULL :CIRCLE <CODE
CLASS="constant"
>:IF-DOES-NOT-EXIST</CODE
>)</TT
> can run in two modes:
<P
></P
><UL
><LI
><P
ALIGN="justify"
>If <VAR
CLASS="replaceable"
>pathname</VAR
> contains no name or type component, a
  list of all matching directories is produced.
  E.g., <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> "/etc/*/")</TT
> lists
  all subdirectories in the directory
  <TT
CLASS="filename"
>#P"/etc/"</TT
>.</P
></LI
><LI
><P
ALIGN="justify"
>Otherwise a list of all matching files is returned.
  E.g., <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> "/etc/*")</TT
> lists all
  regular files in the directory <TT
CLASS="filename"
>#P"/etc/"</TT
>.
  If the <CODE
CLASS="constant"
>:FULL</CODE
> argument is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
  additional information is returned: for each matching file you get a
  list of at least four elements <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>file-pathname</VAR
>
  <VAR
CLASS="replaceable"
>file-truename</VAR
>
  <VAR
CLASS="replaceable"
>file-write-date-as-decoded-time</VAR
>
  <VAR
CLASS="replaceable"
>file-length</VAR
>)</TT
>.</P
></LI
></UL
>

If you want <I
CLASS="emphasis"
>all</I
> the files <I
CLASS="emphasis"
>and</I
>
subdirectories in the current directory, you should use
<TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_nconc.html"
TARGET="_top"
><CODE
CLASS="function"
>NCONC</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> "*/") (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> "*"))</TT
>.
If you want all the files and subdirectories in all the subdirectories
under the current directory
(similar to the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/ls.html"
TARGET="_top"
><B
CLASS="command"
>ls</B
></A
> <VAR
CLASS="option"
>-R</VAR
> <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> command),
use <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_nconc.html"
TARGET="_top"
><CODE
CLASS="function"
>NCONC</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> "**/")
 (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> "**/*"))</TT
>.


<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>If the <CODE
CLASS="constant"
>:CIRCLE</CODE
> argument is
 non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the function avoids endless loops that may result from
 symbolic links.</P
></DD
></DL
></DIV
>


The argument <CODE
CLASS="constant"
>:IF-DOES-NOT-EXIST</CODE
> controls the treatment of links
pointing to non-existent files and can take the following values:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:DISCARD</CODE
> (default)</DT
><DD
><P
ALIGN="justify"
>discard the bad directory entries
</P
></DD
><DT
><CODE
CLASS="constant"
>:ERROR</CODE
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> on bad directory entries
   (this corresponds to the default behavior of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
> in <A
HREF="http://www.cons.org/cmucl"
TARGET="_top"
><B
CLASS="command"
>CMU CL</B
></A
>)
</P
></DD
><DT
><CODE
CLASS="constant"
>:KEEP</CODE
></DT
><DD
><P
ALIGN="justify"
>keep bad directory entries in the returned list
   (this roughly corresponds to the <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
>
    ... <CODE
CLASS="constant"
>:TRUNAMEP</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>)</TT
> call in <A
HREF="http://www.cons.org/cmucl"
TARGET="_top"
><B
CLASS="command"
>CMU CL</B
></A
>)
</P
></DD
><DT
><CODE
CLASS="constant"
>:IGNORE</CODE
></DT
><DD
><P
ALIGN="justify"
>Similar to <CODE
CLASS="constant"
>:DISCARD</CODE
>, but also
   do not signal an error when a directory is unaccessible (contrary to
   the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> specification).</P
></DD
></DL
></DIV
>

</P
><DIV
CLASS="formalpara"
><P
><B
>Function <CODE
CLASS="function"
>EXT:DIR</CODE
>. </B
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DIR</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
> is like <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_directory.html"
TARGET="_top"
><CODE
CLASS="function"
>DIRECTORY</CODE
></A
>, but displays the pathnames
 instead of returning them. <TT
CLASS="sexp"
>(EXT:DIR)</TT
>
 shows the contents of the current directory.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="cd"
></A
><B
>Function <A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
> <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
> sets it,
 <TT
CLASS="sexp"
>(<A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
>)</TT
> returns it.
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
> [<VAR
CLASS="replaceable"
>pathname</VAR
>])</TT
>
   manages the current directory.</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
> [<VAR
CLASS="replaceable"
>pathname</VAR
>])</TT
>
   manages the current host, current device and the current directory.
   </P
></DD
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
> [<VAR
CLASS="replaceable"
>pathname</VAR
>])</TT
>
   manages the current device and the current directory.
   </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <CODE
CLASS="function"
>EXT:DEFAULT-DIRECTORY</CODE
>. </B
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DEFAULT-DIRECTORY</CODE
>)</TT
> is
 equivalent to <TT
CLASS="sexp"
>(<A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
>)</TT
>.  <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<CODE
CLASS="function"
>EXT:DEFAULT-DIRECTORY</CODE
>)
 <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
> is equivalent to <TT
CLASS="sexp"
>(<A
HREF="#cd"
><CODE
CLASS="function"
>EXT:CD</CODE
></A
>
 <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
>, except for the return value.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <CODE
CLASS="function"
>EXT:MAKE-DIR</CODE
>. </B
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:MAKE-DIR</CODE
>
 <VAR
CLASS="replaceable"
>directory-pathname</VAR
>)</TT
>
 creates a new subdirectory.</P
></DIV
><DIV
CLASS="formalpara"
><P
><B
>Function <CODE
CLASS="function"
>EXT:DELETE-DIR</CODE
>. </B
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DELETE-DIR</CODE
>
 <VAR
CLASS="replaceable"
>directory-pathname</VAR
>)</TT
> removes an
 (empty) subdirectory.</P
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="streams"
></A
>Chapter 21. Streams
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-21.html"
TARGET="_top"
>[CLHS-21]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="streams-interactive"
>21.1. Interactive Streams
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_21-1-1-1-3.html"
TARGET="_top"
>[CLHS-21.1.1.1.3]</A
></A
></H2
><P
ALIGN="justify"
>Interactive streams are those whose next input might depend on a
 prompt one might output.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="terminal"
>21.2. Terminal interaction.</A
></H2
><P
></P
><DIV
CLASS="variablelist"
><P
><B
><A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html"
TARGET="_top"
>readline</A
></B
></P
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
> platforms
    only, and only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built <B
CLASS="emphasis"
>without</B
> compile-time flag <B
CLASS="emphasis"
><VAR
CLASS="option"
>NO_READLINE</VAR
></B
>
    (and when <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html"
TARGET="_top"
>readline</A
> is installed on your machine already).</DT
><DD
><P
ALIGN="justify"
>Input through <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
> uses the <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html"
TARGET="_top"
>readline</A
>
  library.  Arrow keys can be used to move within the input history.
  The <SPAN
CLASS="keysym"
>#\Tab</SPAN
> key completes the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
> name or
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
> that is being typed.
  See <A
HREF="http://cnswww.cns.cwru.edu/~chet/readline/rluserman.html"
TARGET="_top"
>readline user manual</A
> for general details and
  <A
HREF="clisp.html#completion"
TARGET="_top"
>CLISP manual</A
> for
  <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>-specific extensions.
  The <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://cnswww.cns.cwru.edu/~chet/readline/rltop.html"
TARGET="_top"
>readline</A
> library is not used if standard input and standard
  output do not both refer to the same terminal.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Macro <A
HREF="#terminal"
><CODE
CLASS="function"
>EXT:WITH-KEYBOARD</CODE
></A
></B
></P
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>, <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>,
  <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
> is not the only stream that
 communicates directly with the user: During execution of the body of a
 <TT
CLASS="sexp"
>(<A
HREF="#terminal"
><CODE
CLASS="function"
>EXT:WITH-KEYBOARD</CODE
></A
> . <VAR
CLASS="replaceable"
>body</VAR
>)</TT
> form,
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#terminal"
><VAR
CLASS="varname"
>EXT:*KEYBOARD-INPUT*</VAR
></A
></I
></STRONG
> is the stream that reads the
 keystrokes from the keyboard.
 It returns every keystroke in detail, as <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> or
 <A
HREF="#input-char"
><CODE
CLASS="classname"
>SYS::INPUT-CHARACTER</CODE
></A
> with the following bits:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:hyper</CODE
></DT
><DD
><P
ALIGN="justify"
><I
CLASS="emphasis"
>(Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>,
   <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.)</I
>
   if a non-standard key.  These keys are:

   <I
CLASS="emphasis"
>[<A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>]:</I
>
   Function keys, cursor keypads, numeric keypad.


   <I
CLASS="emphasis"
>[<A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>]:</I
>Function keys, cursor keypad.

   </P
></DD
><DT
>slot <VAR
CLASS="replaceable"
>key</VAR
></DT
><DD
><P
ALIGN="justify"
>the key name, for non-standard keys:
      <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>
          platforms only.</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="dos-kbd-keys"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>key</TH
><TH
>value</TH
></TR
></THEAD
><TBODY
><TR
><TD
><SPAN
CLASS="keycode"
>F1</SPAN
>..<SPAN
CLASS="keycode"
>F12</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:F1</CODE
>..<CODE
CLASS="constant"
>:F12</CODE
>
         </TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Insert</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Insert</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Delete</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Delete</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Home</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Home</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>End</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:End</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>PgUp</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:PgUp</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>PgDn</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:PgDn</CODE
></TD
></TR
><TR
><TD
>Arrow keys</TD
><TD
><CODE
CLASS="constant"
>:Left</CODE
><CODE
CLASS="constant"
>:Right</CODE
>
         <CODE
CLASS="constant"
>:Up</CODE
><CODE
CLASS="constant"
>:Down</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
         platforms only.</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="unix-kbd-keys"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>key</TH
><TH
>value</TH
></TR
></THEAD
><TBODY
><TR
><TD
><SPAN
CLASS="keycode"
>F1</SPAN
>..<SPAN
CLASS="keycode"
>F12</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:F1</CODE
>..<CODE
CLASS="constant"
>:F12</CODE
>
         </TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Insert</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Insert</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Delete</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Delete</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Home</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Home</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>End</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:End</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Center</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Center</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>PgUp</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:PgUp</CODE
></TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>PgDn</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:PgDn</CODE
></TD
></TR
><TR
><TD
>Arrow keys</TD
><TD
><CODE
CLASS="constant"
>:Left</CODE
><CODE
CLASS="constant"
>:Right</CODE
>
         <CODE
CLASS="constant"
>:Up</CODE
><CODE
CLASS="constant"
>:Down</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="amiga-kbd-keys"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>key</TH
><TH
>value</TH
></TR
></THEAD
><TBODY
><TR
><TD
><SPAN
CLASS="keycode"
>F1</SPAN
>..<SPAN
CLASS="keycode"
>F10</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:F1</CODE
>..<CODE
CLASS="constant"
>:F10</CODE
>
         </TD
></TR
><TR
><TD
><SPAN
CLASS="keycode"
>Help</SPAN
></TD
><TD
><CODE
CLASS="constant"
>:Help</CODE
></TD
></TR
><TR
><TD
>Arrow keys</TD
><TD
><CODE
CLASS="constant"
>:Left</CODE
><CODE
CLASS="constant"
>:Right</CODE
>
         <CODE
CLASS="constant"
>:Up</CODE
><CODE
CLASS="constant"
>:Down</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
></DL
></DIV
></P
></DD
><DT
>slot <VAR
CLASS="replaceable"
>char</VAR
></DT
><DD
><P
ALIGN="justify"
>the <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> code for standard keys
    </P
></DD
><DT
><CODE
CLASS="constant"
>:super</CODE
></DT
><DD
><P
ALIGN="justify"
><I
CLASS="emphasis"
>(Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>,
     <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.)</I
>
  if pressed together with <B
CLASS="keycap"
>Shift</B
> key(s) and if the keystroke would
  have been an other without <B
CLASS="keycap"
>Shift</B
>.</P
></DD
><DT
><CODE
CLASS="constant"
>:control</CODE
></DT
><DD
><P
ALIGN="justify"
>if pressed together with the <B
CLASS="keycap"
>Control</B
> key.
   </P
></DD
><DT
><CODE
CLASS="constant"
>:meta</CODE
></DT
><DD
><P
ALIGN="justify"
><I
CLASS="emphasis"
>(Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
    platforms only.)</I
> if pressed together with the <B
CLASS="keycap"
>Alternate</B
> key.
  </P
></DD
></DL
></DIV
>

 This keyboard input is not echoed on the screen.  During execution of a
 <TT
CLASS="sexp"
>(<A
HREF="#terminal"
><CODE
CLASS="function"
>EXT:WITH-KEYBOARD</CODE
></A
> . <VAR
CLASS="replaceable"
>body</VAR
>)</TT
> form, no input from
 <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
> or any synonymous stream should be requested.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>See also <A
HREF="#screen"
>Random Screen Access</A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="stream-dict"
>21.3. The Streams Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_streams_dictionary.html"
TARGET="_top"
>[CLHS-21.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="stream-eltype"
>21.3.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>able. The <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> of
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s created by the functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN</CODE
></A
>, <A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-INPUT-STREAM</CODE
></A
>
  <A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-OUTPUT-STREAM</CODE
></A
>, <A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-IO-STREAM</CODE
></A
>, <A
HREF="#so-accept"
><CODE
CLASS="function"
>SOCKET:SOCKET-ACCEPT</CODE
></A
>, <A
HREF="#so-connect"
><CODE
CLASS="function"
>SOCKET:SOCKET-CONNECT</CODE
></A
>
  can be modified, if the old and the new <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>s are either
<P
></P
><UL
><LI
><P
ALIGN="justify"
>both equivalent to <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> or
      <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
>; or</P
></LI
><LI
><P
ALIGN="justify"
>both equivalent to <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
> or
      <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>, with the same <VAR
CLASS="replaceable"
>n</VAR
>.</P
></LI
></UL
></P
><P
ALIGN="justify"
>Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> and <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>)</TT
> are <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>GENERIC-FUNCTION</CODE
></A
>s, see
 section <A
HREF="#gray"
>"Gray streams"</A
>.</P
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="bin-stdio"
>21.3.1.1. Binary input from <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*STANDARD-INPUT*</VAR
></A
></A
></H4
><P
ALIGN="justify"
>Note that you cannot change <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> for some
 built-in streams, such as <A
HREF="#terminal"
>terminal streams</A
>,
 which is normally the value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
>.
 Since <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*STANDARD-INPUT*</VAR
></A
> normally is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_synonym-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYNONYM-STREAM</CODE
></A
> pointing
 to <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
>, you cannot use <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
> in the it.</P
><P
ALIGN="justify"
>Since <A
HREF="http://hoohoo.ncsa.uiuc.edu/cgi/"
TARGET="_top"
>CGI</A
>
 (Common Gateway Interface) provides the form data for
 <B
CLASS="command"
>METHOD="POST"</B
> on the stdin,
 and the server will <I
CLASS="emphasis"
>not</I
> send you an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> on the end of the data,
 you will need to use
 <TT
CLASS="sexp"
>(<A
HREF="#getenv"
><CODE
CLASS="function"
>EXT:GETENV</CODE
></A
> <VAR
CLASS="envar"
>"CONTENT_LENGTH"</VAR
>)</TT
>
 to determine how much data you should read from stdin.
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will detect that stdin is not a terminal and create a regular
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>FILE-STREAM</CODE
></A
> which can be passed to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>)</TT
>.
 To test this functionality interactively,
 you will need to open the standard input in the binary mode:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(let ((buf (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-array.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-ARRAY</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_parse-integer.html"
TARGET="_top"
><CODE
CLASS="function"
>PARSE-INTEGER</CODE
></A
> (<A
HREF="#getenv"
><CODE
CLASS="function"
>EXT:GETENV</CODE
></A
> "CONTENT_LENGTH"))
                       :element-type <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>)))
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html"
TARGET="_top"
><CODE
CLASS="function"
>WITH-OPEN-STREAM</CODE
></A
> (in (<A
HREF="#make-stream"
><CODE
CLASS="function"
>EXT:MAKE-STREAM</CODE
></A
> <CODE
CLASS="constant"
>:INPUT</CODE
> <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>))
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-SEQUENCE</CODE
></A
> buf in))
  buf)
</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="make-stream"
>21.3.2. Function <A
HREF="#make-stream"
><CODE
CLASS="function"
>EXT:MAKE-STREAM</CODE
></A
></A
></H3
><P
ALIGN="justify"
>Function <A
HREF="#make-stream"
><CODE
CLASS="function"
>EXT:MAKE-STREAM</CODE
></A
> creates a Lisp stream out of an OS file
 handle: <TT
CLASS="sexp"
>(<A
HREF="#make-stream"
><CODE
CLASS="function"
>EXT:MAKE-STREAM</CODE
></A
> <VAR
CLASS="replaceable"
>object</VAR
> <CODE
CLASS="constant"
>:DIRECTION</CODE
>
  <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
>)</TT
></P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>object</VAR
> designates an OS handle (a <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165"
TARGET="_top"
>file descriptor</A
>),
 and should be one of the following:
 <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>number</DT
><DD
><P
ALIGN="justify"
>denotes the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165"
TARGET="_top"
>file descriptor</A
> of this value
  </P
></DD
><DT
><CODE
CLASS="constant"
>:INPUT</CODE
></DT
><DD
><P
ALIGN="justify"
>denotes <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> process standard input
  </P
></DD
><DT
><CODE
CLASS="constant"
>:OUTPUT</CODE
></DT
><DD
><P
ALIGN="justify"
>denotes <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> process standard output
  </P
></DD
><DT
><CODE
CLASS="constant"
>:ERROR</CODE
></DT
><DD
><P
ALIGN="justify"
>denotes <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> process standard error
  </P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>denotes the handle of this stream, which should be
    a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>FILE-STREAM</CODE
></A
> or a <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>
  </P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
>The handle is duplicated (with <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"
TARGET="_top"
><CODE
CLASS="function"
>dup/dup2</CODE
></A
>), so it is safe to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
>
 a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> returned by <A
HREF="#make-stream"
><CODE
CLASS="function"
>EXT:MAKE-STREAM</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="bin-input"
>21.3.3. Binary input, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>,
  <A
HREF="#bin-input"
><CODE
CLASS="function"
>EXT:READ-INTEGER</CODE
></A
> &#38; <A
HREF="#bin-input"
><CODE
CLASS="function"
>EXT:READ-FLOAT</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="#bin-input"
><CODE
CLASS="function"
>EXT:READ-INTEGER</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>
    <VAR
CLASS="replaceable"
>element-type</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#endianness"
><VAR
CLASS="replaceable"
>ENDIANNESS</VAR
></A
> <VAR
CLASS="replaceable"
>eof-error-p</VAR
> <VAR
CLASS="replaceable"
>eof-value</VAR
>)</TT
>
 reads a multi-byte <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> from <VAR
CLASS="replaceable"
>stream</VAR
>.
 <VAR
CLASS="replaceable"
>stream</VAR
> should be a stream with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>.
 <VAR
CLASS="replaceable"
>element-type</VAR
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>, where
 <VAR
CLASS="replaceable"
>n</VAR
> is a multiple of 8.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#bin-input"
><CODE
CLASS="function"
>EXT:READ-INTEGER</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>
 <VAR
CLASS="replaceable"
>element-type</VAR
>)</TT
> is like <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>
 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
> if <VAR
CLASS="replaceable"
>stream</VAR
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> were set to
 <VAR
CLASS="replaceable"
>element-type</VAR
>, except that <VAR
CLASS="replaceable"
>stream</VAR
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><CODE
CLASS="function"
>FILE-POSITION</CODE
></A
> will increase by
 <SUP
><VAR
CLASS="replaceable"
>n</VAR
></SUP
>/<SUB
>8</SUB
>
 instead of 1.</P
><P
ALIGN="justify"
>Together with <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>)</TT
>, this function permits mixed
 character/binary input from a stream.</P
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="#bin-input"
><CODE
CLASS="function"
>EXT:READ-FLOAT</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>
    <VAR
CLASS="replaceable"
>element-type</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#endianness"
><VAR
CLASS="replaceable"
>ENDIANNESS</VAR
></A
> <VAR
CLASS="replaceable"
>eof-error-p</VAR
> <VAR
CLASS="replaceable"
>eof-value</VAR
>)</TT
>
 reads a floating-point number in <A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
>
 binary representation from <VAR
CLASS="replaceable"
>stream</VAR
>.
 <VAR
CLASS="replaceable"
>stream</VAR
> should be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>.
 <VAR
CLASS="replaceable"
>element-type</VAR
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
>.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="endianness"
></A
><B
>Endianness. </B
><A
HREF="#endianness"
><VAR
CLASS="replaceable"
>ENDIANNESS</VAR
></A
> can be <CODE
CLASS="constant"
>:LITTLE</CODE
>
 or <CODE
CLASS="constant"
>:BIG</CODE
>.  The default is
 <CODE
CLASS="constant"
>:LITTLE</CODE
>, which corresponds to the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>
 behavior in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="bin-output"
>21.3.4. Binary output, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-BYTE</CODE
></A
>,
  <A
HREF="#bin-output"
><CODE
CLASS="function"
>EXT:WRITE-INTEGER</CODE
></A
> &#38; <A
HREF="#bin-output"
><CODE
CLASS="function"
>EXT:WRITE-FLOAT</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="#bin-output"
><CODE
CLASS="function"
>EXT:WRITE-INTEGER</CODE
></A
>
    <VAR
CLASS="replaceable"
>integer</VAR
> <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>element-type</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#endianness"
><VAR
CLASS="replaceable"
>ENDIANNESS</VAR
></A
>)</TT
>
 writes a multi-byte integer to <VAR
CLASS="replaceable"
>stream</VAR
>.
 <VAR
CLASS="replaceable"
>stream</VAR
> should be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>.
 <VAR
CLASS="replaceable"
>element-type</VAR
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>, where
 <VAR
CLASS="replaceable"
>n</VAR
> is a multiple of 8.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#bin-output"
><CODE
CLASS="function"
>EXT:WRITE-INTEGER</CODE
></A
> <VAR
CLASS="replaceable"
>integer</VAR
> <VAR
CLASS="replaceable"
>stream</VAR
>
 <VAR
CLASS="replaceable"
>element-type</VAR
>)</TT
> is like <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-BYTE</CODE
></A
>
 <VAR
CLASS="replaceable"
>integer</VAR
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
> if <VAR
CLASS="replaceable"
>stream</VAR
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>
 were set to <VAR
CLASS="replaceable"
>element-type</VAR
>, except that <VAR
CLASS="replaceable"
>stream</VAR
>'s <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><CODE
CLASS="function"
>FILE-POSITION</CODE
></A
> will
 increase by <SUP
><VAR
CLASS="replaceable"
>n</VAR
></SUP
>/<SUB
>8</SUB
>
 instead of 1.</P
><P
ALIGN="justify"
>Together with <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>)</TT
>, this function permits mixed
  character/binary output to a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>.</P
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="#bin-output"
><CODE
CLASS="function"
>EXT:WRITE-FLOAT</CODE
></A
>
    <VAR
CLASS="replaceable"
>float</VAR
> <VAR
CLASS="replaceable"
>stream</VAR
>
    <VAR
CLASS="replaceable"
>element-type</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#endianness"
><VAR
CLASS="replaceable"
>ENDIANNESS</VAR
></A
>)</TT
>
 writes a floating-point number in <A
HREF="http://grouper.ieee.org/groups/754/"
TARGET="_top"
>IEEE 754</A
>
 binary representation to <VAR
CLASS="replaceable"
>stream</VAR
>.
 <VAR
CLASS="replaceable"
>stream</VAR
> should be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>
 <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>.
 <VAR
CLASS="replaceable"
>element-type</VAR
> should be <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#type_equivalent"
TARGET="_top"
>type equivalent</A
> to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="bulk-io"
>21.3.5. Bulk Input and Output</A
></H3
><DIV
CLASS="formalpara"
><P
><A
NAME="read-seq"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-SEQUENCE</CODE
></A
>. </B
>In addition to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-SEQUENCE</CODE
></A
>, the following two
 functions are provided:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="rd-by-seq"
></A
><A
HREF="#rd-by-seq"
><CODE
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</CODE
></A
>
   performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#rd-by-seq"
><CODE
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>
   <VAR
CLASS="replaceable"
>stream</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
> :NO-HANG)</TT
> fills the
   subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified by <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> with
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>s consecutively read from <VAR
CLASS="replaceable"
>stream</VAR
>.  It returns the
   index of the first element of <VAR
CLASS="replaceable"
>sequence</VAR
> that was not updated (=
   <VAR
CLASS="replaceable"
>end</VAR
> or &#60; <VAR
CLASS="replaceable"
>end</VAR
> if the <VAR
CLASS="replaceable"
>stream</VAR
> reached its end).
   When <CODE
CLASS="constant"
>:NO-HANG</CODE
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, does not block:
   treat input unavailability as <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>.</P
><P
ALIGN="justify"
>This function is especially efficient if <VAR
CLASS="replaceable"
>sequence</VAR
> is a
   <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8))</TT
> and <VAR
CLASS="replaceable"
>stream</VAR
> is a <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>.
 </P
></DD
><DT
><A
NAME="rd-ch-seq"
></A
><A
HREF="#rd-ch-seq"
><CODE
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</CODE
></A
>
   performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#rd-ch-seq"
><CODE
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>
  <VAR
CLASS="replaceable"
>stream</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
>)</TT
> fills the
  subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified by <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> with
  characters consecutively read from <VAR
CLASS="replaceable"
>stream</VAR
>.  It returns the index
  of the first element of <VAR
CLASS="replaceable"
>sequence</VAR
> that was not updated (= <VAR
CLASS="replaceable"
>end</VAR
>
  or &#60; <VAR
CLASS="replaceable"
>end</VAR
> if the <VAR
CLASS="replaceable"
>stream</VAR
> reached its end).</P
><P
ALIGN="justify"
>This function is especially efficient if <VAR
CLASS="replaceable"
>sequence</VAR
> is a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> and <CODE
CLASS="constant"
>:STREAM</CODE
> is a <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
> stream with
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> or an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING-STREAM</CODE
></A
>.
  </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="write-seq"
></A
><B
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-SEQUENCE</CODE
></A
>. </B
>In addition to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-SEQUENCE</CODE
></A
>, the following two
functions are provided:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="wr-by-seq"
></A
><A
HREF="#wr-by-seq"
><CODE
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</CODE
></A
>
   performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-BYTE</CODE
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#wr-by-seq"
><CODE
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>
  <VAR
CLASS="replaceable"
>stream</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
>)</TT
> outputs the
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>s of the subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified by
  <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> to <CODE
CLASS="constant"
>:STREAM</CODE
>. It returns <VAR
CLASS="replaceable"
>sequence</VAR
>.</P
><P
ALIGN="justify"
>This function is especially efficient if <VAR
CLASS="replaceable"
>sequence</VAR
> is a
  <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8))</TT
> and <VAR
CLASS="replaceable"
>stream</VAR
> is a <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
>
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
>.
 </P
></DD
><DT
><A
NAME="wr-ch-seq"
></A
><A
HREF="#wr-ch-seq"
><CODE
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</CODE
></A
>
  performs multiple <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-CHAR</CODE
></A
> operations:</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#wr-ch-seq"
><CODE
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>
  <VAR
CLASS="replaceable"
>stream</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
>  :NO-HANG)</TT
> outputs the
  characters of the subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified by <CODE
CLASS="constant"
>:START</CODE
>
  and <CODE
CLASS="constant"
>:END</CODE
> to <CODE
CLASS="constant"
>:STREAM</CODE
>.
  When <CODE
CLASS="constant"
>:NO-HANG</CODE
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, does not block.
  Returns two values: <VAR
CLASS="replaceable"
>sequence</VAR
> and the index of the first byte that
  was not output.</P
><P
ALIGN="justify"
>This function is especially efficient if <VAR
CLASS="replaceable"
>sequence</VAR
> is a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> and <CODE
CLASS="constant"
>:STREAM</CODE
> is a <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>
  with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.
  </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="bulk-io-rationale"
></A
><B
>Rationale. </B
>The rationale for <A
HREF="#rd-ch-seq"
><CODE
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</CODE
></A
>, <A
HREF="#rd-by-seq"
><CODE
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</CODE
></A
>, <A
HREF="#wr-ch-seq"
><CODE
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</CODE
></A
> and
 <A
HREF="#wr-by-seq"
><CODE
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</CODE
></A
> is that some <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s support both character and binary
 i/o, and when you read into a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_sequence.html"
TARGET="_top"
><CODE
CLASS="classname"
>SEQUENCE</CODE
></A
> that can hold both (e.g.,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
>) you cannot determine which kind of
 input to use.  In such situation <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-sequence.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-SEQUENCE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-sequence.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-SEQUENCE</CODE
></A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>, while <A
HREF="#rd-ch-seq"
><CODE
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</CODE
></A
>, <A
HREF="#rd-by-seq"
><CODE
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</CODE
></A
>, <A
HREF="#wr-ch-seq"
><CODE
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</CODE
></A
> and
 <A
HREF="#wr-by-seq"
><CODE
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</CODE
></A
> work just fine.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="non-block-io"
>21.3.6. Non-Blocking Input and Output</A
></H3
><P
ALIGN="justify"
>In addition to the standard functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><CODE
CLASS="function"
>LISTEN</CODE
></A
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR-NO-HANG</CODE
></A
>, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> provides the following functionality
 facilitating non-blocking input and output, both binary and
 character.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="rcwhp"
></A
><TT
CLASS="sexp"
>(<A
HREF="#rcwhp"
><CODE
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</CODE
></A
>
    <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="#rcwhp"
><CODE
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</CODE
></A
> queries the stream's input status.
  It returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_peek-char.html"
TARGET="_top"
><CODE
CLASS="function"
>PEEK-CHAR</CODE
></A
> with a
  <VAR
CLASS="replaceable"
>peek-type</VAR
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> will return immediately.
  Otherwise it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.  (In the latter case the standard
  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><CODE
CLASS="function"
>LISTEN</CODE
></A
> function would return <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.)</P
><P
ALIGN="justify"
>Note the difference with <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_not.html"
TARGET="_top"
><CODE
CLASS="function"
>NOT</CODE
></A
>
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><CODE
CLASS="function"
>LISTEN</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>))</TT
>: When the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is reached, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><CODE
CLASS="function"
>LISTEN</CODE
></A
>
  returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, whereas <A
HREF="#rcwhp"
><CODE
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</CODE
></A
> returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
><P
ALIGN="justify"
>Note also that <A
HREF="#rcwhp"
><CODE
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</CODE
></A
> is not a good way to test for <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>:
  If <A
HREF="#rcwhp"
><CODE
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</CODE
></A
> returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, this does not mean that the <VAR
CLASS="replaceable"
>stream</VAR
> will
  deliver more characters.  It only means that it is not known at this
  moment whether the <VAR
CLASS="replaceable"
>stream</VAR
> is already at <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>, or will deliver
  more characters.</P
></DD
><DT
><A
NAME="rbla"
></A
><TT
CLASS="sexp"
>(<A
HREF="#rbla"
><CODE
CLASS="function"
>EXT:READ-BYTE-LOOKAHEAD</CODE
></A
>
    <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <VAR
CLASS="replaceable"
>stream</VAR
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
>.
   Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> if <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
> would return immediately with an
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> result.
   Returns <CODE
CLASS="constant"
>:EOF</CODE
> if the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is already known to be reached.
   If <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>'s value is not available immediately, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
   instead of waiting.</P
></DD
><DT
><A
NAME="rbwhp"
></A
><TT
CLASS="sexp"
>(<A
HREF="#rbwhp"
><CODE
CLASS="function"
>EXT:READ-BYTE-WILL-HANG-P</CODE
></A
>
    <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <VAR
CLASS="replaceable"
>stream</VAR
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
>.
   Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
> will return immediately.
   Otherwise it returns true.</P
></DD
><DT
><A
NAME="rbnh"
></A
><TT
CLASS="sexp"
>(<A
HREF="#rbnh"
><CODE
CLASS="function"
>EXT:READ-BYTE-NO-HANG</CODE
></A
>
    <VAR
CLASS="replaceable"
>stream</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>eof-error-p</VAR
> <VAR
CLASS="replaceable"
>eof-value</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <VAR
CLASS="replaceable"
>stream</VAR
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
>.
   Returns an <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> or does <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> handling, like <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>,
   if that would return immediately.
   If <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>'s value is not available immediately, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
   instead of waiting.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="file-pos"
>21.3.7. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><CODE
CLASS="function"
>FILE-POSITION</CODE
></A
></A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
    platforms only.</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_file-position.html"
TARGET="_top"
><CODE
CLASS="function"
>FILE-POSITION</CODE
></A
> works on any <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>FILE-STREAM</CODE
></A
>.
  When a <SPAN
CLASS="keysym"
>#\Newline</SPAN
> is output to (respectively input from) a file stream,
  its file position is increased by 2 since <SPAN
CLASS="keysym"
>#\Newline</SPAN
> is encoded as
  <SPAN
CLASS="keycode"
>CR</SPAN
>/<SPAN
CLASS="keycode"
>LF</SPAN
> in the file.
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="open"
>21.3.8. Function  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN</CODE
></A
> cannot handle files of size &#8805; 4 GB.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN</CODE
></A
> accepts an additional keyword <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>The acceptable values for the arguments to the
   <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
> functions</B
></P
><DL
><DT
><A
NAME="eltype"
></A
><A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>types equivalent to <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> or
    <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>, <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>; if the stream is to be
    un<A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
>, <VAR
CLASS="replaceable"
>n</VAR
> must be a multiple of 8.</P
><P
ALIGN="justify"
>If <VAR
CLASS="replaceable"
>n</VAR
> is not a multiple of 8, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will use the
    specified number of bits for i/o, and write the file length
    (as a number of <VAR
CLASS="replaceable"
>n</VAR
>-bit bytes) in the preamble.</P
><P
ALIGN="justify"
>This is done to ensure the input/output consistency:
    suppose you open a file with <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> of <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 3)</TT
> and write 7 bytes
    (i.e., 21 bit) there.
    The underlying OS can do input/output only in whole 8-bit bytes.
    Thus the OS will report the size of the file as 3 (8-bit) bytes.
    Without the preamble <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will have no way to know how many
    3-bit bytes to read from this file - 6, 7 or 8.
   </P
></DD
><DT
><A
NAME="extfmt"
></A
><A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
></DT
><DD
><P
ALIGN="justify"
><A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>s, (constant) <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>s in the
   <A
HREF="#encoding"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CHARSET"</SPAN
></STRONG
></A
> package, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>s (denoting <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><CODE
CLASS="function"
>iconv</CODE
></A
>-based
   encodings), the symbol <CODE
CLASS="constant"
>:DEFAULT</CODE
>, and the <A
HREF="#newline"
>line terminator</A
> keywords
   <CODE
CLASS="constant"
>:UNIX</CODE
>, <CODE
CLASS="constant"
>:MAC</CODE
>, <CODE
CLASS="constant"
>:DOS</CODE
>.  The default encoding is <A
HREF="#def-file-enc"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-FILE-ENCODING*</VAR
></A
>.
    This argument determines how the lisp <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> data is
   converted to/from the 8-bit bytes that the underlying OS uses.
  </P
></DD
><DT
><A
NAME="buffered"
></A
><A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, or <CODE
CLASS="constant"
>:DEFAULT</CODE
>.
    Have <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> manage an internal buffer for input or output (in
    addition to the buffering that might be used by the underlying OS).
    Buffering is a known general technique to significantly speed up i/o.
  <P
></P
><UL
><LI
><P
ALIGN="justify"
>for functions that create <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>s and
    <A
HREF="#pipe"
>pipes</A
>, <CODE
CLASS="constant"
>:DEFAULT</CODE
> is equivalent to
    <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>; it you are transmitting a lot of data then using buffering
    will significantly speed up your i/o;</P
></LI
><LI
><P
ALIGN="justify"
>for functions that <A
HREF="#open"
>open</A
>
    files, <CODE
CLASS="constant"
>:DEFAULT</CODE
> means that buffered file streams will be returned
    for regular files and (on Unix) block-devices, and unbuffered file
    streams for special files.</P
></LI
></UL
>
  Note that some files, notably those on the <TT
CLASS="filename"
>/proc</TT
>
  filesystem (on <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems), are actually, despite their innocuous
  appearance, special files, so you might need to supply an explicit
  <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> argument for them.  Actually, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> detects that
  the file is a <TT
CLASS="filename"
>/proc</TT
> file, so that one is covered,
  but there are probably more strange beasts there!
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="close"
>21.3.9. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
></A
></H3
><P
ALIGN="justify"
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>GENERIC-FUNCTION</CODE
></A
>, see section
 <A
HREF="#gray"
>"Gray streams"</A
>.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
> ignores its <CODE
CLASS="constant"
>:ABORT</CODE
> argument.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_get-outpu_tream-string.html"
TARGET="_top"
><CODE
CLASS="function"
>GET-OUTPUT-STREAM-STRING</CODE
></A
> returns the same value after
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
> as it would before it.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
> on an already closed <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> does nothing and returns
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
><P
ALIGN="justify"
>If you do not <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
> your <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> explicitly, it will be
 closed at <A
HREF="#gc"
>garbage-collect</A
>ion time automatically.
 This is not recommended though because <A
HREF="#gc"
>garbage-collect</A
>ion is not deterministic.
 Please use <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html"
TARGET="_top"
><CODE
CLASS="function"
>WITH-OPEN-STREAM</CODE
></A
> etc.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="open-stream-p"
>21.3.10. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN-STREAM-P</CODE
></A
></A
></H3
><P
ALIGN="justify"
>Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN-STREAM-P</CODE
></A
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_generic-function.html"
TARGET="_top"
><CODE
CLASS="classname"
>GENERIC-FUNCTION</CODE
></A
>, see section
 <A
HREF="#gray"
>"Gray streams"</A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="broadcast-stream"
>21.3.11. Class <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>BROADCAST-STREAM</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>INPUT-STREAM-P</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_interactive-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>INTERACTIVE-STREAM-P</CODE
></A
> return false for
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_broadcast-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>BROADCAST-STREAM</CODE
></A
>s.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="stream-buffer"
>21.3.12. Functions
  <CODE
CLASS="function"
>EXT:MAKE-BUFFERED-INPUT-STREAM</CODE
> and
  <CODE
CLASS="function"
>EXT:MAKE-BUFFERED-OUTPUT-STREAM</CODE
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(EXT:MAKE-BUFFERED-OUTPUT-STREAM <VAR
CLASS="replaceable"
>function</VAR
>)</TT
>
 returns a buffered <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>.
 <VAR
CLASS="replaceable"
>function</VAR
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> expecting one argument, a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-char.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-CHAR</CODE
></A
> collects the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s in a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>, until a
 newline character is written or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
TARGET="_top"
><CODE
CLASS="function"
>FORCE-OUTPUT</CODE
></A
>/<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
TARGET="_top"
><CODE
CLASS="function"
>FINISH-OUTPUT</CODE
></A
> is called.
 Then <VAR
CLASS="replaceable"
>function</VAR
> is called with a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
> as argument,
 that contains the characters collected so far.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
TARGET="_top"
><CODE
CLASS="function"
>CLEAR-OUTPUT</CODE
></A
> dicards the characters collected so far.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(EXT:MAKE-BUFFERED-INPUT-STREAM <VAR
CLASS="replaceable"
>function</VAR
>
  <VAR
CLASS="replaceable"
>mode</VAR
>)</TT
> returns a buffered <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>.
 <VAR
CLASS="replaceable"
>function</VAR
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> of 0 arguments that returns
 either <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (stands for <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>) or up to three values
 <VAR
CLASS="replaceable"
>string</VAR
>, <VAR
CLASS="replaceable"
>start</VAR
>, <VAR
CLASS="replaceable"
>end</VAR
>.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
> returns the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s of the current <VAR
CLASS="replaceable"
>string</VAR
> one
 after another, as delimited by <VAR
CLASS="replaceable"
>start</VAR
> and <VAR
CLASS="replaceable"
>end</VAR
>, which default to
 <TT
CLASS="literal"
>0</TT
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, respectively.
 When the <VAR
CLASS="replaceable"
>string</VAR
> is consumed, <VAR
CLASS="replaceable"
>function</VAR
> is called again.
 The <VAR
CLASS="replaceable"
>string</VAR
> returned by <VAR
CLASS="replaceable"
>function</VAR
> should not be changed,
 otherwise <VAR
CLASS="replaceable"
>function</VAR
> should copy the <VAR
CLASS="replaceable"
>string</VAR
> with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html"
TARGET="_top"
><CODE
CLASS="function"
>COPY-SEQ</CODE
></A
>
 or <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_subseq.html"
TARGET="_top"
><CODE
CLASS="function"
>SUBSEQ</CODE
></A
> beforehand.
 <VAR
CLASS="replaceable"
>mode</VAR
> determines the behavior of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><CODE
CLASS="function"
>LISTEN</CODE
></A
>
 when the current <VAR
CLASS="replaceable"
>string</VAR
> buffer is empty:
 <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>the stream acts like a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_file-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>FILE-STREAM</CODE
></A
>,
     i.e. <VAR
CLASS="replaceable"
>function</VAR
> is called</P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>the stream acts like an interactive stream without
     <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
>, i.e. one can assume that further characters will always
     arrive, without calling <VAR
CLASS="replaceable"
>function</VAR
></P
></DD
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>this <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> tells, upon call, if further
     non-empty <VAR
CLASS="replaceable"
>string</VAR
>s are to be expected.</P
></DD
></DL
></DIV
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_clear-input.html"
TARGET="_top"
><CODE
CLASS="function"
>CLEAR-INPUT</CODE
></A
> discards the rest of the current <VAR
CLASS="replaceable"
>string</VAR
>,
 so <VAR
CLASS="replaceable"
>function</VAR
> will be called upon the next <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
> operation.
</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="printer"
></A
>Chapter 22. Printer
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-22.html"
TARGET="_top"
>[CLHS-22]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="multi-rep"
>22.1. Multiple Possible Textual Representations
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-1-1-1.html"
TARGET="_top"
>[CLHS-22.1.1.1]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><A
NAME="pr-closure"
></A
><B
>Variable <A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
>. </B
>An additional variable <A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
> controls whether compiled and
 interpreted functions (closures) are output in detailed form.
 If <A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, compiled closures are output in
 <SPAN
CLASS="keysym"
>#Y</SPAN
> syntax which the reader understands.
 <A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
> is initially set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="pr-rpars"
></A
><B
>Variable <A
HREF="#pr-rpars"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-RPARS*</VAR
></A
>. </B
>An additional variable <A
HREF="#pr-rpars"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-RPARS*</VAR
></A
> controls
 the output of the right (closing) parentheses.
 If <A
HREF="#pr-rpars"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-RPARS*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, closing parentheses which do not fit onto
 the same line as the the corresponding opening parenthesis are output
 just below their corresponding opening parenthesis, in the same column.
 <A
HREF="#pr-rpars"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-RPARS*</VAR
></A
> is initially set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="pr-indent"
></A
><B
>Variable <A
HREF="#pr-indent"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-INDENT-LISTS*</VAR
></A
>. </B
>An additional variable <A
HREF="#pr-indent"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-INDENT-LISTS*</VAR
></A
> controls the indentation of
 lists that span more than one line.
 It specifies by how many characters items within the list will be
 indented relative to the beginning of the list.
 <A
HREF="#pr-indent"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-INDENT-LISTS*</VAR
></A
> is initially set to <TT
CLASS="literal"
>1</TT
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="ppr-first-newline"
></A
><B
>Variable <A
HREF="#ppr-first-newline"
><VAR
CLASS="varname"
>CUSTOM:*PPRINT-FIRST-NEWLINE*</VAR
></A
>. </B
>An additional variable <A
HREF="#ppr-first-newline"
><VAR
CLASS="varname"
>CUSTOM:*PPRINT-FIRST-NEWLINE*</VAR
></A
> controls
 pretty-printing of multi-line objects.
 When <A
HREF="#ppr-first-newline"
><VAR
CLASS="varname"
>CUSTOM:*PPRINT-FIRST-NEWLINE*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
 and the current line already has some characters on it,
 and the next object will be printed on several lines,
 and it does not start with a <SPAN
CLASS="keysym"
>#\Newline</SPAN
>,
 then a <SPAN
CLASS="keysym"
>#\Newline</SPAN
> is printed before the object.
 <A
HREF="#ppr-first-newline"
><VAR
CLASS="varname"
>CUSTOM:*PPRINT-FIRST-NEWLINE*</VAR
></A
> has no effect if <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-PRETTY*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
 <A
HREF="#ppr-first-newline"
><VAR
CLASS="varname"
>CUSTOM:*PPRINT-FIRST-NEWLINE*</VAR
></A
> is initially set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="print-vector"
>22.2. Printing Other Vectors
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-7.html"
TARGET="_top"
>[CLHS-22.1.3.7]</A
></A
></H2
><P
ALIGN="justify"
>When <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> is true, other vectors are written as
 follows: if the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>ARRAY-ELEMENT-TYPE</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_t.html"
TARGET="_top"
><CODE
CLASS="classname"
>T</CODE
></A
>, the syntax <TT
CLASS="sexp"
>#(<VAR
CLASS="replaceable"
>x<SUB
>0</SUB
></VAR
>
 ... <VAR
CLASS="replaceable"
>x<SUB
>n-1</SUB
></VAR
>)</TT
>
 is used.  Otherwise, the syntax <TT
CLASS="sexp"
>#A(<VAR
CLASS="replaceable"
>element-type</VAR
>
 <VAR
CLASS="replaceable"
>dimensions</VAR
> <VAR
CLASS="replaceable"
>contents</VAR
>)</TT
> is used.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="print-array"
>22.3. Printing Other Arrays
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-8.html"
TARGET="_top"
>[CLHS-22.1.3.8]</A
></A
></H2
><P
ALIGN="justify"
>When <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> is true, other arrays are written as
 follows: if the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_array-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>ARRAY-ELEMENT-TYPE</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_t.html"
TARGET="_top"
><CODE
CLASS="classname"
>T</CODE
></A
>, the syntax <TT
CLASS="sexp"
>#<VAR
CLASS="replaceable"
>rank</VAR
>A <VAR
CLASS="replaceable"
>contents</VAR
></TT
> is
 used.  Otherwise, the syntax <TT
CLASS="sexp"
>#A(<VAR
CLASS="replaceable"
>element-type</VAR
>
 <VAR
CLASS="replaceable"
>dimensions</VAR
> <VAR
CLASS="replaceable"
>contents</VAR
>)</TT
> is used.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="clpp"
>22.4. The Lisp Pretty Printer
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-2.html"
TARGET="_top"
>[CLHS-22.2]</A
></A
></H2
><P
ALIGN="justify"
>The Lisp Pretty Printer implementation is <I
CLASS="emphasis"
>not</I
> perfect yet.
 <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_pprint-logical-block.html"
TARGET="_top"
><CODE
CLASS="function"
>PPRINT-LOGICAL-BLOCK</CODE
></A
> does not respect <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-linesst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-LINES*</VAR
></A
>.</P
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="pp-dispatch"
>22.4.1. Pretty Print Dispatch Table
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-2-1-4.html"
TARGET="_top"
>[CLHS-22.2.1.4]</A
></A
></H3
><P
ALIGN="justify"
>A <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#pprint_dispatch_table"
TARGET="_top"
>pprint
 dispatch table</A
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
TARGET="_top"
><CODE
CLASS="function"
>CONS</CODE
></A
> of a symbol
 <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-PPRINT-DISPATCH*</VAR
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list"
TARGET="_top"
>alist</A
> which maps types into priorities
 and print functions.
 Their use is strongly discouraged because of the performance issues:
 when <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-p_t-dispatchst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-PPRINT-DISPATCH*</VAR
></A
> is non-trivial and <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-PRETTY*</VAR
></A
>
 is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, printing of every object requires a lookup in the table,
 which entails many calls to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_typep.html"
TARGET="_top"
><CODE
CLASS="function"
>TYPEP</CODE
></A
> (which cannot be made fast
 enough).</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="print-dict"
>22.5. The Printer Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_printer_dictionary.html"
TARGET="_top"
>[CLHS-22.4]</A
></A
></H2
><DIV
CLASS="formalpara"
><P
><B
>Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE</CODE
></A
> &#38; <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-TO-STRING</CODE
></A
>. </B
>The functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_write-to-_nc-to-string.html"
TARGET="_top"
><CODE
CLASS="function"
>WRITE-TO-STRING</CODE
></A
> have an additional
 keyword argument <CODE
CLASS="constant"
>:closure</CODE
> which is used to bind
 <A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="format"
>22.5.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The additional <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> instruction
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
>~!</I
></STRONG
>
 is similar to <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-5-4.html"
TARGET="_top"
><TT
CLASS="literal"
>~/</TT
></A
>, but avoids putting a function name into a
 string, thus, even if the function is not interned in the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-2.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"COMMON-LISP-USER"</SPAN
></STRONG
></A
>
 package, you might not need to specify the package explicitly.
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
> "~args!" <VAR
CLASS="replaceable"
>function</VAR
>
  <VAR
CLASS="replaceable"
>object</VAR
>)</TT
> is equivalent to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
>
  <VAR
CLASS="replaceable"
>function</VAR
> <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>object</VAR
>
  <VAR
CLASS="replaceable"
>colon-modifier-p</VAR
>
  <VAR
CLASS="replaceable"
>atsign-modifier-p</VAR
>
  <VAR
CLASS="replaceable"
>args</VAR
>)</TT
>.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~R</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-2-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~:R</TT
></A
> can output only
 integers in the range <VAR
CLASS="varname"
>|n| &#60;
 <VAR
CLASS="replaceable"
>10<SUP
>66</SUP
></VAR
></VAR
>.
 The output is in English, according to the American conventions, and
 these conventions are identical to the British conventions only in the
 range <VAR
CLASS="varname"
>|n| &#60;
 <VAR
CLASS="replaceable"
>10<SUP
>9</SUP
></VAR
></VAR
>.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-1-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~:@C</TT
></A
> does not output the character itself, only the
 instruction how to type the character.</P
><P
ALIGN="justify"
>For <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~E</TT
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~G</TT
></A
>, the value of
 <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*READ-DEFAULT-FLOAT-FORMAT*</VAR
></A
> does not matter if <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
>
 is true.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-6-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~T</TT
></A
> can determine the current column of any
 built-in stream.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="pathprint"
>22.5.2. pathnames</A
></H3
><P
ALIGN="justify"
>Pathnames are printed as follows: If <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-escapest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-ESCAPE*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
 only the namestring is printed; otherwise it is printed with
 <TT
CLASS="filename"
>#P""</TT
> syntax, as per <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> Issue <A
HREF="http://www.lisp.org/HyperSpec/Issues/iss276.html"
TARGET="_top"
>PRINT-READABLY-BEHAVIOR:CLARIFY</A
>.
 But, if <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> is true, we are in trouble as
 <TT
CLASS="filename"
>#P""</TT
> is ambiguous (which is verboten when
 <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> is true), while being mandated by the <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
>.
 Therefore, in this case, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>'s behavior is determined by the value
 of <A
HREF="#pathprint"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-PATHNAMES-ANSI*</VAR
></A
>: when it is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, we print pathnames like this:
<SAMP
CLASS="computeroutput"
>#-CLISP #P"" #+CLISP #S(PATHNAME ...)</SAMP
>.
 Otherwise, when the variable <A
HREF="#pathprint"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-PATHNAMES-ANSI*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the
 <TT
CLASS="filename"
>#P""</TT
> notation is used as per <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_1-5-1-4.html"
TARGET="_top"
>1.5.1.4.1 Resolution of Apparent
 Conflicts in Exceptional Situations</A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="print-misc"
>22.5.3. Miscellaneous Issues</A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-casest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-CASE*</VAR
></A
> controls the output not only of symbols, but also
 of characters and some <SAMP
CLASS="computeroutput"
>#&#60;...&#62;</SAMP
>
 objects.</P
><P
ALIGN="justify"
>In the absence of
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-1-3-1-3.html"
TARGET="_top"
><CODE
CLASS="function"
>SYS::WRITE-FLOAT-DECIMAL</CODE
></A
>
  </I
></STRONG
>,
 floating point numbers are output in radix 2.  This function is defined
 in <TT
CLASS="filename"
>"floatpri.lisp"</TT
> and is not available if you run
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> without a <A
HREF="#image"
>memory image</A
> (which you should never do anyway!)</P
><P
ALIGN="justify"
>If <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-readablyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-READABLY*</VAR
></A
> is true, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stread-de_oat-formatst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*READ-DEFAULT-FLOAT-FORMAT*</VAR
></A
>
 has no influence on the way floating point numbers are printed.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>,
   <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-PRETTY*</VAR
></A
> is initially <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> but set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>
 in <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
>.  This makes screen output prettier.
 </P
></DD
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-prettyst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-PRETTY*</VAR
></A
> is initially <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> but set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>
 in <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
>.  This makes unbuffered screen output both much faster
 and prettier.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-ARRAY*</VAR
></A
> is initially set to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="reader"
></A
>Chapter 23. Reader
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-23.html"
TARGET="_top"
>[CLHS-23]</A
></H1
><P
ALIGN="justify"
>This is the list of objects whose external representation cannot
  be meaningfully read in:
<DIV
CLASS="table"
><A
NAME="unreadable-objects-table"
></A
><P
><B
>Table 23-1. Unreadable objects</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>format</TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="literal"
>#&#60;<VAR
CLASS="replaceable"
>type</VAR
> ...&#62;</TT
></TD
><TD
>all <A
HREF="http://www.lisp.org/HyperSpec/Body/cla_structure-object.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-OBJECT</CODE
></A
>s lacking a keyword constructor</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;ARRAY <VAR
CLASS="replaceable"
>type</VAR
> <VAR
CLASS="replaceable"
>dimensions</VAR
>&#62;</TT
></TD
><TD
>all <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
TARGET="_top"
><CODE
CLASS="classname"
>ARRAY</CODE
></A
>s except <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>s, if <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-ARRAY*</VAR
></A
> is
   <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;SYSTEM-FUNCTION <VAR
CLASS="replaceable"
>name</VAR
>&#62;</TT
></TD
><TD
>built-in function written in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;ADD-ON-SYSTEM-FUNCTION
    <VAR
CLASS="replaceable"
>name</VAR
>&#62;</TT
></TD
><TD
>other function written in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;SPECIAL-OPERATOR <VAR
CLASS="replaceable"
>name</VAR
>&#62;</TT
></TD
><TD
>special operator handler</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;COMPILED-CLOSURE <VAR
CLASS="replaceable"
>name</VAR
>&#62;</TT
></TD
><TD
>compiled function, if <A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;CLOSURE <VAR
CLASS="replaceable"
>name</VAR
> ...&#62;</TT
></TD
><TD
>interpreted function</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;FRAME-POINTER #x...&#62;</TT
></TD
><TD
>pointer to a stack frame</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;DISABLED POINTER&#62;</TT
></TD
><TD
>frame pointer which has become invalid on exit from the
   corresponding <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;...STREAM...&#62;</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;PACKAGE <VAR
CLASS="replaceable"
>name</VAR
>&#62;</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_package.html"
TARGET="_top"
><CODE
CLASS="classname"
>PACKAGE</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;HASH-TABLE #x...&#62;</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>, if <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-arrayst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-ARRAY*</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;READTABLE #x...&#62;</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_readtable.html"
TARGET="_top"
><CODE
CLASS="classname"
>READTABLE</CODE
></A
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;SYMBOL-MACRO <VAR
CLASS="replaceable"
>form</VAR
>&#62;</TT
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> handler</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;MACRO <VAR
CLASS="replaceable"
>function</VAR
>&#62;</TT
></TD
><TD
>macro expander (defined by <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defmacro.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFMACRO</CODE
></A
> and friends)</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;<A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
> #x...&#62;</TT
></TD
><TD
>foreign pointer <I
CLASS="emphasis"
>(Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>,
    <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.)</I
>
 </TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;<A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
> #x...&#62;</TT
></TD
><TD
>foreign address <I
CLASS="emphasis"
>(Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>,
    <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.)</I
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;<A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
>
    <VAR
CLASS="replaceable"
>name</VAR
> #x...&#62;</TT
></TD
><TD
>foreign variable <I
CLASS="emphasis"
>(Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>,
    <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.)</I
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;<A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
>
    <VAR
CLASS="replaceable"
>name</VAR
> #x...&#62;</TT
></TD
><TD
>foreign function <I
CLASS="emphasis"
>(Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>,
    <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.)</I
></TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
></TD
><TD
>"value" of a symbol without value, "value" of an unsupplied
   optional or keyword argument</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;SPECIAL REFERENCE&#62;</TT
></TD
><TD
>environment marker for variables declared <A
HREF="http://www.lisp.org/HyperSpec/Body/dec_special.html"
TARGET="_top"
><TT
CLASS="literal"
>SPECIAL</TT
></A
>
 </TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;DOT&#62;</TT
></TD
><TD
>internal <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
TARGET="_top"
><CODE
CLASS="function"
>READ</CODE
></A
> result for "."</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;END OF FILE&#62;</TT
></TD
><TD
>internal <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
TARGET="_top"
><CODE
CLASS="function"
>READ</CODE
></A
> result, when the end of file is reached
 </TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;READ-LABEL ...&#62;</TT
></TD
><TD
>intermediate <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
TARGET="_top"
><CODE
CLASS="function"
>READ</CODE
></A
> result for <TT
CLASS="literal"
>#n#</TT
>
 </TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;ADDRESS #x...&#62;</TT
></TD
><TD
>machine address, should not occur</TD
></TR
><TR
><TD
><TT
CLASS="literal"
>#&#60;SYSTEM-POINTER #x...&#62;</TT
></TD
><TD
>should not occur</TD
></TR
></TBODY
></TABLE
></DIV
></P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="chario"
>23.1. characters</A
></H2
><P
ALIGN="justify"
><SPAN
CLASS="keysym"
>#\Code</SPAN
> allows input of characters of arbitrary code:
 e.g., <SPAN
CLASS="keysym"
>#\Code231</SPAN
> reads as the character
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_code-char.html"
TARGET="_top"
><CODE
CLASS="function"
>CODE-CHAR</CODE
></A
> 231.)</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="read-dispatch-ext"
>23.2. Additional read dispatch macros</A
></H2
><P
></P
><UL
><LI
><P
ALIGN="justify"
><SPAN
CLASS="keysym"
>#Y</SPAN
> is used to read compiled
  functions and to set the current <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>'s <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>.
  </P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>#""</TT
> is used to read pathnames:
  <TT
CLASS="filename"
>#"test.lisp"</TT
> is the value of <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>PATHNAME</CODE
></A
> "test.lisp")</TT
></P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
>As in all strings, backslashes must be written twice
  here: <TT
CLASS="filename"
>#"A:\\programs\\test.lisp"</TT
>
  </P
></DD
><DT
>Platform dependent: <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
> As in all strings, backslashes must be written twice
  here: <TT
CLASS="filename"
>#"\\.test.lisp"</TT
>
  </P
></DD
></DL
></DIV
></LI
></UL
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="rt-case"
>23.3. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
TARGET="_top"
><CODE
CLASS="function"
>READTABLE-CASE</CODE
></A
></A
></H2
><P
ALIGN="justify"
>When the value of <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
TARGET="_top"
><CODE
CLASS="function"
>READTABLE-CASE</CODE
></A
>
 <VAR
CLASS="replaceable"
>readtable</VAR
>)</TT
> is
 <CODE
CLASS="constant"
>:INVERT</CODE
>, it applies to the package name and the
 symbol name of a symbol separately (not to the entire token at once).
 An alternative to the use of <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_readtable-case.html"
TARGET="_top"
><CODE
CLASS="function"
>READTABLE-CASE</CODE
></A
> is the use of the
 <A
HREF="#make-pack"
><CODE
CLASS="constant"
>:CASE-SENSITIVE</CODE
></A
> option of
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-package.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-PACKAGE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
>.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="system"
></A
>Chapter 24. System Construction
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-24.html"
TARGET="_top"
>[CLHS-24]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="system-dict"
>24.1. The System Construction Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_syste_n_dictionary.html"
TARGET="_top"
>[CLHS-24.2]</A
></A
></H2
><P
ALIGN="justify"
>The compiler can be called not only by the functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE</CODE
></A
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
TARGET="_top"
><CODE
CLASS="function"
>DISASSEMBLE</CODE
></A
>, but also by the declaration <A
HREF="#compile-decl"
><TT
CLASS="sexp"
>(compile)</TT
></A
>.</P
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="compilefile"
>24.1.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
>
  <VAR
CLASS="replaceable"
>input-file</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:OUTPUT-FILE</CODE
>
  :LISTING <CODE
CLASS="constant"
>:WARNINGS</CODE
> <CODE
CLASS="constant"
>:VERBOSE</CODE
> <CODE
CLASS="constant"
>:PRINT</CODE
> <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
>)</TT
>
compiles a file to platform-independent bytecode.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><VAR
CLASS="replaceable"
>input-file</VAR
></DT
><DD
><P
ALIGN="justify"
>should be a <A
HREF="#path-des"
>pathname designator</A
>.
 </P
></DD
><DT
><CODE
CLASS="constant"
>:OUTPUT-FILE</CODE
></DT
><DD
><P
ALIGN="justify"
>should be <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> or a <A
HREF="#path-des"
>pathname designator</A
> or an
   <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>.  The default is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></DD
><DT
><CODE
CLASS="constant"
>:LISTING</CODE
></DT
><DD
><P
ALIGN="justify"
>should be <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> or a <A
HREF="#path-des"
>pathname designator</A
> or an
   <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>.  The default is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
><DT
><CODE
CLASS="constant"
>:WARNINGS</CODE
></DT
><DD
><P
ALIGN="justify"
>specifies whether warnings should also appear on the
   screen.</P
></DD
><DT
><CODE
CLASS="constant"
>:VERBOSE</CODE
></DT
><DD
><P
ALIGN="justify"
>specifies whether error messages should also appear
   on the screen.</P
></DD
><DT
><CODE
CLASS="constant"
>:PRINT</CODE
></DT
><DD
><P
ALIGN="justify"
>specifies whether an indication which forms are
   being compiled should appear on the screen.
</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The variables <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#compilefile"
><VAR
CLASS="varname"
>CUSTOM:*COMPILE-WARNINGS*</VAR
></A
></I
></STRONG
>,
 <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*COMPILE-VERBOSE*</VAR
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stcompile_le-verbosest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*COMPILE-PRINT*</VAR
></A
> provide defaults for the
 <CODE
CLASS="constant"
>:WARNINGS</CODE
>, <CODE
CLASS="constant"
>:VERBOSE</CODE
>, <CODE
CLASS="constant"
>:PRINT</CODE
> keyword arguments, respectively,
 and are bound by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
> to the values of the arguments, i.e.,
 these arguments are recursive.</P
><P
ALIGN="justify"
>For each input file (default file type: <TT
CLASS="filename"
>#P".lisp"</TT
>)
 the following files are generated:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="compile-file-new-files-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><THEAD
><TR
><TH
>File</TH
><TH
>When</TH
><TH
>Default file type</TH
><TH
>Contents</TH
></TR
></THEAD
><TBODY
><TR
><TD
>output file</TD
><TD
>only if <CODE
CLASS="constant"
>:OUTPUT-FILE</CODE
> is not <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>#P".fas"</TT
></TD
><TD
>can be loaded using the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> function</TD
></TR
><TR
><TD
>auxiliary output file</TD
><TD
>only if <CODE
CLASS="constant"
>:OUTPUT-FILE</CODE
> is not <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="#require"
><TT
CLASS="filename"
>#P".lib"</TT
></A
></TD
><TD
>used by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
> when compiling a <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
> form referring
    to the input file</TD
></TR
><TR
><TD
>listing file</TD
><TD
>only if <CODE
CLASS="constant"
>:LISTING</CODE
> is not <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>#P".lis"</TT
></TD
><TD
>disassembly of the output file</TD
></TR
><TR
><TD
><A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> output file</TD
><TD
>only if <CODE
CLASS="constant"
>:OUTPUT-FILE</CODE
> is not <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><TT
CLASS="filename"
>#P".c"</TT
></TD
><TD
>foreign function interface; this file is deleted if it is
    empty</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>If you have two files in the same directory
- <TT
CLASS="filename"
>#P"foo.lisp"</TT
> and <TT
CLASS="filename"
>#P"foo.c"</TT
>,
and you compile the first file with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>, the second file will be
<I
CLASS="emphasis"
>clobbered</I
> if you have any <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> forms in
the first one!</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="compile-file-path"
>24.1.2. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file-pathname.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE-PATHNAME</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The default for the <CODE
CLASS="constant"
>:OUTPUT-FILE</CODE
> argument is
 <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, which means <TT
CLASS="filename"
>#P".fas"</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="require"
>24.1.3. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
> receives as the optional argument either
 a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
> or a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
>s: files to be <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
>ed
 if the required module is not already present.</P
><P
ALIGN="justify"
>At compile time, <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
>
forms are treated specially: <A
HREF="#load-paths"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-PATHS*</VAR
></A
> is searched for
<TT
CLASS="filename"
>#P"foo.lisp"</TT
> <I
CLASS="emphasis"
>and</I
> <TT
CLASS="filename"
>#P"foo.lib"</TT
>.
If the latest such file is a <TT
CLASS="filename"
>#P".lisp"</TT
>, it is compiled;
otherwise the <A
HREF="#require"
><TT
CLASS="filename"
>#P".lib"</TT
></A
> is loaded.</P
><P
ALIGN="justify"
>The <A
HREF="#require"
><TT
CLASS="filename"
>#P".lib"</TT
></A
> is a <SPAN
CLASS="QUOTE"
>"header"</SPAN
> file which contains the
constant, variable, inline and macro definitions necessary for
compilation of the files that <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
> this file, but not the function
definitions and calls that are not necessary for that.
Thus it is <I
CLASS="emphasis"
>not</I
> necessary to either enclose <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
> forms in
<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL-WHEN</CODE
></A
> or to load the required files in the makefiles: if you have
two files, <TT
CLASS="filename"
>#P"foo.lisp"</TT
> and <TT
CLASS="filename"
>#P"bar.lisp"</TT
>, and the
latter requires the former, you can write in your <TT
CLASS="filename"
>#P"Makefile"</TT
>:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;all: foo.fas bar.fas

foo.fas: foo.lisp
	clisp -c foo

bar.fas: bar.lisp foo.fas
        clisp -c bar
</PRE
></TD
></TR
></TABLE
>
instead of the more cumbersome (and slower, since <A
HREF="#require"
><TT
CLASS="filename"
>#P".lib"</TT
></A
>s are
usually smaller and load faster that <TT
CLASS="filename"
>#P".fas"</TT
>s):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;bar.fas: bar.lisp foo.fas
        clisp -i foo -c bar
</PRE
></TD
></TR
></TABLE
>
Thus, you do not need to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> <TT
CLASS="filename"
>#P"foo"</TT
>)</TT
>
in order to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
>
 <TT
CLASS="filename"
>#P"bar.lisp"</TT
>)</TT
>.
If memory is tight, and if <TT
CLASS="filename"
>#P"foo.lisp"</TT
> contains
only a few inline functions, macros, constants or variables,
this is a space and time saver.
If <TT
CLASS="filename"
>#P"foo.lisp"</TT
> does a lot of initializations or side
effects when being loaded, this is important as well.
</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="loadfile"
>24.1.4. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> has four additional keywords <CODE
CLASS="constant"
>:ECHO</CODE
>, <CODE
CLASS="constant"
>:COMPILING</CODE
>,
 <CODE
CLASS="constant"
>:EXTRA-FILE-TYPES</CODE
>, and <CODE
CLASS="constant"
>:OBSOLETE-ACTION</CODE
>.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> <VAR
CLASS="replaceable"
>filename</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:VERBOSE</CODE
>
 <CODE
CLASS="constant"
>:PRINT</CODE
> <CODE
CLASS="constant"
>:ECHO</CODE
> <CODE
CLASS="constant"
>:IF-DOES-NOT-EXIST</CODE
> <CODE
CLASS="constant"
>:COMPILING</CODE
>
 <CODE
CLASS="constant"
>:EXTRA-FILE-TYPES</CODE
> <CODE
CLASS="constant"
>:OBSOLETE-ACTION</CODE
>)</TT
></P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:VERBOSE</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>causes <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> to emit a short message that a file is
   being loaded.  The default is <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*LOAD-VERBOSE*</VAR
></A
>, which is initially <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.
  </P
></DD
><DT
><CODE
CLASS="constant"
>:PRINT</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>causes <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> to print the value of each form.  The
  default is <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*LOAD-PRINT*</VAR
></A
>, which is initially <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
  </P
></DD
><DT
><CODE
CLASS="constant"
>:ECHO</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>causes the input from the file to be echoed to
  <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*STANDARD-OUTPUT*</VAR
></A
> (normally to the screen).  Should
  there be an error in the file, you can see at one glance where it is.
  The default is <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-ECHO*</VAR
></A
></I
></STRONG
>, which is
  initially <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
><DT
><CODE
CLASS="constant"
>:COMPILING</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>causes each form read to be compiled on the fly.
  The compiled code is executed at once and - in contrast to <A
HREF="#compilefile"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
> - not
  written to a file.
  The default is <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-COMPILING*</VAR
></A
></I
></STRONG
>,
  which is initially <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
><DT
><CODE
CLASS="constant"
>:EXTRA-FILE-TYPES</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>Specifies the additional file types considered for
  loading, in addition to <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*SOURCE-FILE-TYPES*</VAR
></A
></I
></STRONG
>
  (which is initially <TT
CLASS="sexp"
>("lisp" "lsp" "cl")</TT
>)
  and <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*COMPILED-FILE-TYPES*</VAR
></A
></I
></STRONG
>
  (which is initially <TT
CLASS="sexp"
>("fas")</TT
>).
  </P
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>filename</VAR
> does not spefify a unique file
  (e.g., <VAR
CLASS="replaceable"
>filename</VAR
> is <TT
CLASS="filename"
>#P"foo"</TT
> and both <TT
CLASS="filename"
>#P"foo.lisp"</TT
>
  and <TT
CLASS="filename"
>#P"foo.fas"</TT
> are found in the
  <A
HREF="#load-paths"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-PATHS*</VAR
></A
>), then the <I
CLASS="emphasis"
>newest</I
> file is loaded.
 </P
></DD
><DT
><CODE
CLASS="constant"
>:OBSOLETE-ACTION</CODE
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>Specifies the action to take when loading a
   <TT
CLASS="filename"
>#P".fas"</TT
> with a different <A
HREF="#bytecode"
>bytecode</A
>
   version from the one supported by this <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> version.
   The possible actions are <CODE
CLASS="constant"
>:DELETE</CODE
> to delete the
   <TT
CLASS="filename"
>#P".fas"</TT
> and <CODE
CLASS="constant"
>:ERROR</CODE
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.
   The default action is to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_warn.html"
TARGET="_top"
><CODE
CLASS="function"
>WARN</CODE
></A
> and <A
HREF="#load-paths"
>look
   for another matching file</A
>.
   If no file can be loaded and <CODE
CLASS="constant"
>:IF-DOES-NOT-EXIST</CODE
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
   an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>ed.
   The default is <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-OBSOLETE-ACTION*</VAR
></A
></I
></STRONG
>,
   which is initially <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The variables <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*LOAD-VERBOSE*</VAR
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stload-pr_ad-verbosest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*LOAD-PRINT*</VAR
></A
>,
<A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-OBSOLETE-ACTION*</VAR
></A
>, <A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-COMPILING*</VAR
></A
>, and <A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-ECHO*</VAR
></A
> are bound by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> when it
receives a corresponding keyword argument (<CODE
CLASS="constant"
>:VERBOSE</CODE
>, <CODE
CLASS="constant"
>:PRINT</CODE
>,
<CODE
CLASS="constant"
>:OBSOLETE-ACTION</CODE
>, <CODE
CLASS="constant"
>:COMPILING</CODE
>, and <CODE
CLASS="constant"
>:ECHO</CODE
>), i.e., these arguments
are recursive, just like the arguments <CODE
CLASS="constant"
>:WARNINGS</CODE
>, <CODE
CLASS="constant"
>:VERBOSE</CODE
>, and
<CODE
CLASS="constant"
>:PRINT</CODE
> for <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
>.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="load-paths"
></A
><B
>Variable <A
HREF="#load-paths"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-PATHS*</VAR
></A
>. </B
>The variable <A
HREF="#load-paths"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-PATHS*</VAR
></A
> contains a list of directories where the
 files are looked for - in addition to the specified or current
 directory - by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load-logi_translations.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD-LOGICAL-PATHNAME-TRANSLATIONS</CODE
></A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="features"
>24.1.5. Variable <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*FEATURES*</VAR
></A
></A
></H3
><P
ALIGN="justify"
>The variable <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*FEATURES*</VAR
></A
> initially contains the symbols
<DIV
CLASS="table"
><A
NAME="features-table"
></A
><P
><B
>Table 24-1. <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stfeaturesst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*FEATURES*</VAR
></A
> content</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>keyword</TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><CODE
CLASS="constant"
>:CLISP</CODE
></TD
><TD
>the name of this implementation</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:ANSI-CL</CODE
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:COMMON-LISP</CODE
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:INTERPRETER</CODE
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:COMPILER</CODE
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:SOCKETS</CODE
></TD
><TD
>see <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>s</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:GENERIC-STREAMS</CODE
></TD
><TD
>see <A
HREF="#clos-stream"
>Defining new kinds of
    Streams</A
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:SYSCALLS</CODE
></TD
><TD
>see <A
HREF="#syscalls"
>System Calls</A
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:DIR-KEY</CODE
></TD
><TD
>see <A
HREF="#dir-key"
>Directory Access</A
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:LOGICAL-PATHNAMES</CODE
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:FFI</CODE
></TD
><TD
>if a foreign function interface (see <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
>) is supported
     <I
CLASS="emphasis"
>(Platform dependent: many <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms
     only)</I
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:GETTEXT</CODE
></TD
><TD
>if internationalization (see <A
HREF="#i18n"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"I18N"</SPAN
></STRONG
></A
>) using the <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/gettext/gettext.html"
TARGET="_top"
>gettext</A
>
     package is supported
     <I
CLASS="emphasis"
>(Platform dependent: most <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms
     only)</I
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:UNICODE</CODE
></TD
><TD
>if <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> (ISO 10646) characters are supported (see
     <A
HREF="#encoding"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CHARSET"</SPAN
></STRONG
></A
>)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:LOOP</CODE
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:CLOS</CODE
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:AMIGA</CODE
></TD
><TD
>if <VAR
CLASS="replaceable"
>hardware</VAR
> = Amiga and <VAR
CLASS="replaceable"
>operating system</VAR
> = Exec/AmigaDOS</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:DOS</CODE
></TD
><TD
>if <VAR
CLASS="replaceable"
>hardware</VAR
> = PC (clone) and <VAR
CLASS="replaceable"
>operating system</VAR
> = DOS</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:OS/2</CODE
></TD
><TD
>if <VAR
CLASS="replaceable"
>hardware</VAR
> = PC (clone) and <VAR
CLASS="replaceable"
>operating system</VAR
> = OS/2</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:WIN32</CODE
></TD
><TD
>if <VAR
CLASS="replaceable"
>hardware</VAR
> = PC (clone) and
  <VAR
CLASS="replaceable"
>operating system</VAR
> = Win32 (Windows 95/98/NT/Me/2000/XP)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:PC386</CODE
></TD
><TD
>if <VAR
CLASS="replaceable"
>hardware</VAR
> = PC (clone) with a 386/486/586/686/786 CPU</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:UNIX</CODE
></TD
><TD
>if <VAR
CLASS="replaceable"
>operating system</VAR
> = Unix (in this case the <VAR
CLASS="replaceable"
>hardware</VAR
> is irrelevant!)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:CYGWIN</CODE
></TD
><TD
>if <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is using the <A
HREF="http://cygwin.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Cygwin</B
></A
> <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> compatibility layer on
  top of <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> (in that case <CODE
CLASS="constant"
>:UNIX</CODE
> is also present)</TD
></TR
></TBODY
></TABLE
></DIV
></P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="environment"
></A
>Chapter 25. Environment
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-25.html"
TARGET="_top"
>[CLHS-25]</A
></H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="debugger"
>25.1. Debugging Utilities
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-2.html"
TARGET="_top"
>[CLHS-25.1.2]</A
></A
></H2
><P
ALIGN="justify"
>The debugger may be invoked through the functions
 <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_invoke-debugger.html"
TARGET="_top"
><CODE
CLASS="function"
>INVOKE-DEBUGGER</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_break.html"
TARGET="_top"
><CODE
CLASS="function"
>BREAK</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_error.html"
TARGET="_top"
><CODE
CLASS="function"
>ERROR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_cerror.html"
TARGET="_top"
><CODE
CLASS="function"
>CERROR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_warn.html"
TARGET="_top"
><CODE
CLASS="function"
>WARN</CODE
></A
>.
 The stepper is invoked through the macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_step.html"
TARGET="_top"
><CODE
CLASS="function"
>STEP</CODE
></A
>.
 Debugger and stepper execute subordinate <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
TARGET="_top"
>read-eval-print loop</A
> (called "break loops")
 which are similar to the main <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
TARGET="_top"
>read-eval-print loop</A
> except for the
 <A
HREF="#prompt"
>prompt</A
> and the set of available commands.
 Commands must be typed literally, in any case,
 without surrounding quotes or white space.
 Each command has a keyword abbreviation,
 indicated in the second column.</P
><DIV
CLASS="table"
><A
NAME="debugger-main-deb-step"
></A
><P
><B
>Table 25-1. Commands common to the main loop, the debugger and the stepper</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>command</TH
><TH
>abbreviation</TH
><TH
>operation</TH
></TR
></THEAD
><TBODY
><TR
><TD
><B
CLASS="command"
>Help</B
></TD
><TD
><B
CLASS="command"
>:h</B
></TD
><TD
>prints a list of available commands</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="debugger-deb-step"
></A
><P
><B
>Table 25-2. Commands common to the debugger and the stepper</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>command</TH
><TH
>abbreviation</TH
><TH
>operation</TH
></TR
></THEAD
><TBODY
><TR
><TD
><B
CLASS="command"
>Abort</B
></TD
><TD
><B
CLASS="command"
>:a</B
></TD
><TD
>abort to the next most recent <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
TARGET="_top"
>read-eval-print loop</A
></TD
></TR
><TR
><TD
><B
CLASS="command"
>Unwind</B
></TD
><TD
><B
CLASS="command"
>:uw</B
></TD
><TD
>abort to the next most recent <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
TARGET="_top"
>read-eval-print loop</A
></TD
></TR
><TR
><TD
><B
CLASS="command"
>Quit</B
></TD
><TD
><B
CLASS="command"
>:q</B
></TD
><TD
>quit to the top <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
TARGET="_top"
>read-eval-print loop</A
></TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
>The stack is organized into frames and other stack elements.
 Usually every invocation of an interpreted function and every
 evaluation of an interpreted form corresponds to one stack frame.
 Special forms such as <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
TARGET="_top"
><CODE
CLASS="function"
>LET</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
TARGET="_top"
><CODE
CLASS="function"
>LET*</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
>
 produce special kinds of stack frames.</P
><P
ALIGN="justify"
>In a break loop there is a current stack frame, which is initially
 the most recent stack frame but can be moved using the debugger commands
 <B
CLASS="command"
>Up</B
> and <B
CLASS="command"
>Down</B
>.</P
><P
ALIGN="justify"
>Evaluation of forms in a break loop occurs in the lexical
 environment of the current stack frame but in the dynamic environment
 of the debugger's caller.  This means that to inspect or modify a
 lexical variable all you have to do is to move to the current stack
 frame just below the frame that corresponds to the form or the function
 call that binds that variable.</P
><P
ALIGN="justify"
>There is a current "stack mode" which defines in how much
 detail the stack is shown by the stack related debugger commands.</P
><DIV
CLASS="table"
><A
NAME="debugger-deb-step-1"
></A
><P
><B
>Table 25-3. Commands common to the debugger and the stepper</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>command</TH
><TH
>abbreviation</TH
><TH
>operation</TH
></TR
></THEAD
><TBODY
><TR
><TD
><B
CLASS="command"
>Error</B
></TD
><TD
><B
CLASS="command"
>:e</B
></TD
><TD
>print the last error message.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Inspect</B
></TD
><TD
><B
CLASS="command"
>:i</B
></TD
><TD
>inspect the last error message.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Mode-1</B
></TD
><TD
><B
CLASS="command"
>:m1</B
></TD
><TD
>sets the current mode to 1: all the stack elements are considered.
    This mode works fine for debugging compiled functions.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Mode-2</B
></TD
><TD
><B
CLASS="command"
>:m2</B
></TD
><TD
>sets the current mode to 2: all the frames are considered.
     </TD
></TR
><TR
><TD
><B
CLASS="command"
>Mode-3</B
></TD
><TD
><B
CLASS="command"
>:m3</B
></TD
><TD
>sets the current mode to 3: only lexical frames (frames that
    correspond to special forms that modify the lexical
    environment) are considered.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Mode-4</B
></TD
><TD
><B
CLASS="command"
>:m4</B
></TD
><TD
>sets the current mode to 4 (the default): only <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL</CODE
></A
> and
    <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
> frames are considered. Every evaluation of a form in the
    interpreter corresponds to an EVAL frame.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Mode-5</B
></TD
><TD
><B
CLASS="command"
>:m5</B
></TD
><TD
>sets the current mode to 5: only <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
> frames are
         considered. Every invocation of an interpreted function
         corresponds to one <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
> frame.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Where</B
></TD
><TD
><B
CLASS="command"
>:w</B
></TD
><TD
>shows the current stack frame.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Up</B
></TD
><TD
><B
CLASS="command"
>:u</B
></TD
><TD
>goes up one frame, i.e., to the caller if in mode-5
    </TD
></TR
><TR
><TD
><B
CLASS="command"
>Down</B
></TD
><TD
><B
CLASS="command"
>:d</B
></TD
><TD
>does down one frame, i.e., to the callee if in mode-5
    </TD
></TR
><TR
><TD
><B
CLASS="command"
>Top</B
></TD
><TD
><B
CLASS="command"
>:t</B
></TD
><TD
>goes to top frame, i.e., to the top-level form if in mode-4
    </TD
></TR
><TR
><TD
><B
CLASS="command"
>Bottom</B
></TD
><TD
><B
CLASS="command"
>:b</B
></TD
><TD
>goes to bottom (most recent) frame, i.e., most probably to the
         form or function that caused the debugger to be entered.
    </TD
></TR
><TR
><TD
><B
CLASS="command"
>Backtrace</B
></TD
><TD
><B
CLASS="command"
>:bt</B
></TD
><TD
>lists the stack in current mode, bottom frame first, top frame
     last.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Backtrace-1</B
></TD
><TD
><B
CLASS="command"
>:bt1</B
></TD
><TD
>lists the stack in mode 1.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Backtrace-2</B
></TD
><TD
><B
CLASS="command"
>:bt2</B
></TD
><TD
>lists the stack in mode 2.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Backtrace-3</B
></TD
><TD
><B
CLASS="command"
>:bt3</B
></TD
><TD
>lists the stack in mode 3.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Backtrace-4</B
></TD
><TD
><B
CLASS="command"
>:bt4</B
></TD
><TD
>lists the stack in mode 4.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Backtrace-5</B
></TD
><TD
><B
CLASS="command"
>:bt5</B
></TD
><TD
>lists the stack in mode 5.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Frame-limit</B
></TD
><TD
><B
CLASS="command"
>:fl</B
></TD
><TD
>set the frame-limit: this many frames will be printed in a
     backtrace at most.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Backtrace-l</B
></TD
><TD
><B
CLASS="command"
>:bl</B
></TD
><TD
>limit of frames to print will be prompted for.</TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
>If the current stack frame is an <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
> frame, the
  following commands are available as well:</P
><DIV
CLASS="table"
><A
NAME="debugger-eval-apply"
></A
><P
><B
>Table 25-4. Commands specific to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eval.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL</CODE
></A
>/<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
></B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>command</TH
><TH
>abbreviation</TH
><TH
>operation</TH
></TR
></THEAD
><TBODY
><TR
><TD
><B
CLASS="command"
>Break+</B
></TD
><TD
><B
CLASS="command"
>:br+</B
></TD
><TD
>sets a breakpoint in the current frame.  When the corresponding
     form or function will be left, the debugger will be entered again, with
     the variable <A
HREF="#trace-val"
><VAR
CLASS="varname"
>EXT:*TRACE-VALUES*</VAR
></A
> containing a list of its values.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Break-</B
></TD
><TD
><B
CLASS="command"
>:br-</B
></TD
><TD
>removes a breakpoint from the current frame.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Redo</B
></TD
><TD
><B
CLASS="command"
>:rd</B
></TD
><TD
>re-evaluates the corresponding form or function call. This
     command can be used to restart parts of a computation without
     aborting it entirely.</TD
></TR
><TR
><TD
><B
CLASS="command"
>Return</B
></TD
><TD
><B
CLASS="command"
>:rt</B
></TD
><TD
>leaves the current frame.  You will be prompted for the return
     values.</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="debugger-deb"
></A
><P
><B
>Table 25-5. Commands specific to the debugger</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>command</TH
><TH
>abbreviation</TH
><TH
>operation</TH
></TR
></THEAD
><TBODY
><TR
><TD
><B
CLASS="command"
>Continue</B
></TD
><TD
><B
CLASS="command"
>:c</B
></TD
><TD
>continues evaluation of the program.</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="debugger-step"
></A
><P
><B
>Table 25-6. Commands specific to the stepper</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>command</TH
><TH
>abbreviation</TH
><TH
>operation</TH
></TR
></THEAD
><TBODY
><TR
><TD
><B
CLASS="command"
>Step</B
></TD
><TD
><B
CLASS="command"
>:s</B
></TD
><TD
>step into a form: evaluate this form in single step mode
   </TD
></TR
><TR
><TD
><B
CLASS="command"
>Next</B
></TD
><TD
><B
CLASS="command"
>:n</B
></TD
><TD
>step over a form: evaluate this form at once
   </TD
></TR
><TR
><TD
><B
CLASS="command"
>Over</B
></TD
><TD
><B
CLASS="command"
>:o</B
></TD
><TD
>step over this level: evaluate at once up to the next return
   </TD
></TR
><TR
><TD
><B
CLASS="command"
>Continue</B
></TD
><TD
><B
CLASS="command"
>:c</B
></TD
><TD
>switch off single step mode, continue evaluation
   </TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
>The stepper is usually used like this: If some form returns a
 strange value or results in an error, call <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_step.html"
TARGET="_top"
><CODE
CLASS="function"
>STEP</CODE
></A
>
 <VAR
CLASS="replaceable"
>form</VAR
>)</TT
> and navigate using the
 commands <B
CLASS="command"
>Step</B
> and <B
CLASS="command"
>Next</B
> until you
 reach the form you regard as responsible.  If you are too fast (execute
 <B
CLASS="command"
>Next</B
> once and get the error), there is no way back;
 you have to restart the entire stepper session.  If you are too slow
 (stepped into a function or a form which certainly is OK), a couple of
 <B
CLASS="command"
>Next</B
> commands or one <B
CLASS="command"
>Over</B
> command
 will help.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="environment-dict"
>25.2. The Environment Dictionary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_the_envir_t_dictionary.html"
TARGET="_top"
>[CLHS-25.2]</A
></A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="disassemble"
>25.2.1. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
TARGET="_top"
><CODE
CLASS="function"
>DISASSEMBLE</CODE
></A
></A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
TARGET="_top"
><CODE
CLASS="function"
>DISASSEMBLE</CODE
></A
> can disassemble to machine code,
   provided that <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://sources.redhat.com/gdb/"
TARGET="_top"
><B
CLASS="command"
>gdb</B
></A
> is present.
   In that case the argument may be a
   <CODE
CLASS="classname"
>EXT:SYSTEM-FUNCTION</CODE
>, a
   <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
>, a special operator indicator,
   a symbol denoting one of these, a number, or a string.
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="uncompile"
>25.2.2. Function <A
HREF="#uncompile"
><CODE
CLASS="function"
>EXT:UNCOMPILE</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <A
HREF="#uncompile"
><CODE
CLASS="function"
>EXT:UNCOMPILE</CODE
></A
> does the converse of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE</CODE
></A
>: <TT
CLASS="sexp"
>(<A
HREF="#uncompile"
><CODE
CLASS="function"
>EXT:UNCOMPILE</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
>)</TT
> reverts a compiled
 <VAR
CLASS="replaceable"
>function</VAR
> (name), that has been entered or loaded in the same session
 and then compiled, back to its interpreted form.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="documentation"
>25.2.3. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/stagenfun_doc_umentationcp.html"
TARGET="_top"
><CODE
CLASS="function"
>DOCUMENTATION</CODE
></A
></A
></H3
><P
ALIGN="justify"
>No on-line documentation is available for the system functions
 (yet).</P
><DIV
CLASS="formalpara"
><P
><A
NAME="browser"
></A
><B
>Function <CODE
CLASS="function"
>EXT:CLHS</CODE
>. </B
><A
HREF="#CLHS"
>[<SPAN
CLASS="citation"
><A
HREF="#CLHS"
>Common Lisp HyperSpec</A
></SPAN
>]</A
> access is provided via <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:CLHS</CODE
> <VAR
CLASS="replaceable"
>symbol</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
  <A
HREF="#browser"
><CODE
CLASS="constant"
>:BROWSER</CODE
></A
>)</TT
> function, which uses your web browser.
  <VAR
CLASS="replaceable"
>browser</VAR
> (defaults to <A
HREF="#browser"
><CODE
CLASS="constant"
>CUSTOM:*BROWSER*</CODE
></A
>) should be a
  valid keyword in the <A
HREF="#browser"
><CODE
CLASS="constant"
>CUSTOM:*BROWSERS*</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list"
TARGET="_top"
>alist</A
>.
</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="trace"
>25.2.4. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
TARGET="_top"
><CODE
CLASS="function"
>TRACE</CODE
></A
></A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
TARGET="_top"
><CODE
CLASS="function"
>TRACE</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
> ...)</TT
> makes the
 functions <VAR
CLASS="replaceable"
>function</VAR
>, ... traced.  <VAR
CLASS="replaceable"
>function</VAR
> should be either a symbol or
 a list <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>symbol</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
 <CODE
CLASS="constant"
>:suppress-if</CODE
> <CODE
CLASS="constant"
>:step-if</CODE
>
 <CODE
CLASS="constant"
>:pre</CODE
> <CODE
CLASS="constant"
>:post</CODE
>
 <CODE
CLASS="constant"
>:pre-break-if</CODE
> <CODE
CLASS="constant"
>:post-break-if</CODE
>
 <CODE
CLASS="constant"
>:pre-print</CODE
> <CODE
CLASS="constant"
>:post-print</CODE
>
 <CODE
CLASS="constant"
>:PRINT</CODE
>)</TT
>, where</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:suppress-if</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>no trace output as long as <VAR
CLASS="replaceable"
>form</VAR
> is true
  </P
></DD
><DT
><CODE
CLASS="constant"
>:step-if</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>invokes the stepper as soon as <VAR
CLASS="replaceable"
>form</VAR
> is true
  </P
></DD
><DT
><CODE
CLASS="constant"
>:pre</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>evaluates <VAR
CLASS="replaceable"
>form</VAR
> before calling the function
  </P
></DD
><DT
><CODE
CLASS="constant"
>:post</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>evaluates <VAR
CLASS="replaceable"
>form</VAR
> after return from the function
  </P
></DD
><DT
><CODE
CLASS="constant"
>:pre-break-if</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>goes into the break loop before calling the
   function if <VAR
CLASS="replaceable"
>form</VAR
> is true</P
></DD
><DT
><CODE
CLASS="constant"
>:post-break-if</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>goes into the break loop after return from the
   function if <VAR
CLASS="replaceable"
>form</VAR
> is true</P
></DD
><DT
><CODE
CLASS="constant"
>:pre-print</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>prints the values of <VAR
CLASS="replaceable"
>form</VAR
> before calling the
   function</P
></DD
><DT
><CODE
CLASS="constant"
>:post-print</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>prints the values of <VAR
CLASS="replaceable"
>form</VAR
> after return from the
   function</P
></DD
><DT
><CODE
CLASS="constant"
>:PRINT</CODE
> <VAR
CLASS="replaceable"
>form</VAR
></DT
><DD
><P
ALIGN="justify"
>prints the values of <VAR
CLASS="replaceable"
>form</VAR
> both before calling
   and after return from the function</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>In all these forms you can access the following variables:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><VAR
CLASS="varname"
>EXT:*TRACE-FUNCTION*</VAR
></DT
><DD
><P
ALIGN="justify"
>the function itself
  </P
></DD
><DT
><VAR
CLASS="varname"
>EXT:*TRACE-ARGS*</VAR
></DT
><DD
><P
ALIGN="justify"
>the arguments to the function
  </P
></DD
><DT
><VAR
CLASS="varname"
>EXT:*TRACE-FORM*</VAR
></DT
><DD
><P
ALIGN="justify"
>the function/macro call as form
  </P
></DD
><DT
><A
NAME="trace-val"
></A
><A
HREF="#trace-val"
><VAR
CLASS="varname"
>EXT:*TRACE-VALUES*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>after return from the function: the list of return
  values from the function call</P
></DD
></DL
></DIV
>
and you can leave the function call with specified values by using
<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_return.html"
TARGET="_top"
><CODE
CLASS="function"
>RETURN</CODE
></A
>.</P
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
TARGET="_top"
><CODE
CLASS="function"
>TRACE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
TARGET="_top"
><CODE
CLASS="function"
>UNTRACE</CODE
></A
> are also applicable to functions <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>)</TT
> and to macros, but not to
 locally defined functions and macros.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="trace-indent"
></A
><B
>Variable <A
HREF="#trace-indent"
><VAR
CLASS="varname"
>CUSTOM:*TRACE-INDENT*</VAR
></A
>. </B
>If you want the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_tracecm_untrace.html"
TARGET="_top"
><CODE
CLASS="function"
>TRACE</CODE
></A
> level to be indicated by the indentation
in addition to the printed numbers, set <A
HREF="#trace-indent"
><VAR
CLASS="varname"
>CUSTOM:*TRACE-INDENT*</VAR
></A
> to non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
Initially it is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> since many nested traced calls will easily
exhaust the available line length.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="inspect"
>25.2.5. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
TARGET="_top"
><CODE
CLASS="function"
>INSPECT</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
TARGET="_top"
><CODE
CLASS="function"
>INSPECT</CODE
></A
> takes a keyword argument
 <CODE
CLASS="constant"
>:frontend</CODE
>, which specifies the way <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will
 interact with the user.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Available <CODE
CLASS="constant"
>:frontend</CODE
>s for
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
TARGET="_top"
><CODE
CLASS="function"
>INSPECT</CODE
></A
> in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></B
></P
><DL
><DT
><CODE
CLASS="constant"
>:tty</CODE
></DT
><DD
><P
ALIGN="justify"
>The interaction is conducted via the <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
>
   stream.  Please use the <KBD
CLASS="userinput"
>:h</KBD
> command to get the
   list of all available commands.</P
></DD
><DT
><CODE
CLASS="constant"
>:http</CODE
></DT
><DD
><P
ALIGN="justify"
>A window in your Web browser (specified by the
   <A
HREF="#browser"
><CODE
CLASS="constant"
>:BROWSER</CODE
></A
> keyword argument) is opened and it is controlled by
   <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> via a <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>, using the <A
HREF="http://www.w3.org/Protocols/"
TARGET="_top"
><B
CLASS="command"
>HTTP</B
></A
> protocol.
   You should be able to use all the standard browser features.</P
><P
ALIGN="justify"
>Since <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is not multitasking at this time, you will not
   be able to do anything else during an <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
TARGET="_top"
><CODE
CLASS="function"
>INSPECT</CODE
></A
> session.  Please click on
   the <KBD
CLASS="userinput"
>quit</KBD
> link to terminate the session.</P
><P
ALIGN="justify"
>Please be aware though, that once you terminate an <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
TARGET="_top"
><CODE
CLASS="function"
>INSPECT</CODE
></A
>
   session, all links in all <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
TARGET="_top"
><CODE
CLASS="function"
>INSPECT</CODE
></A
> windows in your browser will become
   obsolete and using them in a new <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_inspect.html"
TARGET="_top"
><CODE
CLASS="function"
>INSPECT</CODE
></A
> session will result in
   unpredictable behavior.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="room"
>25.2.6. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_room.html"
TARGET="_top"
><CODE
CLASS="function"
>ROOM</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_room.html"
TARGET="_top"
><CODE
CLASS="function"
>ROOM</CODE
></A
> returns two values: the number of bytes
 currently occupied by Lisp objects, and the number of bytes that can be
 allocated before the next regular <A
HREF="#gc"
>garbage-collect</A
>ion occurs.</P
><P
ALIGN="justify"
>The function
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#gc"
><CODE
CLASS="function"
>EXT:GC</CODE
></A
>
  </I
></STRONG
>
 starts a global <A
HREF="#gc"
>garbage-collect</A
>ion and its return value has the same meaning as
 the second value of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_room.html"
TARGET="_top"
><CODE
CLASS="function"
>ROOM</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="time"
>25.2.7. Macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_time.html"
TARGET="_top"
><CODE
CLASS="function"
>TIME</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The timing data printed by the macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_time.html"
TARGET="_top"
><CODE
CLASS="function"
>TIME</CODE
></A
> includes:
 <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
>the real time ("wall" time),</TD
></TR
><TR
><TD
>the run time (processor time for this process),</TD
></TR
><TR
><TD
>the number of bytes allocated, and</TD
></TR
><TR
><TD
>the number of <A
HREF="#gc"
>garbage-collect</A
>ions performed, if any.</TD
></TR
></TBODY
></TABLE
><P
></P
></P
><P
ALIGN="justify"
>The macro <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#time"
><CODE
CLASS="function"
>EXT:TIMES</CODE
></A
></I
></STRONG
> (mnemonic: "TIME
 and Space") is like the macro <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_time.html"
TARGET="_top"
><CODE
CLASS="function"
>TIME</CODE
></A
>: <TT
CLASS="sexp"
>(<A
HREF="#time"
><CODE
CLASS="function"
>EXT:TIMES</CODE
></A
>
  <VAR
CLASS="replaceable"
>form</VAR
>)</TT
> evaluates the <VAR
CLASS="replaceable"
>form</VAR
>, and, as a side effect,
 outputs detailed information about the memory allocations caused by
 this evaluation.  It also prints everything printed by <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_time.html"
TARGET="_top"
><CODE
CLASS="function"
>TIME</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="ed"
>25.2.8. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_ed.html"
TARGET="_top"
><CODE
CLASS="function"
>ED</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_ed.html"
TARGET="_top"
><CODE
CLASS="function"
>ED</CODE
></A
> calls the external editor specified by the value
 of <TT
CLASS="sexp"
>(<A
HREF="#getenv"
><CODE
CLASS="function"
>EXT:GETENV</CODE
></A
> "EDITOR")</TT
>
 or, failing that, the value of the variable
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#ed"
><VAR
CLASS="varname"
>CUSTOM:*EDITOR*</VAR
></A
></I
></STRONG
> (see <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
>).
 If the argument is a function name which was defined in the current
 session (not loaded from a file), the program text to be edited is a
 pretty-printed version (without comments) of the text which was used to
 define the function.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="clock"
>25.2.9. Clock Time</A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>, <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>
  platforms only.</DT
><DD
><P
ALIGN="justify"
>The variable <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#default-tz"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-TIME-ZONE*</VAR
></A
></I
></STRONG
>
   contains the default time zone used by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_encode-universal-time.html"
TARGET="_top"
><CODE
CLASS="function"
>ENCODE-UNIVERSAL-TIME</CODE
></A
> and
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_decode-universal-time.html"
TARGET="_top"
><CODE
CLASS="function"
>DECODE-UNIVERSAL-TIME</CODE
></A
>.  It is initially set to -1
   (which means 1 hour east of Greenwich, i.e., Mid European Time).
</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_t.html#time_zone"
TARGET="_top"
>time
 zone</A
> in a decoded time must not necessarily be an
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>, but (as <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_float.html"
TARGET="_top"
><CODE
CLASS="classname"
>FLOAT</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_rational.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIONAL</CODE
></A
> number)
 it should be a multiple of <TT
CLASS="literal"
>1/3600</TT
>.</P
><DIV
CLASS="table"
><A
NAME="internal-time-units-table"
></A
><P
><B
>Table 25-7. Time granularity</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>platform</TH
><TH
><A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
></TH
><TH
><A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
></TH
><TH
><A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
></TH
><TH
><A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
></TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_intern_s-per-second.html"
TARGET="_top"
><CODE
CLASS="constant"
>INTERNAL-TIME-UNITS-PER-SECOND</CODE
></A
></TD
><TD
>100</TD
><TD
>50</TD
><TD
>1,000,000</TD
><TD
>10,000,000</TD
></TR
></TBODY
></TABLE
></DIV
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_get-internal-run-time.html"
TARGET="_top"
><CODE
CLASS="function"
>GET-INTERNAL-RUN-TIME</CODE
></A
> returns the amount of run time
 consumed by the current <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> process since its startup.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="machine"
>25.2.10. Machine</A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platform only.</DT
><DD
><P
ALIGN="justify"
>The functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
TARGET="_top"
><CODE
CLASS="function"
>SHORT-SITE-NAME</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
TARGET="_top"
><CODE
CLASS="function"
>LONG-SITE-NAME</CODE
></A
>
   should be defined in a site-specific <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
> file.
   The default implementations try to read the value of the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>
   <VAR
CLASS="envar"
>ORGANIZATION</VAR
>, and, failing that, call <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html"
TARGET="_top"
><CODE
CLASS="function"
>uname</CODE
></A
>.
</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platform only.</DT
><DD
><P
ALIGN="justify"
>The functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
TARGET="_top"
><CODE
CLASS="function"
>SHORT-SITE-NAME</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
TARGET="_top"
><CODE
CLASS="function"
>LONG-SITE-NAME</CODE
></A
>
   should be defined in a site-specific <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
> file.
   The default implementations try to read the registry.
</P
></DD
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>, <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>
  platforms only.</DT
><DD
><P
ALIGN="justify"
>The functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_machine-type.html"
TARGET="_top"
><CODE
CLASS="function"
>MACHINE-TYPE</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_machine-version.html"
TARGET="_top"
><CODE
CLASS="function"
>MACHINE-VERSION</CODE
></A
>,
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html"
TARGET="_top"
><CODE
CLASS="function"
>MACHINE-INSTANCE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
TARGET="_top"
><CODE
CLASS="function"
>SHORT-SITE-NAME</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_short-sit_ng-site-name.html"
TARGET="_top"
><CODE
CLASS="function"
>LONG-SITE-NAME</CODE
></A
> should be
   defined by every user in his user-specific <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
> file.
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="apropos"
>25.2.11. Functions <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
TARGET="_top"
><CODE
CLASS="function"
>APROPOS</CODE
></A
> &#38; <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
TARGET="_top"
><CODE
CLASS="function"
>APROPOS-LIST</CODE
></A
></A
></H3
><P
ALIGN="justify"
>The search performed by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
TARGET="_top"
><CODE
CLASS="function"
>APROPOS</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
TARGET="_top"
><CODE
CLASS="function"
>APROPOS-LIST</CODE
></A
> is
 case-insensitive.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dribble"
>25.2.12. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_dribble.html"
TARGET="_top"
><CODE
CLASS="function"
>DRIBBLE</CODE
></A
></A
></H3
><P
ALIGN="justify"
>If <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_dribble.html"
TARGET="_top"
><CODE
CLASS="function"
>DRIBBLE</CODE
></A
> is called with an argument, and dribbling is already
 enabled, a warning is printed, and the new dribbling request is
 ignored.</P
><P
ALIGN="justify"
>Dribbling is implemented via a kind (but <I
CLASS="emphasis"
>not</I
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_r.html#recognizable_subtype"
TARGET="_top"
>recognizable subtype</A
>) of
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_two-way-stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>TWO-WAY-STREAM</CODE
></A
>, named <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
>.
 If you have a <VAR
CLASS="replaceable"
>source</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional"
TARGET="_top"
>bidirectional</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> <VAR
CLASS="replaceable"
>x</VAR
> and you want all transactions
 (input and output) on <VAR
CLASS="replaceable"
>x</VAR
> to be copied to the <VAR
CLASS="replaceable"
>target</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> <VAR
CLASS="replaceable"
>y</VAR
>,
 you can do
 <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defparametercm_defvar.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFVAR</CODE
></A
> *loggable* <VAR
CLASS="replaceable"
>x</VAR
>)
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> <VAR
CLASS="replaceable"
>x</VAR
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_make-synonym-stream.html"
TARGET="_top"
><CODE
CLASS="function"
>MAKE-SYNONYM-STREAM</CODE
></A
> '*loggable*))
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defun.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFUN</CODE
></A
> toggle-logging (<A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> s)
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_multiple-value-bind.html"
TARGET="_top"
><CODE
CLASS="function"
>MULTIPLE-VALUE-BIND</CODE
></A
> (so ta) (dribble-toggle *loggable* s)
      (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_whencm_unless.html"
TARGET="_top"
><CODE
CLASS="function"
>WHEN</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_streamp.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAMP</CODE
></A
> so) (<A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> *loggable* so))
      ta))
  (toggle-logging <VAR
CLASS="replaceable"
>y</VAR
>)     ; start logging
  ...
  (toggle-logging)       ; finish logging
  ...
  (toggle-logging <VAR
CLASS="replaceable"
>y</VAR
>)     ; restart logging
  ...
  (toggle-logging)       ; finish logging
  (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
> <VAR
CLASS="replaceable"
>y</VAR
>)
 </PRE
></TD
></TR
></TABLE
></P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="drist"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DRIBBLE-STREAM</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>stream</VAR
> is a <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
>, returns two values:
    the <VAR
CLASS="replaceable"
>source</VAR
> and the <VAR
CLASS="replaceable"
>target</VAR
> streams.  Otherwise returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
 </P
></DD
><DT
><A
NAME="drist-p"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DRIBBLE-STREAM-P</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>stream</VAR
> is a <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
>, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, otherwise
    returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
><DT
><A
NAME="drist-so"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DRIBBLE-STREAM-SOURCE</CODE
>
     <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>stream</VAR
> is a <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
>, returns its
    <VAR
CLASS="replaceable"
>source</VAR
> stream, otherwise signals a <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html"
TARGET="_top"
><CODE
CLASS="classname"
>TYPE-ERROR</CODE
></A
>.
 </P
></DD
><DT
><A
NAME="drist-ta"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DRIBBLE-STREAM-TARGET</CODE
>
     <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>stream</VAR
> is a <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
>, returns its
    <VAR
CLASS="replaceable"
>target</VAR
> stream, otherwise signals a <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_type-error.html"
TARGET="_top"
><CODE
CLASS="classname"
>TYPE-ERROR</CODE
></A
>.
 </P
></DD
><DT
><A
NAME="mk-drist"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:MAKE-DRIBBLE-STREAM</CODE
>
     <VAR
CLASS="replaceable"
>source</VAR
> <VAR
CLASS="replaceable"
>target</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Create a new <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
>.
 </P
></DD
><DT
><A
NAME="dri-toggle"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:DRIBBLE-TOGGLE</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>
     <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>stream</VAR
> is a <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
> and <VAR
CLASS="replaceable"
>pathname</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
    writes a dribble termination note to the <VAR
CLASS="replaceable"
>stream</VAR
>'s <VAR
CLASS="replaceable"
>target</VAR
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> and returns <VAR
CLASS="replaceable"
>stream</VAR
>'s <VAR
CLASS="replaceable"
>source</VAR
> and <VAR
CLASS="replaceable"
>target</VAR
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s;
    when <VAR
CLASS="replaceable"
>stream</VAR
> is not a <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
> and <VAR
CLASS="replaceable"
>pathname</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
    creates a new <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
>, dribbling from <VAR
CLASS="replaceable"
>stream</VAR
> to <VAR
CLASS="replaceable"
>pathname</VAR
>,
    writes a dribble initialization note to <VAR
CLASS="replaceable"
>pathname</VAR
>,
    and return the <A
HREF="#dribble"
><CODE
CLASS="classname"
>EXT:DRIBBLE-STREAM</CODE
></A
> (the second value is the <VAR
CLASS="replaceable"
>target</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>);
    otherwise <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_warn.html"
TARGET="_top"
><CODE
CLASS="function"
>WARN</CODE
></A
> that no appropriate action may be taken.
    <VAR
CLASS="replaceable"
>pathname</VAR
> may be an open <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> or a <A
HREF="#path-des"
>pathname designator</A
>.
    See <A
HREF="#dribble-example"
>above</A
> for the sample usage.
    See also <TT
CLASS="filename"
>#P"src/dribble.lisp"</TT
> in the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
    source tree.
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="version"
>25.2.13. Function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html"
TARGET="_top"
><CODE
CLASS="function"
>LISP-IMPLEMENTATION-VERSION</CODE
></A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/fun_lisp-impl_tion-version.html"
TARGET="_top"
><CODE
CLASS="function"
>LISP-IMPLEMENTATION-VERSION</CODE
></A
> returns
 the numeric version (like <TT
CLASS="literal"
>3.14</TT
>), and
 the release date (like <TT
CLASS="literal"
>"1999-07-21"</TT
>).
 When running on the same machine on which <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> was built, it appends
  the binary build and <A
HREF="#image"
>memory image</A
> dump date in universal time
  (like <TT
CLASS="literal"
>3141592654</TT
>).
 When running on a different machine, it appends the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_machine-instance.html"
TARGET="_top"
><CODE
CLASS="function"
>MACHINE-INSTANCE</CODE
></A
>
  of the machine on which it was built.</P
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="glossary"
></A
>Chapter 26. Glossary
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-26.html"
TARGET="_top"
>[CLHS-26]</A
></H1
><P
ALIGN="justify"
>No notes.</P
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="appendix"
></A
>Chapter 27. Appendix
   <A
HREF="http://www.lisp.org/HyperSpec/Body/chap-a.html"
TARGET="_top"
>[CLHS-a]</A
></H1
><P
ALIGN="justify"
>No notes.</P
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="issues"
></A
>Chapter 28. X3J13 Issue Index
   <A
HREF="http://www.lisp.org/HyperSpec/Issues/Issues-Categorized.html"
TARGET="_top"
>[CLHS-ic]</A
></H1
><P
ALIGN="justify"
>This is the list of ANSI CL issues and their current status in
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>, i.e., whether <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> supports code that makes use of the
 functionality specified by the vote.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="iss001"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss001.html"
TARGET="_top"
>&#38;ENVIRONMENT-BINDING-ORDER:FIRST</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss002"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss002.html"
TARGET="_top"
>ACCESS-ERROR-NAME</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss003"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss003.html"
TARGET="_top"
>ADJUST-ARRAY-DISPLACEMENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss004"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss004.html"
TARGET="_top"
>ADJUST-ARRAY-FILL-POINTER</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss005"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss005.html"
TARGET="_top"
>ADJUST-ARRAY-NOT-ADJUSTABLE:IMPLICIT-COPY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss006"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss006.html"
TARGET="_top"
>ALLOCATE-INSTANCE:ADD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss007"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss007.html"
TARGET="_top"
>ALLOW-LOCAL-INLINE:INLINE-NOTINLINE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss008"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss008.html"
TARGET="_top"
>ALLOW-OTHER-KEYS-NIL:PERMIT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss009"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss009.html"
TARGET="_top"
>AREF-1D</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss010"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss010.html"
TARGET="_top"
>ARGUMENT-MISMATCH-ERROR-AGAIN:CONSISTENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss011"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss011.html"
TARGET="_top"
>ARGUMENT-MISMATCH-ERROR-MOON:FIX</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss012"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss012.html"
TARGET="_top"
>ARGUMENT-MISMATCH-ERROR:MORE-CLARIFICATIONS</A
></DT
><DD
><P
ALIGN="justify"
>yes, except for argument list checking in
     <A
HREF="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html"
TARGET="_top"
><CODE
CLASS="function"
>CALL-NEXT-METHOD</CODE
></A
> in compiled code (items 11,12)
     </P
></DD
><DT
><A
NAME="iss013"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss013.html"
TARGET="_top"
>ARGUMENTS-UNDERSPECIFIED:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss014"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss014.html"
TARGET="_top"
>ARRAY-DIMENSION-LIMIT-IMPLICATIONS:ALL-FIXNUM</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss015"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss015.html"
TARGET="_top"
>ARRAY-TYPE-ELEMENT-TYPE-SEMANTICS:UNIFY-UPGRADING</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss016"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss016.html"
TARGET="_top"
>ASSERT-ERROR-TYPE:ERROR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss017"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss017.html"
TARGET="_top"
>ASSOC-RASSOC-IF-KEY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss018"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss018.html"
TARGET="_top"
>ASSOC-RASSOC-IF-KEY:YES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss019"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss019.html"
TARGET="_top"
>BOA-AUX-INITIALIZATION:ERROR-ON-READ</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss020"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss020.html"
TARGET="_top"
>BREAK-ON-WARNINGS-OBSOLETE:REMOVE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss021"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss021.html"
TARGET="_top"
>BROADCAST-STREAM-RETURN-VALUES:CLARIFY-MINIMALLY</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss022"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss022.html"
TARGET="_top"
>BUTLAST-NEGATIVE:SHOULD-SIGNAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss023"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss023.html"
TARGET="_top"
>CHANGE-CLASS-INITARGS:PERMIT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss024"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss024.html"
TARGET="_top"
>CHAR-NAME-CASE:X3J13-MAR-91</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss025"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss025.html"
TARGET="_top"
>CHARACTER-LOOSE-ENDS:FIX</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss026"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss026.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss027"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss027.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-1-1</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss028"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss028.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-1-2</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss029"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss029.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-2-1</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss030"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss030.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-3-1</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss031"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss031.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-3-2</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss032"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss032.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-3-3</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss033"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss033.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-3-4</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss034"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss034.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-3-5</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss035"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss035.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-3-6</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss036"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss036.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-4-1</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss037"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss037.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-4-2</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss038"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss038.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-4-3</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss039"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss039.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-5-2</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss040"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss040.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-5-6</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss041"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss041.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-5-7</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss042"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss042.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-6-1</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss043"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss043.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-6-2</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss044"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss044.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-6-3</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss045"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss045.html"
TARGET="_top"
>CHARACTER-PROPOSAL:2-6-5</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss046"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss046.html"
TARGET="_top"
>CHARACTER-VS-CHAR:LESS-INCONSISTENT-SHORT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss047"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss047.html"
TARGET="_top"
>CLASS-OBJECT-SPECIALIZER:AFFIRM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss048"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss048.html"
TARGET="_top"
>CLOS-CONDITIONS-AGAIN:ALLOW-SUBSET</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss049"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss049.html"
TARGET="_top"
>CLOS-CONDITIONS:INTEGRATE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss050"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss050.html"
TARGET="_top"
>CLOS-ERROR-CHECKING-ORDER:NO-APPLICABLE-METHOD-FIRST</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss051"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss051.html"
TARGET="_top"
>CLOS-MACRO-COMPILATION:MINIMAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss052"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss052.html"
TARGET="_top"
>CLOSE-CONSTRUCTED-STREAM:ARGUMENT-STREAM-ONLY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss053"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss053.html"
TARGET="_top"
>CLOSED-STREAM-OPERATIONS:ALLOW-INQUIRY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss054"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss054.html"
TARGET="_top"
>COERCING-SETF-NAME-TO-FUNCTION:ALL-FUNCTION-NAMES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss055"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss055.html"
TARGET="_top"
>COLON-NUMBER</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss056"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss056.html"
TARGET="_top"
>COMMON-FEATURES:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss057"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss057.html"
TARGET="_top"
>COMMON-TYPE:REMOVE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss058"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss058.html"
TARGET="_top"
>COMPILE-ARGUMENT-PROBLEMS-AGAIN:FIX</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss059"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss059.html"
TARGET="_top"
>COMPILE-FILE-HANDLING-OF-TOP-LEVEL-FORMS:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss060"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss060.html"
TARGET="_top"
>COMPILE-FILE-OUTPUT-FILE-DEFAULTS:INPUT-FILE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss061"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss061.html"
TARGET="_top"
>COMPILE-FILE-PACKAGE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss062"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss062.html"
TARGET="_top"
>COMPILE-FILE-PATHNAME-ARGUMENTS:MAKE-CONSISTENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss063"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss063.html"
TARGET="_top"
>COMPILE-FILE-SYMBOL-HANDLING:NEW-REQUIRE-CONSISTENCY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss064"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss064.html"
TARGET="_top"
>COMPILED-FUNCTION-REQUIREMENTS:TIGHTEN</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss065"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss065.html"
TARGET="_top"
>COMPILER-DIAGNOSTICS:USE-HANDLER</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss066"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss066.html"
TARGET="_top"
>COMPILER-LET-CONFUSION:ELIMINATE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss067"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss067.html"
TARGET="_top"
>COMPILER-VERBOSITY:LIKE-LOAD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss068"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss068.html"
TARGET="_top"
>COMPILER-WARNING-STREAM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss069"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss069.html"
TARGET="_top"
>COMPLEX-ATAN-BRANCH-CUT:TWEAK</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss070"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss070.html"
TARGET="_top"
>COMPLEX-ATANH-BOGUS-FORMULA:TWEAK-MORE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss071"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss071.html"
TARGET="_top"
>COMPLEX-RATIONAL-RESULT:EXTEND</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss072"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss072.html"
TARGET="_top"
>COMPUTE-APPLICABLE-METHODS:GENERIC</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss073"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss073.html"
TARGET="_top"
>CONCATENATE-SEQUENCE:SIGNAL-ERROR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss074"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss074.html"
TARGET="_top"
>CONDITION-ACCESSORS-SETFABLE:NO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss075"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss075.html"
TARGET="_top"
>CONDITION-RESTARTS:BUGGY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss076"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss076.html"
TARGET="_top"
>CONDITION-RESTARTS:PERMIT-ASSOCIATION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss077"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss077.html"
TARGET="_top"
>CONDITION-SLOTS:HIDDEN</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss078"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss078.html"
TARGET="_top"
>CONS-TYPE-SPECIFIER:ADD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss079"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss079.html"
TARGET="_top"
>CONSTANT-CIRCULAR-COMPILATION:YES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss080"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss080.html"
TARGET="_top"
>CONSTANT-COLLAPSING:GENERALIZE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss081"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss081.html"
TARGET="_top"
>CONSTANT-COMPILABLE-TYPES:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss082"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss082.html"
TARGET="_top"
>CONSTANT-FUNCTION-COMPILATION:NO</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss083"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss083.html"
TARGET="_top"
>CONSTANT-MODIFICATION:DISALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss084"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss084.html"
TARGET="_top"
>CONSTANTP-DEFINITION:INTENTIONAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss085"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss085.html"
TARGET="_top"
>CONSTANTP-ENVIRONMENT:ADD-ARG</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss086"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss086.html"
TARGET="_top"
>CONTAGION-ON-NUMERICAL-COMPARISONS:TRANSITIVE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss087"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss087.html"
TARGET="_top"
>COPY-SYMBOL-COPY-PLIST:COPY-LIST</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss088"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss088.html"
TARGET="_top"
>COPY-SYMBOL-PRINT-NAME:EQUAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss089"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss089.html"
TARGET="_top"
>DATA-IO:ADD-SUPPORT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss090"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss090.html"
TARGET="_top"
>DATA-TYPES-HIERARCHY-UNDERSPECIFIED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss091"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss091.html"
TARGET="_top"
>DEBUGGER-HOOK-VS-BREAK:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss092"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss092.html"
TARGET="_top"
>DECLARATION-SCOPE:NO-HOISTING</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss093"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss093.html"
TARGET="_top"
>DECLARE-ARRAY-TYPE-ELEMENT-REFERENCES:RESTRICTIVE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss094"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss094.html"
TARGET="_top"
>DECLARE-FUNCTION-AMBIGUITY:DELETE-FTYPE-ABBREVIATION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss095"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss095.html"
TARGET="_top"
>DECLARE-MACROS:FLUSH</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss096"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss096.html"
TARGET="_top"
>DECLARE-TYPE-FREE:LEXICAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss097"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss097.html"
TARGET="_top"
>DECLS-AND-DOC</A
></DT
><DD
><P
ALIGN="justify"
>??</P
></DD
><DT
><A
NAME="iss098"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss098.html"
TARGET="_top"
>DECODE-UNIVERSAL-TIME-DAYLIGHT:LIKE-ENCODE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss099"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss099.html"
TARGET="_top"
>DEFCONSTANT-SPECIAL:NO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss100"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss100.html"
TARGET="_top"
>DEFGENERIC-DECLARE:ALLOW-MULTIPLE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss101"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss101.html"
TARGET="_top"
>DEFINE-COMPILER-MACRO:X3J13-NOV89</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss102"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss102.html"
TARGET="_top"
>DEFINE-CONDITION-SYNTAX:INCOMPATIBLY-MORE-LIKE-DEFCLASS+EMPHASIZE-READ-ONLY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss103"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss103.html"
TARGET="_top"
>DEFINE-METHOD-COMBINATION-BEHAVIOR:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss104"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss104.html"
TARGET="_top"
>DEFINING-MACROS-NON-TOP-LEVEL:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss105"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss105.html"
TARGET="_top"
>DEFMACRO-BLOCK-SCOPE:EXCLUDES-BINDINGS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss106"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss106.html"
TARGET="_top"
>DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss107"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss107.html"
TARGET="_top"
>DEFMETHOD-DECLARATION-SCOPE:CORRESPONDS-TO-BINDINGS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss108"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss108.html"
TARGET="_top"
>DEFPACKAGE:ADDITION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss109"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss109.html"
TARGET="_top"
>DEFSTRUCT-CONSTRUCTOR-KEY-MIXTURE:ALLOW-KEY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss110"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss110.html"
TARGET="_top"
>DEFSTRUCT-CONSTRUCTOR-OPTIONS:EXPLICIT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss111"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss111.html"
TARGET="_top"
>DEFSTRUCT-CONSTRUCTOR-SLOT-VARIABLES:NOT-BOUND</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss112"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss112.html"
TARGET="_top"
>DEFSTRUCT-COPIER-ARGUMENT-TYPE:RESTRICT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss113"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss113.html"
TARGET="_top"
>DEFSTRUCT-COPIER:ARGUMENT-TYPE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss114"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss114.html"
TARGET="_top"
>DEFSTRUCT-DEFAULT-VALUE-EVALUATION:IFF-NEEDED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss115"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss115.html"
TARGET="_top"
>DEFSTRUCT-INCLUDE-DEFTYPE:EXPLICITLY-UNDEFINED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss116"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss116.html"
TARGET="_top"
>DEFSTRUCT-PRINT-FUNCTION-AGAIN:X3J13-MAR-93</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss117"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss117.html"
TARGET="_top"
>DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss118"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss118.html"
TARGET="_top"
>DEFSTRUCT-REDEFINITION:ERROR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss119"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss119.html"
TARGET="_top"
>DEFSTRUCT-SLOTS-CONSTRAINTS-NAME:DUPLICATES-ERROR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss120"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss120.html"
TARGET="_top"
>DEFSTRUCT-SLOTS-CONSTRAINTS-NUMBER</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss121"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss121.html"
TARGET="_top"
>DEFTYPE-DESTRUCTURING:YES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss122"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss122.html"
TARGET="_top"
>DEFTYPE-KEY:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss123"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss123.html"
TARGET="_top"
>DEFVAR-DOCUMENTATION:UNEVALUATED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss124"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss124.html"
TARGET="_top"
>DEFVAR-INIT-TIME:NOT-DELAYED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss125"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss125.html"
TARGET="_top"
>DEFVAR-INITIALIZATION:CONSERVATIVE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss126"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss126.html"
TARGET="_top"
>DEPRECATION-POSITION:LIMITED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss127"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss127.html"
TARGET="_top"
>DESCRIBE-INTERACTIVE:NO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss128"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss128.html"
TARGET="_top"
>DESCRIBE-UNDERSPECIFIED:DESCRIBE-OBJECT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss129"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss129.html"
TARGET="_top"
>DESTRUCTIVE-OPERATIONS:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss130"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss130.html"
TARGET="_top"
>DESTRUCTURING-BIND:NEW-MACRO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss131"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss131.html"
TARGET="_top"
>DISASSEMBLE-SIDE-EFFECT:DO-NOT-INSTALL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss132"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss132.html"
TARGET="_top"
>DISPLACED-ARRAY-PREDICATE:ADD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss133"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss133.html"
TARGET="_top"
>DO-SYMBOLS-BLOCK-SCOPE:ENTIRE-FORM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss134"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss134.html"
TARGET="_top"
>DO-SYMBOLS-DUPLICATES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss135"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss135.html"
TARGET="_top"
>DOCUMENTATION-FUNCTION-BUGS:FIX</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss136"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss136.html"
TARGET="_top"
>DOCUMENTATION-FUNCTION-TANGLED:REQUIRE-ARGUMENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss137"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss137.html"
TARGET="_top"
>DOTIMES-IGNORE:X3J13-MAR91</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss138"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss138.html"
TARGET="_top"
>DOTTED-LIST-ARGUMENTS:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss139"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss139.html"
TARGET="_top"
>DOTTED-MACRO-FORMS:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss140"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss140.html"
TARGET="_top"
>DRIBBLE-TECHNIQUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss141"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss141.html"
TARGET="_top"
>DYNAMIC-EXTENT-FUNCTION:EXTEND</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss142"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss142.html"
TARGET="_top"
>DYNAMIC-EXTENT:NEW-DECLARATION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss143"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss143.html"
TARGET="_top"
>EQUAL-STRUCTURE:MAYBE-STATUS-QUO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss144"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss144.html"
TARGET="_top"
>ERROR-TERMINOLOGY-WARNING:MIGHT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss145"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss145.html"
TARGET="_top"
>EVAL-OTHER:SELF-EVALUATE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss146"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss146.html"
TARGET="_top"
>EVAL-TOP-LEVEL:LOAD-LIKE-COMPILE-FILE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss147"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss147.html"
TARGET="_top"
>EVAL-WHEN-NON-TOP-LEVEL:GENERALIZE-EVAL-NEW-KEYWORDS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss148"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss148.html"
TARGET="_top"
>EVAL-WHEN-OBSOLETE-KEYWORDS:X3J13-MAR-1993</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss149"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss149.html"
TARGET="_top"
>EVALHOOK-STEP-CONFUSION:FIX</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss150"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss150.html"
TARGET="_top"
>EVALHOOK-STEP-CONFUSION:X3J13-NOV-89</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss151"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss151.html"
TARGET="_top"
>EXIT-EXTENT-AND-CONDITION-SYSTEM:LIKE-DYNAMIC-BINDINGS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss152"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss152.html"
TARGET="_top"
>EXIT-EXTENT:MINIMAL</A
></DT
><DD
><P
ALIGN="justify"
>yes, actually implement MEDIUM
    </P
></DD
><DT
><A
NAME="iss153"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss153.html"
TARGET="_top"
>EXPT-RATIO:P.211</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss154"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss154.html"
TARGET="_top"
>EXTENSIONS-POSITION:DOCUMENTATION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss155"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss155.html"
TARGET="_top"
>EXTERNAL-FORMAT-FOR-EVERY-FILE-CONNECTION:MINIMUM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss156"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss156.html"
TARGET="_top"
>EXTRA-RETURN-VALUES:NO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss157"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss157.html"
TARGET="_top"
>FILE-OPEN-ERROR:SIGNAL-FILE-ERROR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss158"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss158.html"
TARGET="_top"
>FIXNUM-NON-PORTABLE:TIGHTEN-DEFINITION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss159"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss159.html"
TARGET="_top"
>FLET-DECLARATIONS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss160"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss160.html"
TARGET="_top"
>FLET-DECLARATIONS:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss161"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss161.html"
TARGET="_top"
>FLET-IMPLICIT-BLOCK:YES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss162"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss162.html"
TARGET="_top"
>FLOAT-UNDERFLOW:ADD-VARIABLES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss163"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss163.html"
TARGET="_top"
>FLOATING-POINT-CONDITION-NAMES:X3J13-NOV-89</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss164"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss164.html"
TARGET="_top"
>FORMAT-ATSIGN-COLON</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss165"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss165.html"
TARGET="_top"
>FORMAT-COLON-UPARROW-SCOPE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss166"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss166.html"
TARGET="_top"
>FORMAT-COMMA-INTERVAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss167"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss167.html"
TARGET="_top"
>FORMAT-E-EXPONENT-SIGN:FORCE-SIGN</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss168"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss168.html"
TARGET="_top"
>FORMAT-OP-C</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss169"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss169.html"
TARGET="_top"
>FORMAT-PRETTY-PRINT:YES</A
></DT
><DD
><P
ALIGN="justify"
>yes, except that <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-1.html"
TARGET="_top"
><TT
CLASS="literal"
>~F</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-2.html"
TARGET="_top"
><TT
CLASS="literal"
>~E</TT
></A
>,
     <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-3.html"
TARGET="_top"
><TT
CLASS="literal"
>~G</TT
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_22-3-3-4.html"
TARGET="_top"
><TT
CLASS="literal"
>~$</TT
></A
> also bind <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-BASE*</VAR
></A
> to 10 and
     <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stprint-b_rint-radixst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PRINT-RADIX*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></P
></DD
><DT
><A
NAME="iss170"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss170.html"
TARGET="_top"
>FORMAT-STRING-ARGUMENTS:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss171"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss171.html"
TARGET="_top"
>FUNCTION-CALL-EVALUATION-ORDER:MORE-UNSPECIFIED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss172"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss172.html"
TARGET="_top"
>FUNCTION-COMPOSITION:JAN89-X3J13</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss173"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss173.html"
TARGET="_top"
>FUNCTION-DEFINITION:JAN89-X3J13</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss174"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss174.html"
TARGET="_top"
>FUNCTION-NAME:LARGE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss175"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss175.html"
TARGET="_top"
>FUNCTION-TYPE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss176"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss176.html"
TARGET="_top"
>FUNCTION-TYPE-ARGUMENT-TYPE-SEMANTICS:RESTRICTIVE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss177"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss177.html"
TARGET="_top"
>FUNCTION-TYPE-KEY-NAME:SPECIFY-KEYWORD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss178"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss178.html"
TARGET="_top"
>FUNCTION-TYPE-REST-LIST-ELEMENT:USE-ACTUAL-ARGUMENT-TYPE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss179"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss179.html"
TARGET="_top"
>FUNCTION-TYPE:X3J13-MARCH-88</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss180"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss180.html"
TARGET="_top"
>GENERALIZE-PRETTY-PRINTER:UNIFY</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss181"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss181.html"
TARGET="_top"
>GENERIC-FLET-POORLY-DESIGNED:DELETE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss182"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss182.html"
TARGET="_top"
>GENSYM-NAME-STICKINESS:LIKE-TEFLON</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss183"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss183.html"
TARGET="_top"
>GENTEMP-BAD-IDEA:DEPRECATE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss184"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss184.html"
TARGET="_top"
>GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss185"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss185.html"
TARGET="_top"
>GET-SETF-METHOD-ENVIRONMENT:ADD-ARG</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss186"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss186.html"
TARGET="_top"
>HASH-TABLE-ACCESS:X3J13-MAR-89</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss187"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss187.html"
TARGET="_top"
>HASH-TABLE-KEY-MODIFICATION:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss188"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss188.html"
TARGET="_top"
>HASH-TABLE-PACKAGE-GENERATORS:ADD-WITH-WRAPPER</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss189"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss189.html"
TARGET="_top"
>HASH-TABLE-REHASH-SIZE-INTEGER</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss190"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss190.html"
TARGET="_top"
>HASH-TABLE-SIZE:INTENDED-ENTRIES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss191"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss191.html"
TARGET="_top"
>HASH-TABLE-TESTS:ADD-EQUALP</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss192"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss192.html"
TARGET="_top"
>IEEE-ATAN-BRANCH-CUT:SPLIT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss193"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss193.html"
TARGET="_top"
>IGNORE-USE-TERMINOLOGY:VALUE-ONLY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss194"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss194.html"
TARGET="_top"
>IMPORT-SETF-SYMBOL-PACKAGE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss195"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss195.html"
TARGET="_top"
>IN-PACKAGE-FUNCTIONALITY:MAR89-X3J13</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss196"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss196.html"
TARGET="_top"
>IN-SYNTAX:MINIMAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss197"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss197.html"
TARGET="_top"
>INITIALIZATION-FUNCTION-KEYWORD-CHECKING</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss198"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss198.html"
TARGET="_top"
>ISO-COMPATIBILITY:ADD-SUBSTRATE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss199"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss199.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:11</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss200"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss200.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:14</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss201"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss201.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:24</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss202"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss202.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:25</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss203"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss203.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:27</A
></DT
><DD
><P
ALIGN="justify"
>yes for <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_the.html"
TARGET="_top"
><CODE
CLASS="function"
>THE</CODE
></A
>, no for <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_apply.html"
TARGET="_top"
><CODE
CLASS="function"
>APPLY</CODE
></A
> (spec not clear)
     </P
></DD
><DT
><A
NAME="iss204"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss204.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:3</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss205"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss205.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:4</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss206"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss206.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:5</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss207"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss207.html"
TARGET="_top"
>JUN90-TRIVIAL-ISSUES:9</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss208"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss208.html"
TARGET="_top"
>KEYWORD-ARGUMENT-NAME-PACKAGE:ANY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss209"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss209.html"
TARGET="_top"
>LAST-N</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss210"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss210.html"
TARGET="_top"
>LCM-NO-ARGUMENTS:1</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss211"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss211.html"
TARGET="_top"
>LEXICAL-CONSTRUCT-GLOBAL-DEFINITION:UNDEFINED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss212"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss212.html"
TARGET="_top"
>LISP-PACKAGE-NAME:COMMON-LISP</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss213"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss213.html"
TARGET="_top"
>LISP-SYMBOL-REDEFINITION-AGAIN:MORE-FIXES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss214"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss214.html"
TARGET="_top"
>LISP-SYMBOL-REDEFINITION:MAR89-X3J13</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss215"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss215.html"
TARGET="_top"
>LOAD-OBJECTS:MAKE-LOAD-FORM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss216"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss216.html"
TARGET="_top"
>LOAD-TIME-EVAL:R**2-NEW-SPECIAL-FORM</A
></DT
><DD
><P
ALIGN="justify"
>obsolete</P
></DD
><DT
><A
NAME="iss217"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss217.html"
TARGET="_top"
>LOAD-TIME-EVAL:R**3-NEW-SPECIAL-FORM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss218"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss218.html"
TARGET="_top"
>LOAD-TRUENAME:NEW-PATHNAME-VARIABLES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss219"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss219.html"
TARGET="_top"
>LOCALLY-TOP-LEVEL:SPECIAL-FORM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss220"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss220.html"
TARGET="_top"
>LOOP-AND-DISCREPANCY:NO-REITERATION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss221"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss221.html"
TARGET="_top"
>LOOP-FOR-AS-ON-TYPO:FIX-TYPO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss222"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss222.html"
TARGET="_top"
>LOOP-INITFORM-ENVIRONMENT:PARTIAL-INTERLEAVING-VAGUE</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss223"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss223.html"
TARGET="_top"
>LOOP-MISCELLANEOUS-REPAIRS:FIX</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss224"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss224.html"
TARGET="_top"
>LOOP-NAMED-BLOCK-NIL:OVERRIDE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss225"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss225.html"
TARGET="_top"
>LOOP-PRESENT-SYMBOLS-TYPO:FLUSH-WRONG-WORDS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss226"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss226.html"
TARGET="_top"
>LOOP-SYNTAX-OVERHAUL:REPAIR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss227"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss227.html"
TARGET="_top"
>MACRO-AS-FUNCTION:DISALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss228"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss228.html"
TARGET="_top"
>MACRO-DECLARATIONS:MAKE-EXPLICIT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss229"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss229.html"
TARGET="_top"
>MACRO-ENVIRONMENT-EXTENT:DYNAMIC</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss230"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss230.html"
TARGET="_top"
>MACRO-FUNCTION-ENVIRONMENT</A
></DT
><DD
><P
ALIGN="justify"
>obsolete</P
></DD
><DT
><A
NAME="iss231"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss231.html"
TARGET="_top"
>MACRO-FUNCTION-ENVIRONMENT:YES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss232"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss232.html"
TARGET="_top"
>MACRO-SUBFORMS-TOP-LEVEL-P:ADD-CONSTRAINTS</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss233"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss233.html"
TARGET="_top"
>MACROEXPAND-HOOK-DEFAULT:EXPLICITLY-VAGUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss234"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss234.html"
TARGET="_top"
>MACROEXPAND-HOOK-INITIAL-VALUE:IMPLEMENTATION-DEPENDENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss235"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss235.html"
TARGET="_top"
>MACROEXPAND-RETURN-VALUE:TRUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss236"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss236.html"
TARGET="_top"
>MAKE-LOAD-FORM-CONFUSION:REWRITE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss237"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss237.html"
TARGET="_top"
>MAKE-LOAD-FORM-SAVING-SLOTS:NO-INITFORMS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss238"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss238.html"
TARGET="_top"
>MAKE-PACKAGE-USE-DEFAULT:IMPLEMENTATION-DEPENDENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss239"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss239.html"
TARGET="_top"
>MAP-INTO:ADD-FUNCTION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss240"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss240.html"
TARGET="_top"
>MAPPING-DESTRUCTIVE-INTERACTION:EXPLICITLY-VAGUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss241"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss241.html"
TARGET="_top"
>METACLASS-OF-SYSTEM-CLASS:UNSPECIFIED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss242"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss242.html"
TARGET="_top"
>METHOD-COMBINATION-ARGUMENTS:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss243"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss243.html"
TARGET="_top"
>METHOD-INITFORM:FORBID-CALL-NEXT-METHOD</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss244"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss244.html"
TARGET="_top"
>MUFFLE-WARNING-CONDITION-ARGUMENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss245"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss245.html"
TARGET="_top"
>MULTIPLE-VALUE-SETQ-ORDER:LIKE-SETF-OF-VALUES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss246"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss246.html"
TARGET="_top"
>MULTIPLE-VALUES-LIMIT-ON-VARIABLES:UNDEFINED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss247"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss247.html"
TARGET="_top"
>NINTERSECTION-DESTRUCTION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss248"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss248.html"
TARGET="_top"
>NINTERSECTION-DESTRUCTION:REVERT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss249"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss249.html"
TARGET="_top"
>NOT-AND-NULL-RETURN-VALUE:X3J13-MAR-93</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss250"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss250.html"
TARGET="_top"
>NTH-VALUE:ADD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss251"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss251.html"
TARGET="_top"
>OPTIMIZE-DEBUG-INFO:NEW-QUALITY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss252"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss252.html"
TARGET="_top"
>PACKAGE-CLUTTER:REDUCE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss253"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss253.html"
TARGET="_top"
>PACKAGE-DELETION:NEW-FUNCTION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss254"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss254.html"
TARGET="_top"
>PACKAGE-FUNCTION-CONSISTENCY:MORE-PERMISSIVE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss255"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss255.html"
TARGET="_top"
>PARSE-ERROR-STREAM:SPLIT-TYPES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss256"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss256.html"
TARGET="_top"
>PATHNAME-COMPONENT-CASE:KEYWORD-ARGUMENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss257"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss257.html"
TARGET="_top"
>PATHNAME-COMPONENT-VALUE:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss258"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss258.html"
TARGET="_top"
>PATHNAME-HOST-PARSING:RECOGNIZE-LOGICAL-HOST-NAMES</A
></DT
><DD
><P
ALIGN="justify"
>yes when <A
HREF="#parsename"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-ANSI*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
    </P
></DD
><DT
><A
NAME="iss259"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss259.html"
TARGET="_top"
>PATHNAME-LOGICAL:ADD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss260"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss260.html"
TARGET="_top"
>PATHNAME-PRINT-READ:SHARPSIGN-P</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss261"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss261.html"
TARGET="_top"
>PATHNAME-STREAM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss262"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss262.html"
TARGET="_top"
>PATHNAME-STREAM:FILES-OR-SYNONYM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss263"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss263.html"
TARGET="_top"
>PATHNAME-SUBDIRECTORY-LIST:NEW-REPRESENTATION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss264"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss264.html"
TARGET="_top"
>PATHNAME-SYMBOL</A
></DT
><DD
><P
ALIGN="justify"
>yes when <A
HREF="#parsename"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-ANSI*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
 </P
></DD
><DT
><A
NAME="iss265"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss265.html"
TARGET="_top"
>PATHNAME-SYNTAX-ERROR-TIME:EXPLICITLY-VAGUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss266"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss266.html"
TARGET="_top"
>PATHNAME-UNSPECIFIC-COMPONENT:NEW-TOKEN</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss267"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss267.html"
TARGET="_top"
>PATHNAME-WILD:NEW-FUNCTIONS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss268"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss268.html"
TARGET="_top"
>PEEK-CHAR-READ-CHAR-ECHO:FIRST-READ-CHAR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss269"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss269.html"
TARGET="_top"
>PLIST-DUPLICATES:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss270"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss270.html"
TARGET="_top"
>PRETTY-PRINT-INTERFACE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss271"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss271.html"
TARGET="_top"
>PRINC-READABLY:X3J13-DEC-91</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss272"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss272.html"
TARGET="_top"
>PRINT-CASE-BEHAVIOR:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss273"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss273.html"
TARGET="_top"
>PRINT-CASE-PRINT-ESCAPE-INTERACTION:VERTICAL-BAR-RULE-NO-UPCASE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss274"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss274.html"
TARGET="_top"
>PRINT-CIRCLE-SHARED:RESPECT-PRINT-CIRCLE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss275"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss275.html"
TARGET="_top"
>PRINT-CIRCLE-STRUCTURE:USER-FUNCTIONS-WORK</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss276"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss276.html"
TARGET="_top"
>PRINT-READABLY-BEHAVIOR:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss277"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss277.html"
TARGET="_top"
>PRINTER-WHITESPACE:JUST-ONE-SPACE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss278"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss278.html"
TARGET="_top"
>PROCLAIM-ETC-IN-COMPILE-FILE:NEW-MACRO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss279"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss279.html"
TARGET="_top"
>PUSH-EVALUATION-ORDER:FIRST-ITEM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss280"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss280.html"
TARGET="_top"
>PUSH-EVALUATION-ORDER:ITEM-FIRST</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss281"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss281.html"
TARGET="_top"
>PUSHNEW-STORE-REQUIRED:UNSPECIFIED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss282"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss282.html"
TARGET="_top"
>QUOTE-SEMANTICS:NO-COPYING</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss283"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss283.html"
TARGET="_top"
>RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER</A
></DT
><DD
><P
ALIGN="justify"
>yes, when <A
HREF="#count-ansi"
><VAR
CLASS="varname"
>CUSTOM:*SEQUENCE-COUNT-ANSI*</VAR
></A
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>;
     otherwise negative <CODE
CLASS="constant"
>:COUNT</CODE
> values are not allowed.
     </P
></DD
><DT
><A
NAME="iss284"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss284.html"
TARGET="_top"
>RANGE-OF-START-AND-END-PARAMETERS:INTEGER-AND-INTEGER-NIL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss285"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss285.html"
TARGET="_top"
>READ-AND-WRITE-BYTES:NEW-FUNCTIONS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss286"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss286.html"
TARGET="_top"
>READ-CASE-SENSITIVITY:READTABLE-KEYWORDS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss287"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss287.html"
TARGET="_top"
>READ-MODIFY-WRITE-EVALUATION-ORDER:DELAYED-ACCESS-STORES</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss288"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss288.html"
TARGET="_top"
>READ-SUPPRESS-CONFUSING:GENERALIZE</A
></DT
><DD
><P
ALIGN="justify"
>yes, except that <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-delimited-list.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-DELIMITED-LIST</CODE
></A
> still
     constructs a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
></P
></DD
><DT
><A
NAME="iss289"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss289.html"
TARGET="_top"
>READER-ERROR:NEW-TYPE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss290"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss290.html"
TARGET="_top"
>REAL-NUMBER-TYPE:X3J13-MAR-89</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss291"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss291.html"
TARGET="_top"
>RECURSIVE-DEFTYPE:EXPLICITLY-VAGUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss292"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss292.html"
TARGET="_top"
>REDUCE-ARGUMENT-EXTRACTION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss293"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss293.html"
TARGET="_top"
>REMF-DESTRUCTION-UNSPECIFIED:X3J13-MAR-89</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss294"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss294.html"
TARGET="_top"
>REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss295"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss295.html"
TARGET="_top"
>REQUIRE-PATHNAME-DEFAULTS-YET-AGAIN:RESTORE-ARGUMENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss296"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss296.html"
TARGET="_top"
>REQUIRE-PATHNAME-DEFAULTS:ELIMINATE</A
></DT
><DD
><P
ALIGN="justify"
>superseded by <A
HREF="http://www.lisp.org/HyperSpec/Issues/iss294.html"
TARGET="_top"
>REQUIRE-PATHNAME-DEFAULTS-AGAIN:X3J13-DEC-91</A
></P
></DD
><DT
><A
NAME="iss297"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss297.html"
TARGET="_top"
>REST-LIST-ALLOCATION:MAY-SHARE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss298"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss298.html"
TARGET="_top"
>RESULT-LISTS-SHARED:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss299"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss299.html"
TARGET="_top"
>RETURN-VALUES-UNSPECIFIED:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss300"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss300.html"
TARGET="_top"
>ROOM-DEFAULT-ARGUMENT:NEW-VALUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss301"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss301.html"
TARGET="_top"
>SELF-MODIFYING-CODE:FORBID</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss302"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss302.html"
TARGET="_top"
>SEQUENCE-TYPE-LENGTH:MUST-MATCH</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss303"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss303.html"
TARGET="_top"
>SETF-APPLY-EXPANSION:IGNORE-EXPANDER</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss304"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss304.html"
TARGET="_top"
>SETF-FIND-CLASS:ALLOW-NIL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss305"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss305.html"
TARGET="_top"
>SETF-FUNCTIONS-AGAIN:MINIMAL-CHANGES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss306"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss306.html"
TARGET="_top"
>SETF-GET-DEFAULT:EVALUATED-BUT-IGNORED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss307"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss307.html"
TARGET="_top"
>SETF-MACRO-EXPANSION:LAST</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss308"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss308.html"
TARGET="_top"
>SETF-METHOD-VS-SETF-METHOD:RENAME-OLD-TERMS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss309"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss309.html"
TARGET="_top"
>SETF-MULTIPLE-STORE-VARIABLES:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss310"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss310.html"
TARGET="_top"
>SETF-OF-APPLY:ONLY-AREF-AND-FRIENDS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss311"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss311.html"
TARGET="_top"
>SETF-OF-VALUES:ADD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss312"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss312.html"
TARGET="_top"
>SETF-SUB-METHODS:DELAYED-ACCESS-STORES</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss313"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss313.html"
TARGET="_top"
>SHADOW-ALREADY-PRESENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss314"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss314.html"
TARGET="_top"
>SHADOW-ALREADY-PRESENT:WORKS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss315"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss315.html"
TARGET="_top"
>SHARP-COMMA-CONFUSION:REMOVE</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss316"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss316.html"
TARGET="_top"
>SHARP-O-FOOBAR:CONSEQUENCES-UNDEFINED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss317"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss317.html"
TARGET="_top"
>SHARP-STAR-DELIMITER:NORMAL-DELIMITER</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss318"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss318.html"
TARGET="_top"
>SHARPSIGN-PLUS-MINUS-PACKAGE:KEYWORD</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss319"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss319.html"
TARGET="_top"
>SLOT-MISSING-VALUES:SPECIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss320"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss320.html"
TARGET="_top"
>SLOT-VALUE-METACLASSES:LESS-MINIMAL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss321"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss321.html"
TARGET="_top"
>SPECIAL-FORM-P-MISNOMER:RENAME</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss322"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss322.html"
TARGET="_top"
>SPECIAL-TYPE-SHADOWING:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss323"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss323.html"
TARGET="_top"
>STANDARD-INPUT-INITIAL-BINDING:DEFINED-CONTRACTS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss324"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss324.html"
TARGET="_top"
>STANDARD-REPERTOIRE-GRATUITOUS:RENAME</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss325"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss325.html"
TARGET="_top"
>STEP-ENVIRONMENT:CURRENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss326"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss326.html"
TARGET="_top"
>STEP-MINIMAL:PERMIT-PROGN</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss327"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss327.html"
TARGET="_top"
>STREAM-ACCESS:ADD-TYPES-ACCESSORS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss328"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss328.html"
TARGET="_top"
>STREAM-CAPABILITIES:INTERACTIVE-STREAM-P</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss329"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss329.html"
TARGET="_top"
>STRING-COERCION:MAKE-CONSISTENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss330"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss330.html"
TARGET="_top"
>STRING-OUTPUT-STREAM-BASHING:UNDEFINED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss331"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss331.html"
TARGET="_top"
>STRUCTURE-READ-PRINT-SYNTAX:KEYWORDS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss332"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss332.html"
TARGET="_top"
>SUBSEQ-OUT-OF-BOUNDS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss333"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss333.html"
TARGET="_top"
>SUBSEQ-OUT-OF-BOUNDS:IS-AN-ERROR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss334"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss334.html"
TARGET="_top"
>SUBSETTING-POSITION:NONE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss335"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss335.html"
TARGET="_top"
>SUBTYPEP-ENVIRONMENT:ADD-ARG</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss336"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss336.html"
TARGET="_top"
>SUBTYPEP-TOO-VAGUE:CLARIFY-MORE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss337"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss337.html"
TARGET="_top"
>SXHASH-DEFINITION:SIMILAR-FOR-SXHASH</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss338"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss338.html"
TARGET="_top"
>SYMBOL-MACROLET-DECLARE:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss339"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss339.html"
TARGET="_top"
>SYMBOL-MACROLET-SEMANTICS:SPECIAL-FORM</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss340"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss340.html"
TARGET="_top"
>SYMBOL-MACROLET-TYPE-DECLARATION:NO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss341"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss341.html"
TARGET="_top"
>SYMBOL-MACROS-AND-PROCLAIMED-SPECIALS:SIGNALS-AN-ERROR</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss342"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss342.html"
TARGET="_top"
>SYMBOL-PRINT-ESCAPE-BEHAVIOR:CLARIFY</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss343"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss343.html"
TARGET="_top"
>SYNTACTIC-ENVIRONMENT-ACCESS:RETRACTED-MAR91</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss344"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss344.html"
TARGET="_top"
>TAGBODY-TAG-EXPANSION:NO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss345"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss345.html"
TARGET="_top"
>TAILP-NIL:T</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss346"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss346.html"
TARGET="_top"
>TEST-NOT-IF-NOT:FLUSH-ALL</A
></DT
><DD
><P
ALIGN="justify"
>yes, but no warning</P
></DD
><DT
><A
NAME="iss347"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss347.html"
TARGET="_top"
>THE-AMBIGUITY:FOR-DECLARATION</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss348"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss348.html"
TARGET="_top"
>THE-VALUES:RETURN-NUMBER-RECEIVED</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss349"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss349.html"
TARGET="_top"
>TIME-ZONE-NON-INTEGER:ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss350"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss350.html"
TARGET="_top"
>TYPE-DECLARATION-ABBREVIATION:ALLOW-ALL</A
></DT
><DD
><P
ALIGN="justify"
>no</P
></DD
><DT
><A
NAME="iss351"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss351.html"
TARGET="_top"
>TYPE-OF-AND-PREDEFINED-CLASSES:TYPE-OF-HANDLES-FLOATS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss352"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss352.html"
TARGET="_top"
>TYPE-OF-AND-PREDEFINED-CLASSES:UNIFY-AND-EXTEND</A
></DT
><DD
><P
ALIGN="justify"
>yes, except for class <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_method-combination.html"
TARGET="_top"
><CODE
CLASS="classname"
>METHOD-COMBINATION</CODE
></A
>
     </P
></DD
><DT
><A
NAME="iss353"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss353.html"
TARGET="_top"
>TYPE-OF-UNDERCONSTRAINED:ADD-CONSTRAINTS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss354"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss354.html"
TARGET="_top"
>TYPE-SPECIFIER-ABBREVIATION:X3J13-JUN90-GUESS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss355"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss355.html"
TARGET="_top"
>UNDEFINED-VARIABLES-AND-FUNCTIONS:COMPROMISE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss356"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss356.html"
TARGET="_top"
>UNINITIALIZED-ELEMENTS:CONSEQUENCES-UNDEFINED</A
></DT
><DD
><P
ALIGN="justify"
>yes, could add error checking
     </P
></DD
><DT
><A
NAME="iss357"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss357.html"
TARGET="_top"
>UNREAD-CHAR-AFTER-PEEK-CHAR:DONT-ALLOW</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss358"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss358.html"
TARGET="_top"
>UNSOLICITED-MESSAGES:NOT-TO-SYSTEM-USER-STREAMS</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss359"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss359.html"
TARGET="_top"
>VARIABLE-LIST-ASYMMETRY:SYMMETRIZE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss360"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss360.html"
TARGET="_top"
>WITH-ADDED-METHODS:DELETE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss361"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss361.html"
TARGET="_top"
>WITH-COMPILATION-UNIT:NEW-MACRO</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss362"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss362.html"
TARGET="_top"
>WITH-OPEN-FILE-DOES-NOT-EXIST:STREAM-IS-NIL</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss363"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss363.html"
TARGET="_top"
>WITH-OPEN-FILE-SETQ:EXPLICITLY-VAGUE</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss364"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss364.html"
TARGET="_top"
>WITH-OPEN-FILE-STREAM-EXTENT:DYNAMIC-EXTENT</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss365"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss365.html"
TARGET="_top"
>WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
><DT
><A
NAME="iss366"
></A
><A
HREF="http://www.lisp.org/HyperSpec/Issues/iss366.html"
TARGET="_top"
>WITH-STANDARD-IO-SYNTAX-READTABLE:X3J13-MAR-91</A
></DT
><DD
><P
ALIGN="justify"
>yes</P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="PART"
><A
NAME="extensions"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
>II. Extensions</H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>29. <A
HREF="#p-indep"
>Extensions-1: Platform independent Extensions</A
></DT
><DT
>30. <A
HREF="#platform"
>Extensions-2: Platform specific Extensions</A
></DT
></DL
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="p-indep"
></A
>Chapter 29. Extensions-1: Platform independent Extensions</H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="image"
>29.1. Extensions-1.1. Saving an Image</A
></H2
><P
ALIGN="justify"
>The function
  <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:SAVEINITMEM</CODE
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> (<VAR
CLASS="replaceable"
>filename</VAR
> "lispinit.mem")
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :QUIET :INIT-FUNCTION :LOCKED-PACKAGES :START-PACKAGE)</TT
>
saves the running <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>'s memory to the file <VAR
CLASS="replaceable"
>filename</VAR
>;
extension <TT
CLASS="filename"
>#P".mem"</TT
> is recommended (when <VAR
CLASS="replaceable"
>filename</VAR
> does not have an
extension, <TT
CLASS="filename"
>#P".mem"</TT
> extension is automatically added).
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:QUIET</CODE
></DT
><DD
><P
ALIGN="justify"
>If this argument is not <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the startup
   banner and the good-bye message will be suppressed.
   </P
></DD
><DT
><CODE
CLASS="constant"
>:INIT-FUNCTION</CODE
></DT
><DD
><P
ALIGN="justify"
>This argument specifies a function that will be
   executed at startup of the saved image, before entering the standard
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
TARGET="_top"
>read-eval-print loop</A
>; thus, if you want to avoid the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_25-1-1.html"
TARGET="_top"
>read-eval-print loop</A
>, you have to call
   <A
HREF="#quit"
><CODE
CLASS="function"
>EXT:EXIT</CODE
></A
> at the end
   of the init function yourself.</P
><P
ALIGN="justify"
>See <A
HREF="clisp.html#opt-exec-file"
TARGET="_top"
>the
   manual</A
> for passing command line arguments to this function.
 </P
></DD
><DT
><CODE
CLASS="constant"
>:LOCKED-PACKAGES</CODE
></DT
><DD
><P
ALIGN="justify"
>This argument specifies the packages to lock before
   saving the image; this is convenient for application delivery, when
   you do not want your users to mess up your product.
   This argument defaults to <A
HREF="#pack-lock"
><VAR
CLASS="varname"
>CUSTOM:*SYSTEM-PACKAGE-LIST*</VAR
></A
>.
   </P
></DD
><DT
><CODE
CLASS="constant"
>:START-PACKAGE</CODE
></DT
><DD
><P
ALIGN="justify"
>This argument specifies the starting value of
   <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PACKAGE*</VAR
></A
> in the image being saved, and defaults to the current
   value of <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PACKAGE*</VAR
></A
>.</P
></DD
></DL
></DIV
>
You can use this memory image with the
<A
HREF="clisp.html#opt-memfile"
TARGET="_top"
><VAR
CLASS="option"
>-M</VAR
></A
>
option.  On <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems, you may compress it with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
>
<A
HREF="http://www.gzip.org/"
TARGET="_top"
><B
CLASS="command"
>gzip</B
></A
>
to save disk space.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="quit"
>29.2. Extensions-1.2. Quitting <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></H2
><P
ALIGN="justify"
>The functions <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:EXIT</CODE
>
 [<VAR
CLASS="replaceable"
>errorp</VAR
>])</TT
>, <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:QUIT</CODE
>
 [<VAR
CLASS="replaceable"
>errorp</VAR
>])</TT
> and <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:BYE</CODE
>
 [<VAR
CLASS="replaceable"
>errorp</VAR
>])</TT
> - all synonymous -
 terminate <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.  If <VAR
CLASS="replaceable"
>errorp</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> aborts with the supplied numeric error status, i.e.,
 the OS environment is informed that the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> session did not
 succeed.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="i18n"
>29.3. Extensions-1.3. Internationalization</A
></H2
><P
ALIGN="justify"
>"Internationalization" means to prepare a program so that it can
use multiple national languages and national cultural conventions
without requiring further source code changes.  Localization means
providing the data - mostly textual translations - necessary for an
internationalized program to work in a particular language and with
particular cultural conventions.</P
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is internationalized, and is localized for the languages
English, German, French, Spanish, Dutch and Russian.
<A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> also supports internationalized Lisp programs, through
<A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/gettext/gettext.html"
TARGET="_top"
>gettext</A
>.</P
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="ggettext"
>29.3.1. The <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/gettext/gettext.html"
TARGET="_top"
>gettext</A
></A
></H3
><P
ALIGN="justify"
><A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/gettext/gettext.html"
TARGET="_top"
>gettext</A
> is a set of functions, included in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> or the
<A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> library, which permit looking up translations of strings
through message catalogs. It is also a set of tools which makes the
translation maintenance easy for the translator and the program
maintainer.</P
><P
ALIGN="justify"
>The <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/gettext/gettext.html"
TARGET="_top"
>gettext</A
> functions are available in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> in the
<A
HREF="#i18n"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"I18N"</SPAN
></STRONG
></A
> package, which is <A
HREF="#re-export"
><CODE
CLASS="function"
>EXT:RE-EXPORT</CODE
></A
>ed from the <A
HREF="#ext-pac"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"EXT"</SPAN
></STRONG
></A
>
package.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="gettext"
></A
><TT
CLASS="sexp"
>(<A
HREF="#gettext"
><CODE
CLASS="function"
>I18N:GETTEXT</CODE
></A
>
  <VAR
CLASS="replaceable"
>MSGID</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
> <A
HREF="#category"
><VAR
CLASS="replaceable"
>CATEGORY</VAR
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns the translation of the message <VAR
CLASS="replaceable"
>MSGID</VAR
>,
  in the given <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
>, depending on the given <A
HREF="#category"
><VAR
CLASS="replaceable"
>CATEGORY</VAR
></A
>.
  <VAR
CLASS="replaceable"
>MSGID</VAR
> should be an <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> string, and is normally the English message.
  </P
></DD
><DT
><A
NAME="ngettext"
></A
><TT
CLASS="sexp"
>(<A
HREF="#ngettext"
><CODE
CLASS="function"
>I18N:NGETTEXT</CODE
></A
>
  <VAR
CLASS="replaceable"
>MSGID</VAR
> <VAR
CLASS="replaceable"
>msgid_plural</VAR
>
  <VAR
CLASS="replaceable"
>n</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
> <A
HREF="#category"
><VAR
CLASS="replaceable"
>CATEGORY</VAR
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns the plural form of the translation for of
   <VAR
CLASS="replaceable"
>MSGID</VAR
> and <VAR
CLASS="replaceable"
>n</VAR
> in the given <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
>, depending on the given
   <A
HREF="#category"
><VAR
CLASS="replaceable"
>CATEGORY</VAR
></A
>.  <VAR
CLASS="replaceable"
>MSGID</VAR
> and <VAR
CLASS="replaceable"
>msgid_plural</VAR
>
   should be <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> strings, and are normally the English singular and
   English plural variant of the message, respectively.
   </P
></DD
></DL
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="domain"
>29.3.1.1. Domain</A
></H4
><P
ALIGN="justify"
>The <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
> is a string identifier denoting the program that
is requesting the translation.  The pathname of the message catalog
depends on the <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
>: usually it is located at
<TT
CLASS="filename"
>TEXTDOMAINDIR/l/LC_MESSAGES/domain.mo</TT
>, where
<VAR
CLASS="replaceable"
>l</VAR
> is the ISO 639 code of the language.
The notion of <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
> allows several Lisp programs running in the same
image to request translations independently of each other.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="textdomain"
></A
><B
>Function <A
HREF="#textdomain"
><CODE
CLASS="function"
>I18N:TEXTDOMAIN</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="#textdomain"
><CODE
CLASS="function"
>I18N:TEXTDOMAIN</CODE
></A
>)</TT
> is a
<A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> that returns the default <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
>, used when no <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
>
argument is passed to the <A
HREF="#gettext"
><CODE
CLASS="function"
>I18N:GETTEXT</CODE
></A
> and <A
HREF="#ngettext"
><CODE
CLASS="function"
>I18N:NGETTEXT</CODE
></A
> functions.
It is <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>able.
<TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="#textdomain"
><CODE
CLASS="function"
>I18N:TEXTDOMAIN</CODE
></A
>)</TT
> is usually used
during the startup phase of a program.
Note that the default <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
> is not saved in a <A
HREF="#image"
>memory image</A
>.
The use of <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="#textdomain"
><CODE
CLASS="function"
>I18N:TEXTDOMAIN</CODE
></A
>)</TT
> is
recommended only for programs that are so simple that they will never
need more than one <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
>.</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="textdomaindir"
></A
><B
>Function <A
HREF="#textdomaindir"
><CODE
CLASS="function"
>I18N:TEXTDOMAINDIR</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="#textdomaindir"
><CODE
CLASS="function"
>I18N:TEXTDOMAINDIR</CODE
></A
> <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
>)</TT
>
is a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> that returns the base directory, called
<TT
CLASS="filename"
>TEXTDOMAINDIR</TT
> above, where the message
catalogs for the given <A
HREF="#domain"
><VAR
CLASS="replaceable"
>DOMAIN</VAR
></A
> are assumed to be installed.
It is <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>able.
<TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="#textdomaindir"
><CODE
CLASS="function"
>I18N:TEXTDOMAINDIR</CODE
></A
>)</TT
> is usually used
during the startup phase of a program, and should be used because only
the program knows where its message catalogs are installed.
Note that the <TT
CLASS="filename"
>TEXTDOMAINDIR</TT
>s
are not saved in a <A
HREF="#image"
>memory image</A
>.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="category"
>29.3.1.2. Category</A
></H4
><P
ALIGN="justify"
>The <A
HREF="#category"
><VAR
CLASS="replaceable"
>CATEGORY</VAR
></A
> argument of the <A
HREF="#gettext"
><CODE
CLASS="function"
>I18N:GETTEXT</CODE
></A
> and <A
HREF="#ngettext"
><CODE
CLASS="function"
>I18N:NGETTEXT</CODE
></A
>
functions denotes which locale facet the result should depend on.
The default value is <CODE
CLASS="constant"
>:LC_MESSAGES</CODE
>.
Other possible values are <CODE
CLASS="constant"
>:LC_CTYPE</CODE
>,
<CODE
CLASS="constant"
>:LC_TIME</CODE
>, <CODE
CLASS="constant"
>:LC_COLLATE</CODE
>,
<CODE
CLASS="constant"
>:LC_MONETARY</CODE
>.
The use of these values is useful for users who have a
character/time/collation/money handling set differently from the usual
message handling.
Note that when a <A
HREF="#category"
><VAR
CLASS="replaceable"
>CATEGORY</VAR
></A
> argument is used, the message catalog
location depends on the <A
HREF="#category"
><VAR
CLASS="replaceable"
>CATEGORY</VAR
></A
>: it will be expected at
<TT
CLASS="filename"
>TEXTDOMAINDIR/ll/category/domain.mo</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="i18n-example"
>29.3.1.3. Example</A
></H4
><P
ALIGN="justify"
>A non-internationalized program simulating a restaurant dialogue
might look as follows.</P
><DIV
CLASS="example"
><A
NAME="i18n-non-i"
></A
><P
><B
>Example 29-1. prog.lisp</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(setq n (parse-integer (first <A
HREF="#script-exec"
><VAR
CLASS="varname"
>EXT:*ARGS*</VAR
></A
>)))

(format t "~A~%" "'Your command, please?', asked the waiter.")

(format t "~@?~%"
          (if (= n 1) "a piece of cake" "~D pieces of cake")
          n)
</PRE
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>After being internationalized, all strings are wrapped in
<A
HREF="#gettext"
><CODE
CLASS="function"
>I18N:GETTEXT</CODE
></A
> calls, and <A
HREF="#ngettext"
><CODE
CLASS="function"
>I18N:NGETTEXT</CODE
></A
> is used for plurals.
Also, <A
HREF="#textdomaindir"
><CODE
CLASS="function"
>I18N:TEXTDOMAINDIR</CODE
></A
> is assigned a value; in our case, for simplicity,
the current directory.</P
><DIV
CLASS="example"
><A
NAME="i18n-i"
></A
><P
><B
>Example 29-2. prog.lisp</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(setf (textdomain) "prog")
(setf (textdomaindir "prog") "./")

(setq n (parse-integer (first <A
HREF="#script-exec"
><VAR
CLASS="varname"
>EXT:*ARGS*</VAR
></A
>)))

(format t "~A~%"
          (gettext "'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n)
          n)
</PRE
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>For ease of reading, it is customary to define an abbreviation
for the <A
HREF="#gettext"
><CODE
CLASS="function"
>I18N:GETTEXT</CODE
></A
> function.  An underscore is customary.</P
><DIV
CLASS="example"
><A
NAME="i18n-i-abbrev"
></A
><P
><B
>Example 29-3. prog.lisp</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(setf (textdomaindir "prog") "./")
(defun _ (msgid) (gettext msgid "prog"))

(setq n (parse-integer (first <A
HREF="#script-exec"
><VAR
CLASS="varname"
>EXT:*ARGS*</VAR
></A
>)))

(format t "~A~%"
          (_"'Your command, please?', asked the waiter."))

(format t "~@?~%"
          (ngettext "a piece of cake" "~D pieces of cake" n "prog")
          n)
</PRE
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>Now the program's maintainer creates a message catalog template
through the command

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;bash$ xgettext -o prog.pot prog.lisp
</PRE
></TD
></TR
></TABLE
>

Note: xgettext version 0.11 or higher is required here.</P
><P
ALIGN="justify"
>The message catalog template looks roughly like this.</P
><DIV
CLASS="example"
><A
NAME="i18n-pot"
></A
><P
><B
>Example 29-4. prog.pot</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;msgid "'Your command, please?', asked the waiter."
msgstr ""

msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] ""
msgstr[1] ""
</PRE
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>Then a French translator creates a French message catalog</P
><DIV
CLASS="example"
><A
NAME="i18n-fr-po"
></A
><P
><B
>Example 29-5. prog.fr.po</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;msgid ""
msgstr ""
"Content-Type: text/plain; charset=ISO-8859-1\n"
"Plural-Forms: nplurals=2; plural=(n &#62; 1);\n"

msgid "'Your command, please?', asked the waiter."
msgstr "´Votre commande, s'il vous plaitª, dit le garÁon."

# Les gateaux allemands sont les meilleurs du monde.
msgid "a piece of cake"
msgid_plural "%d pieces of cake"
msgstr[0] "un morceau de gateau"
msgstr[1] "%d morceaux de gateau"
</PRE
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>and sends it to the program's maintainer.</P
><P
ALIGN="justify"
>The program's maintainer compiles the catalog as follows:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;bash$ mkdir -p ./fr/LC_MESSAGES
bash$ msgfmt -o ./fr/LC_MESSAGES/prog.mo prog.fr.po
</PRE
></TD
></TR
></TABLE
></P
><P
ALIGN="justify"
>When a user in a french locale then runs the program

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;bash$ clisp prog.lisp 2
</PRE
></TD
></TR
></TABLE
>

she will get the output

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;    ´Votre commande, s'il vous plaitª, dit le garÁon.
    2 morceaux de gateau
</PRE
></TD
></TR
></TABLE
>
</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="language"
>29.3.2. The Language</A
></H3
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>Note that the facilities described in this section will
  work only for the languages for which <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> itself is already
  localized.</P
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>The language <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> uses to communicate with the user can be one of
<P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><CODE
CLASS="constant"
>ENGLISH</CODE
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>DEUTSCH</CODE
> (i.e., German)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>FRAN«AIS</CODE
> (i.e., French)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>ESPA—OL</CODE
> (i.e., Spanish)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>NEDERLANDS</CODE
> (i.e., Dutch)</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>&#1056;&#1059;&#1057;&#1057;&#1050;&#1048;&#1049;</CODE
>
  (i.e. Russian)</TD
></TR
></TBODY
></TABLE
><P
></P
></P
><P
ALIGN="justify"
>This is controlled by the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#language"
><VAR
CLASS="varname"
>CUSTOM:*CURRENT-LANGUAGE*</VAR
></A
></I
></STRONG
>,
 which can be set at run time as well as using <A
HREF="clisp.html#opt-lang"
TARGET="_top"
><VAR
CLASS="option"
>-L</VAR
></A
> start-up option.
 If you wish to change the <A
HREF="clisp.html#opt-locale"
TARGET="_top"
>locale
 directory</A
> at run time too, you can do that by
 setting <A
HREF="#language"
><VAR
CLASS="varname"
>CUSTOM:*CURRENT-LANGUAGE*</VAR
></A
> to a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
> cell, whose <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
> is the language
 (a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>, one of the above), and whose
 <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
> is the new locale directory.</P
><P
ALIGN="justify"
>More languages can be defined through the macro
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#deflang"
><CODE
CLASS="function"
>I18N:DEFLANGUAGE</CODE
></A
></I
></STRONG
>:
 <TT
CLASS="sexp"
>(<A
HREF="#deflang"
><CODE
CLASS="function"
>I18N:DEFLANGUAGE</CODE
></A
> <VAR
CLASS="replaceable"
>language</VAR
>)</TT
>.
 For such an additional language to take effect, you must install the
 corresponding message catalog, or translate the messages yourself,
 using <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/gettext/gettext.html"
TARGET="_top"
>gettext</A
> and <A
HREF="http://www.gnu.org/software/emacs/"
TARGET="_top"
>Emacs</A
> (or <A
HREF="http://www.xemacs.org"
TARGET="_top"
>XEmacs</A
>) po-mode.</P
><P
ALIGN="justify"
>This works only for strings.  For arbitrary language-dependent
 Lisp objects, you define one through the macro
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#def-i-l"
><CODE
CLASS="function"
>I18N:DEFINTERNATIONAL</CODE
></A
></I
></STRONG
>:
 <TT
CLASS="sexp"
>(<A
HREF="#def-i-l"
><CODE
CLASS="function"
>I18N:DEFINTERNATIONAL</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
 (<VAR
CLASS="replaceable"
>default-language</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>))</TT
> and add
 language-dependent values through the macro
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#defloc"
><CODE
CLASS="function"
>I18N:DEFLOCALIZED</CODE
></A
></I
></STRONG
>:
 <TT
CLASS="sexp"
>(<A
HREF="#defloc"
><CODE
CLASS="function"
>I18N:DEFLOCALIZED</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
> <VAR
CLASS="replaceable"
>language</VAR
>
  <VAR
CLASS="replaceable"
>value-form</VAR
>)</TT
>
 (One such form for each language.  Languages without an assigned
 value will be treated like the default-language.)
 You can then access the localized value by calling
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#localized"
><CODE
CLASS="function"
>I18N:LOCALIZED</CODE
></A
></I
></STRONG
>:
 <TT
CLASS="sexp"
>(<A
HREF="#localized"
><CODE
CLASS="function"
>I18N:LOCALIZED</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
  <VAR
CLASS="replaceable"
>language</VAR
>)</TT
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="encoding"
>29.4. Extensions-1.4. Encodings</A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="encodings-intro"
>29.4.1. Introduction</A
></H3
><P
ALIGN="justify"
>An <I
CLASS="emphasis"
>encoding</I
> describes the correspondence
 between <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s and raw bytes during input/output via
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.</P
><P
ALIGN="justify"
>An <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
> is an object composed of the following facets:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="#charset"
>character set</A
></DT
><DD
><P
ALIGN="justify"
>This denotes both the set of characters that
   can be represented and passed through the I/O channel, and the way
   these characters translate into raw bytes.  In this context, for
   example, "UTF-8" and "UCS-4" are considered different, although they
   can represent the same set of characters.
  </P
></DD
><DT
><A
HREF="#newline"
>line terminator</A
> mode</DT
><DD
><P
ALIGN="justify"
>This denotes the way newline characters are
   represented.</P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
>Encodings are also types.  As such, they represent the set of
 characters encodable in the character set.  In this context, the way
 characters are translated into raw bytes is ignored, and the line
 terminator mode is ignored as well.  <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_typep.html"
TARGET="_top"
><CODE
CLASS="function"
>TYPEP</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_subtypep.html"
TARGET="_top"
><CODE
CLASS="function"
>SUBTYPEP</CODE
></A
> can be used
 on encodings.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="charset"
>29.4.2. Character Sets</A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: Only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built
  <B
CLASS="emphasis"
>without</B
> compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</DT
><DD
><P
ALIGN="justify"
>Only one character set is understood: the platform's
 native (8-bit) character set.  See <A
HREF="#characters"
>Chapter
 13</A
>.</P
></DD
><DT
><A
NAME="charset-symbols"
></A
>Platform dependent:
  Only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built <B
CLASS="emphasis"
>with</B
> compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</DT
><DD
><P
ALIGN="justify"
>The following character sets are supported, as values
 of the corresponding (constant) symbol in the <A
HREF="#encoding"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CHARSET"</SPAN
></STRONG
></A
> package:
<P
></P
><UL
><LI
><A
NAME="charset-UCS-2"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>UCS-2</TT
>
   = <TT
CLASS="literal"
>UNICODE-16</TT
> = <TT
CLASS="literal"
>UNICODE-16-BIG-ENDIAN</TT
>,
   the 16-bit basic multilingual plane of the <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> character set.
   Every character is represented as two bytes.</P
></LI
><LI
><A
NAME="charset-UNICODE-16-LITTLE-ENDIAN"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>UNICODE-16-LITTLE-ENDIAN</TT
>
    </P
></LI
><LI
><A
NAME="charset-UCS-4"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>UCS-4</TT
>
   = <TT
CLASS="literal"
>UNICODE-32</TT
> = <TT
CLASS="literal"
>UNICODE-32-BIG-ENDIAN</TT
>,
   the 21-bit <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> character set. Every character is represented as
   four bytes.</P
></LI
><LI
><A
NAME="charset-UNICODE-32-LITTLE-ENDIAN"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>UNICODE-32-LITTLE-ENDIAN</TT
>
    </P
></LI
><LI
><A
NAME="charset-UTF-8"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>UTF-8</TT
>,
      the 21-bit <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> character set.
      Every character is represented as one to four bytes.
      <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> characters represent themselves and need one byte per character.
      Most Latin/Greek/Cyrillic/Hebrew characters need two bytes per
      character. Most other characters need three bytes per character,
      and the rarely used remaining characters need four bytes per
      character. This is therefore, in general, the most space-efficient
      encoding of all of Unicode.</P
></LI
><LI
><A
NAME="charset-UTF-16"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>UTF-16</TT
>,
      the 21-bit <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> character set. Every character in the 16-bit
      basic multilingual plane is represented as two bytes, and the
      rarely used remaining characters need four bytes per character.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-UTF-7"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>UTF-7</TT
>,
      the 21-bit <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> character set. This is a stateful 7-bit encoding.
      Not all <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> characters represent themselves.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-JAVA"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>JAVA</TT
>,
      the 21-bit <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> character set.
      <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> characters represent themselves and need one byte per character.
      All other characters of the basic multilingual plane are represented
      by <TT
CLASS="literal"
>\u<VAR
CLASS="replaceable"
>nnnn</VAR
></TT
> sequences
      (<VAR
CLASS="replaceable"
>nnnn</VAR
> a hexadecimal number)
      and need 6 bytes per character. The remaining characters are represented
      by <TT
CLASS="literal"
>\u<VAR
CLASS="replaceable"
>xxxx</VAR
>\u<VAR
CLASS="replaceable"
>yyyy</VAR
></TT
>
      and need 12 bytes per character. While this encoding is very comfortable
      for editing Unicode files using only <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
>-aware tools and editors, it
      cannot faithfully represent all <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> text. Only text which
      does not contain <TT
CLASS="literal"
>\u</TT
> (backslash followed by
      lowercase Latin u) can be faithfully represented by this encoding.
    </P
></LI
><LI
><A
NAME="charset-ASCII"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ASCII</TT
>,
      the well-known US-centric 7-bit character set (American Standard
      Code for Information Interchange - <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
>).</P
></LI
><LI
><A
NAME="charset-ISO-8859-1"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-1</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Afrikaans, Albanian, Basque, Breton, Catalan,
      Cornish, Danish, Dutch, English, Faeroese, Finnish, French,
      Frisian, Galician, German, Greenlandic, Icelandic, Irish, Italian,
      Latin, Luxemburgish, Norwegian, Portuguese, Raeto-Romanic,
      Scottish, Spanish, and Swedish languages.</P
></LI
><LI
><A
NAME="charset-ISO-8859-2"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-2</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Croatian, Czech, German, Hungarian, Polish,
      Slovak, Slovenian, and Sorbian languages. </P
></LI
><LI
><A
NAME="charset-ISO-8859-3"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-3</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Esperanto and Maltese languages.</P
></LI
><LI
><A
NAME="charset-ISO-8859-4"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-4</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Estonian, Latvian, Lithuanian and Sami (Lappish)
      languages.</P
></LI
><LI
><A
NAME="charset-ISO-8859-5"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-5</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Bulgarian, Byelorussian, Macedonian, Russian,
      Serbian, and Ukrainian languages.</P
></LI
><LI
><A
NAME="charset-ISO-8859-6"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-6</TT
>,
      suitable for the Arabic language.</P
></LI
><LI
><A
NAME="charset-ISO-8859-7"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-7</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Greek language.</P
></LI
><LI
><A
NAME="charset-ISO-8859-8"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-8</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Hebrew language (without punctuation).
  </P
></LI
><LI
><A
NAME="charset-ISO-8859-9"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-9</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Turkish language.</P
></LI
><LI
><A
NAME="charset-ISO-8859-10"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-10</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Estonian, Icelandic, Inuit (Greenlandic), Latvian,
      Lithuanian, and Sami (Lappish) languages.</P
></LI
><LI
><A
NAME="charset-ISO-8859-13"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-13</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Estonian, Latvian, Lithuanian, Polish and Sami
      (Lappish) languages.</P
></LI
><LI
><A
NAME="charset-ISO-8859-14"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-14</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Irish Gaelic, Manx Gaelic, Scottish Gaelic, and
      Welsh languages.</P
></LI
><LI
><A
NAME="charset-ISO-8859-15"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-15</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the ISO-8859-1 languages, with improvements for
      French, Finnish and the Euro.</P
></LI
><LI
><A
NAME="charset-ISO-8859-16"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-8859-16</TT
>
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Rumanian language.</P
></LI
><LI
><A
NAME="charset-KOI8-R"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>KOI8-R</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Russian language (very popular, especially on the
      internet).</P
></LI
><LI
><A
NAME="charset-KOI8-U"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>KOI8-U</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Ukrainian language (very popular, especially on the
      internet).</P
></LI
><LI
><A
NAME="charset-KOI8-RU"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>KOI8-RU</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Russian language. This character set is only available on
                           platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="literal"
>JIS_X0201</TT
>,
      a character set for the Japanese language.</P
></LI
><LI
><A
NAME="charset-MAC-ARABIC"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-ARABIC</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-CENTRAL-EUROPE"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-CENTRAL-EUROPE</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-CROATIAN"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-CROATIAN</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-CYRILLIC"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-CYRILLIC</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-DINGBAT"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-DINGBAT</TT
>,
      a platform specific character set.
    </P
></LI
><LI
><A
NAME="charset-MAC-GREEK"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-GREEK</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-HEBREW"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-HEBREW</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-ICELAND"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-ICELAND</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-ROMAN"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-ROMAN</TT
>
   = <TT
CLASS="literal"
>MACINTOSH</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-ROMANIA"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-ROMANIA</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-SYMBOL"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-SYMBOL</TT
>,
      a platform specific character set.</P
></LI
><LI
><A
NAME="charset-MAC-THAI"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-THAI</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-TURKISH"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-TURKISH</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-MAC-UKRAINE"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MAC-UKRAINE</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-CP437"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP437</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-CP437-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP437-IBM</TT
>,
     an IBM variant of <TT
CLASS="literal"
>CP437</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP737"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP737</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Greek language.
    </P
></LI
><LI
><A
NAME="charset-CP775"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP775</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for some Baltic languages.
    </P
></LI
><LI
><A
NAME="charset-CP850"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP850</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-CP852"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP852</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-CP852-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP852-IBM</TT
>,
    an IBM variant of <TT
CLASS="literal"
>CP852</TT
>.</P
></LI
><LI
><A
NAME="charset-CP855"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP855</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Russian language.
    </P
></LI
><LI
><A
NAME="charset-CP857"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP857</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Turkish language.
    </P
></LI
><LI
><A
NAME="charset-CP860"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP860</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Portuguese language.
    </P
></LI
><LI
><A
NAME="charset-CP860-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP860-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP860</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP861"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP861</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Icelandic language.
    </P
></LI
><LI
><A
NAME="charset-CP861-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP861-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP861</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP862"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP862</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Hebrew language.
    </P
></LI
><LI
><A
NAME="charset-CP862-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP862-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP862</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP863"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP863</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-CP863-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP863-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP863</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP864"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP864</TT
>, a DOS oldie,
      meant to be suitable for the Arabic language.
    </P
></LI
><LI
><A
NAME="charset-CP864-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP864-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP864</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP865"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP865</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for some Nordic languages.
    </P
></LI
><LI
><A
NAME="charset-CP865-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP865-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP865</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP866"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP866</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Russian language.
    </P
></LI
><LI
><A
NAME="charset-CP869"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP869</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Greek language.
    </P
></LI
><LI
><A
NAME="charset-CP869-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP869-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP869</TT
>.
    </P
></LI
><LI
><A
NAME="charset-CP874"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP874</TT
>, a DOS oldie,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Thai language.
    </P
></LI
><LI
><A
NAME="charset-CP874-IBM"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP874-IBM</TT
>,
   an IBM variant of <TT
CLASS="literal"
>CP874</TT
>.
    </P
></LI
><LI
><A
NAME="charset-WINDOWS-1250"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1250</TT
>
   = <TT
CLASS="literal"
>CP1250</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, heavily incompatible with ISO-8859-2.
    </P
></LI
><LI
><A
NAME="charset-WINDOWS-1251"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1251</TT
>
   = <TT
CLASS="literal"
>CP1251</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, heavily incompatible with ISO-8859-5,
      meant to be suitable for the Russian language.
    </P
></LI
><LI
><A
NAME="charset-WINDOWS-1252"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1252</TT
>
   = <TT
CLASS="literal"
>CP1252</TT
>,
      a platform specific extension of the ISO-8859-1 character set.
    </P
></LI
><LI
><A
NAME="charset-WINDOWS-1253"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1253</TT
>
   = <TT
CLASS="literal"
>CP1253</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, gratuitously incompatible with ISO-8859-7,
      meant to be suitable for the Greek language.
    </P
></LI
><LI
><A
NAME="charset-WINDOWS-1254"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1254</TT
>
   = <TT
CLASS="literal"
>CP1254</TT
>,
      a platform specific extension of the ISO-8859-9 character set.
    </P
></LI
><LI
><A
NAME="charset-WINDOWS-1255"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1255</TT
>
   = <TT
CLASS="literal"
>CP1255</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, gratuitously incompatible with ISO-8859-8,
      suitable for the Hebrew language.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-WINDOWS-1256"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1256</TT
>
   = <TT
CLASS="literal"
>CP1256</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Arabic language.
    </P
></LI
><LI
><A
NAME="charset-WINDOWS-1257"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1257</TT
>
   = <TT
CLASS="literal"
>CP1257</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-WINDOWS-1258"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>WINDOWS-1258</TT
>
   = <TT
CLASS="literal"
>CP1258</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, meant to be suitable for the Vietnamese language.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-HP-ROMAN8"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>HP-ROMAN8</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-NEXTSTEP"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>NEXTSTEP</TT
>,
      a platform specific extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>.</P
></LI
><LI
><A
NAME="charset-EUC-JP"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>EUC-JP</TT
>,
      a multibyte character set for the Japanese language.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-SHIFT-JIS"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>SHIFT-JIS</TT
>,
      a multibyte character set for the Japanese language.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-CP932"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP932</TT
>,
      a Microsoft variant of <TT
CLASS="literal"
>SHIFT-JIS</TT
>.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-ISO-2022-JP"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-2022-JP</TT
>,
      a stateful 7-bit multibyte character set for the Japanese language.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-ISO-2022-JP-2"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-2022-JP-2</TT
>,
      a stateful 7-bit multibyte character set for the Japanese language.
      This character set is only available on platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> 2.3
      or newer or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-ISO-2022-JP-1"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-2022-JP-1</TT
>,
      a stateful 7-bit multibyte character set for the Japanese language.
      This character set is only available on
                           platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-EUC-CN"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>EUC-CN</TT
>,
      a multibyte character set for simplified Chinese.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-HZ"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>HZ</TT
>,
      a stateful 7-bit multibyte character set for simplified Chinese.
      This character set is only available on
                           platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-GBK"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>GBK</TT
>,
      a multibyte character set for Chinese,
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-CP936"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP936</TT
>,
      a Microsoft variant of <TT
CLASS="literal"
>GBK</TT
>.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-GB18030"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>GB18030</TT
>,
      a multibyte character set for Chinese,
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-EUC-TW"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>EUC-TW</TT
>,
      a multibyte character set for traditional Chinese.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-BIG5"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>BIG5</TT
>,
      a multibyte character set for traditional Chinese.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-CP950"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP950</TT
>,
      a Microsoft variant of <TT
CLASS="literal"
>BIG5</TT
>.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-BIG5-HKSCS"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>BIG5-HKSCS</TT
>,
      a multibyte character set for traditional Chinese.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-ISO-2022-CN"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-2022-CN</TT
>,
      a stateful 7-bit multibyte character set for Chinese.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-ISO-2022-CN-EXT"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-2022-CN-EXT</TT
>,
      a stateful 7-bit multibyte character set for Chinese.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-EUC-KR"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>EUC-KR</TT
>,
      a multibyte character set for Korean.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-CP949"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP949</TT
>,
      a Microsoft variant of <TT
CLASS="literal"
>EUC-KR</TT
>.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-ISO-2022-KR"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ISO-2022-KR</TT
>,
      a stateful 7-bit multibyte character set for Korean.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-JOHAB"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>JOHAB</TT
>,
      a multibyte character set for Korean used mostly on <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>.
      This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-ARMSCII-8"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>ARMSCII-8</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Armenian. This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-GEORGIAN-ACADEMY"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>GEORGIAN-ACADEMY</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Georgian. This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-GEORGIAN-PS"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>GEORGIAN-PS</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Georgian. This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-TIS-620"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>TIS-620</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Thai. This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-MULELAO-1"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>MULELAO-1</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Laotian. This character set is only available on
                           platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-CP1133"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>CP1133</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Laotian. This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-VISCII"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>VISCII</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
><LI
><A
NAME="charset-TCVN"
></A
><P
ALIGN="justify"
><TT
CLASS="literal"
>TCVN</TT
>,
      an extension of the <A
HREF="#charset-ASCII"
>ASCII character set</A
>, suitable for the Vietnamese. This character set is only available on
                                 platforms with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>.</P
></LI
></UL
>


<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="iconv"
></A
>Platform dependent: Only on <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> systems
     with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> 2.2 or better and other systems (<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> and <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>)
     on which the <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
> <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> library has been installed</DT
><DD
><P
ALIGN="justify"
>The character sets provided by the library function
 <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><CODE
CLASS="function"
>iconv</CODE
></A
> can also be used as encodings.  To create such an encoding,
 call <A
HREF="#make-encoding"
><CODE
CLASS="function"
>EXT:MAKE-ENCODING</CODE
></A
> with the character set name (a string) as the
 <CODE
CLASS="constant"
>:CHARSET</CODE
> argument.</P
><P
ALIGN="justify"
>When an <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
> is available both as a <A
HREF="#charset-symbols"
>built-in</A
> and
 through <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><CODE
CLASS="function"
>iconv</CODE
></A
>, the <A
HREF="#charset-symbols"
>built-in</A
> is used, because it is more
 efficient and available across all platforms.</P
><P
ALIGN="justify"
>These encodings are not assigned to global variables, since
 there is no portable way to get the list of all character sets
 supported by <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><CODE
CLASS="function"
>iconv</CODE
></A
>.</P
><P
ALIGN="justify"
>On <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> systems (such as <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
>/<A
HREF="http://www.linux.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Linux</B
></A
> and <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
>/<A
HREF="http://www.gnu.org/software/hurd/"
TARGET="_top"
><B
CLASS="emphasis"
>Hurd</B
></A
>)
 and on systems with <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
> you get this list by calling the
 <I
CLASS="emphasis"
>program</I
> <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/iconv.html"
TARGET="_top"
><B
CLASS="command"
>iconv</B
></A
>: <B
CLASS="command"
>iconv -l</B
>.
 </P
><P
ALIGN="justify"
>The reason we use only <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
> 2.2 or <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
> is
 that the other <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><CODE
CLASS="function"
>iconv</CODE
></A
> implementations are broken in various ways and
 we do not want to deal with random <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> crashes caused by those bugs.
 If your system supplies an <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><CODE
CLASS="function"
>iconv</CODE
></A
> implementation which passes the
 <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libiconv/"
TARGET="_top"
>libiconv</A
>'s test suite, please report that to <CODE
CLASS="email"
>&#60;<A
HREF="mailto:clisp-list@sf.net"
>clisp-list@sf.net</A
>&#62;</CODE
> and a
 future <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> version will use <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/iconv.html"
TARGET="_top"
><CODE
CLASS="function"
>iconv</CODE
></A
> on your system.</P
></DD
></DL
></DIV
>

</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="newline"
>29.4.3. Line Terminators</A
></H3
><P
ALIGN="justify"
>The line terminator mode can be one of the following three keywords:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="newline-table"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>keyword</TH
><TH
>newline representation</TH
></TR
></THEAD
><TBODY
><TR
><TD
><CODE
CLASS="constant"
>:UNIX</CODE
></TD
><TD
>Newline is represented by the <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
>
     <SPAN
CLASS="keycode"
>LF</SPAN
> character (<SPAN
CLASS="keycode"
>U000A</SPAN
>).</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:MAC</CODE
></TD
><TD
>Newline is represented by the <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
>
     <SPAN
CLASS="keycode"
>CR</SPAN
> character (<SPAN
CLASS="keycode"
>U000D</SPAN
>).</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:DOS</CODE
></TD
><TD
>Newline is represented by the <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
>
     <SPAN
CLASS="keycode"
>CR</SPAN
> followed by the <A
HREF="http://www.cplusplus.com/doc/papers/ascii.html"
TARGET="_top"
><B
CLASS="emphasis"
>ASCII</B
></A
> <SPAN
CLASS="keycode"
>LF</SPAN
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
><P
ALIGN="justify"
>Windows programs typically use the <CODE
CLASS="constant"
>:DOS</CODE
> line terminator,
 sometimes they also accept <CODE
CLASS="constant"
>:UNIX</CODE
> line terminators or produce
 <CODE
CLASS="constant"
>:MAC</CODE
> line terminators.</P
><P
ALIGN="justify"
>The line terminator mode is relevant only for output (writing to a
 <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
>).  During input, all three kinds of line terminators
 are recognized.  If you do not want this, i.e., if you really want to
 distinguish <SPAN
CLASS="keycode"
>LF</SPAN
>, <SPAN
CLASS="keycode"
>CR</SPAN
> and <SPAN
CLASS="keycode"
>CR</SPAN
>/<SPAN
CLASS="keycode"
>LF</SPAN
>, you have to resort to
 binary input (function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>).</P
><P
ALIGN="justify"
>See also <A
HREF="#clhs-newline"
>13.1.8 Treatment of Newline
 during Input and Output</A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="make-encoding"
>29.4.4. Function <A
HREF="#make-encoding"
><CODE
CLASS="function"
>EXT:MAKE-ENCODING</CODE
></A
>.</A
></H3
><P
ALIGN="justify"
>The function
  <TT
CLASS="sexp"
>(<A
HREF="#make-encoding"
><CODE
CLASS="function"
>EXT:MAKE-ENCODING</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :CHARSET
     :LINE-TERMINATOR :INPUT-ERROR-ACTION :OUTPUT-ERROR-ACTION)</TT
>
 returns an <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>. The <CODE
CLASS="constant"
>:CHARSET</CODE
> argument may be
 an encoding, a string, or <CODE
CLASS="constant"
>:DEFAULT</CODE
>.
 The possible values for the <A
HREF="#newline"
>line terminator</A
> argument are the
 keywords <CODE
CLASS="constant"
>:UNIX</CODE
>, <CODE
CLASS="constant"
>:MAC</CODE
>, <CODE
CLASS="constant"
>:DOS</CODE
>.</P
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:INPUT-ERROR-ACTION</CODE
> argument specifies
 what happens when an invalid byte sequence is encountered while
 converting bytes to characters.  Its value can be <CODE
CLASS="constant"
>:ERROR</CODE
>, <CODE
CLASS="constant"
>:IGNORE</CODE
>
 or a character to be used instead.  The <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
> character
 <SPAN
CLASS="keysym"
>#\uFFFD</SPAN
> is typically used to indicate an error in the
 input sequence.</P
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:OUTPUT-ERROR-ACTION</CODE
> argument specifies
 what happens when an invalid character is encountered while converting
 characters to bytes.  Its value can be <CODE
CLASS="constant"
>:ERROR</CODE
>, <CODE
CLASS="constant"
>:IGNORE</CODE
>, a byte to
 be used instead, or a character to be used instead.  The <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>
 character <SPAN
CLASS="keysym"
>#\uFFFD</SPAN
> can be used here only if it is
 encodable in the character set.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="enc-charset"
>29.4.5. Function <A
HREF="#enc-charset"
><CODE
CLASS="function"
>EXT:ENCODING-CHARSET</CODE
></A
>.</A
></H3
><FONT
COLOR="RED"
>Platform dependent: Only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built
 <B
CLASS="emphasis"
>with</B
> compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</FONT
><P
ALIGN="justify"
>The function <TT
CLASS="sexp"
>(<A
HREF="#enc-charset"
><CODE
CLASS="function"
>EXT:ENCODING-CHARSET</CODE
></A
> <VAR
CLASS="replaceable"
>encoding</VAR
>)</TT
>
 returns the charset of the <VAR
CLASS="replaceable"
>encoding</VAR
>, as a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
> or a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>.
 Note that <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_string.html"
TARGET="_top"
><CODE
CLASS="function"
>STRING</CODE
></A
> (<A
HREF="#enc-charset"
><CODE
CLASS="function"
>EXT:ENCODING-CHARSET</CODE
></A
>
 <VAR
CLASS="replaceable"
>encoding</VAR
>))</TT
> is not necessarily a valid MIME name.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="enc-dflt"
>29.4.6. Default encodings.</A
></H3
><P
ALIGN="justify"
>Besides every <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
> stream containing an encoding,
 the following <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> places contain global <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>s:</P
><DIV
CLASS="formalpara"
><P
><A
NAME="def-file-enc"
></A
><B
>Macro <A
HREF="#def-file-enc"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-FILE-ENCODING*</VAR
></A
>. </B
>The <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> <A
HREF="#def-file-enc"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-FILE-ENCODING*</VAR
></A
> is the encoding used for
 new <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
> streams, when no <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> argument was
 specified.</P
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: Only in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> built
  <B
CLASS="emphasis"
>with</B
> compile-time flag <A
HREF="http://www.unicode.org/"
TARGET="_top"
><B
CLASS="emphasis"
>UNICODE</B
></A
>.</DT
><DD
><P
ALIGN="justify"
>The following are <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> places.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="path-enc"
></A
><A
HREF="#path-enc"
><VAR
CLASS="varname"
>CUSTOM:*PATHNAME-ENCODING*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>is the encoding used for pathnames in the file
 system. Normally, this is a 1:1 encoding.  Its <A
HREF="#newline"
>line terminator</A
> mode is ignored.
 </P
></DD
><DT
><A
NAME="term-enc"
></A
><A
HREF="#term-enc"
><VAR
CLASS="varname"
>CUSTOM:*TERMINAL-ENCODING*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>is the encoding used for communication with the
  terminal, in particular by <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
>.
 </P
></DD
><DT
><A
NAME="misc-enc"
></A
><A
HREF="#misc-enc"
><VAR
CLASS="varname"
>CUSTOM:*MISC-ENCODING*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>is the encoding used for access to <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>s,
 command line options, and the like.  Its <A
HREF="#newline"
>line terminator</A
> mode is ignored.
 </P
></DD
><DT
><A
NAME="foreign-enc"
></A
><A
HREF="#foreign-enc"
><VAR
CLASS="varname"
>CUSTOM:*FOREIGN-ENCODING*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>is the encoding for characters and strings passed
 through the <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> (some plaforms only).
 Its value must be a 1:1 encoding, i.e., an encoding in which every
 character is represented by one byte.
</P
></DD
></DL
></DIV
></DD
></DL
></DIV
><P
ALIGN="justify"
>The default encoding objects are initialized as described in the
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="clisp.html#opt-enc"
TARGET="_top"
>manual page</A
></P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="string-byte"
>29.4.7. Converting between strings and byte vectors</A
></H3
><P
ALIGN="justify"
>Encodings can also be used to convert directly between strings and
their corresponding byte vector representation according to that encoding.
</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:CONVERT-STRING-FROM-BYTES</CODE
>
      <VAR
CLASS="replaceable"
>byte-vector</VAR
> <VAR
CLASS="replaceable"
>encoding</VAR
>
      <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>converts the subsequence of
  <VAR
CLASS="replaceable"
>byte-vector</VAR
> from <VAR
CLASS="replaceable"
>start</VAR
> to <VAR
CLASS="replaceable"
>end</VAR
> to a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>, according to the given <VAR
CLASS="replaceable"
>encoding</VAR
>, and returns the
  resulting string.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:CONVERT-STRING-TO-BYTES</CODE
>
      <VAR
CLASS="replaceable"
>string</VAR
> <VAR
CLASS="replaceable"
>encoding</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:START</CODE
> <CODE
CLASS="constant"
>:END</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>converts the subsequence of <VAR
CLASS="replaceable"
>string</VAR
> from
  <VAR
CLASS="replaceable"
>start</VAR
> to <VAR
CLASS="replaceable"
>end</VAR
> to a <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8))</TT
>,
  according to the given <VAR
CLASS="replaceable"
>encoding</VAR
>, and returns the resulting byte
  vector.</P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="clos-stream"
>29.5. Extensions-1.5. Defining new kinds of Streams</A
></H2
><P
ALIGN="justify"
>Two mechanisms are supported for creating new streams with
user-defined behavior:
<P
></P
><UL
><LI
><P
ALIGN="justify"
>You can create a new subclass of <A
HREF="#fu-st"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-STREAM</CODE
></A
> and define
  methods for the elementary stream operations on it.  These generic
  functions all have a name starting with the prefix "stream-".
  </P
></LI
><LI
><P
ALIGN="justify"
>You can create a new subclass of
  <CODE
CLASS="classname"
>GSTREAM:GENERIC-STREAM-CONTROLLER</CODE
> and define
  methods for the elementary stream operations on it.  These generic
  functions all have a name starting with the prefix
  "generic-stream-".  The stream itself is a different object, created
  using the function <CODE
CLASS="function"
>gstream:make-generic-stream</CODE
>.
  </P
></LI
></UL
></P
><P
ALIGN="justify"
>The <CODE
CLASS="classname"
>FUNDAMENTAL-STREAM</CODE
> API is based on the
 <A
HREF="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail"
TARGET="_top"
>STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</A
> proposal by David N. Gray and is supported by most <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
>
 implementations currently in use.
 The <CODE
CLASS="classname"
>GSTREAM:GENERIC-STREAM-CONTROLLER</CODE
>
 API is <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>-specific and is now obsolete.</P
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="gray"
>29.5.1. Gray streams</A
></H3
><P
ALIGN="justify"
>This interface permits the definition of new classes of streams,
and programming their behavior by defining methods for the elementary
stream operations.  It is based on the proposal <A
HREF="ftp://parcftp.xerox.com/pub/cl/cleanup/mail/stream-definition-by-user.mail"
TARGET="_top"
>STREAM-DEFINITION-BY-USER:GENERIC-FUNCTIONS</A
> of David
N. Gray to X3J13.</P
><P
ALIGN="justify"
>All symbols defined by this interface, starting with the prefix
 "fundamental-" or "stream-", are exported from the package
 <A
HREF="#gray"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"GRAY"</SPAN
></STRONG
></A
> and re-exported from <A
HREF="#ext-pac"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"EXT"</SPAN
></STRONG
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Defined classes</B
></P
><DL
><DT
><A
NAME="fu-st"
></A
><A
HREF="#fu-st"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-STREAM</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This is a superclass of all user-defined streams.
   It is a subclass of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> and of <A
HREF="http://www.lisp.org/HyperSpec/Body/cla_standard-object.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-OBJECT</CODE
></A
>.
   Its metaclass is <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_standard-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>STANDARD-CLASS</CODE
></A
>.</P
></DD
><DT
><A
NAME="fu-st-in"
></A
><A
HREF="#fu-st-in"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-INPUT-STREAM</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This is a superclass of all user-defined <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s.
   It is a subclass of <A
HREF="#fu-st"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-STREAM</CODE
></A
>.  The built-in function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>INPUT-STREAM-P</CODE
></A
>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing input, you have to make it
   a subclass of <A
HREF="#fu-st-in"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-INPUT-STREAM</CODE
></A
>.</P
></DD
><DT
><A
NAME="fu-st-out"
></A
><A
HREF="#fu-st-out"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-OUTPUT-STREAM</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This is a superclass of all user-defined <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s.
   It is a subclass of <A
HREF="#fu-st"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-STREAM</CODE
></A
>.  The built-in function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>OUTPUT-STREAM-P</CODE
></A
>
   returns true on instances of this class.  This means that when you
   define a new stream class capable of doing output, you have to make
   it a subclass of <A
HREF="#fu-st-out"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-OUTPUT-STREAM</CODE
></A
>.</P
></DD
><DT
><A
NAME="fu-st-char"
></A
><A
HREF="#fu-st-char"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-CHARACTER-STREAM</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This is a superclass of all user-defined streams
   whose <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.  It is a subclass of
   <A
HREF="#fu-st"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-STREAM</CODE
></A
>.  It defines a method on <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> that returns
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.</P
></DD
><DT
><A
NAME="fu-st-bin"
></A
><A
HREF="#fu-st-bin"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-BINARY-STREAM</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This is a superclass of all user-defined streams
   whose <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is a subtype of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>.  It is a
   subclass of <A
HREF="#fu-st"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-STREAM</CODE
></A
>.  When you define a subclass of <A
HREF="#fu-st-bin"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-BINARY-STREAM</CODE
></A
>,
   you have to provide a method on <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>.
  </P
></DD
><DT
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-CHARACTER-INPUT-STREAM</CODE
></DT
><DD
><P
ALIGN="justify"
>This is a convenience class inheriting from both
   <A
HREF="#fu-st-char"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-CHARACTER-STREAM</CODE
></A
> and <A
HREF="#fu-st-in"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-INPUT-STREAM</CODE
></A
>.</P
></DD
><DT
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-CHARACTER-OUTPUT-STREAM</CODE
></DT
><DD
><P
ALIGN="justify"
>This is a convenience class inheriting from both
   <A
HREF="#fu-st-char"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-CHARACTER-STREAM</CODE
></A
> and <A
HREF="#fu-st-out"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-OUTPUT-STREAM</CODE
></A
>.</P
></DD
><DT
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-BINARY-INPUT-STREAM</CODE
></DT
><DD
><P
ALIGN="justify"
>This is a convenience class inheriting from both
   <A
HREF="#fu-st-bin"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-BINARY-STREAM</CODE
></A
> and <A
HREF="#fu-st-in"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-INPUT-STREAM</CODE
></A
>.</P
></DD
><DT
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-BINARY-OUTPUT-STREAM</CODE
></DT
><DD
><P
ALIGN="justify"
>This is a convenience class inheriting from both
   <A
HREF="#fu-st-bin"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-BINARY-STREAM</CODE
></A
> and <A
HREF="#fu-st-out"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-OUTPUT-STREAM</CODE
></A
>.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>general generic functions defined on streams</B
></P
><DL
><DT
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>
    <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns the stream's element type, normally a
   subtype of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>.</P
><P
ALIGN="justify"
>The method for <A
HREF="#fu-st-char"
><CODE
CLASS="classname"
>GRAY:FUNDAMENTAL-CHARACTER-STREAM</CODE
></A
> returns <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>((<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
>)
    <VAR
CLASS="replaceable"
>new-element-type</VAR
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Changes the stream's element type.</P
><P
ALIGN="justify"
>The default method <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>s an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.</P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see <A
HREF="#stream-eltype"
>setting <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
></A
>).</P
></DD
><DT
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
>
    <VAR
CLASS="replaceable"
>stream</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:ABORT</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Closes the stream and flushes any associated buffers.
   </P
><P
ALIGN="justify"
>When you define a primary method on this
    function, do not forget to <A
HREF="http://www.lisp.org/HyperSpec/Body/locfun_call-next-method.html"
TARGET="_top"
><CODE
CLASS="function"
>CALL-NEXT-METHOD</CODE
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN-STREAM-P</CODE
></A
>
    <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns true before the stream has been closed, and
    <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> after the stream has been closed.</P
><P
ALIGN="justify"
>You do not need to add methods to this function.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>generic functions for character input</B
></P
><DL
><DT
><A
NAME="st-rc"
></A
><TT
CLASS="sexp"
>(<A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>If a character was pushed back using <A
HREF="#st-uc"
><CODE
CLASS="function"
>GRAY:STREAM-UNREAD-CHAR</CODE
></A
>,
   returns and consumes it.  Otherwise returns and consumes the next
   character from the stream. Returns <CODE
CLASS="constant"
>:EOF</CODE
> if the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is reached.
   </P
><P
ALIGN="justify"
>You must define a method for this function.</P
></DD
><DT
><A
NAME="st-uc"
></A
><TT
CLASS="sexp"
>(<A
HREF="#st-uc"
><CODE
CLASS="function"
>GRAY:STREAM-UNREAD-CHAR</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>char</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Pushes <VAR
CLASS="replaceable"
>char</VAR
>, which must be the last character
   read from the <VAR
CLASS="replaceable"
>stream</VAR
>, back onto the front of the <VAR
CLASS="replaceable"
>stream</VAR
>.
   </P
><P
ALIGN="justify"
>You must define a method for this function.</P
></DD
><DT
><A
NAME="st-rcnh"
></A
><TT
CLASS="sexp"
>(<A
HREF="#st-rcnh"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR-NO-HANG</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns a character or <CODE
CLASS="constant"
>:EOF</CODE
>, like <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
>, if
   that would return immediately.  If <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
>'s value is not available
   immediately, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> instead of waiting.</P
><P
ALIGN="justify"
>&#13;   The default method simply calls <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
>; this is sufficient for streams
   whose <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> method never blocks.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-PEEK-CHAR</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>If a character was pushed back using <A
HREF="#st-uc"
><CODE
CLASS="function"
>GRAY:STREAM-UNREAD-CHAR</CODE
></A
>,
   returns it.  Otherwise returns the next character from the stream,
   avoiding any side effects <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> would do.  Returns <CODE
CLASS="constant"
>:EOF</CODE
> if the
   <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is reached.</P
><P
ALIGN="justify"
>The default method calls <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> and <A
HREF="#st-uc"
><CODE
CLASS="function"
>GRAY:STREAM-UNREAD-CHAR</CODE
></A
>; this is
   sufficient for streams whose <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> method has no
   side-effects.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-LISTEN</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>If a character was pushed back using <A
HREF="#st-uc"
><CODE
CLASS="function"
>GRAY:STREAM-UNREAD-CHAR</CODE
></A
>,
   returns it.  Otherwise returns the next character from the stream, if
   already available.  If no character is available immediately, or if
   <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is reached, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
><P
ALIGN="justify"
>The default method calls <A
HREF="#st-rcnh"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR-NO-HANG</CODE
></A
> and <A
HREF="#st-uc"
><CODE
CLASS="function"
>GRAY:STREAM-UNREAD-CHAR</CODE
></A
>; this is
   sufficient for streams whose <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> method has no
   side-effects.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR-WILL-HANG-P</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> will return immediately.
   Otherwise it returns true.</P
><P
ALIGN="justify"
>The default method calls <A
HREF="#st-rcnh"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR-NO-HANG</CODE
></A
> and <A
HREF="#st-uc"
><CODE
CLASS="function"
>GRAY:STREAM-UNREAD-CHAR</CODE
></A
>; this is
   sufficient for streams whose <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
> method has no side-effects.</P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see <A
HREF="#rcwhp"
><CODE
CLASS="function"
>EXT:READ-CHAR-WILL-HANG-P</CODE
></A
>).</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR-SEQUENCE</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>
   <VAR
CLASS="replaceable"
>sequence</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> [<VAR
CLASS="replaceable"
>start</VAR
> [<VAR
CLASS="replaceable"
>end</VAR
>]])</TT
></DT
><DD
><P
ALIGN="justify"
>Fills the subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified by
   <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> with characters consecutively read from <VAR
CLASS="replaceable"
>stream</VAR
>.
   Returns the index of the first element of <VAR
CLASS="replaceable"
>sequence</VAR
> that was not
   updated (= <VAR
CLASS="replaceable"
>end</VAR
> or &#60; <VAR
CLASS="replaceable"
>end</VAR
> if the stream reached its end).</P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>sequence</VAR
> is an <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
TARGET="_top"
><CODE
CLASS="classname"
>ARRAY</CODE
></A
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s, i.e. a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>.
   <VAR
CLASS="replaceable"
>start</VAR
> is a nonnegative <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> and defaults to <TT
CLASS="literal"
>0</TT
>.
   <VAR
CLASS="replaceable"
>end</VAR
> is a nonnegative <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and defaults to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
   which stands for <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>)</TT
>.
  </P
><P
ALIGN="justify"
>The default method repeatedly calls <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
>; this
   is always sufficient if speed does not matter.</P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see
   <A
HREF="#rd-ch-seq"
><CODE
CLASS="function"
>EXT:READ-CHAR-SEQUENCE</CODE
></A
>).</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-READ-LINE</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Reads a line of characters, and return two values:
   the line (a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>, without the terminating <SPAN
CLASS="keysym"
>#\Newline</SPAN
> character),
   and a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
TARGET="_top"
><CODE
CLASS="classname"
>BOOLEAN</CODE
></A
> value which is true if the line was terminated by
   <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> instead of <SPAN
CLASS="keysym"
>#\Newline</SPAN
>.</P
><P
ALIGN="justify"
>The default method repeatedly calls <A
HREF="#st-rc"
><CODE
CLASS="function"
>GRAY:STREAM-READ-CHAR</CODE
></A
>; this
   is always sufficient.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-CLEAR-INPUT</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Clears all pending interactive input from the
   <VAR
CLASS="replaceable"
>stream</VAR
>, and returns true if some pending input was removed.</P
><P
ALIGN="justify"
>The default method does nothing and returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>; this is
   sufficient for non-interactive streams.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>generic functions for character output</B
></P
><DL
><DT
><A
NAME="st-wc"
></A
><TT
CLASS="sexp"
>(<A
HREF="#st-wc"
><CODE
CLASS="function"
>GRAY:STREAM-WRITE-CHAR</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>char</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Writes <VAR
CLASS="replaceable"
>char</VAR
>.
   </P
><P
ALIGN="justify"
>You must define a method for this function.</P
></DD
><DT
><A
NAME="st-lc"
></A
><TT
CLASS="sexp"
>(<A
HREF="#st-lc"
><CODE
CLASS="function"
>GRAY:STREAM-LINE-COLUMN</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns the column number where the next character
   would be written (<TT
CLASS="literal"
>0</TT
> stands for the first column),
    or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if that is not meaningful for this stream.
   </P
><P
ALIGN="justify"
>You must define a method for this function.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-START-LINE-P</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns true if the next character would be
   written at the start of a new line.</P
><P
ALIGN="justify"
>The default method calls <A
HREF="#st-lc"
><CODE
CLASS="function"
>GRAY:STREAM-LINE-COLUMN</CODE
></A
> and compares its result with
   0; this is sufficient for streams whose <A
HREF="#st-lc"
><CODE
CLASS="function"
>GRAY:STREAM-LINE-COLUMN</CODE
></A
> never returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-WRITE-CHAR-SEQUENCE</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>sequence</VAR
>
                 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> [<VAR
CLASS="replaceable"
>start</VAR
> [<VAR
CLASS="replaceable"
>end</VAR
> ]])</TT
></DT
><DD
><P
ALIGN="justify"
>Outputs the subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified
   by <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> to <VAR
CLASS="replaceable"
>stream</VAR
>.</P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>sequence</VAR
> is an <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
TARGET="_top"
><CODE
CLASS="classname"
>ARRAY</CODE
></A
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s, i.e. a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>.
   <VAR
CLASS="replaceable"
>start</VAR
> is a nonnegative <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> and defaults to 0.
   <VAR
CLASS="replaceable"
>end</VAR
> is a nonnegative integer or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and defaults to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
   which stands for <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>)</TT
>.
  </P
><P
ALIGN="justify"
>The default method repeatedly calls <A
HREF="#st-wc"
><CODE
CLASS="function"
>GRAY:STREAM-WRITE-CHAR</CODE
></A
>; this
   is always sufficient if speed does not matter.
  </P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension
   (see <A
HREF="#wr-ch-seq"
><CODE
CLASS="function"
>EXT:WRITE-CHAR-SEQUENCE</CODE
></A
>).</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-WRITE-STRING</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>string</VAR
>
                 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> [<VAR
CLASS="replaceable"
>start</VAR
> [<VAR
CLASS="replaceable"
>end</VAR
>]])</TT
></DT
><DD
><P
ALIGN="justify"
>Outputs the subsequence of <VAR
CLASS="replaceable"
>string</VAR
> specified by
   <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> to <VAR
CLASS="replaceable"
>stream</VAR
>.  Returns <VAR
CLASS="replaceable"
>string</VAR
>.</P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>string</VAR
> is a string.  <VAR
CLASS="replaceable"
>start</VAR
> is a nonnegative integer
   and default to 0.  <VAR
CLASS="replaceable"
>end</VAR
> is a nonnegative integer or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and
   defaults to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, which stands for <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
>
   <VAR
CLASS="replaceable"
>string</VAR
>)</TT
>.</P
><P
ALIGN="justify"
>The default method calls
   <CODE
CLASS="function"
>GRAY:STREAM-WRITE-CHAR-SEQUENCE</CODE
>;
   this is always sufficient.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-TERPRI</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Outputs a <SPAN
CLASS="keysym"
>#\Newline</SPAN
> character.</P
><P
ALIGN="justify"
>The default method calls <A
HREF="#st-wc"
><CODE
CLASS="function"
>GRAY:STREAM-WRITE-CHAR</CODE
></A
>; this is always
   sufficient.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-FRESH-LINE</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Possibly outputs a <SPAN
CLASS="keysym"
>#\Newline</SPAN
> character, so as to ensure
   that the next character would be written at the start of a new line.
   Returns true if it did output a <SPAN
CLASS="keysym"
>#\Newline</SPAN
> character.</P
><P
ALIGN="justify"
>The default method calls
   <CODE
CLASS="function"
>GRAY:STREAM-START-LINE-P</CODE
> and then
   <CODE
CLASS="function"
>GRAY:STREAM-TERPRI</CODE
> if necessary; this is always
   sufficient.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-FINISH-OUTPUT</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Ensures that any buffered output has reached its
   destination, and then returns.</P
><P
ALIGN="justify"
>The default method does nothing.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-FORCE-OUTPUT</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Brings any buffered output on its way towards its
   destination, and returns without waiting until it has reached its
   destination.</P
><P
ALIGN="justify"
>The default method does nothing.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-CLEAR-OUTPUT</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Attempts to discard any buffered output which has
   not yet reached its destination.</P
><P
ALIGN="justify"
>The default method does nothing.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-ADVANCE-TO-COLUMN</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>column</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Ensures that the next character will be written at
   <VAR
CLASS="replaceable"
>column</VAR
> at least.</P
><P
ALIGN="justify"
>The default method outputs an appropriate amount of space
   characters; this is sufficient for non-proportional output.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>generic functions for binary input</B
></P
><DL
><DT
><A
NAME="st-rb"
></A
><TT
CLASS="sexp"
>(<A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns and consumes the next integer from the
   stream. Returns <CODE
CLASS="constant"
>:EOF</CODE
> if the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is reached.</P
><P
ALIGN="justify"
>You must define a method for this function.</P
></DD
><DT
><A
NAME="st-rbla"
></A
><TT
CLASS="sexp"
>(<A
HREF="#st-rbla"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE-LOOKAHEAD</CODE
></A
> <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <VAR
CLASS="replaceable"
>stream</VAR
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
>.
   Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> if <A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
> would return immediately with an
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> result.  Returns <CODE
CLASS="constant"
>:EOF</CODE
> if the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_e.html#end_of_file"
TARGET="_top"
><TT
CLASS="literal"
>end-of-stream</TT
></A
> is already
   known to be reached.  If <A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
>'s value is not available
   immediately, returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> instead of waiting.</P
><P
ALIGN="justify"
>You must define a method for this function.</P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see
   <A
HREF="#rbla"
><CODE
CLASS="function"
>EXT:READ-BYTE-LOOKAHEAD</CODE
></A
>).</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE-WILL-HANG-P</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <VAR
CLASS="replaceable"
>stream</VAR
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
>.
   Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if <A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
> will return immediately.
   Otherwise it returns true.</P
><P
ALIGN="justify"
>The default method calls <A
HREF="#st-rbla"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE-LOOKAHEAD</CODE
></A
>; this is always sufficient.
   </P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see <A
HREF="#rbwhp"
><CODE
CLASS="function"
>EXT:READ-BYTE-WILL-HANG-P</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE-NO-HANG</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>To be called only if <VAR
CLASS="replaceable"
>stream</VAR
>'s
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_stream-element-type.html"
TARGET="_top"
><CODE
CLASS="function"
>STREAM-ELEMENT-TYPE</CODE
></A
> is <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
>.
   Returns an <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> or <CODE
CLASS="constant"
>:EOF</CODE
>, like <A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
>, if that would
   return immediately.  If <A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
>'s value is not available immediately,
   returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> instead of waiting.</P
><P
ALIGN="justify"
>The default method calls <A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
> if <A
HREF="#st-rbla"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE-LOOKAHEAD</CODE
></A
> returns true;
    this is always sufficient.</P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see <A
HREF="#rbnh"
><CODE
CLASS="function"
>EXT:READ-BYTE-NO-HANG</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE-SEQUENCE</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>sequence</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
                 [<VAR
CLASS="replaceable"
>start</VAR
> [<VAR
CLASS="replaceable"
>end</VAR
> [<VAR
CLASS="replaceable"
>no-hang</VAR
>]]])</TT
></DT
><DD
><P
ALIGN="justify"
>Fills the subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified by
   <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> with integers consecutively read from <VAR
CLASS="replaceable"
>stream</VAR
>.
   Returns the index of the first element of <VAR
CLASS="replaceable"
>sequence</VAR
> that was not
   updated (= <VAR
CLASS="replaceable"
>end</VAR
> or &#60; <VAR
CLASS="replaceable"
>end</VAR
> if the stream reached its end).</P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>sequence</VAR
> is an <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
TARGET="_top"
><CODE
CLASS="classname"
>ARRAY</CODE
></A
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>s.
   <VAR
CLASS="replaceable"
>start</VAR
> is a nonnegative <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> and defaults to 0.
   <VAR
CLASS="replaceable"
>end</VAR
> is a nonnegative <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and defaults to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
   which stands for <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>)</TT
>.
  </P
><P
ALIGN="justify"
>The default method repeatedly calls <A
HREF="#st-rb"
><CODE
CLASS="function"
>GRAY:STREAM-READ-BYTE</CODE
></A
>; this
   is always sufficient if speed does not matter.</P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see
   <A
HREF="#rd-by-seq"
><CODE
CLASS="function"
>EXT:READ-BYTE-SEQUENCE</CODE
></A
>).</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>generic functions for binary output</B
></P
><DL
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-WRITE-BYTE</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>integer</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Writes <VAR
CLASS="replaceable"
>integer</VAR
>.</P
><P
ALIGN="justify"
>You must define a method for this function.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>GRAY:STREAM-WRITE-BYTE-SEQUENCE</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>sequence</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
                 [<VAR
CLASS="replaceable"
>start</VAR
> [<VAR
CLASS="replaceable"
>end</VAR
> [<VAR
CLASS="replaceable"
>no-hang</VAR
>]]])</TT
></DT
><DD
><P
ALIGN="justify"
>Outputs the subsequence of <VAR
CLASS="replaceable"
>sequence</VAR
> specified
   by <CODE
CLASS="constant"
>:START</CODE
> and <CODE
CLASS="constant"
>:END</CODE
> to <VAR
CLASS="replaceable"
>stream</VAR
></P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>sequence</VAR
> is an <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_array.html"
TARGET="_top"
><CODE
CLASS="classname"
>ARRAY</CODE
></A
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>s.
   <VAR
CLASS="replaceable"
>start</VAR
> is a nonnegative <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> and defaults to 0.
   <VAR
CLASS="replaceable"
>end</VAR
> is a nonnegative <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and defaults to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
   which stands for <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
> <VAR
CLASS="replaceable"
>sequence</VAR
>)</TT
>.
  </P
><P
ALIGN="justify"
>The default method repeatedly calls
   <CODE
CLASS="function"
>GRAY:STREAM-WRITE-BYTE</CODE
>; this is always
   sufficient if speed does not matter.</P
><P
ALIGN="justify"
>This function is a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extension (see
   <A
HREF="#wr-by-seq"
><CODE
CLASS="function"
>EXT:WRITE-BYTE-SEQUENCE</CODE
></A
>).</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="gstream"
>29.5.2. Generic streams</A
></H3
><P
ALIGN="justify"
>This interface is <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>-specific and now obsolete.  Please use
 the <A
HREF="#gray"
>Gray streams</A
> interface instead.</P
><P
ALIGN="justify"
>Generic streams are user programmable streams.
 The programmer interface:</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:make-generic-stream</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns a generic stream.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-controller</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns a private object to which generic stream
   methods dispatch.  The typical usage is to retrieve the object
   originally provided by the user in
   <CODE
CLASS="function"
>gstream:make-generic-stream</CODE
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-p</CODE
>
                 <VAR
CLASS="replaceable"
>stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>determines whether a stream is a generic stream,
   returning <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> if it is, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> otherwise.
  </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>In order to specify the behavior of a generic stream, the user
 must define <B
CLASS="command"
>CLOS</B
> methods on the following <B
CLASS="command"
>CLOS</B
> generic
 functions.  The function
 <CODE
CLASS="function"
>gstream:generic-stream-<VAR
CLASS="replaceable"
>xyz</VAR
></CODE
>
 corresponds to the <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> function
 <CODE
CLASS="function"
><VAR
CLASS="replaceable"
>xyz</VAR
></CODE
>.  They all take a
 controller and some number of arguments.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-read-char</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
> Returns and consumes the next character, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> at
    end of file.  Takes one argument, the controller object.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-peek-char</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
> Returns the next character, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> at end of file.  A
   second value indicates whether the side effects associated with
   consuming the character were executed: <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> means that a full
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
> was done, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> means that no side effects were done.
   Takes one argument, the controller object.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-read-byte</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns and consumes the next integer, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> at end
   of file.  Takes one argument, the controller object.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-read-char-will-hang-p</CODE
>
     <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This generic function is used to query the stream's
   input status.  It returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if
   <CODE
CLASS="function"
>gstream:generic-stream-read-char</CODE
> and
   <CODE
CLASS="function"
>gstream:generic-stream-peek-char</CODE
> will certainly
   return immediately.  Otherwise it returns true.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-write-char</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
> <VAR
CLASS="replaceable"
>char</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>The first argument is the controller object.
   The second argument is the character to be written.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-write-byte</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
>
                 <VAR
CLASS="replaceable"
>by</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>The first argument is the controller object.
   The second argument is the integer to be written.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-write-string</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
>
                 <VAR
CLASS="replaceable"
>string</VAR
> <VAR
CLASS="replaceable"
>start</VAR
> <VAR
CLASS="replaceable"
>length</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Writes the subsequence of <VAR
CLASS="replaceable"
>string</VAR
> starting from
   <VAR
CLASS="replaceable"
>start</VAR
> of length <VAR
CLASS="replaceable"
>length</VAR
>.
   The first argument is the controller object.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-clear-input</CODE
>
                 <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-clear-output</CODE
>
     <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-finish-output</CODE
>
     <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-force-output</CODE
>
     <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>gstream:generic-stream-close</CODE
>
     <VAR
CLASS="replaceable"
>controller</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Take one argument, the controller object.
 </P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="weak"
>29.6. Extensions-1.6. Weak Pointers</A
></H2
><P
ALIGN="justify"
>A weak pointer is an object holding a reference to a given object,
 without keeping the latter from being <A
HREF="#gc"
>garbage-collect</A
>ed.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:MAKE-WEAK-POINTER</CODE
>
   <VAR
CLASS="replaceable"
>value</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh"
TARGET="_top"
>fresh</A
> weak pointer referring to
  <VAR
CLASS="replaceable"
>value</VAR
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:WEAK-POINTER-P</CODE
>
   <VAR
CLASS="replaceable"
>object</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns true if the <VAR
CLASS="replaceable"
>object</VAR
> is of type
   <A
HREF="#weak"
><CODE
CLASS="classname"
>EXT:WEAK-POINTER</CODE
></A
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>EXT:WEAK-POINTER-VALUE</CODE
>
   <VAR
CLASS="replaceable"
>weak-pointer</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns two values: The original value and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>,
   if the value has not yet been <A
HREF="#gc"
>garbage-collect</A
>ed, else <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
   It is <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>-able: you can change the value that the weak pointer
   points to.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> also has <A
HREF="#make-hash"
>weak</A
>
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_hash-table.html"
TARGET="_top"
><CODE
CLASS="classname"
>HASH-TABLE</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="final"
>29.7. Extensions-1.7. Finalization</A
></H2
><P
ALIGN="justify"
>Calling
 <TT
CLASS="sexp"
>(<A
HREF="#final"
><CODE
CLASS="function"
>EXT:FINALIZE</CODE
></A
> <VAR
CLASS="replaceable"
>object</VAR
> <VAR
CLASS="replaceable"
>function</VAR
>)</TT
>
 has the effect that when the specified object is being <A
HREF="#gc"
>garbage-collect</A
>ed,
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
> <VAR
CLASS="replaceable"
>object</VAR
>)</TT
>
 will be executed.</P
><P
ALIGN="justify"
>Calling
 <TT
CLASS="sexp"
>(<A
HREF="#final"
><CODE
CLASS="function"
>EXT:FINALIZE</CODE
></A
> <VAR
CLASS="replaceable"
>object</VAR
> <VAR
CLASS="replaceable"
>function</VAR
>
                       <VAR
CLASS="replaceable"
>guardian</VAR
>)</TT
>
 has a similar effect, but only as long as the
 <VAR
CLASS="replaceable"
>guardian</VAR
> has not been <A
HREF="#gc"
>garbage-collect</A
>ed:
 when <VAR
CLASS="replaceable"
>object</VAR
> is being <A
HREF="#gc"
>garbage-collect</A
>ed,
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_funcall.html"
TARGET="_top"
><CODE
CLASS="function"
>FUNCALL</CODE
></A
> <VAR
CLASS="replaceable"
>function</VAR
> <VAR
CLASS="replaceable"
>object</VAR
>
                       <VAR
CLASS="replaceable"
>guardian</VAR
>)</TT
>
 will be executed.
 If the <VAR
CLASS="replaceable"
>guardian</VAR
> is <A
HREF="#gc"
>garbage-collect</A
>ed before <VAR
CLASS="replaceable"
>object</VAR
>
 is, nothing happens.</P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Note: The time when <SPAN
CLASS="QUOTE"
>"the <VAR
CLASS="replaceable"
>object</VAR
> is being
 <A
HREF="#gc"
>garbage-collect</A
>ed"</SPAN
> is not defined deterministically.  (Actually, it might
 possibly never occur.)  It denotes a moment at which no references to
 <VAR
CLASS="replaceable"
>object</VAR
> exist from other Lisp objects.  When the <VAR
CLASS="replaceable"
>function</VAR
> is called,
 <VAR
CLASS="replaceable"
>object</VAR
> (and possibly <VAR
CLASS="replaceable"
>guardian</VAR
>) enter the
 "arena of live Lisp objects" again.</P
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>No finalization request will be executed more than once.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="prompt"
>29.8. Extensions-1.8. The Prompt</A
></H2
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> prompt consists of 3 mandatory parts: <SPAN
CLASS="QUOTE"
>"start"</SPAN
>,
 <SPAN
CLASS="QUOTE"
>"body"</SPAN
>, and <SPAN
CLASS="QUOTE"
>"finish"</SPAN
>; and 2 optional parts:
 <SPAN
CLASS="QUOTE"
>"break"</SPAN
>, which appears only during
 <A
HREF="#debugger"
>debugging</A
> (after <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_break.html"
TARGET="_top"
><CODE
CLASS="function"
>BREAK</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_error.html"
TARGET="_top"
><CODE
CLASS="function"
>ERROR</CODE
></A
>),
 and <SPAN
CLASS="QUOTE"
>"step"</SPAN
>, which appears only during <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_step.html"
TARGET="_top"
><CODE
CLASS="function"
>STEP</CODE
></A
>ping.
 Each part is controlled by a custom variable, which can be either a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> of no arguments returning a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>
 (if it is something else - or if the return value was not a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>
 - it is printed with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_writecm_p_rintcm_princ.html"
TARGET="_top"
><CODE
CLASS="function"
>PRINC</CODE
></A
>).  In the order of invocation:
 <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="prompt-start"
></A
><A
HREF="#prompt-start"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-START*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>Defaults to an empty string.
  </P
></DD
><DT
><A
NAME="prompt-step"
></A
><A
HREF="#prompt-step"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-STEP*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>Used only during <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_step.html"
TARGET="_top"
><CODE
CLASS="function"
>STEP</CODE
></A
>ping.
     Defaults to <SAMP
CLASS="prompt"
>"Step n†"</SAMP
>,
     where <VAR
CLASS="replaceable"
>n</VAR
> is the stepping level as returned by <A
HREF="#step-level"
><CODE
CLASS="function"
>EXT:STEP-LEVEL</CODE
></A
>.
  </P
></DD
><DT
><A
NAME="prompt-break"
></A
><A
HREF="#prompt-break"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-BREAK*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>Used only inside break loop (during debugging).
     Defaults to <SAMP
CLASS="prompt"
>"Break n†"</SAMP
>,
     where <VAR
CLASS="replaceable"
>n</VAR
> is the break level as returned by <A
HREF="#break-level"
><CODE
CLASS="function"
>EXT:BREAK-LEVEL</CODE
></A
>.
  </P
></DD
><DT
><A
NAME="prompt-body"
></A
><A
HREF="#prompt-body"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-BODY*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>Defaults to <SAMP
CLASS="prompt"
>"package[n]"</SAMP
>
     where <VAR
CLASS="replaceable"
>package</VAR
> is the shortest (nick)name (as returned by
     <A
HREF="#package-short-name"
><CODE
CLASS="function"
>EXT:PACKAGE-SHORT-NAME</CODE
></A
>) of the current package <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PACKAGE*</VAR
></A
>
     if it is <I
CLASS="emphasis"
>not</I
> the same as it was in the beginning
     (determined by <A
HREF="#prompt-new-package"
><CODE
CLASS="function"
>EXT:PROMPT-NEW-PACKAGE</CODE
></A
>)
     or if it does not contain symbol <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>,
     (it is assumed that in the latter case you would want to keep in
     mind that your current package is something weird);
     and <VAR
CLASS="replaceable"
>n</VAR
> is the index of the current prompt, kept in <A
HREF="#command-index"
><VAR
CLASS="varname"
>EXT:*COMMAND-INDEX*</VAR
></A
>;
  </P
></DD
><DT
><A
NAME="prompt-finish"
></A
><A
HREF="#prompt-finish"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-FINISH*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>Defaults to <SAMP
CLASS="prompt"
>&#62;†</SAMP
>.
</P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
>To facilitate your own custom prompt creation, the following
 functions and variables are available:
 <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="break-level"
></A
><A
HREF="#break-level"
><CODE
CLASS="function"
>EXT:BREAK-LEVEL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> returns current <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_break.html"
TARGET="_top"
><CODE
CLASS="function"
>BREAK</CODE
></A
>/<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_error.html"
TARGET="_top"
><CODE
CLASS="function"
>ERROR</CODE
></A
> level.
  </P
></DD
><DT
><A
NAME="step-level"
></A
><A
HREF="#step-level"
><CODE
CLASS="function"
>EXT:STEP-LEVEL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> returns current <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_step.html"
TARGET="_top"
><CODE
CLASS="function"
>STEP</CODE
></A
> level.
  </P
></DD
><DT
><A
NAME="prompt-new-package"
></A
><A
HREF="#prompt-new-package"
><CODE
CLASS="function"
>EXT:PROMPT-NEW-PACKAGE</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> returns <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stpackagest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*PACKAGE*</VAR
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
     if the current package is the same as it was initially.
  </P
></DD
><DT
><A
NAME="package-short-name"
></A
><A
HREF="#package-short-name"
><CODE
CLASS="function"
>EXT:PACKAGE-SHORT-NAME</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>This <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_function.html"
TARGET="_top"
><CODE
CLASS="classname"
>FUNCTION</CODE
></A
> takes one argument, a
     <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_package.html"
TARGET="_top"
><CODE
CLASS="classname"
>PACKAGE</CODE
></A
>, and returns its shortest name or nickname.
  </P
></DD
><DT
><A
NAME="command-index"
></A
><A
HREF="#command-index"
><VAR
CLASS="varname"
>EXT:*COMMAND-INDEX*</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>contains the current prompt number;
     it is your responsibility to increment it
     (this variable is bound to 0 before saving the <A
HREF="#image"
>memory image</A
>).
  </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="ansi"
>29.9. Extensions-1.9. Maximum ANSI CL compliance</A
></H2
><P
ALIGN="justify"
>Some <A
HREF="#ansi-cl"
>[<SPAN
CLASS="citation"
><A
HREF="#ansi-cl"
>ANSI CL standard</A
></SPAN
>]</A
> features are turned off by default for backwards
 compatibility.
 They can be switched on, all at once, by setting the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>
 <A
HREF="#ansi"
><VAR
CLASS="varname"
>CUSTOM:*ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, or they can be switched on individually.
 Setting <A
HREF="#ansi"
><VAR
CLASS="varname"
>CUSTOM:*ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> implies the following:</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#pathprint"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-PATHNAMES-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#fixnum-char-ansi"
><VAR
CLASS="varname"
>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#count-ansi"
><VAR
CLASS="varname"
>CUSTOM:*SEQUENCE-COUNT-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#pathmerge"
><VAR
CLASS="varname"
>CUSTOM:*MERGE-PATHNAMES-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#parsename"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#flocont"
><VAR
CLASS="varname"
>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>.</P
></LI
></UL
><P
ALIGN="justify"
>Note that if you run <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> with the <A
HREF="clisp.html#opt-ansi"
TARGET="_top"
><VAR
CLASS="option"
>-ansi</VAR
></A
> switch or set
 the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> <A
HREF="#ansi"
><VAR
CLASS="varname"
>CUSTOM:*ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> and then save <A
HREF="#image"
>memory image</A
>,
 then all subsequent invocations of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> with this image
 will be as if with <A
HREF="clisp.html#opt-ansi"
TARGET="_top"
><VAR
CLASS="option"
>-ansi</VAR
></A
>
 (regardless whether you actually supply the <A
HREF="clisp.html#opt-ansi"
TARGET="_top"
><VAR
CLASS="option"
>-ansi</VAR
></A
> switch).
 You can always set the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> <A
HREF="#ansi"
><VAR
CLASS="varname"
>CUSTOM:*ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, or invoke
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> with the <A
HREF="clisp.html#opt-traditional"
TARGET="_top"
><VAR
CLASS="option"
>-traditional</VAR
></A
> switch, reversing the above
 settings, i.e.,</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#pathprint"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-PATHNAMES-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#fixnum-char-ansi"
><VAR
CLASS="varname"
>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#count-ansi"
><VAR
CLASS="varname"
>CUSTOM:*SEQUENCE-COUNT-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#pathmerge"
><VAR
CLASS="varname"
>CUSTOM:*MERGE-PATHNAMES-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#parsename"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>Setting <A
HREF="#flocont"
><VAR
CLASS="varname"
>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</VAR
></A
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></LI
></UL
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="macros3"
>29.10. Extensions-1.10. Additional Fancy Macros</A
></H2
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> comes with some extension macros, mostly defined in the
 file <TT
CLASS="filename"
>macros3.lisp</TT
> and loaded from the file
 <TT
CLASS="filename"
>init.lisp</TT
> during <B
CLASS="command"
>make</B
>:</P
><DIV
CLASS="formalpara"
><P
><A
NAME="ethe"
></A
><B
>Macro <A
HREF="#ethe"
><CODE
CLASS="function"
>EXT:ETHE</CODE
></A
>. </B
><TT
CLASS="sexp"
>(<A
HREF="#ethe"
><CODE
CLASS="function"
>EXT:ETHE</CODE
></A
> <VAR
CLASS="replaceable"
>value-type</VAR
> <VAR
CLASS="replaceable"
>form</VAR
>)</TT
>
 enforces a type check in both interpreted and compiled code.
 </P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="letf"
></A
><B
>Macros <A
HREF="#letf"
><CODE
CLASS="function"
>EXT:LETF</CODE
></A
> &#38; <A
HREF="#letf"
><CODE
CLASS="function"
>EXT:LETF*</CODE
></A
>. </B
>These macros are similar to <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
TARGET="_top"
><CODE
CLASS="function"
>LET</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
TARGET="_top"
><CODE
CLASS="function"
>LET*</CODE
></A
>, respectively,
 except that they can bind <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
>s, even <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
>s with <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>.
 Example:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (letf (((values a b) form)) ...)
</PRE
></TD
></TR
></TABLE
>

is equivalent to

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (multiple-value-bind (a b) form ...)
</PRE
></TD
></TR
></TABLE
>

while

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(letf (((first l) 7)) ...)
</PRE
></TD
></TR
></TABLE
>

is approximately equivalent to

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_letcm_letst.html"
TARGET="_top"
><CODE
CLASS="function"
>LET*</CODE
></A
> ((#:g1 l) (#:g2 (first #:g1)))
   (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_progn.html"
TARGET="_top"
><CODE
CLASS="function"
>PROGN</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (first #:g1) 7) ...)
      (<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (first #:g1) #:g2)))
</PRE
></TD
></TR
></TABLE
>
</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="with-collect"
></A
><B
>Macro <CODE
CLASS="function"
>EXT:WITH-COLLECT</CODE
>. </B
>Similar to the <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_loop.html"
TARGET="_top"
><CODE
CLASS="function"
>LOOP</CODE
></A
>'s
 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_6-1-3.html"
TARGET="_top"
><CODE
CLASS="constant"
>collect</CODE
></A
>
 construct, except that it is looks more "Lispy" and can appear
 arbitrarily deep.  It defines local macros (with <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>MACROLET</CODE
></A
>) which
 collect objects given to it into lists, which are then returned as
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>.  E.g.,

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (ext:with-collect (c0 c1)
   (dotimes (i 10) (if (oddp i) (c0 i) (c1 i))))
</PRE
></TD
></TR
></TABLE
>

returns two lists <TT
CLASS="sexp"
>(1 3 5 7 9)</TT
> and
<TT
CLASS="sexp"
>(0 2 4 6 8)</TT
> as <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>.
</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="with-gensyms"
></A
><B
>Macro <CODE
CLASS="function"
>EXT:WITH-GENSYMS</CODE
>. </B
>Similar to its namesake from
 <A
HREF="http://www.paulgraham.com/"
TARGET="_top"
>Paul Graham</A
>'s book
 <A
HREF="http://www.paulgraham.com/onlisp.html"
TARGET="_top"
><SPAN
CLASS="QUOTE"
>"On
  Lisp"</SPAN
></A
>, this macro is useful for writing other macros:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (with-gensyms ("FOO-" bar baz zot) ...)
</PRE
></TD
></TR
></TABLE
>
expands to
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (let ((bar (gensym "FOO-BAR-"))
       (baz (gensym "FOO-BAZ-"))
       (zot (gensym "FOO-ZOT-")))
   ...)
</PRE
></TD
></TR
></TABLE
>
</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="remove-plist"
></A
><B
>Function <CODE
CLASS="function"
>EXT:REMOVE-PLIST</CODE
>. </B
>Similar to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_removecm__elete-if-not.html"
TARGET="_top"
><CODE
CLASS="function"
>REMOVE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_remf.html"
TARGET="_top"
><CODE
CLASS="function"
>REMF</CODE
></A
>, this function removes some
 properties from a property list.  It is non-destructve and thus can be
 used on <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> arguments to remove some keyword parameters, e.g.,
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (defmacro with-foo ((<A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> foo1 foo2) <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> body)
   `(... ,foo1 ... ,foo2 ... ,@body))
 (defmacro with-foo-bar ((<A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> opts <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> bar1 bar2
                          <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ALLOW-OTHER-KEYS</TT
></A
>)
                         <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> body)
   `(with-foo (,@(remove-plist opts :bar1 :bar2)
      ... ,bar1 ... ,bar2 ... ,@body)))
 (defun foo-bar ()
   (with-foo-bar (:bar1 1 :foo2 2) ...))
</PRE
></TD
></TR
></TABLE
>
here <CODE
CLASS="function"
>WITH-FOO</CODE
> does not receive the
<TT
CLASS="literal"
>:BAR1 1</TT
> argument from <CODE
CLASS="function"
>FOO-BAR</CODE
>.
</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="html-http-output"
></A
><B
>Macros <CODE
CLASS="function"
>EXT:WITH-HTML-OUTPUT</CODE
> and
                   <CODE
CLASS="function"
>EXT:WITH-HTTP-OUTPUT</CODE
>. </B
>Defined in <TT
CLASS="filename"
>inspect.lisp</TT
>, these macros are useful
 for the rudimentary <A
HREF="http://www.w3.org/Protocols/"
TARGET="_top"
><B
CLASS="command"
>HTTP</B
></A
> server defined there.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="customize"
>29.11. Extensions-1.11. Customizing <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> behavior.</A
></H2
><P
ALIGN="justify"
>The user-customizable variables are located in the package
 <A
HREF="#customize"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CUSTOM"</SPAN
></STRONG
></A
> and thus can be listed using
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_aproposcm_apropos-list.html"
TARGET="_top"
><CODE
CLASS="function"
>APROPOS</CODE
></A
> "" "CUSTOM")</TT
>:
 <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="#ansi"
><VAR
CLASS="varname"
>CUSTOM:*ANSI*</VAR
></A
></TD
><TD
><VAR
CLASS="varname"
>CUSTOM:*APPLYHOOK*</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*BREAK-ON-WARNINGS*</VAR
></TD
><TD
><A
HREF="#browser"
><CODE
CLASS="constant"
>CUSTOM:*BROWSER*</CODE
></A
></TD
></TR
><TR
><TD
><A
HREF="#browser"
><CODE
CLASS="constant"
>CUSTOM:*BROWSERS*</CODE
></A
></TD
><TD
><VAR
CLASS="varname"
>CUSTOM:*CLHS-ROOT-DEFAULT*</VAR
></TD
></TR
><TR
><TD
><A
HREF="#fixnum-char-ansi"
><VAR
CLASS="varname"
>CUSTOM:*COERCE-FIXNUM-CHAR-ANSI*</VAR
></A
></TD
><TD
><A
HREF="#compilefile"
><VAR
CLASS="varname"
>CUSTOM:*COMPILE-WARNINGS*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*COMPILED-FILE-TYPES*</VAR
></A
></TD
><TD
><A
HREF="#language"
><VAR
CLASS="varname"
>CUSTOM:*CURRENT-LANGUAGE*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#def-file-enc"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-FILE-ENCODING*</VAR
></A
></TD
><TD
><A
HREF="#default-float-format"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-FLOAT-FORMAT*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#default-tz"
><VAR
CLASS="varname"
>CUSTOM:*DEFAULT-TIME-ZONE*</VAR
></A
></TD
><TD
><VAR
CLASS="varname"
>CUSTOM:*DEFTYPE-DEPTH-LIMIT*</VAR
></TD
></TR
><TR
><TD
><A
HREF="#device-prefix"
><VAR
CLASS="varname"
>CUSTOM:*DEVICE-PREFIX*</VAR
></A
></TD
><TD
><A
HREF="#ed"
><VAR
CLASS="varname"
>CUSTOM:*EDITOR*</VAR
></A
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*ERROR-HANDLER*</VAR
></TD
><TD
><VAR
CLASS="varname"
>CUSTOM:*EVALHOOK*</VAR
></TD
></TR
><TR
><TD
><A
HREF="#flocont"
><VAR
CLASS="varname"
>CUSTOM:*FLOATING-POINT-CONTAGION-ANSI*</VAR
></A
></TD
><TD
><A
HREF="#foreign-enc"
><VAR
CLASS="varname"
>CUSTOM:*FOREIGN-ENCODING*</VAR
></A
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*INSPECT-BROWSER*</VAR
></TD
><TD
><VAR
CLASS="varname"
>CUSTOM:*INSPECT-FRONTEND*</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*INSPECT-LENGTH*</VAR
></TD
><TD
><VAR
CLASS="varname"
>CUSTOM:*INSPECT-PRINT-LENGTH*</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*INSPECT-PRINT-LEVEL*</VAR
></TD
><TD
><VAR
CLASS="varname"
>CUSTOM:*INSPECT-PRINT-LINES*</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*LIB-DIRECTORY*</VAR
></TD
><TD
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-COMPILING*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-ECHO*</VAR
></A
></TD
><TD
><A
HREF="#load-lpt"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-LOGICAL-PATHNAME-TRANSLATIONS-DATABASE*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-OBSOLETE-ACTION*</VAR
></A
></TD
><TD
><A
HREF="#load-paths"
><VAR
CLASS="varname"
>CUSTOM:*LOAD-PATHS*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#pathmerge"
><VAR
CLASS="varname"
>CUSTOM:*MERGE-PATHNAMES-ANSI*</VAR
></A
></TD
><TD
><A
HREF="#misc-enc"
><VAR
CLASS="varname"
>CUSTOM:*MISC-ENCODING*</VAR
></A
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*PACKAGE-TASKS-TREAT-SPECIALLY*</VAR
></TD
><TD
><A
HREF="#parsename"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-ANSI*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#name-type-split"
><VAR
CLASS="varname"
>CUSTOM:*PARSE-NAMESTRING-DOT-FILE*</VAR
></A
></TD
><TD
><A
HREF="#path-enc"
><VAR
CLASS="varname"
>CUSTOM:*PATHNAME-ENCODING*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#ppr-first-newline"
><VAR
CLASS="varname"
>CUSTOM:*PPRINT-FIRST-NEWLINE*</VAR
></A
></TD
><TD
><A
HREF="#pr-closure"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-CLOSURE*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#pr-indent"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-INDENT-LISTS*</VAR
></A
></TD
><TD
><A
HREF="#pathprint"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-PATHNAMES-ANSI*</VAR
></A
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*PRINT-PRETTY-FILL*</VAR
></TD
><TD
><A
HREF="#pr-rpars"
><VAR
CLASS="varname"
>CUSTOM:*PRINT-RPARS*</VAR
></A
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*PRINT-SYMBOLS-LONG*</VAR
></TD
><TD
><A
HREF="#prompt-body"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-BODY*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#prompt-break"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-BREAK*</VAR
></A
></TD
><TD
><A
HREF="#prompt-finish"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-FINISH*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#prompt-start"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-START*</VAR
></A
></TD
><TD
><A
HREF="#prompt-step"
><VAR
CLASS="varname"
>CUSTOM:*PROMPT-STEP*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#count-ansi"
><VAR
CLASS="varname"
>CUSTOM:*SEQUENCE-COUNT-ANSI*</VAR
></A
></TD
><TD
><A
HREF="#loadfile"
><VAR
CLASS="varname"
>CUSTOM:*SOURCE-FILE-TYPES*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#suppress-check-redef"
><VAR
CLASS="varname"
>CUSTOM:*SUPPRESS-CHECK-REDEFINITION*</VAR
></A
></TD
><TD
><A
HREF="#pack-lock"
><VAR
CLASS="varname"
>CUSTOM:*SYSTEM-PACKAGE-LIST*</VAR
></A
></TD
></TR
><TR
><TD
><A
HREF="#term-enc"
><VAR
CLASS="varname"
>CUSTOM:*TERMINAL-ENCODING*</VAR
></A
></TD
><TD
><A
HREF="#trace-indent"
><VAR
CLASS="varname"
>CUSTOM:*TRACE-INDENT*</VAR
></A
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*USER-MAIL-ADDRESS*</VAR
></TD
><TD
><A
HREF="#warn-fpc"
><VAR
CLASS="varname"
>CUSTOM:*WARN-ON-FLOATING-POINT-CONTAGION*</VAR
></A
></TD
></TR
><TR
><TD
><VAR
CLASS="varname"
>CUSTOM:*WITH-HTML-OUTPUT-DOCTYPE*</VAR
></TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Note: some of these variables are platform-specific.</P
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>You should set these variables (and do whatever other
 customization you see fit) in the file <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
> in the build
 directory before building <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.
 Alternatively, after building <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>, or if you are using a binary
 distribution of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>, you can modify <A
HREF="#customize"
><TT
CLASS="filename"
>#P"config.lisp"</TT
></A
>, compile and load
 it, and then save the <A
HREF="#image"
>memory image</A
>.
 Finally, you can create an <SPAN
CLASS="QUOTE"
>"RC"</SPAN
> (run control) file which
 is loaded whenever <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is started (see the documentation for option
 <A
HREF="clisp.html#opt-norc"
TARGET="_top"
><VAR
CLASS="option"
>-norc</VAR
></A
> in your
 platform-specific copy of the manual page).
</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="code-walk"
>29.12. Extensions-1.12. Code Walker</A
></H2
><P
ALIGN="justify"
>You can use <CODE
CLASS="function"
>EXT:EXPAND-FORM</CODE
> to expand all
 the macros, <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
>s, etc, in a single form:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13; (expand-form '(macrolet ((bar (x) `(print ,x)))
                 (macrolet ((baz (x) `(bar ,x)))
                   (symbol-macrolet ((z 3))
                     (baz z)))))
</PRE
></TD
></TR
></TABLE
>
returns two values:
<TT
CLASS="sexp"
>(locally (print 3))</TT
> (the expansion) and
<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> (an indicator that some expansion has actually been done).</P
><P
ALIGN="justify"
>This is sometimes called a <I
CLASS="emphasis"
>code walker</I
>,
 except that the code walker would probably leave the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>MACROLET</CODE
></A
> and
 <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_symbol-macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-MACROLET</CODE
></A
> forms intact and just do the expansion.</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="platform"
></A
>Chapter 30. Extensions-2: Platform specific Extensions</H1
><DIV
CLASS="section"
><H2
CLASS="section"
><A
NAME="screen"
>30.1. Extensions-2.1. Random Screen Access</A
></H2
><FONT
COLOR="RED"
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
   platforms only.</FONT
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:MAKE-WINDOW</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns a <SPAN
CLASS="type"
>WINDOW-STREAM</SPAN
>.
    As long as this stream is open, the terminal is in cbreak/noecho mode.
    <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
> should not be used for input or output during this
    time.  (Use <A
HREF="#terminal"
><CODE
CLASS="function"
>EXT:WITH-KEYBOARD</CODE
></A
> and <A
HREF="#terminal"
><VAR
CLASS="varname"
>EXT:*KEYBOARD-INPUT*</VAR
></A
> instead.)
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:WITH-WINDOW</CODE
> . <VAR
CLASS="replaceable"
>body</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>binds
    <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#screen"
><VAR
CLASS="varname"
>SCREEN:*WINDOW*</VAR
></A
></I
></STRONG
>
    to a <SPAN
CLASS="type"
>WINDOW-STREAM</SPAN
> and executes <VAR
CLASS="replaceable"
>body</VAR
>.
    The stream is guaranteed to be closed when the body is left.
    During its execution, <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
> should not be used, as above.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:WINDOW-SIZE</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns the window's size, as two values:
   height (= y<SUB
>max</SUB
>+1) and width (=
   x<SUB
>max</SUB
>+1).
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:WINDOW-CURSOR-POSITION</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns the position of the cursor in the window,
   as two values: line (&#8805;0, &#8804;y<SUB
>max</SUB
>, 0 means
   top), column (&#8805;0, &#8804;x<SUB
>max</SUB
>, 0 means left
   margin).</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:SET-WINDOW-CURSOR-POSITION</CODE
>
      <VAR
CLASS="replaceable"
>window-stream</VAR
> <VAR
CLASS="replaceable"
>line</VAR
>
      <VAR
CLASS="replaceable"
>column</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>sets the position of the cursor in the window.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:CLEAR-WINDOW</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>clears the window's contents and puts the cursor
    in the upper left corner.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:CLEAR-WINDOW-TO-EOT</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>clears the window's contents from the cursor
    position to the end of window.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:CLEAR-WINDOW-TO-EOL</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>clears the window's contents from the cursor
    position to the end of line.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:DELETE-WINDOW-LINE</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>removes the cursor's line, moves the lines below
    it up by one line and clears the window's last line.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:INSERT-WINDOW-LINE</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>inserts a line at the cursor's line, moving the
    lines below it down by one line.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:HIGHLIGHT-ON</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>switches highlighted output on.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:HIGHLIGHT-OFF</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>switches highlighted output off.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:WINDOW-CURSOR-ON</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>makes the cursor visible, a cursor block in most
    implementations.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>SCREEN:WINDOW-CURSOR-OFF</CODE
> <VAR
CLASS="replaceable"
>window-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>makes the cursor invisible, in implementations
    where this is possible.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="modules"
>30.2. Extensions-2.2. External Modules</A
></H2
><FONT
COLOR="RED"
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> and <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms only.</FONT
><DIV
CLASS="note"
><A
NAME="mod-win32"
></A
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>Modules on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>.</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Everything described in the section will work verbatim on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
  when using <A
HREF="http://cygwin.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Cygwin</B
></A
> or <A
HREF="http://www.mingw.org/"
TARGET="_top"
><B
CLASS="emphasis"
>MinGW</B
></A
>, <I
CLASS="emphasis"
>except</I
> for one
  thing - you will need to replace the <TT
CLASS="filename"
>run</TT
>
  extension in <TT
CLASS="filename"
>lisp.run</TT
> with the <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> executable
  extension <TT
CLASS="filename"
>exe</TT
>.</P
><P
>For historical reasons, all examples appear to assume <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> and
  use the <TT
CLASS="filename"
>run</TT
> file type (<SPAN
CLASS="QUOTE"
>"extension"</SPAN
>)
  for the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> run-time.
  This does <I
CLASS="emphasis"
>not</I
> mean that they will not work on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="mod-overview"
>30.2.1. Overview</A
></H3
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> has a facility for adding external modules (written in
 <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>, for example).  It is invoked through
 <B
CLASS="command"
>clisp-link</B
>.</P
><P
ALIGN="justify"
>A <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
>module</I
></STRONG
> is a
 piece of external code which defines extra Lisp objects, symbols and
 functions.  A module name must consist of the characters
 <TT
CLASS="filename"
>A</TT
>-<TT
CLASS="filename"
>Z</TT
>,
 <TT
CLASS="filename"
>a</TT
>-<TT
CLASS="filename"
>z</TT
>, <TT
CLASS="filename"
>_</TT
>,
 <TT
CLASS="filename"
>0</TT
>-<TT
CLASS="filename"
>9</TT
>.
 The module name <SPAN
CLASS="QUOTE"
>"clisp"</SPAN
> is reserved.
 Normally a module name is derived from the corresponding file name.</P
><P
ALIGN="justify"
><B
CLASS="command"
>clisp-link</B
> needs a directory containing:
<P
></P
><UL
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>modules.d</TT
></P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>modules.c</TT
></P
></LI
><LI
><P
ALIGN="justify"
><TT
CLASS="filename"
>clisp.h</TT
></P
></LI
></UL
>
<B
CLASS="command"
>clisp-link</B
> expects to find these files in a
subdirectory <TT
CLASS="filename"
>linkkit/</TT
> of the current directory.
This can be overridden by the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
> <VAR
CLASS="envar"
>CLISP_LINKKIT</VAR
>.</P
><P
ALIGN="justify"
><B
CLASS="command"
>clisp-link</B
> operates on <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="#linkset"
>linking set</A
>s and
 on <A
HREF="#modset"
>module set</A
>s.</P
><DIV
CLASS="formalpara"
><P
><A
NAME="linkset"
></A
><B
><A
HREF="#linkset"
>linking set</A
>. </B
>A <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#linkset"
>linking set</A
></I
></STRONG
>
   is a directory containing:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="filename"
>makevars</TT
></DT
><DD
><P
ALIGN="justify"
>some <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"
TARGET="_top"
><B
CLASS="command"
>/bin/sh</B
></A
> commands, setting the variables
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><VAR
CLASS="envar"
>CC</VAR
></DT
><DD
><P
ALIGN="justify"
>the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler
   </P
></DD
><DT
><VAR
CLASS="envar"
>CFLAGS</VAR
></DT
><DD
><P
ALIGN="justify"
>flags for the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler, when compiling
   </P
></DD
><DT
><VAR
CLASS="envar"
>CLFLAGS</VAR
></DT
><DD
><P
ALIGN="justify"
>flags for the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler, when linking
   </P
></DD
><DT
><VAR
CLASS="envar"
>LIBS</VAR
></DT
><DD
><P
ALIGN="justify"
>libraries to use when linking
   </P
></DD
><DT
><VAR
CLASS="envar"
>X_LIBS</VAR
></DT
><DD
><P
ALIGN="justify"
>additional <A
HREF="http://www.x.org/"
TARGET="_top"
>X Window System</A
> libraries to use
   </P
></DD
><DT
><VAR
CLASS="envar"
>RANLIB</VAR
></DT
><DD
><P
ALIGN="justify"
>the ranlib command
   </P
></DD
><DT
><VAR
CLASS="envar"
>FILES</VAR
></DT
><DD
><P
ALIGN="justify"
>the list of files needed when linking
   </P
></DD
></DL
></DIV
></P
></DD
><DT
><TT
CLASS="filename"
>modules.h</TT
></DT
><DD
><P
ALIGN="justify"
>the list of modules contained in this <A
HREF="#linkset"
>linking set</A
>
  </P
></DD
><DT
><TT
CLASS="filename"
>modules.o</TT
></DT
><DD
><P
ALIGN="justify"
>the compiled list of modules contained in this <A
HREF="#linkset"
>linking set</A
>
  </P
></DD
><DT
>all the <TT
CLASS="filename"
>FILES</TT
></DT
><DD
><P
ALIGN="justify"
>listed in <TT
CLASS="filename"
>makevars</TT
>
  </P
></DD
><DT
><TT
CLASS="filename"
>lisp.run</TT
></DT
><DD
><P
ALIGN="justify"
>the executable</P
></DD
><DT
><A
HREF="#image"
><TT
CLASS="filename"
>#P"lispinit.mem"</TT
></A
></DT
><DD
><P
ALIGN="justify"
>the <A
HREF="#image"
>memory image</A
></P
></DD
></DL
></DIV
></P
></DIV
><P
ALIGN="justify"
>To run a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> contained in some <A
HREF="#linkset"
>linking set</A
>
 <TT
CLASS="filename"
>dir</TT
>, call
 <B
CLASS="command"
><VAR
CLASS="replaceable"
>dir</VAR
>/lisp.run -M
 <VAR
CLASS="replaceable"
>dir</VAR
>/lispinit.mem</B
></P
><DIV
CLASS="formalpara"
><P
><A
NAME="modset"
></A
><B
><A
HREF="#modset"
>module set</A
>. </B
>A <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#modset"
>module set</A
></I
></STRONG
>
   is a directory containing:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><B
CLASS="command"
>link.sh</B
></DT
><DD
><P
ALIGN="justify"
>some <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"
TARGET="_top"
><B
CLASS="command"
>/bin/sh</B
></A
> commands, which prepare the directory
  before linking, and set the variables <VAR
CLASS="envar"
>NEW_FILES</VAR
>,
  <VAR
CLASS="envar"
>NEW_LIBS</VAR
>, <VAR
CLASS="envar"
>NEW_MODULES</VAR
>, <VAR
CLASS="envar"
>TO_LOAD</VAR
>
  and optionally <VAR
CLASS="envar"
>TO_PRELOAD</VAR
></P
></DD
><DT
>and any other files</DT
><DD
><P
ALIGN="justify"
>needed by <B
CLASS="command"
>link.sh</B
>
 </P
></DD
></DL
></DIV
></P
></DIV
><P
ALIGN="justify"
>Note that in <B
CLASS="command"
>link.sh</B
> the <A
HREF="#modset"
>module set</A
> directory
 is referred to as <VAR
CLASS="varname"
>$modulename/</VAR
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><VAR
CLASS="envar"
>NEW_FILES</VAR
></DT
><DD
><P
ALIGN="justify"
>the space-separated list of files that
  belong to the <A
HREF="#modset"
>module set</A
> and will belong to every new <A
HREF="#linkset"
>linking set</A
>.
 </P
></DD
><DT
><VAR
CLASS="envar"
>NEW_LIBS</VAR
></DT
><DD
><P
ALIGN="justify"
>the space-separated list of files or
  <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler switches that need to be passed to the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>
  compiler when linking the lisp.run belonging to a new <A
HREF="#linkset"
>linking set</A
>.
 </P
></DD
><DT
><VAR
CLASS="envar"
>NEW_MODULES</VAR
></DT
><DD
><P
ALIGN="justify"
>the space-separated list of the module names
  belonging to the <A
HREF="#modset"
>module set</A
>.  Normally, every <TT
CLASS="filename"
>#P".c"</TT
> file in the
  <A
HREF="#modset"
>module set</A
> defines a module of its own.  The module name is derived
  from the file name.</P
></DD
><DT
><VAR
CLASS="envar"
>TO_LOAD</VAR
></DT
><DD
><P
ALIGN="justify"
>the space-separated list of Lisp files to load
  before building the <A
HREF="#image"
><TT
CLASS="filename"
>#P"lispinit.mem"</TT
></A
> belonging to a new <A
HREF="#linkset"
>linking set</A
>.
 </P
></DD
><DT
><VAR
CLASS="envar"
>TO_PRELOAD</VAR
> (optional)</DT
><DD
><P
ALIGN="justify"
>the space-separated list of Lisp files to load
  into an intermediate <A
HREF="#image"
><TT
CLASS="filename"
>#P"lispinit.mem"</TT
></A
> file, before building the <A
HREF="#image"
><TT
CLASS="filename"
>#P"lispinit.mem"</TT
></A
>
  belonging to a new <A
HREF="#linkset"
>linking set</A
>.
  This variable is usually used for defining Lisp packages which must be
  present when the new <TT
CLASS="filename"
>#P".c"</TT
> files are initialized.  E.g., the
  <A
HREF="#def-call-in"
><CODE
CLASS="function"
>FFI:DEF-CALL-IN</CODE
></A
> functions must reside in already defined packages;
  see <A
HREF="#ex-call-in"
>the call-in example</A
>.
 </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The command <B
CLASS="command"
>clisp-link create-module-set
 <VAR
CLASS="replaceable"
>module-dir</VAR
>
 <VAR
CLASS="replaceable"
>file1.c</VAR
> ...</B
> creates a <A
HREF="#modset"
>module set</A
>
 in <VAR
CLASS="replaceable"
>module-dir</VAR
> which refers (via symbolic
 links) to <VAR
CLASS="replaceable"
>file1.c</VAR
> etc.  The files are
 expected to be modules of their own.</P
><P
ALIGN="justify"
>The command <B
CLASS="command"
>clisp-link add-module-set
 <VAR
CLASS="replaceable"
>module-dir</VAR
>
 <VAR
CLASS="replaceable"
>source-dir</VAR
>
 <VAR
CLASS="replaceable"
>destination-dir</VAR
></B
> combines a
 <A
HREF="#linkset"
>linking set</A
> in <VAR
CLASS="replaceable"
>source-dir</VAR
> and a module in
 <VAR
CLASS="replaceable"
>module-dir</VAR
> to a new <A
HREF="#linkset"
>linking set</A
>, in a
 directory <VAR
CLASS="replaceable"
>destination-dir</VAR
> which is newly
 created.</P
><P
ALIGN="justify"
>The command <B
CLASS="command"
>clisp-link run <VAR
CLASS="replaceable"
>source-dir</VAR
>
 <VAR
CLASS="replaceable"
>module-dir</VAR
> ...</B
> runs the <A
HREF="#linkset"
>linking set</A
>
 in <VAR
CLASS="replaceable"
>source-dir</VAR
>, with the module in
 <VAR
CLASS="replaceable"
>module-dir</VAR
> loaded.  More than one module can
 be specified.  If <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> has been built with the configuration option
 <VAR
CLASS="option"
>--with-dynamic-modules</VAR
>, the loading will be performed
 through dynamic loading.  Otherwise - this is much slower - a temporary
 <A
HREF="#linkset"
>linking set</A
> will be created and deleted afterwards.  Note that dynamic
 loading does not work on all operating systems, and that
 <VAR
CLASS="option"
>--with-dynamic-modules</VAR
> precludes some efficiency
 optimizations which are enabled by default.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="modinfo"
>30.2.2. Function <A
HREF="#modinfo"
><CODE
CLASS="function"
>EXT:MODULE-INFO</CODE
></A
></A
></H3
><P
ALIGN="justify"
>Function <TT
CLASS="sexp"
>(<A
HREF="#modinfo"
><CODE
CLASS="function"
>EXT:MODULE-INFO</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>name</VAR
>
  <VAR
CLASS="replaceable"
>verbose</VAR
>)</TT
> allows one to inquire
 about what modules are available in the currently running image.
 When called without arguments, it returns the list of module names,
 starting with <SPAN
CLASS="QUOTE"
>"clisp"</SPAN
>.  When <VAR
CLASS="replaceable"
>name</VAR
> is supplied and
 names a module, 3 values are returned - <VAR
CLASS="replaceable"
>name</VAR
>,
 <VAR
CLASS="replaceable"
>subr-count</VAR
>,
 <VAR
CLASS="replaceable"
>object-count</VAR
>.
 When <VAR
CLASS="replaceable"
>verbose</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the full list of
 module lisp function names written in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> (<SPAN
CLASS="type"
>Subr</SPAN
>s) and
 the full list of internal lisp objects available in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> code
 are additionally returned for the total of 5 values.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="mod-dynload"
>30.2.3. Function <A
HREF="#mod-dynload"
><CODE
CLASS="function"
>SYS::DYNLOAD-MODULES</CODE
></A
></A
></H3
><FONT
COLOR="RED"
>Platform dependent: some <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only, compiled <B
CLASS="emphasis"
>with</B
>
 compile-time flag <VAR
CLASS="option"
>--with-dynamic-modules</VAR
>.</FONT
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>Note that dynamic loading does not work on all operating systems
(<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html"
TARGET="_top"
><CODE
CLASS="function"
>dlopen</CODE
></A
> is required), and that <VAR
CLASS="option"
>--with-dynamic-modules</VAR
>
precludes some efficiency optimizations which are on by default.</P
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>Function <TT
CLASS="sexp"
>(<A
HREF="#mod-dynload"
><CODE
CLASS="function"
>SYS::DYNLOAD-MODULES</CODE
></A
> <VAR
CLASS="replaceable"
>filename</VAR
>
 ({<VAR
CLASS="replaceable"
>name</VAR
>}+))</TT
> loads a shared object file or library
 containing a number of named external <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> modules.
 This facility cannot be used to <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html"
TARGET="_top"
><CODE
CLASS="function"
>dlopen</CODE
></A
> and access arbitrary shared
 libraries.</P
><P
ALIGN="justify"
>External modules for <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> are those which contain a
 <TT
CLASS="literal"
>module__<VAR
CLASS="replaceable"
>name</VAR
>__subr_tab</TT
>, among others.
 This serves to register external functions which operate on
 Lisp-level structures with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
><P
ALIGN="justify"
>To use <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/dlopen.html"
TARGET="_top"
><CODE
CLASS="function"
>dlopen</CODE
></A
> with modules, you should add
 <VAR
CLASS="option"
>-fPIC</VAR
> to the module's compilation options.
 Something like <B
CLASS="command"
>cc -shared -o <VAR
CLASS="replaceable"
>name</VAR
>.so <VAR
CLASS="replaceable"
>name</VAR
>.o</B
>
 may be needed to produce the shared object file.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="mod-set-example"
>30.2.4. Example</A
></H3
><P
ALIGN="justify"
>To link in the <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> bindings for the <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
>/<A
HREF="http://www.linux.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Linux</B
></A
> operating
 system, the following steps are needed.  (Step 1 and step 2 need not be
 executed in this order.)</P
><P
></P
><OL
TYPE="1"
><LI
><P
ALIGN="justify"
>Create a new <A
HREF="#modset"
>module set</A
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>$ clisp-link create-module-set linux /<VAR
CLASS="replaceable"
>somewhere</VAR
>/bindings/linux.c</PRE
></TD
></TR
></TABLE
>

 Modify the newly created <TT
CLASS="filename"
>linux/link.sh</TT
> to add
 <VAR
CLASS="option"
>-lm</VAR
>; to the libraries: replace
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>NEW_LIBS="$file_list"</PRE
></TD
></TR
></TABLE
>
   with
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>NEW_LIBS="$file_list -lm"</PRE
></TD
></TR
></TABLE
>

   Modify the newly created <TT
CLASS="filename"
>linux/link.sh</TT
> to load
   <TT
CLASS="filename"
>linux.fas</TT
> before saving the <A
HREF="#image"
>memory image</A
>:
   replace
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>TO_LOAD=''</PRE
></TD
></TR
></TABLE
>
   with
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>TO_LOAD='/<VAR
CLASS="replaceable"
>somewhere</VAR
>/bindings/linux.fas'</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
ALIGN="justify"
>Compile <TT
CLASS="filename"
>linux.lisp</TT
>, creating
  <TT
CLASS="filename"
>linux.c</TT
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>$ clisp -c /<VAR
CLASS="replaceable"
>somewhere</VAR
>/bindings/linux.lisp</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
ALIGN="justify"
>Create a new <A
HREF="#linkset"
>linking set</A
>:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>$ clisp-link add-module-set linux base base+linux</PRE
></TD
></TR
></TABLE
></P
></LI
><LI
><P
ALIGN="justify"
>Run and try it:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>$ base+linux/lisp.run -M base+linux/lispinit.mem -x '(linux:stat "/tmp")'</PRE
></TD
></TR
></TABLE
></P
></LI
></OL
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="module-tools"
>30.2.5. Module tools</A
></H3
><P
ALIGN="justify"
>There are some tools to facilitate easy module writing.</P
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="modprep"
>30.2.5.1. Modprep</A
></H4
><P
ALIGN="justify"
>If your module is written in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>, you can pre-process your
 sources with <TT
CLASS="filename"
>modprep.lisp</TT
> in the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
 distribution and define lisp functions with the
 <CODE
CLASS="function"
>DEFUN</CODE
> macro:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;DEFUN(MY-PACKAGE:MY-FUNCTION-NAME, arg1 arg2 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> FOO BAR) {
  if (!boundp(STACK_0)) STACK_0 = fixnum(0); /* BAR */
  if (!boundp(STACK_1)) STACK_1 = fixnum(1); /* FOO */
  pushSTACK(`MY-PACKAGE::SOME-SYMBOL`); /* create a symbol in the package */
  pushSTACK(`#(:THIS :IS :A :VECTOR)`); /* some vector, created once */
  pushSTACK(``MY-PACKAGE::MY-FUNCTION-NAME``); /* double '' means FUNCTION */
  VALUES1(listof(7)); /* cons up a new list and clean up the STACK */
}</PRE
></TD
></TR
></TABLE
>
Then <TT
CLASS="sexp"
>(MY-PACKAGE:MY-FUNCTION-NAME 'A 12 :FOO
 T)</TT
> will return <TT
CLASS="sexp"
>(A 12 T 0
 MY-PACKAGE::SOME-SYMBOL #(:THIS :IS :A :VECTOR)
 #&#60;ADD-ON-SYSTEM-FUNCTION MY-PACKAGE:MY-FUNCTION-NAME&#62;)</TT
>
(assuming you <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_export.html"
TARGET="_top"
><CODE
CLASS="function"
>EXPORT</CODE
></A
>ed <TT
CLASS="literal"
>MY-FUNCTION-NAME</TT
> from
 <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"MY-PACKAGE"</SPAN
></STRONG
>).</P
><P
ALIGN="justify"
>Another useful macro is <CODE
CLASS="function"
>DEFVAR</CODE
> which lets
 you create a GC-visible object.</P
><P
ALIGN="justify"
>See <TT
CLASS="filename"
>modules/syscalls</TT
> and other included
 modules for more examples and file <TT
CLASS="filename"
>modprep.lisp</TT
>
 for full documentation.</P
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>If you manipulate Lisp objects, you need to watch for
  <A
HREF="#gc-safety"
>GC-safety</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="exporting"
>30.2.5.2. Exporting</A
></H4
><P
ALIGN="justify"
>If your module uses <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> to interface to a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> library,
 you might want to make your module package
 <A
HREF="#make-pack"
>case-sensitive</A
> and use
 <TT
CLASS="filename"
>exporting.lisp</TT
> in the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> distribution to
 make all <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> forms export the symbols they define.
 See <TT
CLASS="filename"
>modules/netica</TT
>
 and <TT
CLASS="filename"
>modules/bindings/*</TT
> for examples.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="included-modules"
>30.2.6. Modules included in the distribution.</A
></H3
><P
ALIGN="justify"
>The following modules come with the distribution of
<A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>:</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>bindings</DT
><DD
><P
ALIGN="justify"
>Call the operating system functions from <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.
    The following platforms are supported:
   <P
></P
><UL
><LI
><P
ALIGN="justify"
><A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.linux.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Linux</B
></A
>/<A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/software/libc/"
TARGET="_top"
>libc</A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
></P
></LI
></UL
></P
></DD
><DT
><A
HREF="http://www.cliki.net/CLX"
TARGET="_top"
><B
CLASS="command"
>CLX</B
></A
></DT
><DD
><P
ALIGN="justify"
>Call
    <A
HREF="http://www.the-labs.com/X11/XLib-Manual/"
TARGET="_top"
>Xlib</A
>
    functions from <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.  Two implementations are supplied:
   <P
></P
><UL
><LI
><P
ALIGN="justify"
>mit-clx, from MIT
     <A
HREF="ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z"
TARGET="_top"
>ftp://ftp.x.org/R5contrib/CLX.R5.02.tar.Z</A
>
     - the standard implementation</P
></LI
><LI
><P
ALIGN="justify"
>new-clx, by Gilbert Baumann
      - faster, with additional features, but not quite complete yet.
    </P
></LI
></UL
></P
></DD
><DT
>oracle</DT
><DD
><P
ALIGN="justify"
>Access
    <A
HREF="http://www.oracle.com/"
TARGET="_top"
>Oracle</A
> from <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>;
    by John Hinsdale.</P
></DD
><DT
>fastcgi</DT
><DD
><P
ALIGN="justify"
>Access
    <A
HREF="http://www.fastcgi.com/"
TARGET="_top"
>FastCGI</A
> from <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>;
    by John Hinsdale.</P
></DD
><DT
><A
HREF="#netica"
>netica</A
></DT
><DD
><P
ALIGN="justify"
>Work with Bayesian belief networks and influence
    diagrams using
    <A
HREF="http://norsys.com/netica_c_api.htm"
TARGET="_top"
>Netica</A
>.
 </P
></DD
><DT
>postgresql</DT
><DD
><P
ALIGN="justify"
>Access
    <A
HREF="http://www.PostgreSQL.org/"
TARGET="_top"
>PostgreSQL</A
> from <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.
  </P
></DD
><DT
>queens</DT
><DD
><P
ALIGN="justify"
>Compute the number of solutions to the n-queens
    problem on a n*n checkboard (a toy example for the users to
    explore).</P
></DD
><DT
><A
HREF="#dir-key"
>dirkey</A
></DT
><DD
><P
ALIGN="justify"
>Directory Access</P
></DD
><DT
><A
HREF="#berkeley-db"
>berkeley-db</A
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.sleepycat.com/docs/index.html"
TARGET="_top"
>Berkeley DB from Sleepycat Software</A
>
    interface</P
></DD
><DT
><A
HREF="#regexp"
>regexp</A
></DT
><DD
><P
ALIGN="justify"
>The <A
HREF="regexp.html"
TARGET="_top"
>POSIX Regular
   Expressions</A
> matching, compiling, executing.
 </P
></DD
><DT
><A
HREF="#pcre"
>pcre</A
></DT
><DD
><P
ALIGN="justify"
>The <A
HREF="http://www.pcre.org/"
TARGET="_top"
>Perl
     Compatible Regular Expressions</A
> matching, compiling,
    executing.</P
></DD
><DT
><A
HREF="#syscalls"
>syscalls</A
></DT
><DD
><P
ALIGN="justify"
>Use some system calls in a platform-independent way.
 </P
></DD
><DT
><A
HREF="wildcard.html"
TARGET="_top"
>wildcard</A
></DT
><DD
><P
ALIGN="justify"
>Shell (<A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"
TARGET="_top"
><B
CLASS="command"
>/bin/sh</B
></A
>) globbing</P
></DD
></DL
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="netica"
>30.2.6.1. Netica Interface</A
></H4
><P
ALIGN="justify"
>This is an interface to the
 <A
HREF="http://norsys.com/netica_c_api.htm"
TARGET="_top"
>Netica C API</A
>.
 The package <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"NETICA"</SPAN
></STRONG
> is
 <A
HREF="#make-pack"
>case-sensitive</A
>, you would write
 <TT
CLASS="sexp"
>(netica:GetNodeExpectedUtils_bn ...)</TT
>
 when you need to call
 <A
HREF="http://norsys.com/onLineAPIManual/functions/GetNodeExpectedUtils_bn.html"
TARGET="_top"
><CODE
CLASS="function"
>GetNodeExpectedUtils_bn()</CODE
></A
>
</P
><P
ALIGN="justify"
>Additionally, some higher level functionality is available
 (see <TT
CLASS="filename"
>modules/netica/demo.lisp</TT
> for a sample
 usage):</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(netica:start-netica <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :license :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
>Call
   <A
HREF="http://norsys.com/onLineAPIManual/functions/NewNeticaEnviron_ns.html"
TARGET="_top"
><CODE
CLASS="function"
>NewNeticaEnviron_ns()</CODE
></A
> and
   <A
HREF="http://norsys.com/onLineAPIManual/functions/InitNetica_bn.html"
TARGET="_top"
><CODE
CLASS="function"
>InitNetica_bn()</CODE
></A
>
   and print some statistics; initialize
   <VAR
CLASS="varname"
>netica:*env*</VAR
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:check-errors <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :env :clear :severity)</TT
></DT
><DD
><P
ALIGN="justify"
>Show and, optionally,
   <A
HREF="http://norsys.com/onLineAPIManual/functions/ClearError_ns.html"
TARGET="_top"
>clear</A
>, the errors of
   the given <A
HREF="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html"
TARGET="_top"
>severity</A
>
   and above.  You should call this function
   after <I
CLASS="emphasis"
>every</I
> call to a Netica function.
   Every wrapper function in this list calls it, so you do <I
CLASS="emphasis"
>not</I
> need to
   call it after a call to a wrapper function.
</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:error-message
   error)</TT
></DT
><DD
><P
ALIGN="justify"
>Convert netica error to a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> containing
   <A
HREF="http://norsys.com/onLineAPIManual/functions/ErrorCategory_ns.html"
TARGET="_top"
>error category</A
>,
   <A
HREF="http://norsys.com/onLineAPIManual/functions/ErrorSeverity_ns.html"
TARGET="_top"
>error severity</A
>,
   <A
HREF="http://norsys.com/onLineAPIManual/functions/ErrorNumber_ns.html"
TARGET="_top"
>error number</A
>,
   <A
HREF="http://norsys.com/onLineAPIManual/functions/ErrorMessage_ns.html"
TARGET="_top"
>error message</A
>.
</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:close-netica <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :env :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
>Terminate the netica session.
   Sets <VAR
CLASS="varname"
>netica:*env*</VAR
> to <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> when it was closed.
</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:make-net <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :name
   :comment :title :env :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
>Make a <A
HREF="http://norsys.com/onLineAPIManual/functions/NewNet_bn.html"
TARGET="_top"
>new
    network</A
> with a given name,
   <A
HREF="http://norsys.com/onLineAPIManual/functions/SetNetTitle_bn.html"
TARGET="_top"
>title</A
> and
   <A
HREF="http://norsys.com/onLineAPIManual/functions/SetNetComment_bn.html"
TARGET="_top"
>comment</A
>
   and return it.</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:net-info net)</TT
></DT
><DD
><P
ALIGN="justify"
>Print some information about the net
   (<A
HREF="http://norsys.com/onLineAPIManual/functions/GetNetName_bn.html"
TARGET="_top"
>name</A
>,
    <A
HREF="http://norsys.com/onLineAPIManual/functions/GetNetTitle_bn.html"
TARGET="_top"
>title</A
>,
    <A
HREF="http://norsys.com/onLineAPIManual/functions/GetNetComment_bn.html"
TARGET="_top"
>comment</A
>,
    <A
HREF="http://norsys.com/onLineAPIManual/functions/GetNetFileName_bn.html"
TARGET="_top"
>file name</A
> and
    <A
HREF="http://norsys.com/onLineAPIManual/functions/GetNetNodes_bn.html"
TARGET="_top"
>nodes</A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:make-node <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :name :net :kind :levels :states :num-states :title :comment :parents
   :cpt :x :y :env :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
>Make a <A
HREF="http://norsys.com/onLineAPIManual/functions/NewNode_bn.html"
TARGET="_top"
>new
    node</A
> with the given name and many other parameters.
</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:node-info node
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :header)</TT
></DT
><DD
><P
ALIGN="justify"
>Print some information about the node, preceded by
   the header.</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:get-beliefs node
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :env :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://norsys.com/onLineAPIManual/functions/GetNodeBeliefs_bn.html"
TARGET="_top"
>Get
    the belief vector</A
> for the node.
</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:enter-finding net node
   state <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :env :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://norsys.com/onLineAPIManual/functions/EnterFinding_bn.html"
TARGET="_top"
>Enter a
    finding</A
> by
   <A
HREF="http://norsys.com/onLineAPIManual/functions/NodeNamed_bn.html"
TARGET="_top"
>node</A
>
   and <A
HREF="http://norsys.com/onLineAPIManual/functions/StateNamed_bn.html"
TARGET="_top"
>state</A
>
   names.</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:save-net net <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :file :env :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://norsys.com/onLineAPIManual/functions/WriteNet_bn.html"
TARGET="_top"
>Write</A
>
   a network to a file.</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:read-net file <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :env :verbose)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://norsys.com/onLineAPIManual/functions/ReadNet_bn.html"
TARGET="_top"
>Read</A
>
   a network from a file.</P
></DD
><DT
><TT
CLASS="sexp"
>(netica:with-open-dne-file (var
   file <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> opts) <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> body)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://norsys.com/onLineAPIManual/functions/NewStreamFile_ns.html"
TARGET="_top"
>Open
    a netica stream</A
>, execute <VAR
CLASS="replaceable"
>body</VAR
>,
   <A
HREF="http://norsys.com/onLineAPIManual/functions/DeleteStream_ns.html"
TARGET="_top"
>close the stream</A
>
   - just like <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_with-open-file.html"
TARGET="_top"
><CODE
CLASS="function"
>WITH-OPEN-FILE</CODE
></A
>.</P
></DD
><DT
><VAR
CLASS="varname"
>netica:*verbose*</VAR
></DT
><DD
><P
ALIGN="justify"
>The log <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>; the default value for
   the <TT
CLASS="literal"
>:VERBOSE</TT
> argument.
</P
></DD
><DT
><VAR
CLASS="varname"
>netica:*license*</VAR
></DT
><DD
><P
ALIGN="justify"
>The license key provided by
   <A
HREF="http://norsys.com/"
TARGET="_top"
>Norsys</A
>; the default value
   for the <TT
CLASS="literal"
>:LICENSE</TT
> argument.
</P
></DD
><DT
><VAR
CLASS="varname"
>netica:*env*</VAR
></DT
><DD
><P
ALIGN="justify"
>The Netica environment object; the default value
   for the <TT
CLASS="literal"
>:ENV</TT
> argument.
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="dir-key"
>30.2.6.2. Directory Access</A
></H4
><P
ALIGN="justify"
>This module provides some directory access from lisp,
 in package <A
HREF="#dir-key"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"LDAP"</SPAN
></STRONG
></A
>.  3 types of directory keys
 may exist, depending on the compilation environment.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>valid directory key types</B
></P
><DL
><DT
>:win32</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> registry access
  </P
></DD
><DT
>:gnome</DT
><DD
><P
ALIGN="justify"
><A
HREF="http://developer.gnome.org/doc/API/libgnome/gnome-gnome-config.html"
TARGET="_top"
>gnome-config</A
> access
  </P
></DD
><DT
>:ldap</DT
><DD
><P
ALIGN="justify"
>LDAP interface via
   <A
HREF="http://www.openldap.org"
TARGET="_top"
>OpenLDAP</A
> or compatible
  </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The following functions and macros are exported (please note that
these features are experimental and the API may be modified in the
future).</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="dir-key-open"
></A
><TT
CLASS="sexp"
>(<A
HREF="#dir-key-open"
><CODE
CLASS="function"
>LDAP:DIR-KEY-OPEN</CODE
></A
>
   <VAR
CLASS="replaceable"
>dkey</VAR
> <VAR
CLASS="replaceable"
>pathname</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> (<CODE
CLASS="constant"
>:DIRECTION</CODE
> <CODE
CLASS="constant"
>:INPUT</CODE
>)
   <CODE
CLASS="constant"
>:IF-DOES-NOT-EXIST</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Open the directory key under <VAR
CLASS="replaceable"
>dkey</VAR
>, which should
   be either an open directory key or a valid <A
HREF="#dir-key-type"
>directory key type</A
>.
   The meaning of the <CODE
CLASS="constant"
>:DIRECTION</CODE
> and <CODE
CLASS="constant"
>:IF-DOES-NOT-EXIST</CODE
> keyword
   arguments is the same as for <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN</CODE
></A
>.</P
></DD
><DT
><A
NAME="dir-key-close"
></A
><TT
CLASS="sexp"
>(<A
HREF="#dir-key-close"
><CODE
CLASS="function"
>LDAP:DIR-KEY-CLOSE</CODE
></A
> <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Close the directory key.  The preferred way is to
   use the <A
HREF="#with-dir-key-open"
><CODE
CLASS="function"
>LDAP:WITH-DIR-KEY-OPEN</CODE
></A
> macro.</P
></DD
><DT
><A
NAME="with-dir-key-open"
></A
><TT
CLASS="sexp"
>(<A
HREF="#with-dir-key-open"
><CODE
CLASS="function"
>LDAP:WITH-DIR-KEY-OPEN</CODE
></A
> (<VAR
CLASS="replaceable"
>variable</VAR
> <VAR
CLASS="replaceable"
>dkey</VAR
> <VAR
CLASS="replaceable"
>pathname</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
>
    {<VAR
CLASS="replaceable"
>option</VAR
>}*) <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> <VAR
CLASS="replaceable"
>body</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Open the directory key (by calling <A
HREF="#dir-key-open"
><CODE
CLASS="function"
>LDAP:DIR-KEY-OPEN</CODE
></A
>
   on <VAR
CLASS="replaceable"
>dkey</VAR
>, <VAR
CLASS="replaceable"
>pathname</VAR
> and <VAR
CLASS="replaceable"
>option</VAR
>s), bind it to <VAR
CLASS="replaceable"
>variable</VAR
>,
   execute <VAR
CLASS="replaceable"
>body</VAR
>, then close it with <A
HREF="#dir-key-close"
><CODE
CLASS="function"
>LDAP:DIR-KEY-CLOSE</CODE
></A
>.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-TYPE</CODE
> <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the <A
HREF="#dir-key-type"
>directory key type</A
> of the directory key
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-PATH</CODE
>
                <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the path of this directory key, which is the
   <VAR
CLASS="replaceable"
>pathname</VAR
> argument of <A
HREF="#dir-key-open"
><CODE
CLASS="function"
>LDAP:DIR-KEY-OPEN</CODE
></A
> if <VAR
CLASS="replaceable"
>dkey</VAR
> was a <A
HREF="#dir-key-type"
>directory key type</A
> or the
   concatenation of the <VAR
CLASS="replaceable"
>pathname</VAR
> argument and the
   <CODE
CLASS="function"
>ldap:dir-key-path</CODE
> of <VAR
CLASS="replaceable"
>dkey</VAR
>.
   </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-DIRECTION</CODE
> <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>One of <CODE
CLASS="constant"
>:INPUT</CODE
>, <CODE
CLASS="constant"
>:OUTPUT</CODE
> and <CODE
CLASS="constant"
>:IO</CODE
>, indicating
   the permitted operation on this key and its derivatives.
   </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-CLOSED-P</CODE
> <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Check whether the key has been closed.
   It is not an error to close a closed key.
   </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-SUBKEY-DELETE</CODE
>
     <VAR
CLASS="replaceable"
>dkey</VAR
> <VAR
CLASS="replaceable"
>subkey</VAR
>)</TT
>
   <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-VALUE-DELETE</CODE
>
     <VAR
CLASS="replaceable"
>dkey</VAR
> <VAR
CLASS="replaceable"
>attribute</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Delete the specified subkey or attribute.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-SUBKEY</CODE
> <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
>
  <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-ATTRIBUTES</CODE
>
                <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the list of the subkeys or attributes.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-VALUE</CODE
> <VAR
CLASS="replaceable"
>dkey</VAR
>
    <VAR
CLASS="replaceable"
>attribute</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
    <VAR
CLASS="replaceable"
>default</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the value of the specified attribute,
   similar to <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_gethash.html"
TARGET="_top"
><CODE
CLASS="function"
>GETHASH</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>able just like <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_gethash.html"
TARGET="_top"
><CODE
CLASS="function"
>GETHASH</CODE
></A
>.
   </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>LDAP:DIR-KEY-INFO</CODE
> <VAR
CLASS="replaceable"
>dkey</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return some information about the directory key.
   This is highly platform-dependent and will probably be removed or
   replaced or modified in the future.</P
></DD
><DT
><A
NAME="with-dir-key-search"
></A
><TT
CLASS="sexp"
>(<A
HREF="#with-dir-key-search"
><CODE
CLASS="function"
>LDAP:WITH-DIR-KEY-SEARCH</CODE
></A
> (<VAR
CLASS="replaceable"
>key-iter</VAR
>
                 <VAR
CLASS="replaceable"
>atribute-iter</VAR
>
                 <VAR
CLASS="replaceable"
>dkey</VAR
> <VAR
CLASS="replaceable"
>pathname</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:scope</CODE
>)
                 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> <VAR
CLASS="replaceable"
>body</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This is the main way to iterate over the subtree
   under the key <VAR
CLASS="replaceable"
>dkey</VAR
>+<VAR
CLASS="replaceable"
>pathname</VAR
>.</P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>key-iter</VAR
> is a non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> symbol
    and is bound via <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_fletcm_scm_macrolet.html"
TARGET="_top"
><CODE
CLASS="function"
>MACROLET</CODE
></A
> to a macro, each call of which returns
    the next subkey.</P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>atribute-iter</VAR
> is a symbol and is
    bound, when non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, to a macro, each call of which returns two
   values - the next attribute and its value.</P
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:scope</CODE
> keyword argument specifies the
    scope of the search and can be
   <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:self</CODE
></DT
><DD
><P
ALIGN="justify"
>iterate over the key itself
     </P
></DD
><DT
><CODE
CLASS="constant"
>:level</CODE
></DT
><DD
><P
ALIGN="justify"
>iterate over the children of the key
     </P
></DD
><DT
><CODE
CLASS="constant"
>:tree</CODE
></DT
><DD
><P
ALIGN="justify"
>iterate over the subtree
     </P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
><A
HREF="#with-dir-key-search"
><CODE
CLASS="function"
>LDAP:WITH-DIR-KEY-SEARCH</CODE
></A
> is used to implement
    <CODE
CLASS="function"
>LDAP:DIR-KEY-VALUES</CODE
>,
    <CODE
CLASS="function"
>LDAP:DIR-KEY-CHILDREN</CODE
> and
    <CODE
CLASS="function"
>LDAP:DIR-KEY-DUMP-TREE</CODE
> in
    <TT
CLASS="filename"
>dirkey.lisp</TT
>.
    </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="berkeley-db"
>30.2.6.3. Berkeley DB access.</A
></H4
><P
ALIGN="justify"
>This interface to <A
HREF="http://www.sleepycat.com/docs/index.html"
TARGET="_top"
>Berkeley DB from Sleepycat Software</A
> exports almost all
 functions in the official <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> API.</P
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17542"
>30.2.6.3.1. Database Environment</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(BDB:DB-VERSION)</TT
></DT
><DD
><P
ALIGN="justify"
>Return version information as 4 values: descriptive
    <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> and 3 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>s: major, minor and patch number (<A
HREF="http://www.sleepycat.com/docs/api_c/env_version.html"
TARGET="_top"
><CODE
CLASS="function"
>db_version</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:ENV-CREATE <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
    :PASSWORD :ENCRYPT :HOST :CLIENT-TIMEOUT :SERVER-TIMEOUT)</TT
></DT
><DD
><P
ALIGN="justify"
>Create an environment handle (<A
HREF="http://www.sleepycat.com/docs/api_c/env_create.html"
TARGET="_top"
><CODE
CLASS="function"
>db_env_create</CODE
></A
>),
    possibly connecting to a remote host (<A
HREF="http://www.sleepycat.com/docs/api_c/env_set_rpc_server.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;set_rpc_server</CODE
></A
>) and
    possibly using encryption with password (<A
HREF="http://www.sleepycat.com/docs/api_c/env_set_encrypt.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;set_encrypt</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:ENV-CLOSE dbe)</TT
></DT
><DD
><P
ALIGN="justify"
>Close an environment (<A
HREF="http://www.sleepycat.com/docs/api_c/env_close.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;close</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DBREMOVE dbe file
    database <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :TRANSACTION :AUTO-COMMIT)</TT
></DT
><DD
><P
ALIGN="justify"
>Remove a database (<A
HREF="http://www.sleepycat.com/docs/api_c/env_dbremove.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;dbremove</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DBREMOVE dbe file
    database newname <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :TRANSACTION :AUTO-COMMIT)</TT
></DT
><DD
><P
ALIGN="justify"
>Rename a database (<A
HREF="http://www.sleepycat.com/docs/api_c/env_dbrename.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;dbrename</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:ENV-OPEN dbe <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
    :HOME :JOIN :INIT-CDB :INIT-LOCK :INIT-LOG :INIT-MPOOL :INIT-TXN
    :RECOVER :RECOVER-FATAL :USE-ENVIRON :USE-ENVIRON-ROOT :CREATE
    :LOCKDOWN :PRIVATE :SYSTEM-MEM :THREAD :MODE)</TT
></DT
><DD
><P
ALIGN="justify"
>Open an environment (<A
HREF="http://www.sleepycat.com/docs/api_c/env_open.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;open</CODE
></A
>).
 </P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:ENV-REMOVE dbe <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
    :HOME :FORCE :USE-ENVIRON :USE-ENVIRON-ROOT)</TT
></DT
><DD
><P
ALIGN="justify"
>Destroy an environment (<A
HREF="http://www.sleepycat.com/docs/api_c/env_remove.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;remove</CODE
></A
>).
 </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17612"
>30.2.6.3.2. Environment Configuration</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(BDB:ENV-SET-OPTIONS dbe
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :DATA-DIR :TMP-DIR :AUTO-COMMIT :CDB-ALLDB :DIRECT-DB
   :DIRECT-LOG :NOLOCKING :NOMMAP :NOPANIC :OVERWRITE :PANIC-ENVIRONMENT
   :REGION-INIT :TXN-NOSYNC :TXN-WRITE-NOSYNC :YIELDCPU :VERB-CHKPOINT
   :VERB-DEADLOCK :VERB-RECOVERY :VERB-REPLICATION :VERB-WAITSFOR
   :VERBOSE)</TT
></DT
><DD
><P
ALIGN="justify"
>Set some environment options using <A
HREF="http://www.sleepycat.com/docs/api_c/env_set_flags.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;set_flags</CODE
></A
>,
   <A
HREF="http://www.sleepycat.com/docs/api_c/env_set_verbose.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;set_verbose</CODE
></A
>, <A
HREF="http://www.sleepycat.com/docs/api_c/env_set_tmp_dir.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;set_tmp_dir</CODE
></A
> and <A
HREF="http://www.sleepycat.com/docs/api_c/env_set_data_dir.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;set_data_dir</CODE
></A
>.
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17630"
>30.2.6.3.3. Database Operations</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(BDB:DB-CREATE dbe <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :XA)</TT
></DT
><DD
><P
ALIGN="justify"
>Create a database handle (<A
HREF="http://www.sleepycat.com/docs/api_c/db_create.html"
TARGET="_top"
><CODE
CLASS="function"
>db_create</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-CLOSE dbe <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :NOSYNC)</TT
></DT
><DD
><P
ALIGN="justify"
>Close a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_close.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;close</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-DEL dbe key <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :TRANSACTION :AUTO-COMMIT)</TT
></DT
><DD
><P
ALIGN="justify"
>Delete items from a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_del.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;del</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-FD db)</TT
></DT
><DD
><P
ALIGN="justify"
>Return a file descriptor from a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_fd.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;fd</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-GET db key <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :CONSUME :CONSUME-WAIT :DIRTY-READ :RMW :TRANSACTION)</TT
></DT
><DD
><P
ALIGN="justify"
>Get items from a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_get.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;get</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-PUT db key val
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :APPEND :NODUPDATA :NOOVERWRITE :AUTO-COMMIT
   :TRANSACTION)</TT
></DT
><DD
><P
ALIGN="justify"
>Store items into a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_put.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;put</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-STAT db <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :FAST-STAT)</TT
></DT
><DD
><P
ALIGN="justify"
>Return database statistics (<A
HREF="http://www.sleepycat.com/docs/api_c/db_get_byteswapped.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;get_byteswapped</CODE
></A
>,
   <A
HREF="http://www.sleepycat.com/docs/api_c/db_get_type.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;get_type</CODE
></A
>, <A
HREF="http://www.sleepycat.com/docs/api_c/db_stat.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;stat</CODE
></A
>).</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-OPEN db file <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :DATABASE :TYPE :MODE :CREATE :DIRTY-READ :EXCL :NOMMAP :RDONLY
   :THREAD :TRUNCATE :AUTO-COMMIT :TRANSACTION)</TT
></DT
><DD
><P
ALIGN="justify"
>Open a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_open.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;open</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-SYNC db)</TT
></DT
><DD
><P
ALIGN="justify"
>Flush a database to stable storage (<A
HREF="http://www.sleepycat.com/docs/api_c/db_sync.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;sync</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-TRUNCATE db <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :TRANSACTION :AUTO-COMMIT)</TT
></DT
><DD
><P
ALIGN="justify"
>Empty a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_truncate.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;truncate</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-UPGRADE, db file
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :DUPSORT)</TT
></DT
><DD
><P
ALIGN="justify"
>Upgrade a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_upgrade.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;upgrade</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-RENAME db file database
   newname)</TT
></DT
><DD
><P
ALIGN="justify"
>Rename a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_rename.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;rename</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:DB-REMOVE db file
   database)</TT
></DT
><DD
><P
ALIGN="justify"
>Remove a database (<A
HREF="http://www.sleepycat.com/docs/api_c/db_remove.html"
TARGET="_top"
><CODE
CLASS="function"
>DB-&#62;remove</CODE
></A
>).
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17746"
>30.2.6.3.4. Database Configuration</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17754"
>30.2.6.3.5. Btree/Recno Configuration</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17762"
>30.2.6.3.6. Hash/Queue Configuration</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17770"
>30.2.6.3.7. Database Cursor Operations</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17778"
>30.2.6.3.8. Lock Subsystem</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17786"
>30.2.6.3.9. Log Subsystem</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17794"
>30.2.6.3.10. Log Cursor Operations</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17802"
>30.2.6.3.11. Log Sequence Numbers</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17810"
>30.2.6.3.12. Memory Pool Subsystem</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17818"
>30.2.6.3.13. Transaction Subsystem</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(BDB:TXN-BEGIN dbe <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :PARENT :DIRTY-READ :NOSYNC :NOWAIT :SYNC)</TT
></DT
><DD
><P
ALIGN="justify"
>Begin a transaction (<A
HREF="http://www.sleepycat.com/docs/api_c/txn_begin.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_ENV-&#62;txn_begin</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:TXN-ABORT txn)</TT
></DT
><DD
><P
ALIGN="justify"
>Abort a transaction (<A
HREF="http://www.sleepycat.com/docs/api_c/txn_abort.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_TXN-&#62;abort</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:TXN-COMMIT txn <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   :NOSYNC :SYNC)</TT
></DT
><DD
><P
ALIGN="justify"
>Commit a transaction (<A
HREF="http://www.sleepycat.com/docs/api_c/txn_commit.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_TXN-&#62;commit</CODE
></A
>).
</P
></DD
><DT
><TT
CLASS="sexp"
>(BDB:TXN-DISCARD txn)</TT
></DT
><DD
><P
ALIGN="justify"
>Discard a transaction (<A
HREF="http://www.sleepycat.com/docs/api_c/txn_discard.html"
TARGET="_top"
><CODE
CLASS="function"
>DB_TXN-&#62;discard</CODE
></A
>).
</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17853"
>30.2.6.3.14. Replication</A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H5
CLASS="section"
><A
NAME="AEN17861"
>30.2.6.3.15. </A
></H5
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>()</TT
></DT
><DD
><P
ALIGN="justify"
></P
></DD
></DL
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="regexp"
>30.2.6.4. <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="#regexp"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"REGEXP"</SPAN
></STRONG
></A
> module</A
></H4
><P
ALIGN="justify"
>The <A
HREF="#regexp"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"REGEXP"</SPAN
></STRONG
></A
> module implements the
 <A
HREF="regexp.html"
TARGET="_top"
>POSIX regular expressions</A
>
by calling the standard <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> system facilities.
The syntax of these regular expressions is described in many places,
such as your local <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html"
TARGET="_top"
><TT
CLASS="filename"
>regex.h</TT
></A
> manual and <A
HREF="http://www.gnu.org/software/emacs/"
TARGET="_top"
>Emacs</A
> info pages.</P
><P
ALIGN="justify"
>The <A
HREF="#regexp"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"REGEXP"</SPAN
></STRONG
></A
> package exports the following 9 symbols:</P
><P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><A
HREF="#re-match"
><CODE
CLASS="function"
>REGEXP:MATCH</CODE
></A
></TD
><TD
><A
HREF="#re-match-start"
><CODE
CLASS="function"
>REGEXP:MATCH-START</CODE
></A
></TD
><TD
><A
HREF="#re-match-end"
><CODE
CLASS="function"
>REGEXP:MATCH-END</CODE
></A
></TD
></TR
><TR
><TD
><A
HREF="#re-match-string"
><CODE
CLASS="function"
>REGEXP:MATCH-STRING</CODE
></A
></TD
><TD
><A
HREF="#re-regexp-quote"
><CODE
CLASS="function"
>REGEXP:REGEXP-QUOTE</CODE
></A
></TD
><TD
><A
HREF="#re-regexp-compile"
><CODE
CLASS="function"
>REGEXP:REGEXP-COMPILE</CODE
></A
></TD
></TR
><TR
><TD
><A
HREF="#re-regexp-exec"
><CODE
CLASS="function"
>REGEXP:REGEXP-EXEC</CODE
></A
></TD
><TD
><A
HREF="#re-regexp-split"
><CODE
CLASS="function"
>REGEXP:REGEXP-SPLIT</CODE
></A
></TD
><TD
><A
HREF="#re-with-loop-split"
><CODE
CLASS="function"
>REGEXP:WITH-LOOP-SPLIT</CODE
></A
></TD
></TR
></TBODY
></TABLE
><P
></P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>API</B
></P
><DL
><DT
><A
NAME="re-match"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-match"
><CODE
CLASS="function"
>REGEXP:MATCH</CODE
></A
> <VAR
CLASS="replaceable"
>pattern</VAR
> <VAR
CLASS="replaceable"
>string</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   (<CODE
CLASS="constant"
>:START</CODE
> 0) <CODE
CLASS="constant"
>:END</CODE
> <A
HREF="#re-cflags"
><CODE
CLASS="constant"
>:EXTENDED</CODE
> <CODE
CLASS="constant"
>:IGNORE-CASE</CODE
> <CODE
CLASS="constant"
>:NEWLINE</CODE
> <CODE
CLASS="constant"
>:NOSUB</CODE
></A
> <A
HREF="#re-eflags"
><CODE
CLASS="constant"
>:NOTBOL</CODE
> <CODE
CLASS="constant"
>:NOTEOL</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This macro returns as first value a <CODE
CLASS="classname"
>REGEXP:MATCH</CODE
> structure
  containing the indices of the start and end of the first match for the
  regular expression <VAR
CLASS="replaceable"
>pattern</VAR
> in <VAR
CLASS="replaceable"
>string</VAR
>;
  or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if there is no match.
  Additionally, a <CODE
CLASS="classname"
>REGEXP:MATCH</CODE
> structure is returned for every matched
  <TT
CLASS="literal"
>"\(...\)"</TT
> group in <VAR
CLASS="replaceable"
>pattern</VAR
>, in the
  order that the open parentheses appear in <VAR
CLASS="replaceable"
>pattern</VAR
>.
  If <VAR
CLASS="replaceable"
>start</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the search starts at that index in <VAR
CLASS="replaceable"
>string</VAR
>.
  If <VAR
CLASS="replaceable"
>end</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, only <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_subseq.html"
TARGET="_top"
><CODE
CLASS="function"
>SUBSEQ</CODE
></A
>
  <VAR
CLASS="replaceable"
>string</VAR
> <VAR
CLASS="replaceable"
>start</VAR
> <VAR
CLASS="replaceable"
>end</VAR
>)</TT
> is considered.
  <DIV
CLASS="example"
><A
NAME="ex-re-match"
></A
><P
><B
>Example 30-1. <A
HREF="#re-match"
><CODE
CLASS="function"
>REGEXP:MATCH</CODE
></A
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;    (<A
HREF="#re-match"
><CODE
CLASS="function"
>REGEXP:MATCH</CODE
></A
> "quick" "The quick brown fox jumped quickly.")
     <TT
CLASS="sexp"
>#S(<CODE
CLASS="classname"
>REGEXP:MATCH</CODE
> :START 4 :END 9)</TT
>
    (<A
HREF="#re-match"
><CODE
CLASS="function"
>REGEXP:MATCH</CODE
></A
> "quick" "The quick brown fox jumped quickly." :start 8)
     <TT
CLASS="sexp"
>#S(<CODE
CLASS="classname"
>REGEXP:MATCH</CODE
> :START 27 :END 32)</TT
>
    (<A
HREF="#re-match"
><CODE
CLASS="function"
>REGEXP:MATCH</CODE
></A
> "quick" "The quick brown fox jumped quickly." :start 8 :end 30)
     <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
    (<A
HREF="#re-match"
><CODE
CLASS="function"
>REGEXP:MATCH</CODE
></A
> "\\([a-z]*\\)[0-9]*\\(bar\\)" "foo12bar")
     <TT
CLASS="sexp"
>#S(<CODE
CLASS="classname"
>REGEXP:MATCH</CODE
> :START 0 :END 8) ;</TT
>
     <TT
CLASS="sexp"
>#S(<CODE
CLASS="classname"
>REGEXP:MATCH</CODE
> :START 0 :END 3) ;</TT
>
     <TT
CLASS="sexp"
>#S(<CODE
CLASS="classname"
>REGEXP:MATCH</CODE
> :START 5 :END 8)</TT
>
  </PRE
></TD
></TR
></TABLE
></DIV
>
</P
></DD
><DT
><A
NAME="re-match-start"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-match-start"
><CODE
CLASS="function"
>REGEXP:MATCH-START</CODE
></A
> <VAR
CLASS="replaceable"
>match</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Extracts the start index of <VAR
CLASS="replaceable"
>match</VAR
>; <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>-able.
 </P
></DD
><DT
><A
NAME="re-match-end"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-match-end"
><CODE
CLASS="function"
>REGEXP:MATCH-END</CODE
></A
> <VAR
CLASS="replaceable"
>match</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Extracts the end index of <VAR
CLASS="replaceable"
>match</VAR
>; <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>-able.
</P
></DD
><DT
><A
NAME="re-match-string"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-match-string"
><CODE
CLASS="function"
>REGEXP:MATCH-STRING</CODE
></A
> <VAR
CLASS="replaceable"
>string</VAR
> <VAR
CLASS="replaceable"
>match</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Extracts the substring of <VAR
CLASS="replaceable"
>string</VAR
> corresponding
  to the given pair of start and end indices of <VAR
CLASS="replaceable"
>match</VAR
>.
  The result is shared with <VAR
CLASS="replaceable"
>string</VAR
>.
  If you want a freshly consed <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>, use <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_copy-seq.html"
TARGET="_top"
><CODE
CLASS="function"
>COPY-SEQ</CODE
></A
> or
  <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_coerce.html"
TARGET="_top"
><CODE
CLASS="function"
>COERCE</CODE
></A
> (<A
HREF="#re-match-string"
><CODE
CLASS="function"
>REGEXP:MATCH-STRING</CODE
></A
> ...)
  '<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-string.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-STRING</CODE
></A
>)</TT
>.
</P
></DD
><DT
><A
NAME="re-regexp-quote"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-regexp-quote"
><CODE
CLASS="function"
>REGEXP:REGEXP-QUOTE</CODE
></A
> <VAR
CLASS="replaceable"
>string</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
   <VAR
CLASS="replaceable"
>extended</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This function returns a regular expression string
  that matches exactly <VAR
CLASS="replaceable"
>string</VAR
> and nothing else.
  This allows you to request an exact string match when calling a
  function that wants a regular expression.
  <DIV
CLASS="example"
><A
NAME="ex-re-quote"
></A
><P
><B
>Example 30-2. <A
HREF="#re-regexp-quote"
><CODE
CLASS="function"
>REGEXP:REGEXP-QUOTE</CODE
></A
></B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;    (regexp-quote "^The cat$")
     <SPAN
CLASS="returnvalue"
>"\\^The cat\\$"</SPAN
>
   </PRE
></TD
></TR
></TABLE
></DIV
>
  One use of <A
HREF="#re-regexp-quote"
><CODE
CLASS="function"
>REGEXP:REGEXP-QUOTE</CODE
></A
> is to combine an exact string match with
  context described as a regular expression.
  When <VAR
CLASS="replaceable"
>extended</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, also
  quote <SPAN
CLASS="keysym"
>#\+</SPAN
> and <SPAN
CLASS="keysym"
>#\?</SPAN
>.
</P
></DD
><DT
><A
NAME="re-regexp-compile"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-regexp-compile"
><CODE
CLASS="function"
>REGEXP:REGEXP-COMPILE</CODE
></A
> <VAR
CLASS="replaceable"
>string</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
   <A
HREF="#re-cflags"
><CODE
CLASS="constant"
>:EXTENDED</CODE
> <CODE
CLASS="constant"
>:IGNORE-CASE</CODE
> <CODE
CLASS="constant"
>:NEWLINE</CODE
> <CODE
CLASS="constant"
>:NOSUB</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Compile the regular expression <VAR
CLASS="replaceable"
>string</VAR
> into an
  object suitable for <A
HREF="#re-regexp-exec"
><CODE
CLASS="function"
>REGEXP:REGEXP-EXEC</CODE
></A
>.</P
></DD
><DT
><A
NAME="re-regexp-exec"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-regexp-exec"
><CODE
CLASS="function"
>REGEXP:REGEXP-EXEC</CODE
></A
> <VAR
CLASS="replaceable"
>pattern</VAR
> <VAR
CLASS="replaceable"
>string</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
     (<CODE
CLASS="constant"
>:START</CODE
> 0) <CODE
CLASS="constant"
>:END</CODE
> <A
HREF="#re-eflags"
><CODE
CLASS="constant"
>:NOTBOL</CODE
> <CODE
CLASS="constant"
>:NOTEOL</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Execute the <VAR
CLASS="replaceable"
>pattern</VAR
>, which must be a compiled
  regular expression returned by <A
HREF="#re-regexp-compile"
><CODE
CLASS="function"
>REGEXP:REGEXP-COMPILE</CODE
></A
>, against the
  appropriate portion of the <VAR
CLASS="replaceable"
>string</VAR
>.</P
><P
ALIGN="justify"
>Negative <VAR
CLASS="replaceable"
>end</VAR
> means <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_pl.html"
TARGET="_top"
><CODE
CLASS="function"
>+</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
>
  <VAR
CLASS="replaceable"
>string</VAR
>) <VAR
CLASS="replaceable"
>end</VAR
>)</TT
></P
></DD
><DT
><A
NAME="re-regexp-split"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-regexp-split"
><CODE
CLASS="function"
>REGEXP:REGEXP-SPLIT</CODE
></A
>  <VAR
CLASS="replaceable"
>pattern</VAR
> <VAR
CLASS="replaceable"
>string</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
     (<CODE
CLASS="constant"
>:START</CODE
> 0) <CODE
CLASS="constant"
>:END</CODE
> <A
HREF="#re-cflags"
><CODE
CLASS="constant"
>:EXTENDED</CODE
> <CODE
CLASS="constant"
>:IGNORE-CASE</CODE
> <CODE
CLASS="constant"
>:NEWLINE</CODE
> <CODE
CLASS="constant"
>:NOSUB</CODE
></A
> <A
HREF="#re-eflags"
><CODE
CLASS="constant"
>:NOTBOL</CODE
> <CODE
CLASS="constant"
>:NOTEOL</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return a list of substrings of <VAR
CLASS="replaceable"
>string</VAR
> (all
  sharing the structure with <VAR
CLASS="replaceable"
>string</VAR
>) separated by <VAR
CLASS="replaceable"
>pattern</VAR
> (a
  regular expression string or a return value of <A
HREF="#re-regexp-compile"
><CODE
CLASS="function"
>REGEXP:REGEXP-COMPILE</CODE
></A
>)
 </P
></DD
><DT
><A
NAME="re-with-loop-split"
></A
><TT
CLASS="sexp"
>(<A
HREF="#re-with-loop-split"
><CODE
CLASS="function"
>REGEXP:WITH-LOOP-SPLIT</CODE
></A
> (<VAR
CLASS="replaceable"
>variable</VAR
> <VAR
CLASS="replaceable"
>stream</VAR
> <VAR
CLASS="replaceable"
>pattern</VAR
>
     <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> (<CODE
CLASS="constant"
>:START</CODE
> 0) <CODE
CLASS="constant"
>:END</CODE
> <A
HREF="#re-cflags"
><CODE
CLASS="constant"
>:EXTENDED</CODE
> <CODE
CLASS="constant"
>:IGNORE-CASE</CODE
> <CODE
CLASS="constant"
>:NEWLINE</CODE
> <CODE
CLASS="constant"
>:NOSUB</CODE
></A
> <A
HREF="#re-eflags"
><CODE
CLASS="constant"
>:NOTBOL</CODE
> <CODE
CLASS="constant"
>:NOTEOL</CODE
></A
>)
     <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> <VAR
CLASS="replaceable"
>body</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Read lines from <VAR
CLASS="replaceable"
>stream</VAR
>, split them with
  <A
HREF="#re-regexp-split"
><CODE
CLASS="function"
>REGEXP:REGEXP-SPLIT</CODE
></A
> on <VAR
CLASS="replaceable"
>pattern</VAR
>, and bind the resulting list to
  <VAR
CLASS="replaceable"
>variable</VAR
>.</P
></DD
><DT
><A
NAME="re-cflags"
></A
><A
HREF="#re-cflags"
><CODE
CLASS="constant"
>:EXTENDED</CODE
> <CODE
CLASS="constant"
>:IGNORE-CASE</CODE
> <CODE
CLASS="constant"
>:NEWLINE</CODE
> <CODE
CLASS="constant"
>:NOSUB</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>These options control compilation of a pattern.
   You can specify <VAR
CLASS="replaceable"
>cflags</VAR
> directly by
   combining <CODE
CLASS="constant"
>REGEXP::REG_EXTENDED</CODE
>,
   <CODE
CLASS="constant"
>REGEXP::REG_ICACE</CODE
>,
   <CODE
CLASS="constant"
>REGEXP::REG_NEWLINE</CODE
>, and
   <CODE
CLASS="constant"
>REGEXP::REG_NOSUB</CODE
>.
   See <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html"
TARGET="_top"
><TT
CLASS="filename"
>regex.h</TT
></A
> for their meaning.
</P
></DD
><DT
><A
NAME="re-eflags"
></A
><A
HREF="#re-eflags"
><CODE
CLASS="constant"
>:NOTBOL</CODE
> <CODE
CLASS="constant"
>:NOTEOL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>These options constrol execution of a pattern.
   You can specify <VAR
CLASS="replaceable"
>eflags</VAR
> directly by
   combining <CODE
CLASS="constant"
>REGEXP::REG_NOTBOL</CODE
>, and
   <CODE
CLASS="constant"
>REGEXP::REG_NOTEOL</CODE
>.
   See <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/regex.h.html"
TARGET="_top"
><TT
CLASS="filename"
>regex.h</TT
></A
> for their meaning.
</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The following code computes the number of people who use a
 particular shell:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "REGEXP-TEST" (:use "LISP" "REGEXP"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "REGEXP-TEST")
(let ((h (make-hash-table :test #'equal :size 10)) (n 0))
  (with-open-file (f "/etc/passwd")
    (with-loop-split (s f ":")
      (incf (gethash (seventh s) h 0))))
  (with-hash-table-iterator (i h)
    (loop (multiple-value-bind (r k v) (i)
            (unless r (return))
            (format t "[~d] ~s~30t== ~5:d~%" (incf n) k v)))))
</PRE
></TD
></TR
></TABLE
></P
><P
ALIGN="justify"
>For comparison, the same can be done by the following <A
HREF="http://www.perl.com"
TARGET="_top"
><B
CLASS="command"
>Perl</B
></A
>:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;#!/usr/local/bin/perl -w

use diagnostics;
use strict;

my $IN = $ARGV[0];
open(INF,"&#60; $IN") || die "$0: cannot read file [$IN]: $!\n;";
my %hash;
while (&#60;INF&#62;) {
  chop;
  my @all = split($ARGV[1]);
  my $shell = ($#all &#62;= 6 ? $all[6] : "");
  if ($hash{$shell}) { $hash{$shell} ++; }
  else { $hash{$shell} = 1; }
}
my $ii = 0;
for my $kk (keys(%hash)) {
  print "[",++$ii,"] \"",$kk,"\"  --  ",$hash{$kk},"\n";
}
close(INF);
</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="pcre"
>30.2.6.5. Perl Compatible Regular Expressions.</A
></H4
><P
ALIGN="justify"
>This is an interface to <A
HREF="http://www.pcre.org/"
TARGET="_top"
>Perl
  Compatible Regular Expressions</A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(PCRE:PCRE-VERSION)</TT
></DT
><DD
><P
ALIGN="justify"
>Return version information as 3 values: descriptive
    <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> and 2 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>s: major and minor numbers.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:PCRE-CONFIG
    <VAR
CLASS="replaceable"
>type</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return some information about the PCRE build
    configuration (<VAR
CLASS="replaceable"
>type</VAR
> is one of <TT
CLASS="literal"
>:UTF8</TT
>
    <TT
CLASS="literal"
>:NEWLINE</TT
> <TT
CLASS="literal"
>:LINK-SIZE</TT
>
    <TT
CLASS="literal"
>:POSIX-MALLOC-THRESHOLD</TT
>
    <TT
CLASS="literal"
>:MATCH-LIMIT</TT
>).</P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:PCRE-COMPILE <VAR
CLASS="replaceable"
>string</VAR
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :STUDY :IGNORE-CASE :MULTILINE :DOTALL :EXTENDED :ANCHORED
    :DOLLAR-ENDONLY :EXTRA :NOTBOL :NOTEOL :UNGREADY :NOTEMPTY :UTF8
    :NO-AUTO-CAPTURE :NO-UTF8-CHECK)</TT
></DT
><DD
><P
ALIGN="justify"
>Compile a pattern, optionally study it.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:PATTERN-INFO <VAR
CLASS="replaceable"
>pattern</VAR
>
    request)</TT
></DT
><DD
><P
ALIGN="justify"
>Return some information about the <VAR
CLASS="replaceable"
>pattern</VAR
>,
    such as <TT
CLASS="literal"
>:OPTIONS</TT
> <TT
CLASS="literal"
>:SIZE</TT
>
    <TT
CLASS="literal"
>:CAPTURECOUNT</TT
> <TT
CLASS="literal"
>:BACKREFMAX</TT
>
    <TT
CLASS="literal"
>:FIRSTBYTE</TT
> <TT
CLASS="literal"
>:FIRSTTABLE</TT
>
    <TT
CLASS="literal"
>:LASTLITERAL</TT
> <TT
CLASS="literal"
>:NAMEENTRYSIZE</TT
>
    <TT
CLASS="literal"
>:NAMECOUNT</TT
> <TT
CLASS="literal"
>:NAMETABLE</TT
>
    <TT
CLASS="literal"
>:STUDYSIZE</TT
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:PCRE-NAME-TO-INDEX
    <VAR
CLASS="replaceable"
>pattern</VAR
> <VAR
CLASS="replaceable"
>name</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Convert the name of the sub-pattern to an index in
    the return vector.</P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:PCRE-EXEC <VAR
CLASS="replaceable"
>pattern</VAR
>
    <VAR
CLASS="replaceable"
>string</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :OFFSET :ANCHORED :NOTBOL :NOTEOL :NOTEMPTY
    :NO-UTF8-CHECK)</TT
></DT
><DD
><P
ALIGN="justify"
>Execute the compiled <VAR
CLASS="replaceable"
>pattern</VAR
> against the
    <VAR
CLASS="replaceable"
>string</VAR
> at the given <VAR
CLASS="replaceable"
>offset</VAR
> with the given options.
    Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if no matches or a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_length.html"
TARGET="_top"
><CODE
CLASS="function"
>LENGTH</CODE
></A
>
    <TT
CLASS="literal"
>CAPTURECOUNT+1</TT
> of <SPAN
CLASS="type"
>PCRE:MATCH</SPAN
> strunctures.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:MATCH-START <VAR
CLASS="replaceable"
>match</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(PCRE:MATCH-END <VAR
CLASS="replaceable"
>match</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the start and end of the <SPAN
CLASS="type"
>PCRE:MATCH</SPAN
>.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:MATCH-SUBSTRING
    <VAR
CLASS="replaceable"
>match</VAR
> <VAR
CLASS="replaceable"
>string</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the substring of <VAR
CLASS="replaceable"
>string</VAR
> bounded by <VAR
CLASS="replaceable"
>match</VAR
>.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:MATCH-STRINGS
    return-vector <VAR
CLASS="replaceable"
>string</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return all subsctrings for all matches found
    by <CODE
CLASS="function"
>PCRE:PCRE-EXEC</CODE
>.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(PCRE:MATCH-STRING
    return-vector which <VAR
CLASS="replaceable"
>string</VAR
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>pattern</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the substring that matches the given sub-pattern.
    If <VAR
CLASS="replaceable"
>which</VAR
> is a name of the sub-pattern (as
    opposed to its number), <VAR
CLASS="replaceable"
>pattern</VAR
> must be supplied.
 </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="syscalls"
>30.2.6.6. System Calls</A
></H4
><P
ALIGN="justify"
>The <A
HREF="#syscalls"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"POSIX"</SPAN
></STRONG
></A
> module makes some system calls available from lisp.
 Not all of these system calls are actually POSIX, so this package has a
 nickname <STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"OS"</SPAN
></STRONG
>.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:RESOLVE-HOST-IPADDR</CODE
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>host</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns the <SPAN
CLASS="type"
>HOSTENT</SPAN
> structure (name,
   list of aliases, list of IP addresses as dotted quads (for IPv4) or
   coloned octets (for IPv6), address type - IPv4 or IPv6).
   When <VAR
CLASS="replaceable"
>host</VAR
> is omitted or <CODE
CLASS="constant"
>:DEFAULT</CODE
>, return the data for the
   current host. When <VAR
CLASS="replaceable"
>host</VAR
> is given and is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, all the
   host database is returned as a list (this would be the contents of the
   <TT
CLASS="filename"
>/etc/hosts</TT
> file on a <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> system or
   <TT
CLASS="filename"
>${windir}/system32/etc/hosts</TT
> on a Win32 system).
   This is an interface to <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyname.html"
TARGET="_top"
><CODE
CLASS="function"
>gethostbyname</CODE
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/gethostbyaddr.html"
TARGET="_top"
><CODE
CLASS="function"
>gethostbyaddr</CODE
></A
>.
  </P
></DD
><DT
><A
NAME="file-stat"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:FILE-STAT</CODE
> <VAR
CLASS="replaceable"
>pathname</VAR
>
      <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>link-p</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the <SPAN
CLASS="type"
>FILE-STAT</SPAN
> structure.
   <VAR
CLASS="replaceable"
>pathname</VAR
> can be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>, a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
>, a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or a
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
> (on a <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> system, meaning <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165"
TARGET="_top"
>file descriptor</A
>).
   The first slot of the structure returned is the string or the
   number on which <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/stat.html"
TARGET="_top"
><CODE
CLASS="function"
>stat</CODE
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/fstat.html"
TARGET="_top"
><CODE
CLASS="function"
>fstat</CODE
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/lstat.html"
TARGET="_top"
><CODE
CLASS="function"
>lstat</CODE
></A
> was called.
   The other slots are numbers, members of the <SPAN
CLASS="type"
>struct stat</SPAN
>:
    <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>dev</DT
><DD
><P
ALIGN="justify"
>Device ID of device containing file.
     </P
></DD
><DT
>ino</DT
><DD
><P
ALIGN="justify"
>File serial number.
     </P
></DD
><DT
>mode</DT
><DD
><P
ALIGN="justify"
>Mode of file.
     </P
></DD
><DT
>nlink</DT
><DD
><P
ALIGN="justify"
>Number of hard links to the file.
     </P
></DD
><DT
>uid</DT
><DD
><P
ALIGN="justify"
>User ID of file.
     </P
></DD
><DT
>gid</DT
><DD
><P
ALIGN="justify"
>Group ID of file.
     </P
></DD
><DT
>rdev</DT
><DD
><P
ALIGN="justify"
>Device ID (if file is character or block
        special).</P
></DD
><DT
>size</DT
><DD
><P
ALIGN="justify"
>For regular files, the file size in bytes.
        For symbolic links, the length in bytes of the pathname contained
        in the symbolic link.
        For a shared memory object, the length in bytes.
        For a typed memory object, the length in bytes.
        For other file types, the use of this field is unspecified.
     </P
></DD
><DT
>atime</DT
><DD
><P
ALIGN="justify"
>Time of last access (as the number of seconds
        since 1900-01-01).</P
></DD
><DT
>mtime</DT
><DD
><P
ALIGN="justify"
>Time of last data modification (as the number of
        seconds since 1900-01-01).</P
></DD
><DT
>ctime</DT
><DD
><P
ALIGN="justify"
>Time of last status change (as the number of
        seconds since 1900-01-01).</P
></DD
><DT
>blksize</DT
><DD
><P
ALIGN="justify"
>A file system-specific preferred I/O block size
        for this object.  In some file system types, this may vary from
        file to file.</P
></DD
><DT
>blocks</DT
><DD
><P
ALIGN="justify"
>Number of blocks allocated for this object.
     </P
></DD
></DL
></DIV
>
    All slots are read-only.
   </P
><P
ALIGN="justify"
>If the system does not support a particular
    field (e.g., <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> prior to 2000 does not have hard links), <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
    (or the default, like 1 for the number of hard links for old
    <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>) is returned.
   </P
><P
ALIGN="justify"
>[<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems only at this time, patches are welcome.]
 </P
></DD
><DT
><A
NAME="stat-vfs"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:STAT-VFS</CODE
>
    <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the <SPAN
CLASS="type"
>STAT-VFS</SPAN
> structure.
   <VAR
CLASS="replaceable"
>pathname</VAR
> can be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>, a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_pathname.html"
TARGET="_top"
><CODE
CLASS="classname"
>PATHNAME</CODE
></A
>, a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or a
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
> (on a <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> system, meaning <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165"
TARGET="_top"
>file descriptor</A
>).
   The first slot of the structure returned is the string
   or the number on which <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/statvfs.html"
TARGET="_top"
><CODE
CLASS="function"
>statvfs</CODE
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/fstatvfs.html"
TARGET="_top"
><CODE
CLASS="function"
>fstatvfs</CODE
></A
> was called.
   The other slots are members of the <SPAN
CLASS="type"
>struct statvfs</SPAN
>:
   <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>bsize</DT
><DD
><P
ALIGN="justify"
>File system block size.
    </P
></DD
><DT
>frsize</DT
><DD
><P
ALIGN="justify"
>Fundamental file system block size.
    </P
></DD
><DT
>blocks</DT
><DD
><P
ALIGN="justify"
>Total number of blocks on file system in units
       of <TT
CLASS="literal"
>frsize</TT
>.</P
></DD
><DT
>bfree</DT
><DD
><P
ALIGN="justify"
>Total number of free blocks.
    </P
></DD
><DT
>bavail</DT
><DD
><P
ALIGN="justify"
>Number of free blocks available to
       non-privileged processes.</P
></DD
><DT
>files</DT
><DD
><P
ALIGN="justify"
>Total number of file serial numbers.
    </P
></DD
><DT
>ffree</DT
><DD
><P
ALIGN="justify"
>Total number of free file serial numbers.
    </P
></DD
><DT
>favail</DT
><DD
><P
ALIGN="justify"
>Number of file serial numbers available to
       non-privileged processes.</P
></DD
><DT
>fsid</DT
><DD
><P
ALIGN="justify"
>File system ID.</P
></DD
><DT
>flag</DT
><DD
><P
ALIGN="justify"
>List of platform-dependent values, such as <CODE
CLASS="constant"
>:READ-ONLY</CODE
>.
    </P
></DD
><DT
>namemax</DT
><DD
><P
ALIGN="justify"
>Maximum filename length.
   </P
></DD
></DL
></DIV
>
   All slots are read-only.
  </P
><P
ALIGN="justify"
>[<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems only at this time, patches are welcome.]
 </P
></DD
><DT
><A
NAME="file-info"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>OS:FILE-INFO</CODE
>
    <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the <SPAN
CLASS="type"
>FILE-INFO</SPAN
> structure.
   <VAR
CLASS="replaceable"
>pathname</VAR
> should be a <A
HREF="#path-des"
>pathname designator</A
>. The 8 slots are attributes, ctime,
   atime, wtime, high and low sizes, name and short name.
   </P
><P
ALIGN="justify"
>[<A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> systems only at this time, patches are welcome.]
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:USER-DATA</CODE
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>user</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the <SPAN
CLASS="type"
>PASSWD</SPAN
> structure (name,
   encoded password, UID, GID, full name, home directory, shell).
   When <VAR
CLASS="replaceable"
>user</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, return all users.
   When <VAR
CLASS="replaceable"
>user</VAR
> is <CODE
CLASS="constant"
>:DEFAULT</CODE
> or
   not supplied, return the information about the current user.
   If the system does not support a particular field (e.g., Win32 does
   not have a concept of a shell), <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (or the default, like
   <TT
CLASS="filename"
>c:\command.com</TT
> for DOS) is returned.
   </P
><P
ALIGN="justify"
>[<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems only at this time, patches are welcome.]
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:UNAME</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return a structure describing the OS, derived from
    <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/uname.html"
TARGET="_top"
><CODE
CLASS="function"
>uname</CODE
></A
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:SYSCONF</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return a structure describing the system
    configuration, derived from <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/sysconf.html"
TARGET="_top"
><CODE
CLASS="function"
>sysconf</CODE
></A
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:LIMITS</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return a structure describing the resource limits,
    derived from <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/getrlimit.html"
TARGET="_top"
><CODE
CLASS="function"
>getrlimit</CODE
></A
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:USAGE</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return 2 structures describing the resource usage by
    the lisp process its children, derived from <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/getrusage.html"
TARGET="_top"
><CODE
CLASS="function"
>getrusage</CODE
></A
>.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:ERF</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:ERFC</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:J0</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:J1</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:JN</CODE
>
       <VAR
CLASS="replaceable"
>integer</VAR
> <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:Y0</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:Y1</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:YN</CODE
>
       <VAR
CLASS="replaceable"
>integer</VAR
> <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:GAMMA</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:LGAMMA</CODE
>
       <VAR
CLASS="replaceable"
>real</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Compute the error functions, Bessel functions and
   Gamma.  These functions are required by the POSIX standard and should
   be available in libm.so.  Please note that these functions do not
   provide lisp-style error handling and precision, and do all the
   computations at the double float level.
 </P
></DD
><DT
><A
NAME="stream-lock"
></A
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:STREAM-LOCK</CODE
> <VAR
CLASS="replaceable"
>stream</VAR
>
    <VAR
CLASS="replaceable"
>lock-p</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
    (:BLOCK <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>) (:SHARED <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>) (:START 0) (:END <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>))</TT
></DT
><DD
><P
ALIGN="justify"
>This is an interface to the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/fcntl.html"
TARGET="_top"
><CODE
CLASS="function"
>fcntl</CODE
></A
> system call.
   It sets or removes a file lock for the (portion of the) file associated
   with <VAR
CLASS="replaceable"
>stream</VAR
>, depending on <VAR
CLASS="replaceable"
>lock-p</VAR
>.
   When <VAR
CLASS="replaceable"
>block</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the call is non-blocking,
   and when the file is already locked, it <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>s an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.
   When <VAR
CLASS="replaceable"
>shared</VAR
> is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
   then lock can be shared between several callers.
   Several processes can set a <VAR
CLASS="replaceable"
>shared</VAR
>
   (i.e., <I
CLASS="emphasis"
>read</I
>) lock, but only one can set
   an <I
CLASS="emphasis"
>exclusive</I
> (i.e., <I
CLASS="emphasis"
>write</I
>,
   or non-<VAR
CLASS="replaceable"
>shared</VAR
>) lock.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:COPY-FILE</CODE
>
    <VAR
CLASS="replaceable"
>source-path</VAR
>
    <VAR
CLASS="replaceable"
>destination-path</VAR
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :METHOD :PRESERVE :IF-EXISTS :IF-DOES-NOT-EXIST)</TT
></DT
><DD
><P
ALIGN="justify"
>This is an interface to the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/symlink.html"
TARGET="_top"
><CODE
CLASS="function"
>symlink</CODE
></A
>
    (when <VAR
CLASS="replaceable"
>method</VAR
> is <CODE
CLASS="constant"
>:SYMLINK</CODE
>),
    <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/link.html"
TARGET="_top"
><CODE
CLASS="function"
>link</CODE
></A
> (when it is <CODE
CLASS="constant"
>:HARDLINK</CODE
>), and <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/rename.html"
TARGET="_top"
><CODE
CLASS="function"
>rename</CODE
></A
>
    (when it is <CODE
CLASS="constant"
>:RENAME</CODE
>) system calls, as well as,
    you guessed it, a generic file copy utility
    (when <VAR
CLASS="replaceable"
>method</VAR
> is <CODE
CLASS="constant"
>:COPY</CODE
>).
   </P
><P
ALIGN="justify"
>Both <VAR
CLASS="replaceable"
>source-path</VAR
> and
    <VAR
CLASS="replaceable"
>destination-path</VAR
> may be wild.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(<CODE
CLASS="function"
>POSIX:DUPLICATE-HANDLE</CODE
>
    <VAR
CLASS="replaceable"
>fd1</VAR
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>fd2</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This is an interface to the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/dup.html"
TARGET="_top"
><CODE
CLASS="function"
>dup/dup2</CODE
></A
> system calls on
   <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> systems and to <CODE
CLASS="function"
>DuplicateHandle</CODE
> system
   call on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>.</P
></DD
><DT
><TT
CLASS="sexp"
>(OS:SHORTCUT-INFO
    <VAR
CLASS="replaceable"
>pathname</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return information about a <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> shortcut
    (<TT
CLASS="filename"
>#P".lnk"</TT
>) file contents in a
    <SPAN
CLASS="type"
>SHORTCUT-INFO</SPAN
> structure.</P
></DD
><DT
><TT
CLASS="sexp"
>(OS:MAKE-SHORTCUT
    <VAR
CLASS="replaceable"
>pathname</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :WORKING-DIRECTORY :ARGUMENTS :SHOW-COMMAND :ICON
    :DESCRIPTION :HOT-KEY :PATH)</TT
></DT
><DD
><P
ALIGN="justify"
>Create (or modify the properties of an existing one)
    a <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> shortcut (<TT
CLASS="filename"
>#P".lnk"</TT
>) file.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(OS:SYSTEM-INFO)</TT
></DT
><DD
><P
ALIGN="justify"
>Return <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> system information in a
    <SPAN
CLASS="type"
>SYSTEM-INFO</SPAN
> structure.</P
></DD
><DT
><TT
CLASS="sexp"
>(OS:VERSION)</TT
></DT
><DD
><P
ALIGN="justify"
>Return <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> version information in a
    <SPAN
CLASS="type"
>SYSTEM-INFO</SPAN
> structure.</P
></DD
></DL
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="dffi"
>30.3. Extensions-2.3. The Foreign Function Call Facility</A
></H2
><FONT
COLOR="RED"
>Platform dependent: many <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms
only.</FONT
><P
ALIGN="justify"
>A foreign function description is written as a Lisp file, and when
 compiled it produces a <TT
CLASS="filename"
>#P".c"</TT
> file which is then compiled by the
 <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler and may be linked together with
 <TT
CLASS="filename"
>lisp.a</TT
>.</P
><P
ALIGN="justify"
>All symbols relating to the foreign function interface are
 exported from the package <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
>.  To use them,
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
TARGET="_top"
><CODE
CLASS="function"
>USE-PACKAGE</CODE
></A
> "FFI")</TT
>.</P
><P
ALIGN="justify"
>Special <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> forms may appear anywhere in the Lisp file.</P
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dffi-overview"
>30.3.1. Overview</A
></H3
><P
ALIGN="justify"
>These are the special <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> forms.  We have taken a pragmatic
 approach: the only foreign languages we support for now are <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>
 and ANSI <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>special <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> forms; <VAR
CLASS="replaceable"
>name</VAR
> is any Lisp
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>; <VAR
CLASS="replaceable"
>c-name</VAR
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>.</B
></P
><DL
><DT
><A
NAME="def-c-type"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-c-type"
><CODE
CLASS="function"
>FFI:DEF-C-TYPE</CODE
></A
> <VAR
CLASS="replaceable"
>name</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This form makes <VAR
CLASS="replaceable"
>name</VAR
> a shortcut for <VAR
CLASS="replaceable"
>c-type</VAR
>.
   Note that <VAR
CLASS="replaceable"
>c-type</VAR
> may already refer to name.
   Forward declarations of types are not possible, however.
</P
></DD
><DT
><A
NAME="def-c-var"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-c-var"
><CODE
CLASS="function"
>FFI:DEF-C-VAR</CODE
></A
> <VAR
CLASS="replaceable"
>name</VAR
>
   {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="def-c-var-bnf"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
><VAR
CLASS="replaceable"
>option</VAR
> ::==</TH
><TH
>&nbsp;</TH
><TH
>&nbsp;</TH
></TR
></THEAD
><TBODY
><TR
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:NAME</CODE
>
   <VAR
CLASS="replaceable"
>c-name</VAR
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:TYPE</CODE
>
  <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:READ-ONLY</CODE
>
  <VAR
CLASS="replaceable"
>boolean</VAR
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(:ALLOC
  <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(:LIBRARY
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>)</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>This form defines a <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
>.  <VAR
CLASS="replaceable"
>name</VAR
> is the Lisp
 name, a regular Lisp <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>.</P
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:NAME</CODE
> option specifies the name, as seen from <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>,
 as a string.  If not specified, it is derived from the print name of
 the Lisp name.</P
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:TYPE</CODE
> option specifies the variable's foreign type.</P
><P
ALIGN="justify"
>If the <CODE
CLASS="constant"
>:READ-ONLY</CODE
> option is specified and non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
 it will be impossible to change the variable's value from within Lisp
 (using <A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> or similar).</P
><P
ALIGN="justify"
>The <CODE
CLASS="constant"
>:ALLOC</CODE
> option can be either <CODE
CLASS="constant"
>:NONE</CODE
>
 or <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
> and defaults to <CODE
CLASS="constant"
>:NONE</CODE
>.  If it is <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
>,
 any values of type <A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
>, <A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
>, <A
HREF="#c-ptr-null"
><SPAN
CLASS="type"
>FFI:C-PTR-NULL</SPAN
></A
>, <A
HREF="#c-array-ptr"
><SPAN
CLASS="type"
>FFI:C-ARRAY-PTR</SPAN
></A
>
 within the foreign value are assumed to be pointers to
 <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
>-allocated storage, and when <A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> replaces an old value by a
 new one, the old storage is freed using <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
> and the new storage
 allocated using <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
>.  If it is <CODE
CLASS="constant"
>:NONE</CODE
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> assumes that the
 pointers point to good storage (not <CODE
CLASS="constant"
>NULL</CODE
>!) and overwrites the old
 values by the new ones.  This is dangerous (just think of overwriting a
 string with a longer one or storing some data in a <CODE
CLASS="constant"
>NULL</CODE
> pointer...)
 and deprecated.</P
><P
ALIGN="justify"
><CODE
CLASS="constant"
>:LIBRARY</CODE
> is the (optional) dynamic library
 which contains the variable.</P
></DD
><DT
><A
NAME="def-call-out"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-call-out"
><CODE
CLASS="function"
>FFI:DEF-CALL-OUT</CODE
></A
>
              <VAR
CLASS="replaceable"
>name</VAR
> {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="def-call-out-bnf"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
><VAR
CLASS="replaceable"
>option</VAR
> ::==</TH
><TH
>&nbsp;</TH
><TH
>&nbsp;</TH
></TR
></THEAD
><TBODY
><TR
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:NAME</CODE
>
   <VAR
CLASS="replaceable"
>c-name</VAR
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ARGUMENTS</CODE
>
   {(<VAR
CLASS="replaceable"
>argument</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
> [<A
HREF="#param-mode"
><VAR
CLASS="replaceable"
>PARAM-MODE</VAR
></A
> [<A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
>]])}*)</TT
>
</TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RETURN-TYPE</CODE
>
   <VAR
CLASS="replaceable"
>c-type</VAR
> [<A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
>])</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<A
HREF="#c-flavor"
><CODE
CLASS="constant"
>:LANGUAGE</CODE
></A
>
   <VAR
CLASS="replaceable"
>language</VAR
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(:BUILT-IN
   <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
TARGET="_top"
><CODE
CLASS="classname"
>BOOLEAN</CODE
></A
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(:LIBRARY
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>)</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>This form defines a named call-out function (a foreign function
 called from Lisp: control flow temporarily leaves Lisp).  Any Lisp
 function call to <CODE
CLASS="function"
>#'<VAR
CLASS="replaceable"
>name</VAR
></CODE
>
 is redirected to call the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function <VAR
CLASS="replaceable"
>c-name</VAR
>.
 <CODE
CLASS="constant"
>:LIBRARY</CODE
> is the (optional) dynamic library which
 contains the function.
 When the function is a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> built-in, the full prototype will be
 output (unless suppressed by <A
HREF="#ffi-extern-output"
><VAR
CLASS="varname"
>FFI:*OUTPUT-C-FUNCTIONS*</VAR
></A
>).
</P
></DD
><DT
><A
NAME="def-call-in"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-call-in"
><CODE
CLASS="function"
>FFI:DEF-CALL-IN</CODE
></A
>
              <VAR
CLASS="replaceable"
>name</VAR
> {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
></DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="def-call-in-bnf"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
><VAR
CLASS="replaceable"
>option</VAR
> ::==</TH
><TH
>&nbsp;</TH
><TH
>&nbsp;</TH
></TR
></THEAD
><TBODY
><TR
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:NAME</CODE
>
   <VAR
CLASS="replaceable"
>c-name</VAR
>)</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ARGUMENTS</CODE
>
   {(<VAR
CLASS="replaceable"
>argument</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
> [<A
HREF="#param-mode"
><VAR
CLASS="replaceable"
>PARAM-MODE</VAR
></A
> [<A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
>]])}*)</TT
>
</TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RETURN-TYPE</CODE
>
   <VAR
CLASS="replaceable"
>c-type</VAR
> [<A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
>])</TT
></TD
></TR
><TR
><TD
>&nbsp;</TD
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<A
HREF="#c-flavor"
><CODE
CLASS="constant"
>:LANGUAGE</CODE
></A
>
   <VAR
CLASS="replaceable"
>language</VAR
>)</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
ALIGN="justify"
>This form defines a named call-in function (i.e., a Lisp
 function called from the foreign language: control flow temporary
 enters Lisp).  Any <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function call to the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function
 <VAR
CLASS="replaceable"
>c-name</VAR
> is redirected to call the <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> function
 <CODE
CLASS="function"
>#'<VAR
CLASS="replaceable"
>name</VAR
></CODE
>.</P
></DD
><DT
><A
NAME="def-c-call-out"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-c-call-out"
><CODE
CLASS="function"
>FFI:DEF-C-CALL-OUT</CODE
></A
>
        <VAR
CLASS="replaceable"
>name</VAR
> {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
></DT
><DD
><P
ALIGN="justify"
>This is equivalent to <A
HREF="#def-call-out"
><CODE
CLASS="function"
>FFI:DEF-CALL-OUT</CODE
></A
> with
   <A
HREF="#c-flavor"
><CODE
CLASS="constant"
>:LANGUAGE</CODE
></A
> <CODE
CLASS="constant"
>:STDC</CODE
>.  <I
CLASS="emphasis"
>deprecated</I
>.
   </P
></DD
><DT
><A
NAME="def-c-call-in"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-c-call-in"
><CODE
CLASS="function"
>FFI:DEF-C-CALL-IN</CODE
></A
>
        <VAR
CLASS="replaceable"
>name</VAR
> {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
></DT
><DD
><P
ALIGN="justify"
>This is equivalent to <A
HREF="#def-call-in"
><CODE
CLASS="function"
>FFI:DEF-CALL-IN</CODE
></A
> with
   <A
HREF="#c-flavor"
><CODE
CLASS="constant"
>:LANGUAGE</CODE
></A
> <CODE
CLASS="constant"
>:STDC</CODE
>.  <I
CLASS="emphasis"
>deprecated</I
>.
   </P
></DD
><DT
><A
NAME="def-c-struct"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-c-struct"
><CODE
CLASS="function"
>FFI:DEF-C-STRUCT</CODE
></A
>
   <VAR
CLASS="replaceable"
>name</VAR
> (<VAR
CLASS="replaceable"
>symbol</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>)*)</TT
></DT
><DD
><P
ALIGN="justify"
>This form defines <VAR
CLASS="replaceable"
>name</VAR
> to be both a
  <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_structure-class.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRUCTURE-CLASS</CODE
></A
> and a foreign <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type with the given slots.
  <VAR
CLASS="replaceable"
>name</VAR
> is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
> (structure name) or a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
> whose <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_firstcm_s_inthcm_tenth.html"
TARGET="_top"
><CODE
CLASS="function"
>FIRST</CODE
></A
>
  element is the structure name and the <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_rest.html"
TARGET="_top"
><CODE
CLASS="function"
>REST</CODE
></A
> is options.
  Two options are supported at this time:
  <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="def-c-struct-typedef"
></A
><CODE
CLASS="constant"
>:TYPEDEF</CODE
></DT
><DD
><P
ALIGN="justify"
>means that the name of this structure is a
      <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type defined with <CODE
CLASS="function"
>typedef</CODE
>
      elsewhere.</P
></DD
><DT
><A
NAME="def-c-struct-external"
></A
><CODE
CLASS="constant"
>:EXTERNAL</CODE
></DT
><DD
><P
ALIGN="justify"
>means that this structure is defined in a
      <TT
CLASS="filename"
>#P".c"</TT
> file that you include with, e.g.,
      <TT
CLASS="sexp"
>(<A
HREF="#c-lines"
><CODE
CLASS="function"
>FFI:C-LINES</CODE
></A
> "#include &#60;filename.h&#62;")</TT
>.
  </P
></DD
></DL
></DIV
>
  These options determine how the struct is written to the <TT
CLASS="filename"
>#P".c"</TT
>.
</P
></DD
><DT
><A
NAME="def-c-enum"
></A
><TT
CLASS="sexp"
>(<A
HREF="#def-c-enum"
><CODE
CLASS="function"
>FFI:DEF-C-ENUM</CODE
></A
>
   <VAR
CLASS="replaceable"
>name</VAR
> {<VAR
CLASS="replaceable"
>symbol</VAR
> | (<VAR
CLASS="replaceable"
>symbol</VAR
> [<VAR
CLASS="replaceable"
>value</VAR
>])}*)</TT
></DT
><DD
><P
ALIGN="justify"
>This form defines <VAR
CLASS="replaceable"
>symbol</VAR
>s
  as constants, similarly to the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> declaration <SPAN
CLASS="type"
>enum {
  <VAR
CLASS="replaceable"
>symbol</VAR
> [= <VAR
CLASS="replaceable"
>value</VAR
>], ... };</SPAN
></P
><P
ALIGN="justify"
>You can use
 <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>FFI:ENUM-FROM-VALUE</CODE
> <VAR
CLASS="replaceable"
>name</VAR
>
  <VAR
CLASS="replaceable"
>value</VAR
>)</TT
> and
 <TT
CLASS="sexp"
>(<CODE
CLASS="function"
>FFI:ENUM-TO-VALUE</CODE
> <VAR
CLASS="replaceable"
>name</VAR
>
  <VAR
CLASS="replaceable"
>symbol</VAR
>)</TT
> to convert between the numeric and symbolic
 representations (of course, the latter function boils down to
 <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-value.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-VALUE</CODE
></A
> plus a check that the <VAR
CLASS="replaceable"
>symbol</VAR
> is indeed a constant
 defined in the <A
HREF="#def-c-enum"
><CODE
CLASS="function"
>FFI:DEF-C-ENUM</CODE
></A
> <VAR
CLASS="replaceable"
>name</VAR
>).</P
></DD
><DT
><A
NAME="c-lines"
></A
><TT
CLASS="sexp"
>(<A
HREF="#c-lines"
><CODE
CLASS="function"
>FFI:C-LINES</CODE
></A
>
  <VAR
CLASS="replaceable"
>format-string</VAR
> {<VAR
CLASS="replaceable"
>argument</VAR
>}*)</TT
></DT
><DD
><P
ALIGN="justify"
>This form outputs the string <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_format.html"
TARGET="_top"
><CODE
CLASS="function"
>FORMAT</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> <VAR
CLASS="replaceable"
>format-string</VAR
>
    {<VAR
CLASS="replaceable"
>argument</VAR
>}*)</TT
> to the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> output file.
   This is a rarely needed low-level facility.
 </P
></DD
><DT
><A
NAME="element"
></A
><TT
CLASS="sexp"
>(<A
HREF="#element"
><CODE
CLASS="function"
>FFI:ELEMENT</CODE
></A
>
     <VAR
CLASS="replaceable"
>c-place</VAR
> <VAR
CLASS="replaceable"
>index<SUB
>1</SUB
></VAR
> ...
     <VAR
CLASS="replaceable"
>index<SUB
>n</SUB
></VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Array element: If <VAR
CLASS="replaceable"
>c-place</VAR
> is of foreign type
  <TT
CLASS="type"
>(<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>
  (<VAR
CLASS="replaceable"
>dim<SUB
>1</SUB
></VAR
>
  ... <VAR
CLASS="replaceable"
>dim<SUB
>n</SUB
></VAR
>))</TT
>
  and 0 &#8804; <VAR
CLASS="replaceable"
>index<SUB
>1</SUB
></VAR
>
  &#60; <VAR
CLASS="replaceable"
>dim<SUB
>1</SUB
></VAR
>, ..., 0
  &#8804; <VAR
CLASS="replaceable"
>index<SUB
>n</SUB
></VAR
> &#60;
  <VAR
CLASS="replaceable"
>dim<SUB
>n</SUB
></VAR
>, this will be
  the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> corresponding to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_aref.html"
TARGET="_top"
><CODE
CLASS="function"
>AREF</CODE
></A
>
  <VAR
CLASS="replaceable"
>c-place</VAR
> <VAR
CLASS="replaceable"
>index<SUB
>1</SUB
></VAR
>
  ... <VAR
CLASS="replaceable"
>index<SUB
>n</SUB
></VAR
>)</TT
> or
  <VAR
CLASS="varname"
><VAR
CLASS="replaceable"
>c-place</VAR
>[<VAR
CLASS="replaceable"
>index<SUB
>1</SUB
></VAR
>]...[<VAR
CLASS="replaceable"
>index<SUB
>n</SUB
></VAR
>]</VAR
>.
  It is a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> of type <VAR
CLASS="replaceable"
>c-type</VAR
>.
  If <VAR
CLASS="replaceable"
>c-place</VAR
> is of foreign type <TT
CLASS="type"
>(<A
HREF="#c-array-max"
><SPAN
CLASS="type"
>FFI:C-ARRAY-MAX</SPAN
></A
>
  <VAR
CLASS="replaceable"
>c-type</VAR
> <VAR
CLASS="replaceable"
>dim</VAR
>)</TT
> and 0 &#8804;
  <VAR
CLASS="replaceable"
>index</VAR
> &#60; <VAR
CLASS="replaceable"
>dim</VAR
>,
  this will be the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> corresponding to <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_aref.html"
TARGET="_top"
><CODE
CLASS="function"
>AREF</CODE
></A
>
  <VAR
CLASS="replaceable"
>c-place</VAR
> <VAR
CLASS="replaceable"
>index</VAR
>)</TT
> or
  <VAR
CLASS="varname"
><VAR
CLASS="replaceable"
>c-place</VAR
>[<VAR
CLASS="replaceable"
>index</VAR
>]</VAR
>.
  It is a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> of type <VAR
CLASS="replaceable"
>c-type</VAR
>.
</P
></DD
><DT
><A
NAME="deref"
></A
><TT
CLASS="sexp"
>(<A
HREF="#deref"
><CODE
CLASS="function"
>FFI:DEREF</CODE
></A
>
                <VAR
CLASS="replaceable"
>c-place</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Dereference pointer: If
  <VAR
CLASS="replaceable"
>c-place</VAR
> is of foreign type
  <TT
CLASS="type"
>(<A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
> or
  <TT
CLASS="type"
>(<A
HREF="#c-ptr-null"
><SPAN
CLASS="type"
>FFI:C-PTR-NULL</SPAN
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
>,
  this will be the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> the pointer points to.
  It is a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> of type <VAR
CLASS="replaceable"
>c-type</VAR
>.
  For <TT
CLASS="type"
>(<A
HREF="#c-ptr-null"
><SPAN
CLASS="type"
>FFI:C-PTR-NULL</SPAN
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
>,
  the <VAR
CLASS="replaceable"
>c-place</VAR
> may not be <CODE
CLASS="constant"
>NULL</CODE
>.
</P
></DD
><DT
><A
NAME="slot"
></A
><TT
CLASS="sexp"
>(<A
HREF="#slot"
><CODE
CLASS="function"
>FFI:SLOT</CODE
></A
>
       <VAR
CLASS="replaceable"
>c-place</VAR
> <VAR
CLASS="replaceable"
>slot-name</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Struct or union component: If <VAR
CLASS="replaceable"
>c-place</VAR
> is of
  foreign type <TT
CLASS="type"
>(<A
HREF="#c-struct"
><SPAN
CLASS="type"
>FFI:C-STRUCT</SPAN
></A
> <VAR
CLASS="replaceable"
>class</VAR
>
  ... (<VAR
CLASS="replaceable"
>slot-name</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>) ...)</TT
> or
  of type <TT
CLASS="type"
>(<A
HREF="#c-union"
><SPAN
CLASS="type"
>FFI:C-UNION</SPAN
></A
>
  ... (<VAR
CLASS="replaceable"
>slot-name</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>) ...)</TT
>,
  this will be of type <VAR
CLASS="replaceable"
>c-type</VAR
>.
  </P
></DD
><DT
><A
NAME="cast"
></A
><TT
CLASS="sexp"
>(<A
HREF="#cast"
><CODE
CLASS="function"
>FFI:CAST</CODE
></A
>
           <VAR
CLASS="replaceable"
>c-place</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Type change: A <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> denoting the same memory
  locations as the original <VAR
CLASS="replaceable"
>c-place</VAR
>, but of type <VAR
CLASS="replaceable"
>c-type</VAR
>.
 </P
></DD
><DT
><A
NAME="offset"
></A
><TT
CLASS="sexp"
>(<A
HREF="#offset"
><CODE
CLASS="function"
>FFI:OFFSET</CODE
></A
>
           <VAR
CLASS="replaceable"
>c-place</VAR
> <VAR
CLASS="replaceable"
>offset</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Type change and displacement: return a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> denoting
  a memory locations displaced from the original <VAR
CLASS="replaceable"
>c-place</VAR
> by an
  <VAR
CLASS="replaceable"
>offset</VAR
> counted in bytes, with type <VAR
CLASS="replaceable"
>c-type</VAR
>.
  This can be used to resize an array, e.g. of <VAR
CLASS="replaceable"
>c-type</VAR
>
  <TT
CLASS="type"
>(<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
> <SPAN
CLASS="type"
>uint16</SPAN
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
>
  via <TT
CLASS="sexp"
>(<A
HREF="#offset"
><CODE
CLASS="function"
>FFI:OFFSET</CODE
></A
> <VAR
CLASS="replaceable"
>c-place</VAR
> 0
  '(<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
> <SPAN
CLASS="type"
>uint16</SPAN
> <VAR
CLASS="replaceable"
>k</VAR
>))</TT
>.
 </P
></DD
><DT
><A
NAME="c-var-addr"
></A
><TT
CLASS="sexp"
>(<A
HREF="#c-var-addr"
><CODE
CLASS="function"
>FFI:C-VAR-ADDRESS</CODE
></A
>
           <VAR
CLASS="replaceable"
>c-place</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the address of <VAR
CLASS="replaceable"
>c-place</VAR
> as a Lisp object of
  type <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>.  This is useful as an argument
  to foreign functions expecting a parameter of <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
>.
 </P
></DD
><DT
><A
NAME="c-var-object"
></A
><TT
CLASS="sexp"
>(<A
HREF="#c-var-object"
><CODE
CLASS="function"
>FFI:C-VAR-OBJECT</CODE
></A
>
   <VAR
CLASS="replaceable"
>c-place</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> object underlying the
   <VAR
CLASS="replaceable"
>c-place</VAR
>.  This is also an acceptable argument type to a <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
>
   declaration.</P
></DD
><DT
><A
NAME="typeof"
></A
><TT
CLASS="sexp"
>(<A
HREF="#typeof"
><CODE
CLASS="function"
>FFI:TYPEOF</CODE
></A
>
    <VAR
CLASS="replaceable"
>c-place</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns the <VAR
CLASS="replaceable"
>c-type</VAR
> corresponding to the <VAR
CLASS="replaceable"
>c-place</VAR
>.
</P
></DD
><DT
><A
NAME="sizeof"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sizeof"
><CODE
CLASS="function"
>FFI:SIZEOF</CODE
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#sizeof"
><CODE
CLASS="function"
>FFI:SIZEOF</CODE
></A
> <VAR
CLASS="replaceable"
>c-place</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>The first form returns the size and alignment of a
  <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type <VAR
CLASS="replaceable"
>c-type</VAR
>, measured in bytes.</P
><P
ALIGN="justify"
>The second form returns the size and alignment of the
  <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type of <VAR
CLASS="replaceable"
>c-place</VAR
>, measured in bytes.
  </P
></DD
><DT
><A
NAME="bitsizeof"
></A
><TT
CLASS="sexp"
>(<A
HREF="#bitsizeof"
><CODE
CLASS="function"
>FFI:BITSIZEOF</CODE
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#bitsizeof"
><CODE
CLASS="function"
>FFI:BITSIZEOF</CODE
></A
> <VAR
CLASS="replaceable"
>c-place</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>The first form returns the size and alignment of the
  <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type <VAR
CLASS="replaceable"
>c-type</VAR
>, measured in bits.</P
><P
ALIGN="justify"
>The second form returns the size and alignment of the
  <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type of <VAR
CLASS="replaceable"
>c-place</VAR
>, measured in bits.
 </P
></DD
><DT
><A
NAME="fa-null"
></A
><TT
CLASS="sexp"
>(<A
HREF="#fa-null"
><CODE
CLASS="function"
>FFI:FOREIGN-ADDRESS-NULL</CODE
></A
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This predicate returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> if the
  <VAR
CLASS="replaceable"
>foreign-entity</VAR
> refers to the <CODE
CLASS="constant"
>NULL</CODE
> address (and thus <VAR
CLASS="replaceable"
>foreign-entity</VAR
> should
  probably not be passed to most foreign functions).
 </P
></DD
><DT
><A
NAME="faddr-u"
></A
><TT
CLASS="sexp"
>(<A
HREF="#faddr-u"
><CODE
CLASS="function"
>FFI:FOREIGN-ADDRESS-UNSIGNED</CODE
></A
>
   <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#faddr-u"
><CODE
CLASS="function"
>FFI:UNSIGNED-FOREIGN-ADDRESS</CODE
></A
>
   <VAR
CLASS="replaceable"
>number</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="#faddr-u"
><CODE
CLASS="function"
>FFI:FOREIGN-ADDRESS-UNSIGNED</CODE
></A
> returns the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>
   address embodied in the Lisp object of type <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>,
   <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
>, <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> or <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
>.</P
><P
ALIGN="justify"
><A
HREF="#faddr-u"
><CODE
CLASS="function"
>FFI:UNSIGNED-FOREIGN-ADDRESS</CODE
></A
> returns a <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>
   object pointing to the given <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> address.
</P
></DD
><DT
><A
NAME="faddr"
></A
><TT
CLASS="sexp"
>(<A
HREF="#faddr"
><CODE
CLASS="function"
>FFI:FOREIGN-ADDRESS</CODE
></A
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="#faddr"
><CODE
CLASS="function"
>FFI:FOREIGN-ADDRESS</CODE
></A
> is both a type name and a
   selector/constructor function. It is the Lisp object type
   corresponding to a <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
> external type declaration, e.g. a
   call-out function with <TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:RETURN-TYPE</CODE
>
    <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
>)</TT
> yields a Lisp object of type
   <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>.</P
><P
ALIGN="justify"
>The function extracts the object of type <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>
   living within any <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> or <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
> object.
   If the <VAR
CLASS="replaceable"
>foreign-entity</VAR
> already is a <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>, it returns it.
   If it is a <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
> (e.g. a base foreign library address),
   it encapsulates it into a <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
> object, as suitable
   for use with a <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
> external type declaration.
   It does not construct addresses out of <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_number.html"
TARGET="_top"
><CODE
CLASS="classname"
>NUMBER</CODE
></A
>s,
   <A
HREF="#faddr-u"
><CODE
CLASS="function"
>FFI:UNSIGNED-FOREIGN-ADDRESS</CODE
></A
> must be used for that purpose.
</P
></DD
><DT
><A
NAME="validp"
></A
><TT
CLASS="sexp"
>(<A
HREF="#validp"
><CODE
CLASS="function"
>FFI:VALIDP</CODE
></A
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="#validp"
><CODE
CLASS="function"
>FFI:VALIDP</CODE
></A
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)
    <VAR
CLASS="replaceable"
>value</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This predicate returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if the <VAR
CLASS="replaceable"
>foreign-entity</VAR
>
  (e.g. the Lisp equivalent of a <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
>) refers to a pointer
  which is invalid because it comes from a previous Lisp session.
  It returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> if <VAR
CLASS="replaceable"
>foreign-entity</VAR
> can be used within the current Lisp process
  (thus it returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> for all non-foreign arguments).</P
><P
ALIGN="justify"
>You can invalidate a foreign object using
  <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="#validp"
><CODE
CLASS="function"
>FFI:VALIDP</CODE
></A
>)</TT
>.
  You cannot resurrect a zombie, nor can you kill a non-foreign
  object.</P
></DD
><DT
><A
NAME="fptr"
></A
><TT
CLASS="sexp"
>(<A
HREF="#fptr"
><CODE
CLASS="function"
>FFI:FOREIGN-POINTER</CODE
></A
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="#fptr"
><CODE
CLASS="function"
>FFI:FOREIGN-POINTER</CODE
></A
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)
   <VAR
CLASS="replaceable"
>foreign-pointer</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
><A
HREF="#fptr"
><CODE
CLASS="function"
>FFI:FOREIGN-POINTER</CODE
></A
> returns the <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
>
   associated with the Lisp object of type <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>,
   <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
>, <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> or <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
>.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="#fptr"
><CODE
CLASS="function"
>FFI:FOREIGN-POINTER</CODE
></A
>)</TT
>
   changes the <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
> associated with the Lisp object of
   type <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
>, <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> or <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
> to
   that of the other entity.
   When <VAR
CLASS="replaceable"
>foreign-pointer</VAR
> is <CODE
CLASS="constant"
>:COPY</CODE
>, a fresh <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
> is allocated.
   <VAR
CLASS="replaceable"
>foreign-entity</VAR
> still points to the same object. This is particularly useful
   with <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="#validp"
><CODE
CLASS="function"
>FFI:VALIDP</CODE
></A
>)</TT
>.
</P
></DD
><DT
><A
NAME="foreign-stack"
></A
><TT
CLASS="sexp"
>(<A
HREF="#foreign-stack"
><CODE
CLASS="function"
>FFI:WITH-FOREIGN-OBJECT</CODE
></A
> (<VAR
CLASS="replaceable"
>variable</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>
      [<VAR
CLASS="replaceable"
>initarg</VAR
>]) <VAR
CLASS="replaceable"
>body</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#foreign-stack"
><CODE
CLASS="function"
>FFI:WITH-C-VAR</CODE
></A
> (<VAR
CLASS="replaceable"
>variable</VAR
> <VAR
CLASS="replaceable"
>c-type</VAR
>
      [<VAR
CLASS="replaceable"
>initarg</VAR
>]) <VAR
CLASS="replaceable"
>body</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>These forms allocate space on the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> execution
  stack, bind respectively a <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> object or
  a local <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_define-symbol-macro.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL-MACRO</CODE
></A
> to <VAR
CLASS="replaceable"
>variable</VAR
> and execute <VAR
CLASS="replaceable"
>body</VAR
>.</P
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>initarg</VAR
> is not supplied,
  they allocate space only for <TT
CLASS="sexp"
>(<A
HREF="#sizeof"
><CODE
CLASS="function"
>FFI:SIZEOF</CODE
></A
>
  <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
> bytes.  This space is filled with zeroes.  E.g.,
  using a <VAR
CLASS="replaceable"
>c-type</VAR
> of <A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
> or even <TT
CLASS="type"
>(<A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
>
  (<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
> <SPAN
CLASS="type"
>uint8</SPAN
> 32))</TT
> (!) both allocate place
  for a single pointer, initialized to <CODE
CLASS="constant"
>NULL</CODE
>.</P
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>initarg</VAR
> is supplied, they
  allocate space for an arbitrarily complex set of structures rooted in
  <VAR
CLASS="replaceable"
>c-type</VAR
>.  Therefore, <A
HREF="#c-array-max"
><SPAN
CLASS="type"
>FFI:C-ARRAY-MAX</SPAN
></A
>, <TT
CLASS="sexp"
>#()</TT
>
  and <TT
CLASS="sexp"
>""</TT
> are your friends for creating a
  pointer to the empty arrays:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>(with-c-var (v '(c-ptr (c-array-max uint8 32)) #())
  (setf (element (deref v) 0) 127) v)</PRE
></TD
></TR
></TABLE
>
  <VAR
CLASS="replaceable"
>c-type</VAR
> is evaluated, making creation of variable sized buffers easy:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>(with-c-var (fv `(c-array uint8 ,(length my-vector)) my-vector)
  (print fv))</PRE
></TD
></TR
></TABLE
>
 </P
></DD
><DT
><A
NAME="foreign-stack-string"
></A
><TT
CLASS="sexp"
>(<A
HREF="#foreign-stack-string"
><CODE
CLASS="function"
>FFI:WITH-FOREIGN-STRING</CODE
></A
>
   (<VAR
CLASS="replaceable"
>foreign-address</VAR
> <VAR
CLASS="replaceable"
>char-count</VAR
>
    <VAR
CLASS="replaceable"
>byte-count</VAR
> <VAR
CLASS="replaceable"
>string</VAR
>
    <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <VAR
CLASS="replaceable"
>encoding</VAR
> <VAR
CLASS="replaceable"
>null-terminated-p</VAR
>
    <VAR
CLASS="replaceable"
>start</VAR
> <VAR
CLASS="replaceable"
>end</VAR
>) <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-4.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;BODY</TT
></A
> <VAR
CLASS="replaceable"
>body</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This forms converts a Lisp <VAR
CLASS="replaceable"
>string</VAR
> according to
   the <VAR
CLASS="replaceable"
>encoding</VAR
>, allocating space on the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> execution stack.
   <VAR
CLASS="replaceable"
>encoding</VAR
> can be any <A
HREF="#encoding"
><CODE
CLASS="classname"
>EXT:ENCODING</CODE
></A
>, e.g.
   <A
HREF="#charset-UTF-16"
><CODE
CLASS="constant"
>CHARSET:UTF-16</CODE
></A
>
   or <A
HREF="#charset-UTF-8"
><CODE
CLASS="constant"
>CHARSET:UTF-8</CODE
></A
>, circumventing the usual 1:1 limit imposed on
   <A
HREF="#foreign-enc"
><VAR
CLASS="varname"
>CUSTOM:*FOREIGN-ENCODING*</VAR
></A
>.</P
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>body</VAR
> is then executed with the three variables <VAR
CLASS="replaceable"
>foreign-address</VAR
>,
   <VAR
CLASS="replaceable"
>char-count</VAR
> and
   <VAR
CLASS="replaceable"
>byte-count</VAR
> respectively bound to an
   untyped <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
> (as known from the <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
> foreign
   type specification) pointing to the stack location, the number of
   <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>s of the Lisp <VAR
CLASS="replaceable"
>string</VAR
> that were considered and the
   number of <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
> bytes that were allocated for it on the
   <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> stack.</P
><P
ALIGN="justify"
>When <VAR
CLASS="replaceable"
>null-terminated-p</VAR
> is true,
   which is the default, a variable number of zero bytes is appended,
   depending on the encoding, e.g. 2 for <A
HREF="#charset-UTF-8"
><CODE
CLASS="constant"
>CHARSET:UTF-8</CODE
></A
>,
   and accounted for in <VAR
CLASS="replaceable"
>byte-count</VAR
>,
   and <VAR
CLASS="replaceable"
>char-count</VAR
> is incremented by one.</P
><P
ALIGN="justify"
>The <A
HREF="#faddr"
><CODE
CLASS="classname"
>FFI:FOREIGN-ADDRESS</CODE
></A
> object bound to <VAR
CLASS="replaceable"
>foreign-address</VAR
> is
   invalidated upon the exit from the form.</P
><P
ALIGN="justify"
>A stupid example (a quite costly interface to <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/mblen.html"
TARGET="_top"
><CODE
CLASS="function"
>mblen</CODE
></A
>):
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>(with-foreign-string (fv elems bytes string
                      :encoding charset:jis... :null-terminated-p nil
                      :end 5)
 (declare (ignore fv elems))
 (format t "This string would take ~D bytes." bytes))</PRE
></TD
></TR
></TABLE
>
</P
></DD
><DT
><A
NAME="c-type-parse"
></A
><TT
CLASS="sexp"
>(<A
HREF="#c-type-parse"
><CODE
CLASS="function"
>FFI:PARSE-C-TYPE</CODE
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#c-type-parse"
><CODE
CLASS="function"
>FFI:DEPARSE-C-TYPE</CODE
></A
> <VAR
CLASS="replaceable"
>c-type-internal</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Convert between the external (<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
>) and internal
   (<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
>) <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type representations (used by <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_describe.html"
TARGET="_top"
><CODE
CLASS="function"
>DESCRIBE</CODE
></A
>).
</P
></DD
><DT
><A
NAME="foreign-heap"
></A
><TT
CLASS="sexp"
>(<A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:ALLOCATE-SHALLOW</CODE
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:COUNT</CODE
> <CODE
CLASS="constant"
>:READ-ONLY</CODE
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:ALLOCATE-DEEP</CODE
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
> <VAR
CLASS="replaceable"
>contents</VAR
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <CODE
CLASS="constant"
>:COUNT</CODE
> <CODE
CLASS="constant"
>:READ-ONLY</CODE
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:FOREIGN-FREE</CODE
></A
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :FULL)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:FOREIGN-ALLOCATE</CODE
></A
> <VAR
CLASS="replaceable"
>c-type-internal</VAR
>
   <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :INITIAL-CONTENTS <CODE
CLASS="constant"
>:COUNT</CODE
> <CODE
CLASS="constant"
>:READ-ONLY</CODE
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Macro <A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:ALLOCATE-SHALLOW</CODE
></A
> allocates
   <TT
CLASS="sexp"
>(<A
HREF="#sizeof"
><CODE
CLASS="function"
>FFI:SIZEOF</CODE
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
>
   bytes on the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> heap and zeroes them out (like <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/calloc.html"
TARGET="_top"
><CODE
CLASS="function"
>calloc</CODE
></A
>).
   When <CODE
CLASS="constant"
>:COUNT</CODE
> is supplied, <VAR
CLASS="replaceable"
>c-type</VAR
> is substituted with
   <TT
CLASS="type"
>(<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
> <VAR
CLASS="replaceable"
>count</VAR
>)</TT
>,
   except when <VAR
CLASS="replaceable"
>c-type</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>, in which case
   <TT
CLASS="type"
>(<A
HREF="#c-array-max"
><SPAN
CLASS="type"
>FFI:C-ARRAY-MAX</SPAN
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> <VAR
CLASS="replaceable"
>count</VAR
>)</TT
>
   is used instead.
   When <CODE
CLASS="constant"
>:READ-ONLY</CODE
> is supplied, the Lisp side is prevented from modifying the
   memory contents.  This can be used as an indication that some foreign
   side is going to fill this memory (e.g. via <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/read.html"
TARGET="_top"
><CODE
CLASS="function"
>read</CODE
></A
>).</P
><P
ALIGN="justify"
>Returns a <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> object of the actual <VAR
CLASS="replaceable"
>c-type</VAR
>,
   whose address part points to the newly allocated memory.</P
><P
ALIGN="justify"
><A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:ALLOCATE-DEEP</CODE
></A
> will call <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
> as many times
   as necessary to build a structure on the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> heap of the given
   <VAR
CLASS="replaceable"
>c-type</VAR
>, initialized from the given <VAR
CLASS="replaceable"
>contents</VAR
>.</P
><P
ALIGN="justify"
>E.g., <TT
CLASS="sexp"
>(<A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:ALLOCATE-DEEP</CODE
></A
> '<A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
>
    "ABCDE")</TT
> performs 2 allocations: one for a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>
   pointer to a string, another for the contents of that string.
   This would be useful in conjunction with a <SPAN
CLASS="type"
>char**</SPAN
>
   <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type declaration.  <TT
CLASS="sexp"
>(<A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:ALLOCATE-SHALLOW</CODE
></A
>
    '<A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
>)</TT
> allocates room for a single pointer
   (probably 4 bytes).</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:ALLOCATE-DEEP</CODE
></A
> '<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
>
    "ABCDEF" :count 10)</TT
> allocates and initializes room for the
   type <TT
CLASS="type"
>(<A
HREF="#c-array-max"
><SPAN
CLASS="type"
>FFI:C-ARRAY-MAX</SPAN
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> 10)</TT
>,
   corresponding to <SPAN
CLASS="type"
>char*</SPAN
> or, more specifically,
   <SPAN
CLASS="type"
>char[10]</SPAN
> in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>.</P
><P
ALIGN="justify"
>Function <A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:FOREIGN-FREE</CODE
></A
> deallocates memory at the address
   held by the given <VAR
CLASS="replaceable"
>foreign-entity</VAR
>. If <CODE
CLASS="constant"
>:FULL</CODE
> is supplied
   and the argument is of type <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
>, recursively frees
   the whole complex stucture pointed to by this variable.</P
><P
ALIGN="justify"
>If given a <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
> object that corresponds to a
   <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> callback, deallocates it.  Callbacks are automatically
   created each time you pass a Lisp function via the <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
>.</P
><P
ALIGN="justify"
>Use <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <A
HREF="#validp"
><CODE
CLASS="function"
>FFI:VALIDP</CODE
></A
>)</TT
> to
   disable further references to this address from Lisp.
   This is currently not done automatically.
   If the given pointer is already invalid, <A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:FOREIGN-FREE</CODE
></A
> (currently)
   signals an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>. This may change to make it easier to integrate
   with <A
HREF="#final"
><CODE
CLASS="function"
>EXT:FINALIZE</CODE
></A
>.</P
><P
ALIGN="justify"
>Function <A
HREF="#foreign-heap"
><CODE
CLASS="function"
>FFI:FOREIGN-ALLOCATE</CODE
></A
> is a lower-level interface as it
   requires an internal <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type descriptor as returned by
   <A
HREF="#c-type-parse"
><CODE
CLASS="function"
>FFI:PARSE-C-TYPE</CODE
></A
>.</P
></DD
><DT
><A
NAME="with-c-place"
></A
><TT
CLASS="sexp"
>(<A
HREF="#with-c-place"
><CODE
CLASS="function"
>FFI:WITH-C-PLACE</CODE
></A
> (<VAR
CLASS="replaceable"
>variable</VAR
> <VAR
CLASS="replaceable"
>foreign-entity</VAR
>)
   <VAR
CLASS="replaceable"
>body</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> out of the given <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
>
  object so operations on places (e.g. <A
HREF="#cast"
><CODE
CLASS="function"
>FFI:CAST</CODE
></A
>, <A
HREF="#deref"
><CODE
CLASS="function"
>FFI:DEREF</CODE
></A
>, <A
HREF="#slot"
><CODE
CLASS="function"
>FFI:SLOT</CODE
></A
> etc.) can
  be used within <VAR
CLASS="replaceable"
>body</VAR
>.  <A
HREF="#foreign-stack"
><CODE
CLASS="function"
>FFI:WITH-C-VAR</CODE
></A
> appears as a composition of
  <A
HREF="#foreign-stack"
><CODE
CLASS="function"
>FFI:WITH-FOREIGN-OBJECT</CODE
></A
> and <A
HREF="#with-c-place"
><CODE
CLASS="function"
>FFI:WITH-C-PLACE</CODE
></A
>.</P
><P
ALIGN="justify"
>Such a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
> can be used to access memory referenced by a <VAR
CLASS="replaceable"
>foreign-entity</VAR
>
  object:
  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>(setq foo (allocate-deep '(c-array uint8 3) rgb))
(with-c-place (place foo) (element place 0))</PRE
></TD
></TR
></TABLE
>
</P
></DD
><DT
><A
NAME="ffi-extern-output"
></A
><A
HREF="#ffi-extern-output"
><VAR
CLASS="varname"
>FFI:*OUTPUT-C-FUNCTIONS*</VAR
></A
><BR><VAR
CLASS="varname"
>FFI:*OUTPUT-C-VARIABLES*</VAR
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will write the <SPAN
CLASS="type"
>extern</SPAN
>
   declarations for foreign functions (defined with <A
HREF="#def-call-out"
><CODE
CLASS="function"
>FFI:DEF-CALL-OUT</CODE
></A
>) and
   foreign variables (defined with <A
HREF="#def-c-var"
><CODE
CLASS="function"
>FFI:DEF-C-VAR</CODE
></A
>) into the output <TT
CLASS="filename"
>#P".c"</TT
>
   (when the Lisp file is compiled with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
>)
   <I
CLASS="emphasis"
>unless</I
> these variables are <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
   They are <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> by default, so the <SPAN
CLASS="type"
>extern</SPAN
>
   declarations are <I
CLASS="emphasis"
>not</I
> written; you are encouraged to use
   <A
HREF="#c-lines"
><CODE
CLASS="function"
>FFI:C-LINES</CODE
></A
> to include the appropriate <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> headers.
   Set these variables to non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> if the headers are not available or
   not usable.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dffi-types"
>30.3.2. (Foreign) <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> types</A
></H3
><P
ALIGN="justify"
>Foreign <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> types are used in the <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
>.
They are <I
CLASS="emphasis"
>not</I
> regular <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> types or <B
CLASS="command"
>CLOS</B
> classes.</P
><P
ALIGN="justify"
>A <VAR
CLASS="replaceable"
>c-type</VAR
> is either a predefined <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type or the name of a
 type defined by <A
HREF="#def-c-type"
><CODE
CLASS="function"
>FFI:DEF-C-TYPE</CODE
></A
>.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>the predefined <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> types (<VAR
CLASS="replaceable"
>c-type</VAR
>)</B
></P
><DL
><DT
><A
NAME="simple-c-type"
></A
><VAR
CLASS="replaceable"
>simple-c-type</VAR
></DT
><DD
><P
ALIGN="justify"
>the simple <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> types
  <DIV
CLASS="informaltable"
><P
></P
><A
NAME="simple-c-type-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>Lisp name</TH
><TH
>Lisp equivalent</TH
><TH
><A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> equivalent</TH
><TH
>ILU
 equivalent</TH
><TH
>Comment</TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>void</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>as a result type only</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
TARGET="_top"
><CODE
CLASS="classname"
>BOOLEAN</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
TARGET="_top"
><CODE
CLASS="classname"
>BOOLEAN</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>int</SPAN
></TD
><TD
><SPAN
CLASS="type"
>BOOLEAN</SPAN
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>char</SPAN
></TD
><TD
><SPAN
CLASS="type"
>SHORT CHARACTER</SPAN
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>char</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>signed char</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>uchar</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>unsigned char</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>short</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>short</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>ushort</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>unsigned short</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>int</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>int</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>uint</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>unsigned int</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>long</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>long</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>ulong</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>unsigned long</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>uint8</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
></TD
><TD
><SPAN
CLASS="type"
>uint8</SPAN
></TD
><TD
><SPAN
CLASS="type"
>BYTE</SPAN
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>sint8</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
></TD
><TD
><SPAN
CLASS="type"
>sint8</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>uint16</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 16)</TT
></TD
><TD
><SPAN
CLASS="type"
>uint16</SPAN
></TD
><TD
><SPAN
CLASS="type"
>SHORT CARDINAL</SPAN
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>sint16</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 16)</TT
></TD
><TD
><SPAN
CLASS="type"
>sint16</SPAN
></TD
><TD
><SPAN
CLASS="type"
>SHORT INTEGER</SPAN
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>uint32</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 32)</TT
></TD
><TD
><SPAN
CLASS="type"
>uint32</SPAN
></TD
><TD
><SPAN
CLASS="type"
>CARDINAL</SPAN
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>sint32</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 32)</TT
></TD
><TD
><SPAN
CLASS="type"
>sint32</SPAN
></TD
><TD
><SPAN
CLASS="type"
>INTEGER</SPAN
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>uint64</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 64)</TT
></TD
><TD
><SPAN
CLASS="type"
>uint64</SPAN
></TD
><TD
><SPAN
CLASS="type"
>LONG CARDINAL</SPAN
></TD
><TD
>does not work on all platforms</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>sint64</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 64)</TT
></TD
><TD
><SPAN
CLASS="type"
>sint64</SPAN
></TD
><TD
><SPAN
CLASS="type"
>LONG INTEGER</SPAN
></TD
><TD
>does not work on all platforms</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SINGLE-FLOAT</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>float</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>DOUBLE-FLOAT</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>double</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
></DD
><DT
><A
NAME="c-pointer"
></A
><A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
></DT
><DD
><P
ALIGN="justify"
>This type corresponds to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
   <SPAN
CLASS="type"
>void*</SPAN
>, an opaque pointer.
   When used as an argument, <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> is accepted as a <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
> and
   treated as <CODE
CLASS="constant"
>NULL</CODE
>; when a function wants to return a <CODE
CLASS="constant"
>NULL</CODE
>
   <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
>, it actually returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
</P
></DD
><DT
><A
NAME="c-string"
></A
><A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
></DT
><DD
><P
ALIGN="justify"
>This type corresponds to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
  <SPAN
CLASS="type"
>char*</SPAN
>, a zero-terminated string.  Its Lisp equivalent is
  a string, without the trailing zero character.
 </P
></DD
><DT
><A
NAME="c-struct"
></A
><TT
CLASS="type"
>(<A
HREF="#c-struct"
><SPAN
CLASS="type"
>FFI:C-STRUCT</SPAN
></A
>
  <VAR
CLASS="replaceable"
>class</VAR
> (<VAR
CLASS="replaceable"
>ident<SUB
>1</SUB
></VAR
>
   <VAR
CLASS="replaceable"
>c-type<SUB
>1</SUB
></VAR
>) ...
  (<VAR
CLASS="replaceable"
>ident<SUB
>n</SUB
></VAR
>
   <VAR
CLASS="replaceable"
>c-type<SUB
>n</SUB
></VAR
>))</TT
></DT
><DD
><P
ALIGN="justify"
>This type is equivalent to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
 <SPAN
CLASS="type"
>struct { <VAR
CLASS="replaceable"
>c-type<SUB
>1</SUB
></VAR
>
 <VAR
CLASS="replaceable"
>ident<SUB
>1</SUB
></VAR
>; ...;
 <VAR
CLASS="replaceable"
>c-type<SUB
>n</SUB
></VAR
>
 <VAR
CLASS="replaceable"
>ident<SUB
>n</SUB
></VAR
>; }</SPAN
>.
 Its Lisp equivalent is: if <VAR
CLASS="replaceable"
>class</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
>, a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
>; if <VAR
CLASS="replaceable"
>class</VAR
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
>, a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#proper_list"
TARGET="_top"
>proper list</A
>;
 if <VAR
CLASS="replaceable"
>class</VAR
> is a symbol naming a structure or <B
CLASS="command"
>CLOS</B
> class, an
 instance of this class, with slots of names
 <VAR
CLASS="replaceable"
>ident<SUB
>1</SUB
></VAR
>, ...,
 <VAR
CLASS="replaceable"
>ident<SUB
>n</SUB
></VAR
>.</P
><P
ALIGN="justify"
>&#13; <VAR
CLASS="replaceable"
>class</VAR
> may also be a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
> of a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
> (as above) and
 a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
> of <A
HREF="#def-c-struct"
><CODE
CLASS="function"
>FFI:DEF-C-STRUCT</CODE
></A
> options.
 </P
></DD
><DT
><A
NAME="c-union"
></A
><TT
CLASS="type"
>(<A
HREF="#c-union"
><SPAN
CLASS="type"
>FFI:C-UNION</SPAN
></A
>
  (<VAR
CLASS="replaceable"
>ident<SUB
>1</SUB
></VAR
>
   <VAR
CLASS="replaceable"
>c-type<SUB
>1</SUB
></VAR
>) ...
  (<VAR
CLASS="replaceable"
>ident<SUB
>n</SUB
></VAR
>
   <VAR
CLASS="replaceable"
>c-type<SUB
>n</SUB
></VAR
>))</TT
></DT
><DD
><P
ALIGN="justify"
>This type is equivalent to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
  <SPAN
CLASS="type"
>union { <VAR
CLASS="replaceable"
>c-type<SUB
>1</SUB
></VAR
>
  <VAR
CLASS="replaceable"
>ident<SUB
>1</SUB
></VAR
>; ...;
  <VAR
CLASS="replaceable"
>c-type<SUB
>n</SUB
></VAR
>
  <VAR
CLASS="replaceable"
>ident<SUB
>n</SUB
></VAR
>;
  }</SPAN
>.
  Conversion to and from Lisp assumes that a value is to be viewed as
  being of <VAR
CLASS="replaceable"
>c-type<SUB
>1</SUB
></VAR
>.
 </P
></DD
><DT
><A
NAME="c-array"
></A
><TT
CLASS="type"
>(<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
>
   <VAR
CLASS="replaceable"
>c-type</VAR
> <VAR
CLASS="replaceable"
>dim<SUB
>1</SUB
></VAR
>)</TT
><BR><TT
CLASS="type"
>(<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
>
   <VAR
CLASS="replaceable"
>c-type</VAR
> (<VAR
CLASS="replaceable"
>dim<SUB
>1</SUB
></VAR
> ...
   <VAR
CLASS="replaceable"
>dim<SUB
>n</SUB
></VAR
>))</TT
></DT
><DD
><P
ALIGN="justify"
>This type is equivalent to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
  <SPAN
CLASS="type"
><VAR
CLASS="replaceable"
>c-type</VAR
> [<VAR
CLASS="replaceable"
>dim<SUB
>1</SUB
></VAR
>]
  ... [<VAR
CLASS="replaceable"
>dim<SUB
>n</SUB
></VAR
>]</SPAN
>.
  Note that when an array is passed as an argument to a function in
  <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>, it is actually passed as a pointer; you therefore have to
  write <TT
CLASS="type"
>(<A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
> (<A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
> ...))</TT
> for this
  argument's type.</P
></DD
><DT
><A
NAME="c-array-max"
></A
><TT
CLASS="type"
>(<A
HREF="#c-array-max"
><SPAN
CLASS="type"
>FFI:C-ARRAY-MAX</SPAN
></A
>
  <VAR
CLASS="replaceable"
>c-type</VAR
> <VAR
CLASS="replaceable"
>maxdimension</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This type is equivalent to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
  <SPAN
CLASS="type"
><VAR
CLASS="replaceable"
>c-type</VAR
> [<VAR
CLASS="replaceable"
>maxdimension</VAR
>]</SPAN
>, an array containing up to
  <VAR
CLASS="replaceable"
>maxdimension</VAR
> elements.
  The array is zero-terminated if it contains less than <VAR
CLASS="replaceable"
>maxdimension</VAR
> elements.
  Conversion from Lisp of an array with more than <VAR
CLASS="replaceable"
>maxdimension</VAR
> elements
  silently ignores the superfluous elements.
  </P
></DD
><DT
><A
NAME="c-function"
></A
><TT
CLASS="type"
>(<A
HREF="#c-function"
><SPAN
CLASS="type"
>FFI:C-FUNCTION</SPAN
></A
> (<CODE
CLASS="constant"
>:ARGUMENTS</CODE
>
      {(<VAR
CLASS="replaceable"
>argument</VAR
> <VAR
CLASS="replaceable"
>a-c-type</VAR
>
        [<A
HREF="#param-mode"
><VAR
CLASS="replaceable"
>PARAM-MODE</VAR
></A
> [<A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
>]])}*)
    (<CODE
CLASS="constant"
>:RETURN-TYPE</CODE
> <VAR
CLASS="replaceable"
>r-c-type</VAR
> [<A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
>])
    (<A
HREF="#c-flavor"
><CODE
CLASS="constant"
>:LANGUAGE</CODE
></A
> <VAR
CLASS="replaceable"
>language</VAR
>))</TT
></DT
><DD
><P
ALIGN="justify"
>This type designates a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function that can be
  called according to the given prototype <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>r-c-type</VAR
> (*)
  (<VAR
CLASS="replaceable"
>a-c-type<SUB
>1</SUB
></VAR
>, ...))</TT
>.
  Conversion between <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> functions and Lisp functions
  is transparent, and <CODE
CLASS="constant"
>NULL</CODE
>/<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> is recognized and
  accepted.</P
></DD
><DT
><A
NAME="c-ptr"
></A
><TT
CLASS="type"
>(<A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
>
              <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This type is equivalent to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
  <SPAN
CLASS="type"
><VAR
CLASS="replaceable"
>c-type</VAR
> *</SPAN
>: a pointer to a single item of the given
  <VAR
CLASS="replaceable"
>c-type</VAR
>.</P
></DD
><DT
><A
NAME="c-ptr-null"
></A
><TT
CLASS="type"
>(<A
HREF="#c-ptr-null"
><SPAN
CLASS="type"
>FFI:C-PTR-NULL</SPAN
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This type is also equivalent to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
  <SPAN
CLASS="type"
><VAR
CLASS="replaceable"
>c-type</VAR
> *</SPAN
>: a pointer to a single item of the given
  <VAR
CLASS="replaceable"
>c-type</VAR
>, with the exception that <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> <CODE
CLASS="constant"
>NULL</CODE
> corresponds to
  Lisp <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
><DT
><A
NAME="c-array-ptr"
></A
><TT
CLASS="type"
>(<A
HREF="#c-array-ptr"
><SPAN
CLASS="type"
>FFI:C-ARRAY-PTR</SPAN
></A
> <VAR
CLASS="replaceable"
>c-type</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>This type is equivalent to what <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> calls
  <SPAN
CLASS="type"
><VAR
CLASS="replaceable"
>c-type</VAR
> (*)[]</SPAN
>: a pointer to a zero-terminated array of
  items of the given <VAR
CLASS="replaceable"
>c-type</VAR
>.</P
></DD
></DL
></DIV
><P
ALIGN="justify"
><A
HREF="#foreign-enc"
><VAR
CLASS="varname"
>CUSTOM:*FOREIGN-ENCODING*</VAR
></A
> governs conversion for any <VAR
CLASS="replaceable"
>c-type</VAR
> involving
 <A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_character.html"
TARGET="_top"
><CODE
CLASS="classname"
>CHARACTER</CODE
></A
> (but not <SPAN
CLASS="type"
>char</SPAN
>).</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="c-flavor"
>30.3.3. The choice of the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> flavor.</A
></H3
><P
ALIGN="justify"
><A
HREF="#c-function"
><SPAN
CLASS="type"
>FFI:C-FUNCTION</SPAN
></A
>, <A
HREF="#def-call-in"
><CODE
CLASS="function"
>FFI:DEF-CALL-IN</CODE
></A
>, <A
HREF="#def-call-out"
><CODE
CLASS="function"
>FFI:DEF-CALL-OUT</CODE
></A
> take <A
HREF="#c-flavor"
><CODE
CLASS="constant"
>:LANGUAGE</CODE
></A
> argument.
The <VAR
CLASS="replaceable"
>language</VAR
> is either <CODE
CLASS="constant"
>:C</CODE
> (denotes K&#38;R <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>) or <CODE
CLASS="constant"
>:STDC</CODE
>
(denotes ANSI <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>) or <CODE
CLASS="constant"
>:STDC-STDCALL</CODE
> (denotes ANSI <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>
with the <I
CLASS="emphasis"
>stdcall</I
> calling convention).
It specifies whether the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function (caller or callee) has been
compiled by a K&#38;R <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler or by an ANSI <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler,
and possibly the calling convention.</P
><P
ALIGN="justify"
>The default language is set using the macro
 <CODE
CLASS="function"
>FFI:DEFAULT-FOREIGN-LANGUAGE</CODE
>.
If this macro has not been called in the current
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_c.html#compilation_unit"
TARGET="_top"
>compilation
unit</A
> (usually a file), a warning is issued and
<CODE
CLASS="constant"
>:STDC</CODE
> is used for the rest of the unit.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dffi-variables"
>30.3.4. Foreign variables</A
></H3
><P
ALIGN="justify"
>Foreign variables are variables whose storage is allocated in the
 foreign language module.  They can nevertheless be evaluated and
 modified through <A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
>, just as normal variables can, except that the
 range of allowed values is limited according to the variable's foreign
 type.  Note that for a foreign variable <VAR
CLASS="replaceable"
>x</VAR
> the form <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
> <VAR
CLASS="replaceable"
>x</VAR
> <VAR
CLASS="replaceable"
>x</VAR
>)</TT
> is not necessarily true,
 since every time <VAR
CLASS="replaceable"
>x</VAR
> is evaluated its foreign value is converted to a
 <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh"
TARGET="_top"
>fresh</A
> Lisp value.  Foreign variables are defined using
 <A
HREF="#def-c-var"
><CODE
CLASS="function"
>FFI:DEF-C-VAR</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dffi-places"
>30.3.5. Operations on foreign places</A
></H3
><P
ALIGN="justify"
>A <A
HREF="#dffi-variables"
><CODE
CLASS="classname"
>FFI:FOREIGN-VARIABLE</CODE
></A
> <VAR
CLASS="replaceable"
>name</VAR
> defined by <A
HREF="#def-c-var"
><CODE
CLASS="function"
>FFI:DEF-C-VAR</CODE
></A
>, <A
HREF="#foreign-stack"
><CODE
CLASS="function"
>FFI:WITH-C-VAR</CODE
></A
>
 or <A
HREF="#with-c-place"
><CODE
CLASS="function"
>FFI:WITH-C-PLACE</CODE
></A
> defines a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_p.html#place"
TARGET="_top"
>place</A
>,
 i.e., a form which can also be used as argument to <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
>.
 (An "lvalue" in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> terminology.)
 The following operations are available on foreign places:
 <A
HREF="#element"
><CODE
CLASS="function"
>FFI:ELEMENT</CODE
></A
>, <A
HREF="#deref"
><CODE
CLASS="function"
>FFI:DEREF</CODE
></A
>, <A
HREF="#slot"
><CODE
CLASS="function"
>FFI:SLOT</CODE
></A
>, <A
HREF="#cast"
><CODE
CLASS="function"
>FFI:CAST</CODE
></A
>, <A
HREF="#offset"
><CODE
CLASS="function"
>FFI:OFFSET</CODE
></A
>, <A
HREF="#c-var-addr"
><CODE
CLASS="function"
>FFI:C-VAR-ADDRESS</CODE
></A
>,
 <A
HREF="#c-var-object"
><CODE
CLASS="function"
>FFI:C-VAR-OBJECT</CODE
></A
>, <A
HREF="#typeof"
><CODE
CLASS="function"
>FFI:TYPEOF</CODE
></A
>, <A
HREF="#sizeof"
><CODE
CLASS="function"
>FFI:SIZEOF</CODE
></A
>, <A
HREF="#bitsizeof"
><CODE
CLASS="function"
>FFI:BITSIZEOF</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dffi-functions"
>30.3.6. Foreign functions</A
></H3
><P
ALIGN="justify"
>Foreign functions are functions which are defined in the foreign
 language.  There are <I
CLASS="emphasis"
>named foreign functions</I
>
 (imported via <A
HREF="#def-call-out"
><CODE
CLASS="function"
>FFI:DEF-CALL-OUT</CODE
></A
> or created via <A
HREF="#def-call-in"
><CODE
CLASS="function"
>FFI:DEF-CALL-IN</CODE
></A
>) and
 <I
CLASS="emphasis"
>anonymous foreign functions</I
>; they arise through
 conversion of function pointers.</P
><P
ALIGN="justify"
>A <I
CLASS="emphasis"
>"call-out"</I
> function is a foreign function
 called from Lisp: control flow temporarily leaves Lisp.  A
 <I
CLASS="emphasis"
>"call-in"</I
> function is a Lisp function called from
 the foreign language: control flow temporary enters Lisp.</P
><P
ALIGN="justify"
>The following forms define foreign functions: <A
HREF="#def-call-in"
><CODE
CLASS="function"
>FFI:DEF-CALL-IN</CODE
></A
>,
 <A
HREF="#def-call-out"
><CODE
CLASS="function"
>FFI:DEF-CALL-OUT</CODE
></A
>, <A
HREF="#def-c-call-in"
><CODE
CLASS="function"
>FFI:DEF-C-CALL-IN</CODE
></A
>, <A
HREF="#def-c-call-out"
><CODE
CLASS="function"
>FFI:DEF-C-CALL-OUT</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="allocation"
>30.3.7. Argument and result passing conventions</A
></H3
><P
ALIGN="justify"
>When passed to and from functions, allocation of arguments and
 results is handled as follows:</P
><P
ALIGN="justify"
>Values of <A
HREF="#simple-c-type"
><VAR
CLASS="replaceable"
>SIMPLE-C-TYPE</VAR
></A
>, <A
HREF="#c-pointer"
><SPAN
CLASS="type"
>FFI:C-POINTER</SPAN
></A
> are passed on the stack,
 with dynamic extent. The <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is effectively ignored.</P
><P
ALIGN="justify"
>Values of type <A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
>, <A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
>, <A
HREF="#c-ptr-null"
><SPAN
CLASS="type"
>FFI:C-PTR-NULL</SPAN
></A
>, <A
HREF="#c-array-ptr"
><SPAN
CLASS="type"
>FFI:C-ARRAY-PTR</SPAN
></A
>
 need storage.  The <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> specifies the allocation policy:
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="allocation-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
><A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
></TH
><TH
>meaning</TH
></TR
></THEAD
><TBODY
><TR
><TD
><CODE
CLASS="constant"
>:NONE</CODE
></TD
><TD
>no storage is allocated.</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:ALLOCA</CODE
></TD
><TD
>allocation of storage on the
   stack, which has dynamic extent.</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:MALLOC-FREE</CODE
></TD
><TD
>storage will be allocated via
   <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
> and freed via <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
><P
ALIGN="justify"
>If no <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is specified, the default <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is
 <CODE
CLASS="constant"
>:NONE</CODE
> for most types, but <CODE
CLASS="constant"
>:ALLOCA</CODE
> for <A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
> and <A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
> and
 <A
HREF="#c-ptr-null"
><SPAN
CLASS="type"
>FFI:C-PTR-NULL</SPAN
></A
> and <A
HREF="#c-array-ptr"
><SPAN
CLASS="type"
>FFI:C-ARRAY-PTR</SPAN
></A
> and for <CODE
CLASS="constant"
>:OUT</CODE
> arguments. [Subject to
 change!]  The <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
> policy provides the ability to pass
 arbitrarily nested structs containing pointers pointing to structs
 ... within a single conversion.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>For call-out functions:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>For arguments passed from Lisp to <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp allocates the storage using <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
> and
     never deallocates it.  The <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function is supposed to call
     <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
> when done with it.</P
></DD
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:ALLOCA</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp allocates the storage on the stack, with
     dynamic extent.  It is freed when the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function returns.
    </P
></DD
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:NONE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.
     This is dangerous! and deprecated.
    </P
></DD
></DL
></DIV
></DD
><DT
>For results passed from <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> to Lisp:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp calls <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
> on it when done.
    </P
></DD
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:NONE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp does nothing.
    </P
></DD
></DL
></DIV
></DD
></DL
></DIV
></DD
><DT
>For call-in functions:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>For arguments passed from <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> to Lisp:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp calls <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
> on it when done.
     </P
></DD
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:ALLOCA</CODE
> or <CODE
CLASS="constant"
>:NONE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp does nothing.
     </P
></DD
></DL
></DIV
></DD
><DT
>For results passed from Lisp to <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp allocates the storage using <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
> and
      never deallocates it.  The <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function is supposed to call
      <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
> when done with it.</P
></DD
><DT
>If <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> is <CODE
CLASS="constant"
>:NONE</CODE
>:</DT
><DD
><P
ALIGN="justify"
>Lisp assumes that the pointer already points to a
     valid area of the proper size and puts the result value there.
     This is dangerous! and deprecated.
    </P
></DD
></DL
></DIV
></DD
></DL
></DIV
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> may not be <CODE
CLASS="constant"
>:MALLOC-FREE</CODE
> because there
 is no commonly used <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
>/<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
> library function.</P
><P
ALIGN="justify"
>The <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> may be followed by a register specification,
 any of the symbols <CODE
CLASS="constant"
>:d0</CODE
>, <CODE
CLASS="constant"
>:d1</CODE
>,
 <CODE
CLASS="constant"
>:d2</CODE
>, <CODE
CLASS="constant"
>:d3</CODE
>,
 <CODE
CLASS="constant"
>:d4</CODE
>, <CODE
CLASS="constant"
>:d5</CODE
>,
 <CODE
CLASS="constant"
>:d6</CODE
>, <CODE
CLASS="constant"
>:d7</CODE
>,
 <CODE
CLASS="constant"
>:a0</CODE
>, <CODE
CLASS="constant"
>:a1</CODE
>,
 <CODE
CLASS="constant"
>:a2</CODE
>, <CODE
CLASS="constant"
>:a3</CODE
>,
 <CODE
CLASS="constant"
>:a4</CODE
>, <CODE
CLASS="constant"
>:a5</CODE
>,
 <CODE
CLASS="constant"
>:a6</CODE
>, each representing one 680x0 register.
 This works only for integral types: integers, pointers, <A
HREF="#c-string"
><SPAN
CLASS="type"
>FFI:C-STRING</SPAN
></A
>,
 <A
HREF="#c-function"
><SPAN
CLASS="type"
>FFI:C-FUNCTION</SPAN
></A
>.
</P
></DD
></DL
></DIV
><DIV
CLASS="warning"
><A
NAME="ffi-struct-arg"
></A
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>Passing <A
HREF="#c-struct"
><SPAN
CLASS="type"
>FFI:C-STRUCT</SPAN
></A
>, <A
HREF="#c-union"
><SPAN
CLASS="type"
>FFI:C-UNION</SPAN
></A
>,
  <A
HREF="#c-array"
><SPAN
CLASS="type"
>FFI:C-ARRAY</SPAN
></A
>, <A
HREF="#c-array-max"
><SPAN
CLASS="type"
>FFI:C-ARRAY-MAX</SPAN
></A
> values as arguments (not via pointers) is
  only possible to the extent the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler supports it.
  Most <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compilers do it right, but some <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compilers
  (such as <A
HREF="http://gcc.gnu.org/"
TARGET="_top"
><B
CLASS="command"
>gcc</B
></A
> on hppa and <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>) have problems with this.
  The recommended workaround is to pass pointers; this is fully supported.
  See also this <CODE
CLASS="email"
>&#60;<A
HREF="mailto:clisp-list@sf.net"
>clisp-list@sf.net</A
>&#62;</CODE
>
  <A
HREF="http://article.gmane.org/gmane.lisp.clisp.devel/10089"
TARGET="_top"
>message</A
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="param-mode"
>30.3.8. Parameter Mode</A
></H3
><P
ALIGN="justify"
>A function parameter's <A
HREF="#param-mode"
><VAR
CLASS="replaceable"
>PARAM-MODE</VAR
></A
> may be</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><CODE
CLASS="constant"
>:IN</CODE
> (means: read-only):</DT
><DD
><P
ALIGN="justify"
>The caller passes information to the callee.
  </P
></DD
><DT
><CODE
CLASS="constant"
>:OUT</CODE
> (means: write-only):</DT
><DD
><P
ALIGN="justify"
>The callee passes information back to the caller on
   return.  When viewed as a Lisp function, there is no Lisp argument
   corresponding to this, instead it means an additional return value.
  </P
></DD
><DT
><CODE
CLASS="constant"
>:IN-OUT</CODE
> (means: read-write):</DT
><DD
><P
ALIGN="justify"
>Information is passed from the caller to the callee
   and then back to the caller.  When viewed as a Lisp function, the
   <CODE
CLASS="constant"
>:OUT</CODE
> value is returned as an additional multiple value.
  </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>The default is <CODE
CLASS="constant"
>:IN</CODE
>.</P
><P
ALIGN="justify"
>[Currently, only <CODE
CLASS="constant"
>:IN</CODE
> is fully implemented.  <CODE
CLASS="constant"
>:OUT</CODE
> works only
 with <A
HREF="#allocation"
><VAR
CLASS="replaceable"
>ALLOCATION</VAR
></A
> = <CODE
CLASS="constant"
>:ALLOCA</CODE
>.]</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="dffi-examples"
>30.3.9. Examples</A
></H3
><DIV
CLASS="example"
><A
NAME="dffi-simple"
></A
><P
><B
>Example 30-3. Simple declarations and access</B
></P
><P
ALIGN="justify"
>The <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> declaration

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;struct foo {
    int a;
    struct foo * b[100];
};
</PRE
></TD
></TR
></TABLE
>

corresponds to

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(def-c-struct foo
  (a int)
  (b (c-array (c-ptr foo) 100)))
</PRE
></TD
></TR
></TABLE
></P
><P
ALIGN="justify"
>The element access

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;struct foo f;
f.b[7].a
</PRE
></TD
></TR
></TABLE
>

corresponds to

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(declare (type foo f))
(foo-a (aref (foo-b f) 7)) or (slot-value (aref (slot-value f 'b) 7) 'a)
</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="example"
><A
NAME="dffi-extern-var"
></A
><P
><B
>Example 30-4. external <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> variable and some accesses</B
></P
><P
ALIGN="justify"
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;struct bar {
    short x, y;
    char a, b;
    int z;
    struct bar * n;
};

extern struct bar * my_struct;

my_struct-&#62;x++;
my_struct-&#62;a = 5;
my_struct = my_struct-&#62;n;
</PRE
></TD
></TR
></TABLE
>

corresponds to

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(def-c-struct bar
  (x short)
  (y short)
  (a char)
  (b char) ; or (b character) if it represents a character, not a number
  (z int)
  (n (c-ptr bar)))

(def-c-var my_struct (:type (c-ptr bar)))

(setq my_struct (let ((s my_struct)) (incf (slot-value s 'x)) s))
or (incf (slot my_struct 'x))
(setq my_struct (let ((s my_struct)) (setf (slot-value s 'a) 5) s))
or (setf (slot my_struct 'a) 5)
(setq my_struct (slot-value my_struct 'n))
or (setq my_struct (deref (slot my_struct 'n)))
</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="example"
><A
NAME="dffi-extern-func1"
></A
><P
><B
>Example 30-5. Calling an external function</B
></P
><P
ALIGN="justify"
>On ANSI <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> systems, <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/stdlib.h.html"
TARGET="_top"
><TT
CLASS="filename"
>stdlib.h</TT
></A
> contains the declarations:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;typedef struct {
  int quot;   /* Quotient */
  int rem;    /* Remainder */
} div_t;
extern div_t div (int numer, int denom);
</PRE
></TD
></TR
></TABLE
>

This translates to

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(def-c-struct (div_t :typedef)
  (quot int)
  (rem int))
(default-foreign-language :stdc)
(def-call-out div (:arguments (numer int) (denom int))
  (:return-type div_t))
</PRE
></TD
></TR
></TABLE
>

Sample call from within Lisp:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;&#62; (div 20 3)
#S(DIV_T :QUOT 6 :REM 2)
</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="example"
><A
NAME="dffi-extern-func2"
></A
><P
><B
>Example 30-6. Another example for calling an external function</B
></P
><P
ALIGN="justify"
>Suppose the following is defined in a file
 <TT
CLASS="filename"
>cfun.c</TT
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;struct cfunr { int x; char *s; };
struct cfunr * cfun (int i,char *s,struct cfunr * r,int a[10]) {
  int j;
  struct cfunr * r2;
  printf("i = %d\n", i);
  printf("s = %s\n", s);
  printf("r-&#62;x = %d\n", r-&#62;x);
  printf("r-&#62;s = %s\n", r-&#62;s);
  for (j = 0; j &#60; 10; j++) printf("a[%d] = %d.\n", j, a[j]);
  r2 = (struct cfunr *) malloc (sizeof (struct cfunr));
  r2-&#62;x = i+5;
  r2-&#62;s = "A C string";
  return r2;
}
</PRE
></TD
></TR
></TABLE
>

It is possible to call this function from Lisp using the file
<TT
CLASS="filename"
>callcfun.lisp</TT
> (do not call it
<TT
CLASS="filename"
>cfun.lisp</TT
> - <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_compile-file.html"
TARGET="_top"
><CODE
CLASS="function"
>COMPILE-FILE</CODE
></A
> would overwrite
<TT
CLASS="filename"
>cfun.c</TT
>) whose contents is:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "TEST-C-CALL" (:use "LISP" "FFI"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "TEST-C-CALL")
(eval-when (compile) (setq <A
HREF="#ffi-extern-output"
><VAR
CLASS="varname"
>FFI:*OUTPUT-C-FUNCTIONS*</VAR
></A
> t))
(def-c-struct cfunr (x int) (s c-string))
(default-foreign-language :stdc)
(def-call-out cfun
    (:arguments (i int)
                (s c-string)
                (r (c-ptr cfunr) :in :alloca)
                (a (c-ptr (c-array int 10)) :in :alloca))
  (:return-type (c-ptr cfunr)))
(defun call-cfun ()
  (cfun 5 "A Lisp string" (make-cfunr :x 10 :s "Another Lisp string")
        '#(0 1 2 3 4 5 6 7 8 9)))
</PRE
></TD
></TR
></TABLE
>

Use the <A
HREF="#modules"
>module</A
> facility:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;$ clisp-link create-module-set cfun callcfun.c
$ cc -O -c cfun.c
$ cd cfun
$ ln -s ../cfun.o cfun.o
Add cfun.o to NEW_LIBS and NEW_FILES in link.sh.
$ cd ..
$ base/lisp.run -M base/lispinit.mem -c callcfun.lisp
$ clisp-link add-module-set cfun base base+cfun
$ base+cfun/lisp.run -M base+cfun/lispinit.mem -i callcfun
&#62; (test-c-call::call-cfun)
i = 5
s = A Lisp string
r-&#62;x = 10
r-&#62;s = Another Lisp string
a[0] = 0.
a[1] = 1.
a[2] = 2.
a[3] = 3.
a[4] = 4.
a[5] = 5.
a[6] = 6.
a[7] = 7.
a[8] = 8.
a[9] = 9.
#S(TEST-C-CALL::CFUNR :X 10 :S "A C string")
&#62;
$ rm -r base+cfun
</PRE
></TD
></TR
></TABLE
></P
><P
ALIGN="justify"
>Note that there is a memory leak here: The return value
<VAR
CLASS="varname"
>r2</VAR
> of <CODE
CLASS="function"
>cfun()</CODE
> is
<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
>ed but never <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/free.html"
TARGET="_top"
><CODE
CLASS="function"
>free</CODE
></A
>d. Specifying
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(:return-type (c-ptr cfunr) :malloc-free)
</PRE
></TD
></TR
></TABLE
>
is not an alternative because this would also
<CODE
CLASS="function"
>free(r2-&#62;x)</CODE
> but <VAR
CLASS="varname"
>r2-&#62;x</VAR
> is a
pointer to static data.</P
></DIV
><DIV
CLASS="example"
><A
NAME="ex-call-in"
></A
><P
><B
>Example 30-7. Calling Lisp from <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
></B
></P
><P
ALIGN="justify"
>To sort an array of double-floats using the Lisp function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_sortcm_stable-sort.html"
TARGET="_top"
><CODE
CLASS="function"
>SORT</CODE
></A
>
 instead of the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> library function <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/qsort.html"
TARGET="_top"
><CODE
CLASS="function"
>qsort</CODE
></A
>, one can use the
 following interface code <TT
CLASS="filename"
>sort1.c</TT
>.
 The main problem is to pass a variable-sized array.

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;extern void lispsort_begin (int);
void* lispsort_function;
void lispsort_double (int n, double * array) {
    double * sorted_array;
    int i;
    lispsort_begin(n); /* store #'sort2 in lispsort_function */
    sorted_array = ((double * (*) (double *)) lispsort_function) (array);
    for (i = 0; i &#60; n; i++) array[i] = sorted_array[i];
    free(sorted_array);
}
</PRE
></TD
></TR
></TABLE
>

This is accompanied by <TT
CLASS="filename"
>sort2.lisp</TT
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "FFI-TEST" (:use "LISP" "FFI"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "FFI-TEST")
(eval-when (compile) (setq <A
HREF="#ffi-extern-output"
><VAR
CLASS="varname"
>FFI:*OUTPUT-C-FUNCTIONS*</VAR
></A
> t))
(def-call-in lispsort_begin (:arguments (n int))
  (:return-type nil)
  (:language :stdc))
(def-c-var lispsort_function (:type c-pointer))
(defun lispsort_begin (n)
  (setf (cast lispsort_function
              `(c-function
                 (:arguments (v (c-ptr (c-array double-float ,n))))
                 (:return-type (c-ptr (c-array double-float ,n))
                               :malloc-free)))
        #'sort2))
(defun sort2 (v)
  (declare (type vector v))
  (sort v #'&#60;))
</PRE
></TD
></TR
></TABLE
>

To test this, use the following test file <TT
CLASS="filename"
>sorttest.lisp</TT
>:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(eval-when (compile) (setq <A
HREF="#ffi-extern-output"
><VAR
CLASS="varname"
>FFI:*OUTPUT-C-FUNCTIONS*</VAR
></A
> t))
(def-call-out sort10
  (:name "lispsort_double")
  (:language :stdc)
  (:arguments (n int)
              (array (c-ptr (c-array double-float 10)) :in-out)))
</PRE
></TD
></TR
></TABLE
>

Now try

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;$ clisp-link create-module-set sort sort2.c sorttest.c
$ cc -O -c sort1.c
$ cd sort
$ ln -s ../sort1.o sort1.o
</PRE
></TD
></TR
></TABLE
>

Add <TT
CLASS="filename"
>sort1.o</TT
> to <VAR
CLASS="envar"
>NEW_LIBS</VAR
>
and <VAR
CLASS="envar"
>NEW_FILES</VAR
> in <TT
CLASS="filename"
>link.sh</TT
>.
Create a file <TT
CLASS="filename"
>package.lisp</TT
> containing the
form <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "FFI-TEST" (:use "LISP"
"FFI"))</TT
> and add <TT
CLASS="filename"
>package.lisp</TT
>
to <VAR
CLASS="envar"
>TO_PRELOAD</VAR
> in <TT
CLASS="filename"
>link.sh</TT
>.
Proceed:

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;$ cd ..
$ base/lisp.run -M base/lispinit.mem -c sort2.lisp sorttest.lisp
$ clisp-link add-module-set sort base base+sort
$ base+sort/lisp.run -M base+sort/lispinit.mem -i sort2 sorttest
&#62; (sort10 10 '#(0.501d0 0.528d0 0.615d0 0.550d0 0.711d0
                0.523d0 0.585d0 0.670d0 0.271d0 0.063d0))
#(0.063d0 0.271d0 0.501d0 0.523d0 0.528d0 0.55d0 0.585d0 0.615d0 0.67d0 0.711d0)
$ rm -r base+sort
</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="example"
><A
NAME="ex-call-in-dll"
></A
><P
><B
>Example 30-8. Calling Lisp from <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> dynamically</B
></P
><P
ALIGN="justify"
>Create a dynamic library <TT
CLASS="filename"
>lispdll</TT
>
 (<TT
CLASS="filename"
>#P".dll"</TT
> on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>,
  <TT
CLASS="filename"
>#P".so"</TT
> on <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>)
  with the following function:<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;typedef int (*LispFunc)(int parameter);
int CallInFunc(LispFunc f) {
  return f(5)+11;
}
</PRE
></TD
></TR
></TABLE
>
  and call it from Lisp:
  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(ffi:def-call-out callout
  (:name "CallInFunc")
  (:library "lispdll.dll")
  (:arguments (function-arg
               (ffi:c-function (:arguments (number ffi:int))
                               (:return-type ffi:int) (:language :stdc))))
  (:return-type ffi:int)
  (:language :stdc))
&#62; (defun f (x) (* x 2))
F
&#62; (callout #'f)
21
</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="example"
><A
NAME="dffi-gethostname"
></A
><P
><B
>Example 30-9. Variable size arguments:
  calling <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/gethostname.html"
TARGET="_top"
><CODE
CLASS="function"
>gethostname</CODE
></A
> from <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></B
></P
><P
ALIGN="justify"
><DIV
CLASS="funcsynopsis"
><P
></P
><A
NAME="gethostname-synopsis"
></A
><P
><CODE
><CODE
CLASS="FUNCDEF"
><SPAN
CLASS="type"
>int</SPAN
> <B
CLASS="FSFUNC"
>gethostname</B
></CODE
>(<SPAN
CLASS="type"
>char*</SPAN
> <VAR
CLASS="PDPARAM"
>name</VAR
>, <SPAN
CLASS="type"
>size_t</SPAN
> <VAR
CLASS="PDPARAM"
>namelen</VAR
>);</CODE
></P
><P
></P
></DIV
>
 follows a typical pattern of <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> "out"-parameter convention - it
 expects a pointer to a buffer it is going to fill.
 So you must view this parameter as either <CODE
CLASS="constant"
>:OUT</CODE
> or <CODE
CLASS="constant"
>:IN-OUT</CODE
>.
 Additionaly, one must tell the function the size of the buffer.
 Here <VAR
CLASS="replaceable"
>namelen</VAR
> is just an <CODE
CLASS="constant"
>:IN</CODE
> parameter.
 Sometimes this will be an <CODE
CLASS="constant"
>:IN-OUT</CODE
> parameter, returning the
 number of bytes actually filled in.</P
><P
ALIGN="justify"
>So <VAR
CLASS="replaceable"
>name</VAR
> is actually a pointer to an
 array of up to <VAR
CLASS="replaceable"
>namelen</VAR
> characters,
 regardless of what the poor <SPAN
CLASS="type"
>char*</SPAN
> <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> prototype says,
 to be used like a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> <SPAN
CLASS="type"
>string</SPAN
> (0-termination).
 <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> specifies that "host names are limited to HOST_NAME_MAX bytes",
 which is, of course, system dependent, but it appears that 256 is a
 common value.</P
><P
ALIGN="justify"
>In the present example, you can use allocation <CODE
CLASS="constant"
>:ALLOCA</CODE
>, like
 you would do in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>: stack-allocate a temporary.</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="#def-c-call-out"
><CODE
CLASS="function"
>FFI:DEF-C-CALL-OUT</CODE
></A
> gethostname
  (:arguments (name (<A
HREF="#c-ptr"
><SPAN
CLASS="type"
>FFI:C-PTR</SPAN
></A
> (<A
HREF="#c-array-max"
><SPAN
CLASS="type"
>FFI:C-ARRAY-MAX</SPAN
></A
> ffi:char 256))
		    <CODE
CLASS="constant"
>:OUT</CODE
> <CODE
CLASS="constant"
>:ALLOCA</CODE
>)
	      (len ffi:int))
  (:return-type ffi:int))

(defun myhostname ()
  (multiple-value-bind (success name)
      ;; <CODE
CLASS="constant"
>:OUT</CODE
> and <CODE
CLASS="constant"
>:IN-OUT</CODE
> parameters are returned as <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>
      (gethostname 256)
    (if (zerop success) name
	(error ...)))) ;; <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/strerror.html"
TARGET="_top"
><CODE
CLASS="function"
>strerror</CODE
></A
>(<A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/errno.html"
TARGET="_top"
><VAR
CLASS="varname"
>errno</VAR
></A
>)

(defvar hostname (myhostname))
</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="section"
><HR><H4
CLASS="section"
><A
NAME="dffi-ex-more"
>30.3.9.1. More examples</A
></H4
><P
ALIGN="justify"
>You can find more information and examples of the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
 <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> in the following <CODE
CLASS="email"
>&#60;<A
HREF="mailto:clisp-list@sf.net"
>clisp-list@sf.net</A
>&#62;</CODE
> messages:
 <P
></P
><UL
><LI
><P
ALIGN="justify"
><A
HREF="http://article.gmane.org/gmane.lisp.clisp.general/7278"
TARGET="_top"
>"variable size values"</A
></P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://article.gmane.org/gmane.lisp.clisp.general/6626"
TARGET="_top"
>"variable length arrays"</A
></P
></LI
></UL
>
</P
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="affi"
>30.4. Extensions-2.4. The Amiga Foreign Function Call Facility</A
></H2
><FONT
COLOR="RED"
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</FONT
><DIV
CLASS="formalpara"
><P
><B
>Another Foreign Function Interface. </B
>All symbols relating to the simple foreign function interface are
 exported from the package <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
>. To use them,
 <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_use-package.html"
TARGET="_top"
><CODE
CLASS="function"
>USE-PACKAGE</CODE
></A
> "AFFI")</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-design"
>30.4.1. Design issues</A
></H3
><P
ALIGN="justify"
><A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> was designed to be small in size but powerful enough to
use most library functions.  Lisp files may be compiled to <TT
CLASS="filename"
>#P".fas"</TT
>
files without the need to load function definition files at run-time and
without external <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> or linker support.
<A
HREF="#image"
>memory image</A
>s can be created, provided that the function libraries are
opened at run-time.</P
><P
ALIGN="justify"
>Therefore, <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> supports only primitive <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> types
(integers 8, 16 and 32 bits wide, signed or unsigned, pointers) and
defines no new types or classes.  Foreign functions are not first-class
objects (you can define a &#955; yourself), name spaces are
separate.</P
><P
ALIGN="justify"
>The <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> does no tracking of resources.  Use <A
HREF="#final"
><CODE
CLASS="function"
>EXT:FINALIZE</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-overview"
>30.4.2. Overview</A
></H3
><P
ALIGN="justify"
>These are the <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> forms:</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(declare-library-base
 <VAR
CLASS="replaceable"
>keyword-base</VAR
>
 <VAR
CLASS="replaceable"
>library-name</VAR
>)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(require-library-functions
 <VAR
CLASS="replaceable"
>library-name</VAR
> [(:import
 {<VAR
CLASS="replaceable"
>string-name</VAR
>}*)])</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(open-library
 <VAR
CLASS="replaceable"
>base-symbol</VAR
>)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(close-library
 <VAR
CLASS="replaceable"
>base-symbol</VAR
>)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(with-open-library
 (<VAR
CLASS="replaceable"
>base-symbol</VAR
> |
 <VAR
CLASS="replaceable"
>library-name</VAR
>)
 {<VAR
CLASS="replaceable"
>form</VAR
>}*)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(defflibfun
 <VAR
CLASS="replaceable"
>function-name</VAR
>
 <VAR
CLASS="replaceable"
>base-symbol</VAR
>
 <VAR
CLASS="replaceable"
>offset</VAR
> <VAR
CLASS="replaceable"
>mask</VAR
>
 <VAR
CLASS="replaceable"
>result-type</VAR
>
 {<VAR
CLASS="replaceable"
>argument-type</VAR
>}*)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(declare-library-function
 <VAR
CLASS="replaceable"
>function-name</VAR
>
 <VAR
CLASS="replaceable"
>library-name</VAR
>
 {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(flibcall <VAR
CLASS="replaceable"
>function-name</VAR
>
 {<VAR
CLASS="replaceable"
>argument</VAR
>}*)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(mlibcall <VAR
CLASS="replaceable"
>function-name</VAR
>
 {<VAR
CLASS="replaceable"
>argument</VAR
>}*)</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(mem-read <VAR
CLASS="replaceable"
>address</VAR
>
 <VAR
CLASS="replaceable"
>result-type</VAR
>
 [<VAR
CLASS="replaceable"
>offset</VAR
>])</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(mem-write <VAR
CLASS="replaceable"
>address</VAR
>
 <VAR
CLASS="replaceable"
>type</VAR
> <VAR
CLASS="replaceable"
>value</VAR
> [<VAR
CLASS="replaceable"
>offset</VAR
>])</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(mem-write-vector
 <VAR
CLASS="replaceable"
>address</VAR
> <VAR
CLASS="replaceable"
>vector</VAR
>
 [<VAR
CLASS="replaceable"
>offset</VAR
>])</TT
></P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(nzero-pointer-p <VAR
CLASS="replaceable"
>value</VAR
>)</TT
></P
><P
ALIGN="justify"
>Except for <CODE
CLASS="function"
>with-open-library</CODE
>,
<CODE
CLASS="function"
>declare-library-function</CODE
> and
<CODE
CLASS="function"
>mlibcall</CODE
>, all of the above are functions.</P
><P
ALIGN="justify"
>A library contains a collection of functions.  The library is
referred to by a symbol referred as library-base at the <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
>
level.  This symbol is created in the package <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
>.
The link between this symbol and the OS-level library name is
established by <CODE
CLASS="function"
>declare-library-base</CODE
>.  To avoid
multiple package conflicts, this and only this function requires the
symbol-name to be in the <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_11-1-2-3.html"
TARGET="_top"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"KEYWORD"</SPAN
></STRONG
></A
> package. The function returns the
library-base.</P
><P
ALIGN="justify"
>A library may be opened by <CODE
CLASS="function"
>open-library</CODE
> and
 closed by <CODE
CLASS="function"
>close-library</CODE
>. An opened library must be
 closed. <CODE
CLASS="function"
>with-open-library</CODE
> is provided to
 automatically close the library for you, thus it is much safer to
 use.</P
><P
ALIGN="justify"
>A function is contained in a library.  Every function is referred
to by a symbol.  A function is defined through
<CODE
CLASS="function"
>defflibfun</CODE
> or
<CODE
CLASS="function"
>declare-library-function</CODE
> by giving the function
name, the library-base, an offset into the library, a mask (or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>)
for register-based library calls, the result type and all
parameter-types.  <CODE
CLASS="function"
>require-library-functions</CODE
> loads
the complete set of functions defined in a library file. Symbols are
created in the package <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> and imported into the current
package.</P
><P
ALIGN="justify"
><CODE
CLASS="function"
>flibcall</CODE
> and <CODE
CLASS="function"
>mlibcall</CODE
>
call library functions. <CODE
CLASS="function"
>mlibcall</CODE
> is a macro that
does a few checks at macroexpansion time and allows the compiler to
inline the call, not requiring the foreign function to be defined again
at load or execution time. The use of this macro is advertised wherever
possible.</P
><P
ALIGN="justify"
><CODE
CLASS="function"
>mem-read</CODE
> reads an arbitrary address (with
offset for structure references) and returns the given type.</P
><P
ALIGN="justify"
><CODE
CLASS="function"
>mem-write</CODE
> writes an arbitrary
address. <CODE
CLASS="function"
>mem-write-vector</CODE
> copies the content of a
Lisp <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8))</TT
> into memory.</P
><P
ALIGN="justify"
><CODE
CLASS="function"
>nzero-pointer-p</CODE
> tests for
non-<CODE
CLASS="constant"
>NULL</CODE
> pointers in all recognized representations
(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_null.html"
TARGET="_top"
><CODE
CLASS="classname"
>NULL</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> and <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
>).</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-libs"
>30.4.3. Foreign Libraries</A
></H3
><P
ALIGN="justify"
><CODE
CLASS="function"
>declare-library-base</CODE
> ought to be wrapped in an
<TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL-WHEN</CODE
></A
> (compile eval load) ...)</TT
>
form and come before any function is referenced, because the library
base symbol must be known.</P
><P
ALIGN="justify"
><CODE
CLASS="function"
>open-library</CODE
> tries to open the library
referenced by the base symbol.  Therefore it must have been preceded
with <CODE
CLASS="function"
>declare-library-base</CODE
>.  The call returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>
on failure. <CODE
CLASS="function"
>open-library</CODE
> calls nest.  Every
successful call must be matched by <CODE
CLASS="function"
>close-library</CODE
>.
<CODE
CLASS="function"
>with-open-library</CODE
> does this for you and also allows
you to specify the library by name, provided that its base has been
declared.  It is recommended to use this macro and to reference the
library by name.</P
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will not close libraries for you at program exit.  [A
previous version did so but now <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> is a module and there are no
module exit functions.]  Programmers, watch
<CODE
CLASS="function"
>AFFI::*LIBRARIES-ALIST*</CODE
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-types"
>30.4.4. (Foreign) <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> types</A
></H3
><P
ALIGN="justify"
>The following foreign <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> types are used in <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
>.
They are <I
CLASS="emphasis"
>not</I
> regular <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> types or <B
CLASS="command"
>CLOS</B
> classes.
<DIV
CLASS="informaltable"
><P
></P
><A
NAME="affi-types-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><THEAD
><TR
><TH
><A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> name</TH
><TH
>Lisp equivalent</TH
><TH
><A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> equivalent</TH
><TH
>Comment</TH
><TD
>&nbsp;</TD
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>void</SPAN
></TD
><TD
>as a result type for functions only</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>4</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 32)</TT
></TD
><TD
><SPAN
CLASS="type"
>unsigned long</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>2</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 16)</TT
></TD
><TD
><SPAN
CLASS="type"
>unsigned short</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>1</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8)</TT
></TD
><TD
><SPAN
CLASS="type"
>unsigned char</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>-4</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 32)</TT
></TD
><TD
><SPAN
CLASS="type"
>long</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>-2</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 16)</TT
></TD
><TD
><SPAN
CLASS="type"
>short</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>-1</SPAN
></TD
><TD
><TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_signed-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIGNED-BYTE</CODE
></A
> 8)</TT
></TD
><TD
><SPAN
CLASS="type"
>signed char</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>0</SPAN
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/typ_boolean.html"
TARGET="_top"
><CODE
CLASS="classname"
>BOOLEAN</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>BOOL</SPAN
></TD
><TD
>as a result type for functions only</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><SPAN
CLASS="type"
>*</SPAN
></TD
><TD
>opaque</TD
><TD
><SPAN
CLASS="type"
>void*</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:EXTERNAL</CODE
></TD
><TD
>opaque</TD
><TD
><SPAN
CLASS="type"
>void*</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>char*</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:IO</CODE
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
></TD
><TD
><SPAN
CLASS="type"
>char*</SPAN
></TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></P
><P
ALIGN="justify"
>Objects of type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> are copied and passed
<CODE
CLASS="constant"
>NULL</CODE
>-terminated on the execution stack.  On return, a Lisp string is
allocated and filled from the address returned (unless <CODE
CLASS="constant"
>NULL</CODE
>).
Functions with <CODE
CLASS="constant"
>:IO</CODE
> parameters are passed the address of the Lisp
string or unsigned byte vector. These are not <CODE
CLASS="constant"
>NULL</CODE
>-terminated!
This is useful for functions like like <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/read.html"
TARGET="_top"
><CODE
CLASS="function"
>read</CODE
></A
> which
do not need an array at a constant address longer than the dynamic
extent of the call (it is dangerous to define callback functions with
<CODE
CLASS="constant"
>:IO</CODE
> (or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>) type parameters).
Arguments of type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
> and <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
> are always
acceptable where a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or <CODE
CLASS="constant"
>:IO</CODE
> type is specified.</P
><P
ALIGN="justify"
>See also <A
HREF="#foreign-enc"
><VAR
CLASS="varname"
>CUSTOM:*FOREIGN-ENCODING*</VAR
></A
>.</P
><P
ALIGN="justify"
>To meet the design goals, predefined types and objects were
used. As such, pointers were represented as integers. Now that there is
the <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
> type, both representations may be used on input.
The pointer type should be therefore considered as opaque.
Use <CODE
CLASS="function"
>nzero-pointer-p</CODE
> for <CODE
CLASS="constant"
>NULL</CODE
> tests.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-functions"
>30.4.5. Foreign functions</A
></H3
><P
ALIGN="justify"
>Foreign Functions are declared either through
<CODE
CLASS="function"
>defflibfun</CODE
> or
<CODE
CLASS="function"
>declare-library-function</CODE
>.  The former is closer to
the low-level implementation of the interface, the latter is closer to
the other <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
>.</P
><P
ALIGN="justify"
><CODE
CLASS="function"
>defflibfun</CODE
> requires the library base symbol
and register mask to be specified,
<CODE
CLASS="function"
>declare-library-function</CODE
> requires the library name
and computes the mask from the declaration of the arguments.</P
><P
ALIGN="justify"
>The value of mask is implementation-dependent. On the Amiga, it is
an integer whose hexadecimal value is the reverse of the function
argument register numbers, where d0 has number <TT
CLASS="literal"
>1</TT
>
and a6 number <TT
CLASS="literal"
>#xF</TT
>.  A <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> mask is reserved for
stack-based calls (unimplemented).</P
><P
ALIGN="justify"
>The <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> type <TT
CLASS="literal"
>0</TT
> is only acceptable as a
function result type and yields either <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>. The difference
between <CODE
CLASS="function"
>*</CODE
> and <CODE
CLASS="constant"
>:EXTERNAL</CODE
> is the following:
<CODE
CLASS="function"
>*</CODE
> uses integers, <CODE
CLASS="constant"
>:EXTERNAL</CODE
> uses
<A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
> as function result-type (except from <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> for a
<CODE
CLASS="constant"
>NULL</CODE
> pointer) and refuses objects of type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or
<TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8))</TT
> as input.  Thus <CODE
CLASS="constant"
>:EXTERNAL</CODE
> provides some security
on the input and the ability to use <A
HREF="#final"
><CODE
CLASS="function"
>EXT:FINALIZE</CODE
></A
> for resource-tracking on
the output side.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(declare-library-function <VAR
CLASS="replaceable"
>name</VAR
>
 <VAR
CLASS="replaceable"
>library-name</VAR
> {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
>

<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><VAR
CLASS="replaceable"
>option</VAR
> ::==</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="affi-dec-lib-fun-opt-bnf"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><TBODY
><TR
><TD
>&nbsp;</TD
><TD
><TT
CLASS="sexp"
>(:offset
    <VAR
CLASS="replaceable"
>library-offset</VAR
>)</TT
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(<CODE
CLASS="constant"
>:ARGUMENTS</CODE
>
    {(<VAR
CLASS="replaceable"
>argument</VAR
> <VAR
CLASS="replaceable"
><A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
>-type</VAR
>
      <VAR
CLASS="replaceable"
>register</VAR
>)}*)</TT
></TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>|</TD
><TD
><TT
CLASS="sexp"
>(:return-type
    <VAR
CLASS="replaceable"
><A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
>-type</VAR
>)</TT
></TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
><DT
><VAR
CLASS="replaceable"
>register</VAR
> ::==</DT
><DD
><P
ALIGN="justify"
><CODE
CLASS="constant"
>:d0</CODE
> | <CODE
CLASS="constant"
>:d1</CODE
>
 | ... | <CODE
CLASS="constant"
>:d7</CODE
> | <CODE
CLASS="constant"
>:a0</CODE
> | ... |
 <CODE
CLASS="constant"
>:a6</CODE
></P
></DD
></DL
></DIV
>

declares a named library function for further reference through
<CODE
CLASS="function"
>flibcall</CODE
> and <CODE
CLASS="function"
>mlibcall</CODE
>.</P
><P
ALIGN="justify"
><CODE
CLASS="function"
>mlibcall</CODE
> should be the preferred way of
calling foreign functions (when they are known at compile-time) as
macroexpansion-time checks may be performed and the call can be sort of
inlined.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-memory-access"
>30.4.6. Memory access</A
></H3
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(affi:mem-read <VAR
CLASS="replaceable"
>address</VAR
>
<VAR
CLASS="replaceable"
>type</VAR
>
<VAR
CLASS="replaceable"
>offset</VAR
>)</TT
> can read 8, 16 and 32 bit
signed or unsigned integers (<A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> types <SPAN
CLASS="type"
>-4</SPAN
>,
<SPAN
CLASS="type"
>-2</SPAN
>, <SPAN
CLASS="type"
>-1</SPAN
>, <SPAN
CLASS="type"
>1</SPAN
>, <SPAN
CLASS="type"
>2</SPAN
>,
<SPAN
CLASS="type"
>4</SPAN
>), a pointer (<SPAN
CLASS="type"
>*</SPAN
>), a <CODE
CLASS="constant"
>NULL</CODE
>-terminated
string (<SPAN
CLASS="type"
>string</SPAN
>) or, if the type argument is of type
<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8))</TT
>, it can fill this vector.
<CODE
CLASS="constant"
>:EXTERNAL</CODE
> is not an acceptable type as no object can be created by
using <CODE
CLASS="function"
>affi:mem-read</CODE
>.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(affi:mem-write
<VAR
CLASS="replaceable"
>address</VAR
> <VAR
CLASS="replaceable"
>type</VAR
> <VAR
CLASS="replaceable"
>value</VAR
>
[<VAR
CLASS="replaceable"
>offset</VAR
>])</TT
> writes integers (<A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
>
type <SPAN
CLASS="type"
>-4</SPAN
>, <SPAN
CLASS="type"
>-2</SPAN
>, <SPAN
CLASS="type"
>-1</SPAN
>, <SPAN
CLASS="type"
>1</SPAN
>,
<SPAN
CLASS="type"
>2</SPAN
> and <SPAN
CLASS="type"
>4</SPAN
>) or pointer values (type
<SPAN
CLASS="type"
>*</SPAN
>), but not vectors to the specified memory address.</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(affi:mem-write-vector
<VAR
CLASS="replaceable"
>address</VAR
> <VAR
CLASS="replaceable"
>vector</VAR
>
[<VAR
CLASS="replaceable"
>offset</VAR
>])</TT
> can write memory from the
given vector (of type <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
> or <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8))</TT
>).</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-func-def"
>30.4.7. Function Definition Files</A
></H3
><P
ALIGN="justify"
><CODE
CLASS="function"
>affi:require-library-functions</CODE
> will <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_providecm_require.html"
TARGET="_top"
><CODE
CLASS="function"
>REQUIRE</CODE
></A
> a
file of name derived from thelibrary name and with type
<TT
CLASS="filename"
>affi</TT
>. It may be used to import all names into the
current package or only a given subset identified by string names, using
the <CODE
CLASS="constant"
>:import</CODE
> keyword (recommended use).
Some definition files for standard Amiga libraries are provided.
See <A
HREF="#affi-ex-1-predefined"
>example 1</A
> below.</P
><P
ALIGN="justify"
>As <CODE
CLASS="function"
>affi:require-library-functions</CODE
> loads a
global file which you, the programmer, may have not defined, you may
consider declaring every function yourself to be certain what the return
and argument types are.
See <A
HREF="#affi-ex-4-sample"
>example 4</A
> below.</P
><P
ALIGN="justify"
>The file <TT
CLASS="filename"
>read-fd.lisp</TT
> defines the function
<CODE
CLASS="function"
>make-partial-fd-file</CODE
> with which the provided
<TT
CLASS="filename"
>.affi</TT
> files have been prepared from the original
Amiga FD files (located in the directory <TT
CLASS="filename"
>FD:</TT
>).
They must still be edited as the function cannot know whether a function
accepts a <CODE
CLASS="function"
>*</CODE
>, <CODE
CLASS="constant"
>:IO</CODE
>,
<CODE
CLASS="function"
>string</CODE
> or <CODE
CLASS="constant"
>:EXTERNAL</CODE
> argument and because files
in <TT
CLASS="filename"
>FD:</TT
> only contain a register specification, not
the width of integer arguments (<TT
CLASS="literal"
>-4</TT
>,
<TT
CLASS="literal"
>-2</TT
>, <TT
CLASS="literal"
>-1</TT
>, <TT
CLASS="literal"
>1</TT
>,
<TT
CLASS="literal"
>2</TT
>, or <TT
CLASS="literal"
>4</TT
>).</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-hints"
>30.4.8. Hints</A
></H3
><P
ALIGN="justify"
>By using appropriate <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_eval-when.html"
TARGET="_top"
><CODE
CLASS="function"
>EVAL-WHEN</CODE
></A
> forms for
<CODE
CLASS="function"
>affi:declare-library-base</CODE
> and
<CODE
CLASS="function"
>affi:require-library-functions</CODE
> and not using
<CODE
CLASS="function"
>affi:flibcall</CODE
>, it is possible to write code that
only loads library function definition files at compile-time.
See <A
HREF="#affi-ex-1-predefined"
>example 1</A
> below.</P
><P
ALIGN="justify"
>Do not rely on <A
HREF="#final"
><CODE
CLASS="function"
>EXT:FINALIZE</CODE
></A
> to free resources for you, as <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
does not call finalizers when it exits, use <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
>.</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-caveats"
>30.4.9. Caveats</A
></H3
><P
ALIGN="justify"
>You can consider the library bases being symbols in need of being
imported from the package <A
HREF="#affi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"AFFI"</SPAN
></STRONG
></A
> originating from a brain-damage, causing
the usual symbol headaches when using foreign functions calls within
macros.  Luckily, even if the high-level interface (or its
implementation in <TT
CLASS="filename"
>affi1.lisp</TT
>) were to change, the
low-level part (<TT
CLASS="filename"
>affi.d</TT
>) should remain untouched as
all it knows are <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_integer.html"
TARGET="_top"
><CODE
CLASS="classname"
>INTEGER</CODE
></A
>s and <A
HREF="#fptr"
><CODE
CLASS="classname"
>FFI:FOREIGN-POINTER</CODE
></A
>s, no <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_symbol.html"
TARGET="_top"
><CODE
CLASS="classname"
>SYMBOL</CODE
></A
>s.
The difficulty is just to get the library base value at run-time.
Feel free to suggest enhancements to this facility!</P
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="affi-examples"
>30.4.10. Examples</A
></H3
><FONT
COLOR="RED"
>NB: These examples are somewhat specific to the Amiga.</FONT
><DIV
CLASS="example"
><A
NAME="affi-ex-1-predefined"
></A
><P
><B
>Example 30-10. Using a predefined library function file</B
></P
><P
ALIGN="justify"
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "AFFI-TEST" (:use "LISP" "AFFI"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "AFFI-TEST")

;; SysBase is the conventional name for exec.library
;; It is only enforced by the file loaded by REQUIRE-LIBRARY-FUNCTIONS
(eval-when (compile eval load)
  (declare-library-base :SysBase "exec.library")) ;keyword avoids name conflicts

;; using only MLIBCALL allows not to load definitions at load-time
(eval-when (compile eval)
  (require-library-functions "exec.library"
    :import '("FindTask")))

(with-open-library ("exec.library")
  (print (mlibcall FindTask 0)))
</PRE
></TD
></TR
></TABLE
>

This file can be used in interpreted and compiled mode.
Compiled, it will have inlined the library function calls.
</P
></DIV
><DIV
CLASS="example"
><A
NAME="affi-ex-2-flibcall"
></A
><P
><B
>Example 30-11. Using flibcall</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "AFFI-TEST" (:use "LISP" "AFFI"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "AFFI-TEST")

(eval-when (compile eval load)
  ;; keyword avoids name conflicts
  (declare-library-base :SysBase "exec.library"))

;; The load situation permits the use of flibcall
(eval-when (eval compile load)
  (require-library-functions "exec.library"))

(unless (open-library 'SysBase) (error "No library for SysBase"))
(flibcall (if t 'FindTask 'Debug) 0)
(close-library 'SysBase)
</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="example"
><A
NAME="affi-ex-3-dynamic"
></A
><P
><B
>Example 30-12. Be fully dynamic, defining library bases ourselves</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_defpackage.html"
TARGET="_top"
><CODE
CLASS="function"
>DEFPACKAGE</CODE
></A
> "AFFI-TEST" (:use "LISP" "AFFI"))
(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_in-package.html"
TARGET="_top"
><CODE
CLASS="function"
>IN-PACKAGE</CODE
></A
> "AFFI-TEST")

(eval-when (compile eval load)
  (defvar mylib (declare-library-base :foobase "foo.library")))
(eval-when (eval compile load)          ;eval allows mlibcall, load flibcall
  (defflibfun 'foo1 mylib -30 '#xA '* 'string)
  (defflibfun 'foo2 mylib -36 '#x21 0 * 4))

(defun foo (name)
  (when (open-library mylib)
    (list (mlibcall foo1 name) (flibcall 'foo2 name 123213))
    (close-library mylib)))
</PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="example"
><A
NAME="affi-ex-4-sample"
></A
><P
><B
>Example 30-13. Some sample function definitions</B
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(defflibfun 'FindTask 'SysBase -294 #xA '* 'string)
(eval-library-function FindTask "exec.library"
  (:offset -294)
  (:return-type *)
  (:arguments
   (name   string   :A1)))
(declare-library-function NameFromLock "dos.library"
  (:offset -402)
  (:return-type 0)
  (:arguments
   (lock   4   :D1)
   (buffer :io :D2)
   (len    4   :D3)))

(eval-when (compile eval)
  (defconstant GVF_LOCAL_ONLY (ash 1 9))
  (defflibfun 'SetVar 'DosBase -900 #x5432 0 'string 'string -4 4))
(defun setvar (name value)
  (with-open-library (DosBase)
    ;; length of -1 means find length of <CODE
CLASS="constant"
>NULL</CODE
>-terminated-string
    (mlibcall SetVar name value -1 GVF_LOCAL_ONLY)))
</PRE
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="rexx"
>30.5. Extensions-2.5. ARexx</A
></H2
><FONT
COLOR="RED"
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</FONT
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> comes with a small yet extensible and powerful ARexx
 interface.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(rexx-do-command
   "return address()" :string <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> :result <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>tells you the name of the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> ARexx port.  The
  default extension for <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> ARexx scripts is <TT
CLASS="filename"
>cl</TT
>.
 </P
></DD
><DT
><TT
CLASS="sexp"
>(rexx-do-command
   <VAR
CLASS="replaceable"
>command</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :string :result :token :io :host)</TT
></DT
><DD
><P
ALIGN="justify"
> -&#62; <TT
CLASS="sexp"
>(RC <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
  <VAR
CLASS="replaceable"
>result</VAR
>)</TT
>, or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> on failure
</P
></DD
><DT
><TT
CLASS="sexp"
>(rexx-run-command
  <VAR
CLASS="replaceable"
>command</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :string :token)</TT
></DT
><DD
><P
ALIGN="justify"
> -&#62; <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> on failure
</P
></DD
><DT
><TT
CLASS="sexp"
>(rexx-send-command
   <VAR
CLASS="replaceable"
>command</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> :string :result :token :io :host)</TT
></DT
><DD
><P
ALIGN="justify"
> -&#62; <VAR
CLASS="replaceable"
>arexx-msg-handle</VAR
>,
  or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> on failure</P
></DD
><DT
><TT
CLASS="sexp"
>(rexx-wait-sent-command
   <VAR
CLASS="replaceable"
>arexx-msg-handle</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
> -&#62; <TT
CLASS="sexp"
>(RC <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
   <VAR
CLASS="replaceable"
>result</VAR
>)</TT
>, or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> on failure
</P
></DD
><DT
><TT
CLASS="sexp"
>(rexx-loop)</TT
></DT
><DD
><P
ALIGN="justify"
> -&#62; no return, use the
  <TT
CLASS="filename"
>exit-loop.cl</TT
> ARexx script to abort the loop
</P
></DD
></DL
></DIV
><P
ALIGN="justify"
><VAR
CLASS="replaceable"
>command</VAR
> may be a string denoting a command with optional
arguments or a vector of strings thus denoting an ARexx function call.
The first element in the vector is the function name, the others are the
up to 15 arguments.</P
><P
ALIGN="justify"
>Messages may be sent to an arbitrary ARexx host, special cases are
<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (meaning <CODE
CLASS="function"
>"REXX"</CODE
>, the default) and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>
(<CODE
CLASS="function"
>"AREXX"</CODE
> for asynchronous execution).</P
><P
ALIGN="justify"
>ARexx server mode: Like Ispell, Csh and SKsh, you can run it in
server mode by calling <TT
CLASS="sexp"
>(rexx-loop)</TT
>. You
can then only exit with the ARexx <TT
CLASS="filename"
>exit-loop.cl</TT
>
script.</P
><P
ALIGN="justify"
>Restrictions: Currently <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is not able to wait for input from
several sources, e.g. both a console and ARexx, at the same time.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="socket"
>30.6. Extensions-2.6. Socket Streams</A
></H2
><FONT
COLOR="RED"
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms only.</FONT
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="sose"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sose"
><CODE
CLASS="function"
>SOCKET:SOCKET-SERVER</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
                 [<VAR
CLASS="replaceable"
>port-or-socket</VAR
>])</TT
></DT
><DD
><P
ALIGN="justify"
>This function creates a socket an binds a port to
    the socket.  The server exists to watch for client connect attempts.
    The optional argument is either a port (positive <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>) or a
    <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
> (from whose peer the connections will be made).
 </P
></DD
><DT
><A
NAME="sose-close"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sose-close"
><CODE
CLASS="function"
>SOCKET:SOCKET-SERVER-CLOSE</CODE
></A
>
                 <VAR
CLASS="replaceable"
>socket-server</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Closes down the server socket.
    <A
HREF="#close"
>Just like streams</A
>,
    <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-SERVER</CODE
></A
>s are closed at <A
HREF="#gc"
>garbage-collect</A
>ion.  You should not rely on
    this however, because <A
HREF="#gc"
>garbage-collect</A
>ion times are not deterministic.
 </P
></DD
><DT
><A
NAME="sose-hopo"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sose-hopo"
><CODE
CLASS="function"
>SOCKET:SOCKET-SERVER-HOST</CODE
></A
> <VAR
CLASS="replaceable"
>socket-server</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#sose-hopo"
><CODE
CLASS="function"
>SOCKET:SOCKET-SERVER-PORT</CODE
></A
> <VAR
CLASS="replaceable"
>socket-server</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Returns the host mask indicating which hosts can
    connect to this server and the port which was bound using <A
HREF="#sose"
><CODE
CLASS="function"
>SOCKET:SOCKET-SERVER</CODE
></A
>.
 </P
></DD
><DT
><A
NAME="so-wait"
></A
><TT
CLASS="sexp"
>(<A
HREF="#so-wait"
><CODE
CLASS="function"
>SOCKET:SOCKET-WAIT</CODE
></A
>
    <VAR
CLASS="replaceable"
>socket-server</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#timeout-opt"
>[<VAR
CLASS="replaceable"
>seconds</VAR
> [<VAR
CLASS="replaceable"
>microseconds</VAR
>]]</A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Wait for a fixed time for a
    connection on the <VAR
CLASS="replaceable"
>socket-server</VAR
> (a <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-SERVER</CODE
></A
>).
    Without a timeout argument, <A
HREF="#so-wait"
><CODE
CLASS="function"
>SOCKET:SOCKET-WAIT</CODE
></A
> blocks indefinitely.
    When timeout is zero, poll.
    Returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> when a connection is available (i.e., <A
HREF="#so-accept"
><CODE
CLASS="function"
>SOCKET:SOCKET-ACCEPT</CODE
></A
> will
    not block) and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> on timeout.</P
></DD
><DT
><A
NAME="so-accept"
></A
><TT
CLASS="sexp"
>(<A
HREF="#so-accept"
><CODE
CLASS="function"
>SOCKET:SOCKET-ACCEPT</CODE
></A
>
    <VAR
CLASS="replaceable"
>socket-server</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
>
    <A
HREF="#timeout-k"
><CODE
CLASS="constant"
>:TIMEOUT</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Creates the server-side two-way
   stream for the connection.
   Waits for an attempt to connect to the server for no more than
   <A
HREF="#timeout-k"
><CODE
CLASS="constant"
>:TIMEOUT</CODE
></A
> seconds (which may be a non-negative real number or a
   list <TT
CLASS="sexp"
>(sec usec)</TT
> or a pair
   <TT
CLASS="sexp"
>(sec . usec)</TT
>).
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
>s an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
> if no connection is made in that time.
  </P
></DD
><DT
><A
NAME="so-connect"
></A
><TT
CLASS="sexp"
>(<A
HREF="#so-connect"
><CODE
CLASS="function"
>SOCKET:SOCKET-CONNECT</CODE
></A
>
    <VAR
CLASS="replaceable"
>port</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> [<VAR
CLASS="replaceable"
>host</VAR
>] <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
    <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
> <A
HREF="#timeout-k"
><CODE
CLASS="constant"
>:TIMEOUT</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Attempts to create a client-side two-way
   <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>.  Blocks until the server accepts the connection, for
   no more than <A
HREF="#timeout-k"
><CODE
CLASS="constant"
>:TIMEOUT</CODE
></A
> seconds.  If it is 0, returns immediately
   and (probably) blocks on the next i/o operation (you can use
   <A
HREF="#so-status"
><CODE
CLASS="function"
>SOCKET:SOCKET-STATUS</CODE
></A
> to check whether it will actually block).
  </P
></DD
><DT
><A
NAME="so-status"
></A
><TT
CLASS="sexp"
>(<A
HREF="#so-status"
><CODE
CLASS="function"
>SOCKET:SOCKET-STATUS</CODE
></A
>
                 <VAR
CLASS="replaceable"
>socket-stream-or-list</VAR
>
                 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <A
HREF="#timeout-opt"
>[<VAR
CLASS="replaceable"
>seconds</VAR
> [<VAR
CLASS="replaceable"
>microseconds</VAR
>]]</A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Checks whether it is possible to read from or write
   to a <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
> or whether a connection is available on a
   <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-SERVER</CODE
></A
> without blocking.</P
><P
ALIGN="justify"
>For the cognoscenti: this is the interface to <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/select.html"
TARGET="_top"
><CODE
CLASS="function"
>select</CODE
></A
>, so
   it will work for any <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> which is based on a
   <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap03.html#tag_03_165"
TARGET="_top"
>file descriptor</A
>, e.g., <A
HREF="#open"
>file</A
>/<A
HREF="#pipe"
>pipe</A
>/<A
HREF="#socket"
>socket</A
> and <A
HREF="#terminal"
><VAR
CLASS="varname"
>EXT:*KEYBOARD-INPUT*</VAR
></A
>.</P
><P
ALIGN="justify"
>This is similar to
    <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><CODE
CLASS="function"
>LISTEN</CODE
></A
>, which checks only one <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> and only for input, and
    <A
HREF="#so-wait"
><CODE
CLASS="function"
>SOCKET:SOCKET-WAIT</CODE
></A
>, which works only with <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-SERVER</CODE
></A
>s.</P
><P
ALIGN="justify"
>We define <SPAN
CLASS="QUOTE"
>"status"</SPAN
> for a <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-SERVER</CODE
></A
> or a
    <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
> to be <CODE
CLASS="constant"
>:ERROR</CODE
> if any i/o operation will cause an
    error.</P
><P
ALIGN="justify"
>Additionally, for a <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-SERVER</CODE
></A
>, we define
    <SPAN
CLASS="QUOTE"
>"status"</SPAN
> to be <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> if a connection is available, i.e.,
    is <A
HREF="#so-accept"
><CODE
CLASS="function"
>SOCKET:SOCKET-ACCEPT</CODE
></A
> will not block, and <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> otherwise.</P
><P
ALIGN="justify"
>Additionally, for a <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>, we define
    <SPAN
CLASS="QUOTE"
>"status"</SPAN
> in the given <VAR
CLASS="replaceable"
>direction</VAR
> (one of <CODE
CLASS="constant"
>:INPUT</CODE
>,
    <CODE
CLASS="constant"
>:OUTPUT</CODE
>, and <CODE
CLASS="constant"
>:IO</CODE
>) to be
    <P
></P
><DIV
CLASS="variablelist"
><P
><B
>Possible status values for various directions:</B
></P
><DL
><DT
><CODE
CLASS="constant"
>:INPUT</CODE
> status:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>reading will block
        </P
></DD
><DT
><CODE
CLASS="constant"
>:INPUT</CODE
></DT
><DD
><P
ALIGN="justify"
>some input is available
        </P
></DD
><DT
><CODE
CLASS="constant"
>:EOF</CODE
></DT
><DD
><P
ALIGN="justify"
>the stream has reached its end
       </P
></DD
></DL
></DIV
></DD
><DT
><CODE
CLASS="constant"
>:OUTPUT</CODE
> status:</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>writing will block
        </P
></DD
><DT
><CODE
CLASS="constant"
>:OUTPUT</CODE
></DT
><DD
><P
ALIGN="justify"
>output to the stream will not block
       </P
></DD
></DL
></DIV
></DD
><DT
><CODE
CLASS="constant"
>:IO</CODE
> status:</DT
><DD
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="so-status-i-o"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL
WIDTH="1*"
TITLE="out"><COL
WIDTH="1*"
TITLE="nil"><COL
WIDTH="1*"
TITLE="inp"><COL
WIDTH="1*"
TITLE="eof"><THEAD
><TR
><TH
ROWSPAN="2"
VALIGN="bottom"
>output status</TH
><TH
COLSPAN="3"
>input status</TH
></TR
><TR
><TH
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TH
><TH
><CODE
CLASS="constant"
>:INPUT</CODE
></TH
><TH
><CODE
CLASS="constant"
>:EOF</CODE
></TH
></TR
></THEAD
><TBODY
><TR
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
></TD
><TD
><CODE
CLASS="constant"
>:INPUT</CODE
></TD
><TD
><CODE
CLASS="constant"
>:EOF</CODE
></TD
></TR
><TR
><TD
><CODE
CLASS="constant"
>:OUTPUT</CODE
></TD
><TD
><CODE
CLASS="constant"
>:OUTPUT</CODE
></TD
><TD
><CODE
CLASS="constant"
>:IO</CODE
></TD
><TD
><CODE
CLASS="constant"
>:APPEND</CODE
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DD
></DL
></DIV
></P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Possible values of
     <VAR
CLASS="replaceable"
>socket-stream-or-list</VAR
>:</B
></P
><DL
><DT
><A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
> or <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-SERVER</CODE
></A
></DT
><DD
><P
ALIGN="justify"
>Returns the appropriate status, as defined
       above (<CODE
CLASS="constant"
>:IO</CODE
> status for <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>)
    </P
></DD
><DT
><TT
CLASS="sexp"
>(<A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>
       . <VAR
CLASS="replaceable"
>direction</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Return the status in the specified direction
    </P
></DD
><DT
>a list of the above</DT
><DD
><P
ALIGN="justify"
>Return a list of values, one for each element of the
       argument list (a la <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_mapccm_ma_istcm_mapcon.html"
TARGET="_top"
><CODE
CLASS="function"
>MAPCAR</CODE
></A
>)</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>If you want to avoid <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
TARGET="_top"
><CODE
CLASS="function"
>CONS</CODE
></A
>ing up a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_f.html#fresh"
TARGET="_top"
>fresh</A
> list, you can
    make the elements of <VAR
CLASS="replaceable"
>socket-stream-or-list</VAR
>
    to be <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>socket-stream</VAR
> <VAR
CLASS="replaceable"
>direction</VAR
> .
     <VAR
CLASS="replaceable"
>x</VAR
>)</TT
> or <TT
CLASS="sexp"
>(<VAR
CLASS="replaceable"
>socket-server</VAR
> . <VAR
CLASS="replaceable"
>x</VAR
>)</TT
>.
    Then <A
HREF="#so-status"
><CODE
CLASS="function"
>SOCKET:SOCKET-STATUS</CODE
></A
> will destructively modify its argument and replace
    <VAR
CLASS="replaceable"
>x</VAR
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> with the status and return the modified list.
    You can pass this modified list to <A
HREF="#so-status"
><CODE
CLASS="function"
>SOCKET:SOCKET-STATUS</CODE
></A
> again.</P
><P
ALIGN="justify"
>The optional arguments specify the timeout. <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> means
    wait forever, <TT
CLASS="literal"
>0</TT
> means poll.</P
><P
ALIGN="justify"
>The second value returned is the number of objects with
    non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> status, i.e., <SPAN
CLASS="QUOTE"
>"actionable"</SPAN
> objects.
    <A
HREF="#so-status"
><CODE
CLASS="function"
>SOCKET:SOCKET-STATUS</CODE
></A
> returns either due to a timeout or when this number is
    positive, i.e., if the timeout was <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> and <A
HREF="#so-status"
><CODE
CLASS="function"
>SOCKET:SOCKET-STATUS</CODE
></A
> did
    return, then the second value is positive.</P
></DD
><DT
><A
NAME="sost-hopo"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sost-hopo"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-HOST</CODE
></A
> <VAR
CLASS="replaceable"
>socket-stream</VAR
>)</TT
><BR><TT
CLASS="sexp"
>(<A
HREF="#sost-hopo"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-PORT</CODE
></A
> <VAR
CLASS="replaceable"
>socket-stream</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>These two functions return information about the
    <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>.</P
></DD
><DT
><A
NAME="service-port"
></A
><TT
CLASS="sexp"
>(<A
HREF="#service-port"
><CODE
CLASS="function"
>SOCKET:SOCKET-SERVICE-PORT</CODE
></A
>
                 <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>service-name</VAR
>
                 (<VAR
CLASS="replaceable"
>protocol</VAR
> "tcp"))</TT
></DT
><DD
><P
ALIGN="justify"
>A convenience function for looking up a port given
   the service name.  It returns the servent struct as <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>
   (name, list of aliases, port, protocol) for the given
   <VAR
CLASS="replaceable"
>service-name</VAR
> and
   <VAR
CLASS="replaceable"
>protocol</VAR
>, or all services as the list of
   <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
> 4)</TT
>
   if <VAR
CLASS="replaceable"
>service-name</VAR
> is not given or is
   <CODE
CLASS="constant"
>:DEFAULT</CODE
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</P
></DD
><DT
><A
NAME="sost-peer"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sost-peer"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-PEER</CODE
></A
>
    <VAR
CLASS="replaceable"
>socket-stream</VAR
> [<VAR
CLASS="replaceable"
>do-not-resolve-p</VAR
>])</TT
></DT
><DD
><P
ALIGN="justify"
>Given a socket stream, this function returns the
   name of the host on the opposite side of the connection and its port
   number; the server-side can use this to see who connected.</P
><P
ALIGN="justify"
>When the optional second argument is non-<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the hostname
   resolution is disabled and just the IP address is returned, without
   the <ACRONYM
CLASS="acronym"
>FQDN</ACRONYM
> (Fully Qualified Domain Name).
   </P
></DD
><DT
><A
NAME="sost-local"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sost-local"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-LOCAL</CODE
></A
>
    <VAR
CLASS="replaceable"
>socket-stream</VAR
> [<VAR
CLASS="replaceable"
>do-not-resolve-p</VAR
>])</TT
></DT
><DD
><P
ALIGN="justify"
>The dual to <A
HREF="#sost-peer"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-PEER</CODE
></A
> - same information,
   host name and port number, but for the local host.
   The difference from <A
HREF="#sost-hopo"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-HOST</CODE
></A
> and <A
HREF="#sost-hopo"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-PORT</CODE
></A
> is that this function
   asks the OS (and thus returns the correct trusted values) while the
   other two are just accessors to the internal data structure, and
   basically return the arguments given to the function which created
   the <VAR
CLASS="replaceable"
>socket-stream</VAR
>.</P
></DD
><DT
><A
NAME="sost-shut"
></A
><TT
CLASS="sexp"
>(<A
HREF="#sost-shut"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-SHUTDOWN</CODE
></A
>
    <VAR
CLASS="replaceable"
>socket-stream</VAR
> <VAR
CLASS="replaceable"
>direction</VAR
>)</TT
></DT
><DD
><P
ALIGN="justify"
>Some Internet protocols, such as <A
HREF="http://www.w3.org/Protocols/"
TARGET="_top"
><B
CLASS="command"
>HTTP</B
></A
>, provide for
   closing the connection in one <VAR
CLASS="replaceable"
>direction</VAR
> using <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/shutdown.html"
TARGET="_top"
><CODE
CLASS="function"
>shutdown</CODE
></A
>.
   This function provides an interface to this <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> system call.
   <VAR
CLASS="replaceable"
>direction</VAR
> should be <CODE
CLASS="constant"
>:INPUT</CODE
> or <CODE
CLASS="constant"
>:OUTPUT</CODE
>.
   Note that you should still call <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_close.html"
TARGET="_top"
><CODE
CLASS="function"
>CLOSE</CODE
></A
> after you are done with your
   <VAR
CLASS="replaceable"
>socket-stream</VAR
>; this is best accomplished by using <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_with-open-stream.html"
TARGET="_top"
><CODE
CLASS="function"
>WITH-OPEN-STREAM</CODE
></A
>.</P
><P
ALIGN="justify"
>All <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>s are <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional"
TARGET="_top"
>bidirectional</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s (i.e., both <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>INPUT-STREAM-P</CODE
></A
>
   and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>OUTPUT-STREAM-P</CODE
></A
> return <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> for them).
   <A
HREF="#sost-shut"
><CODE
CLASS="function"
>SOCKET:SOCKET-STREAM-SHUTDOWN</CODE
></A
> <I
CLASS="emphasis"
>breaks</I
> this and turns its argument
   stream into an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> (if <VAR
CLASS="replaceable"
>direction</VAR
> is <CODE
CLASS="constant"
>:OUTPUT</CODE
>) or <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> (if
   <VAR
CLASS="replaceable"
>direction</VAR
> is <CODE
CLASS="constant"
>:INPUT</CODE
>).
    Thus, the following important invariant is preserved: whenever
   <P
></P
><UL
><LI
><P
ALIGN="justify"
>a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> is open
    (i.e., <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN-STREAM-P</CODE
></A
> returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>) and</P
></LI
><LI
><P
ALIGN="justify"
>a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> is an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> (i.e., <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_input-str_put-stream-p.html"
TARGET="_top"
><CODE
CLASS="function"
>INPUT-STREAM-P</CODE
></A
>
     returns <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>)</P
></LI
></UL
>
   the <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> can be read from (e.g., with <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-byte.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-BYTE</CODE
></A
>).
 </P
></DD
><DT
><A
NAME="so-opt"
></A
><TT
CLASS="sexp"
>(<A
HREF="#so-opt"
><CODE
CLASS="function"
>SOCKET:SOCKET-OPTIONS</CODE
></A
>
    <VAR
CLASS="replaceable"
>socket-server</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> {<VAR
CLASS="replaceable"
>option</VAR
>}*)</TT
></DT
><DD
><P
ALIGN="justify"
>Query and, optionally, set socket options using
   <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/getsockopt.html"
TARGET="_top"
><CODE
CLASS="function"
>getsockopt</CODE
></A
> and <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html"
TARGET="_top"
><CODE
CLASS="function"
>setsockopt</CODE
></A
>.
   An <VAR
CLASS="replaceable"
>option</VAR
> is a keyword, optionally followed by the new value.
   When the new value is not supplied, <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/setsockopt.html"
TARGET="_top"
><CODE
CLASS="function"
>setsockopt</CODE
></A
> is not called.
   For each option the old (or current, if new value was not supplied)
   value is returned. E.g., <TT
CLASS="sexp"
>(<A
HREF="#so-opt"
><CODE
CLASS="function"
>SOCKET:SOCKET-OPTIONS</CODE
></A
> <VAR
CLASS="replaceable"
>socket-server</VAR
>
   :SO-LINGER 1 :SO-RCVLOWAT)</TT
> returns 2 values: <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, the old
   value of the <CODE
CLASS="constant"
>:SO-LINGER</CODE
> option, and 1, the
   current value of the <CODE
CLASS="constant"
>:SO-RCVLOWAT</CODE
> option.
  </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="quickstart"
>30.7. Extensions-2.7. Quickstarting delivery with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></H2
><P
ALIGN="justify"
>This section describes four ways to turn <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> programs into
 executable programs, which can be started as quickly as executables
 written in other languages.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
></DT
><DD
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> can act as a script interpreter.
  </P
></DD
><DT
>Desktop environments such as <A
HREF="http://www.kde.org"
TARGET="_top"
>KDE</A
>, <A
HREF="http://www.gnome.org"
TARGET="_top"
>GNOME</A
>, or Windows.</DT
><DD
><P
ALIGN="justify"
>Files created with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> can be associated with
   the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> executables so that clicking on them would make <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
   execute the appropriate code.</P
></DD
><DT
><A
HREF="http://www.linux.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Linux</B
></A
> kernel with
               <VAR
CLASS="option"
>CONFIG_BINFMT_MISC=y</VAR
></DT
><DD
><P
ALIGN="justify"
>Associate the extensions <TT
CLASS="filename"
>#P".fas"</TT
>
   and <TT
CLASS="filename"
>#P".lisp"</TT
> with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>; then you can make the
   files executable and run them from the command line.
  </P
></DD
><DT
><A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
></DT
><DD
><P
ALIGN="justify"
>Files created with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> can be associated with a
   Workbench project icon so that clicking on them would make <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
   execute the appropriate code.  Note that several <TT
CLASS="filename"
>#P".fas"</TT
> files
   can be concatenated (using <CODE
CLASS="function"
>Join</CODE
>) into one file.
  </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>These four techniques apply to a single <TT
CLASS="filename"
>#P".lisp"</TT
> or <TT
CLASS="filename"
>#P".fas"</TT
> file.
 If your application is made up of several <TT
CLASS="filename"
>#P".lisp"</TT
> or <TT
CLASS="filename"
>#P".fas"</TT
> files,
 you can simply concatenate them (using <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/cat.html"
TARGET="_top"
><B
CLASS="command"
>cat</B
></A
>) into one file;
 the techniques then apply to that concatenated file.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="quickstart-unix"
></A
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>On Unix, a text file (<TT
CLASS="filename"
>#P".fas"</TT
> or <TT
CLASS="filename"
>#P".lisp"</TT
>) can be
 made executable by adding a first line of the form
 <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>#!<VAR
CLASS="replaceable"
>interpreter</VAR
> [<VAR
CLASS="replaceable"
>interpreter-arguments</VAR
>]</PRE
></TD
></TR
></TABLE
>
 and using <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/chmod.html"
TARGET="_top"
><B
CLASS="command"
>chmod</B
></A
> to make the script executable.
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> can be used as a script interpreter under the following
 circumstances:</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
>The <VAR
CLASS="replaceable"
>interpreter</VAR
> must be the full pathname of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.
 The recommended path is <TT
CLASS="filename"
>/usr/local/bin/clisp</TT
>,
 and if <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is actually installed elsewhere, making
 <TT
CLASS="filename"
>/usr/local/bin/clisp</TT
> be a symbolic link to the
 real <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
></LI
><LI
><P
ALIGN="justify"
>The <VAR
CLASS="replaceable"
>interpreter</VAR
> must be a real executable, not a script.
 Unfortunately, in the binary distributions of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> on Solaris,
 <B
CLASS="command"
>clisp</B
> is a shell script because a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> compiler cannot be
 assumed to be installed on this platform.  If you do have a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>
 compiler installed, build <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> from the source yourself;
 <B
CLASS="command"
>make install</B
> will install <B
CLASS="command"
>clisp</B
> as a real
 executable.</P
></LI
><LI
><P
ALIGN="justify"
>On some platforms, the first line which specifies the
 interpreter is limited in length:
   <P
></P
><UL
><LI
><P
ALIGN="justify"
>max. 32 characters on SunOS 4,</P
></LI
><LI
><P
ALIGN="justify"
>max. 80 characters on HP-UX,</P
></LI
><LI
><P
ALIGN="justify"
>max. 127 characters on <A
HREF="http://www.linux.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Linux</B
></A
>.</P
></LI
></UL
>
   Characters exceeding this limit are simply cut off by the system.
   At least 128 characters are accepted on Solaris, IRIX, AIX, OSF/1.
   There is no workaround: You have to keep the interpreter pathname
   and arguments short.</P
></LI
><LI
><P
ALIGN="justify"
>On Solaris and HP-UX, only the first
 <VAR
CLASS="replaceable"
>interpreter-arg</VAR
> is passed to the
 <VAR
CLASS="replaceable"
>interpreter</VAR
>.  In order to pass more than one option (for example,
 <VAR
CLASS="option"
>-Msomewhere.mem</VAR
> and <VAR
CLASS="option"
>-C</VAR
>) to <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>,
 separate them by hard spaces (ISO Latin-1 character 160) instead of
 normal spaces.  (But the separator between <VAR
CLASS="replaceable"
>interpreter</VAR
> and <VAR
CLASS="replaceable"
>interpreter-arguments</VAR
>
 must still be a normal space!) <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will split the <VAR
CLASS="replaceable"
>interpreter-arguments</VAR
> at
 hard spaces and at normal spaces.</P
></LI
></UL
><DIV
CLASS="formalpara"
><P
><A
NAME="script-exec"
></A
><B
>Script execution. </B
><P
></P
><UL
><LI
><P
ALIGN="justify"
>The script should contain Lisp
   forms, except in the <TT
CLASS="literal"
>#!</TT
> line.</P
></LI
><LI
><P
ALIGN="justify"
>The file is loaded normally, through the function
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> (in particular, the name of the script file, which
   is <VAR
CLASS="envar"
>$0</VAR
> in <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"
TARGET="_top"
><B
CLASS="command"
>/bin/sh</B
></A
>, can be found in <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*LOAD-TRUENAME*</VAR
></A
> and
   <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stload-pa_d-truenamest.html"
TARGET="_top"
><VAR
CLASS="varname"
>*LOAD-PATHNAME*</VAR
></A
>).</P
></LI
><LI
><P
ALIGN="justify"
>Before it is loaded, the variable <A
HREF="#script-exec"
><VAR
CLASS="varname"
>EXT:*ARGS*</VAR
></A
> is bound
   to a list of strings, representing the arguments given to the Lisp
   script (i.e., <VAR
CLASS="envar"
>$1</VAR
> in <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"
TARGET="_top"
><B
CLASS="command"
>/bin/sh</B
></A
> becomes <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
> <A
HREF="#script-exec"
><VAR
CLASS="varname"
>EXT:*ARGS*</VAR
></A
>)</TT
> etc).</P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*STANDARD-INPUT*</VAR
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*STANDARD-OUTPUT*</VAR
></A
> are
   bound, as usual, to the Unix standard input and output.
   <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*ERROR-OUTPUT*</VAR
></A
> is bound to the Unix error output.</P
></LI
><LI
><P
ALIGN="justify"
>Continuable errors will be turned to warnings
   (using <A
HREF="#appease-cerrors"
><CODE
CLASS="function"
>EXT:APPEASE-CERRORS</CODE
></A
>).</P
></LI
><LI
><P
ALIGN="justify"
>Non-continuable errors and
   <B
CLASS="keycap"
>Control</B
>-<SPAN
CLASS="keysym"
>C</SPAN
> interrupts will
   terminate the execution of the Lisp script with an error status
   (using <A
HREF="#exit-on-error"
><CODE
CLASS="function"
>EXT:EXIT-ON-ERROR</CODE
></A
>).</P
></LI
><LI
><P
ALIGN="justify"
>If you wish the script's contents to be compiled
  during loading, add
  <A
HREF="clisp.html#opt-load-comp"
TARGET="_top"
><VAR
CLASS="option"
>-C</VAR
></A
>
  to the <VAR
CLASS="replaceable"
>interpreter-arguments</VAR
>.</P
></LI
></UL
>
 See also <A
HREF="clisp.html#opt-exec-file"
TARGET="_top"
>the manual</A
>.
</P
></DIV
><DIV
CLASS="formalpara"
><P
><A
NAME="script-bad"
></A
><B
>If nothing works. </B
>Another, quite inferior, alternative is to put the following into
 a file:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;#!/bin/sh
exec clisp &#60;&#60;EOF
(lisp-form)
(another-lisp-form)
(yet-another-lisp-form)
EOF
</PRE
></TD
></TR
></TABLE
>
The problem with this approach is that the return values of each form
will be printed to the standard output.  Another problem is that no user
input will be available.</P
></DIV
></DD
><DT
><A
NAME="quickstart-win32"
></A
>Platform dependent: <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>There are two different ways to make <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
 "executables" for Windows platforms.</P
><P
></P
><UL
><LI
><P
ALIGN="justify"
>Associate the <TT
CLASS="filename"
>#P".mem"</TT
> extension with
   <B
CLASS="command"
>c:\clisp\lisp.exe -B c:\clisp -M %s</B
>.
  </P
></LI
><LI
><P
ALIGN="justify"
>Associate the <TT
CLASS="filename"
>#P".fas"</TT
> extension with
   <B
CLASS="command"
>c:\clisp\lisp.exe -B c:\clisp -M c:\clisp\lispinit.mem
    -i %s</B
>.
    Alternatively, you may want to have a function
    <CODE
CLASS="function"
>main</CODE
> in your <TT
CLASS="filename"
>#P".fas"</TT
> files and associate
    the <TT
CLASS="filename"
>#P".fas"</TT
> extension with <B
CLASS="command"
>c:\clisp\lisp.exe -B
    c:\clisp -M c:\clisp\lispinit.mem -i %s -x (main)</B
>.
  </P
></LI
></UL
><P
ALIGN="justify"
>Then clicking on the compiled lisp file (with <TT
CLASS="filename"
>#P".fas"</TT
>
 extension) will load the file (thus executing all the code in the
 file), while the clicking on a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="#image"
>memory image</A
> (with <TT
CLASS="filename"
>#P".mem"</TT
>
 extension) will start clisp with the given <A
HREF="#image"
>memory image</A
>.</P
><P
ALIGN="justify"
>Note that <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is distributed with a file
 <TT
CLASS="filename"
>install.bat</TT
>, which creates a file
 <TT
CLASS="filename"
>clisp.lnk</TT
> on your desktop and also associates
 <TT
CLASS="filename"
>#P".fas"</TT
>, <TT
CLASS="filename"
>#P".lisp"</TT
>, and <TT
CLASS="filename"
>#P".mem"</TT
> files with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</P
></DD
><DT
><A
NAME="quickstart-linux"
></A
>Platform dependent: <A
HREF="http://www.linux.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Linux</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>You have to build your kernel with
 <VAR
CLASS="option"
>CONFIG_BINFMT_MISC=y</VAR
> and
 <VAR
CLASS="option"
>CONFIG_PROC_FS=y</VAR
>.  Then you will have a
 <TT
CLASS="filename"
>/proc/sys/fs/binfmt_misc/</TT
> directory and you will
 be able to do (as <TT
CLASS="literal"
>root</TT
>; you might want to put
 these lines into <TT
CLASS="filename"
>/etc/rc.d/rc.local</TT
>):

<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;bash# echo ":CLISP:E::fas::/usr/local/bin/clisp:" &#62;&#62; /proc/sys/fs/binfmt_misc/register
bash# echo ":CLISP:E::lisp::/usr/local/bin/clisp:" &#62;&#62; /proc/sys/fs/binfmt_misc/register
</PRE
></TD
></TR
></TABLE
></P
><P
ALIGN="justify"
>Then you can do the following:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;bash$ cat &#60;&#60; EOF &#62; hello.lisp
(print "hello, world!")
EOF
bash$ clisp -c hello.lisp

Compiling file hello.lisp ...

Compilation of file hello.lisp is finished.
0 errors, 0 warnings
bash$ chmod +x hello.fas
bash$ hello.fas

"hello, world!"
bash$
</PRE
></TD
></TR
></TABLE
></P
><P
ALIGN="justify"
>Please read
 <TT
CLASS="filename"
>/usr/src/linux/Documentation/binfmt_misc.txt</TT
> for
 details.</P
></DD
><DT
><A
NAME="quickstart-amiga"
></A
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>Using a Workbench project file, the <A
HREF="#image"
>memory image</A
>s,
 source and binary files can be made "executable".

<P
></P
><UL
><LI
><P
ALIGN="justify"
>Using IconEdit, create a project icon.</P
></LI
><LI
><P
ALIGN="justify"
>Set the tool to <TT
CLASS="filename"
>lisp:lisp.run</TT
>
  (or wherever the binary is located).</P
></LI
><LI
><P
ALIGN="justify"
>Define a tooltype named
  <VAR
CLASS="replaceable"
>ARGS</VAR
> set to <VAR
CLASS="option"
>-M *</VAR
>
  for a <A
HREF="#image"
>memory image</A
> project icon or to <VAR
CLASS="option"
>-M lisp:lispinit.mem
  -i *</VAR
> for a source or compiled lisp file.  The startup code
  will replace an isolated <SPAN
CLASS="token"
>*</SPAN
> token with the file
  name.</P
></LI
><LI
><P
ALIGN="justify"
>Alternatively, you may want to have a function
  <CODE
CLASS="function"
>main</CODE
> in your files and set the
  <VAR
CLASS="replaceable"
>ARGS</VAR
> tooltype to <VAR
CLASS="option"
>-M
  lisp:lispinit.mem -i * -x (main)</VAR
>.</P
></LI
><LI
><P
ALIGN="justify"
>You might want to add more <A
HREF="clisp.html"
TARGET="_top"
>command line options</A
> to the
  <VAR
CLASS="replaceable"
>ARGS</VAR
> tooltype.</P
></LI
></UL
>

 Clicking on the compiled lisp file (with <TT
CLASS="filename"
>#P".fas"</TT
> suffix) will load
 the image and the file (thus executing all the code in the file), while
 clicking on the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>'s <A
HREF="#image"
>memory image</A
> (with <TT
CLASS="filename"
>#P".mem"</TT
> suffix) with
 start <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> with the given <A
HREF="#image"
>memory image</A
>.</P
><P
ALIGN="justify"
>You might want to add a tooltype named
 <VAR
CLASS="replaceable"
>WINDOW</VAR
> which names the console window that
 <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stterminal-iost.html"
TARGET="_top"
><VAR
CLASS="varname"
>*TERMINAL-IO*</VAR
></A
> will be bound to, for example
 <TT
CLASS="filename"
>CON:0/0/500/300/CLISP-Listener/AUTO/CLOSE</TT
>, or
 <TT
CLASS="filename"
>TCP:20002</TT
>.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="app-dev"
>30.8. Extensions-2.8. Application delivery with <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></H2
><P
ALIGN="justify"
>Some ways of packaging <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> programs are discussed in the
 section <A
HREF="#quickstart"
>Quickstarting delivery with
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
>.</P
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> is Free Software, covered by the <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GPL</A
>, with special
 terms governing the distribution of applications that run in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.
 The precise terms can be found in the <TT
CLASS="filename"
>COPYRIGHT</TT
>
 file contained in the source and binary distributions of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.  Here
 is an informal clarification what these terms mean in practice.  Please
 refer to the said <TT
CLASS="filename"
>COPYRIGHT</TT
> file when in
 doubt.</P
><P
ALIGN="justify"
>In many cases, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> does not force an application to be covered
 by the <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GPL</A
>. Nevertheless, we encourage you to release your software
 under an open source copyright. The benefits of such a copyright for
 your users are numerous, in particular they are free to modify the
 application when their needs/requirements change, and they are free to
 recompile the application when they upgrade their machine or operating
 system.</P
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> extensions, i.e. programs which need to access
 non-portable <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> internal symbols (in the packages <A
HREF="#sys-pac"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"SYSTEM"</SPAN
></STRONG
></A
>,
 <A
HREF="#classes"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CLOS"</SPAN
></STRONG
></A
>, <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
>, ...), must be covered by <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GPL</A
> as
 well.</P
><P
ALIGN="justify"
>Other programs running in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> have to or need not to be placed
 under <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GPL</A
>, depending on their distribution form:

<P
></P
><UL
><LI
><P
ALIGN="justify"
>Programs distributed as Lisp source or <TT
CLASS="filename"
>#P".fas"</TT
>
   files can be distributed without restrictions coming from <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.
 </P
></LI
><LI
><P
ALIGN="justify"
>Programs distributed as <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <A
HREF="#image"
>memory image</A
>s can be
  distributed only if accompanied with the non-<A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> <TT
CLASS="filename"
>#P".fas"</TT
> files
  which make up the <A
HREF="#image"
>memory image</A
>, and a <TT
CLASS="filename"
>#P"Makefile"</TT
> for rebuilding the
  <A
HREF="#image"
>memory image</A
>.</P
></LI
><LI
><P
ALIGN="justify"
>If you need to distribute a modified <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
  executable (for example, incorporating additional <A
HREF="#modules"
>module</A
>s written
  in <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>), you must distribute its full source under <A
HREF="http://www.gnu.org"
TARGET="_top"
>GNU</A
> <A
HREF="http://www.gnu.org/copyleft/gpl.html"
TARGET="_top"
>GPL</A
>.
  If you are not satisfied with this, you can instead put the additional
  <A
HREF="#modules"
>module</A
>s into a separate (non-<A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>) program, with which your Lisp
  program will communicate via <A
HREF="#socket"
><CODE
CLASS="classname"
>SOCKET:SOCKET-STREAM</CODE
></A
>s.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="shell"
>30.9. Extensions-2.9. Shell, Pipes and Printing</A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="exec"
>30.9.1. Shell</A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>,
   platforms only.</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#exec"
><CODE
CLASS="function"
>EXT:EXECUTE</CODE
></A
> <VAR
CLASS="replaceable"
>program</VAR
>
       <VAR
CLASS="replaceable"
>arg<SUB
>1</SUB
></VAR
>
       <VAR
CLASS="replaceable"
>arg<SUB
>2</SUB
></VAR
> ...)</TT
>
   executes an external program.
   Its name is <VAR
CLASS="replaceable"
>program</VAR
> (a full pathname).
   It is given the strings <VAR
CLASS="replaceable"
>arg<SUB
>1</SUB
></VAR
>,
   <VAR
CLASS="replaceable"
>arg<SUB
>2</SUB
></VAR
>, ... as arguments.
 </P
></DD
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#exec"
><CODE
CLASS="function"
>EXT:EXECUTE</CODE
></A
> <VAR
CLASS="replaceable"
>command</VAR
>)</TT
>
   executes a given <VAR
CLASS="replaceable"
>command</VAR
> using the operating system's shell.
 </P
></DD
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
>,
   <A
HREF="http://www.acorn.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Acorn</B
></A
>, <A
HREF="http://www.freedos.org/"
TARGET="_top"
><B
CLASS="emphasis"
>DOS</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#exec"
><CODE
CLASS="function"
>EXT:SHELL</CODE
></A
> [<VAR
CLASS="replaceable"
>command</VAR
>])</TT
>
   calls the operating system's shell. <TT
CLASS="sexp"
>(<A
HREF="#exec"
><CODE
CLASS="function"
>EXT:SHELL</CODE
></A
>)</TT
> calls the shell for interactive use.
   <TT
CLASS="sexp"
>(<A
HREF="#exec"
><CODE
CLASS="function"
>EXT:SHELL</CODE
></A
> <VAR
CLASS="replaceable"
>command</VAR
>)</TT
> calls the shell
   only for execution of the one given <VAR
CLASS="replaceable"
>command</VAR
>.
 </P
></DD
><DT
><A
NAME="run-prog"
></A
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
   platforms only.</DT
><DD
><P
ALIGN="justify"
>The functions <A
HREF="#run-prog"
><CODE
CLASS="function"
>EXT:RUN-SHELL-COMMAND</CODE
></A
> and <A
HREF="#run-prog"
><CODE
CLASS="function"
>EXT:RUN-PROGRAM</CODE
></A
> are the
   general interface to <A
HREF="#exec"
><CODE
CLASS="function"
>EXT:SHELL</CODE
></A
> and the above:</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#run-prog"
><CODE
CLASS="function"
>EXT:RUN-SHELL-COMMAND</CODE
></A
> <VAR
CLASS="replaceable"
>command</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
    <CODE
CLASS="constant"
>:INPUT</CODE
> <CODE
CLASS="constant"
>:OUTPUT</CODE
> <CODE
CLASS="constant"
>:IF-OUTPUT-EXISTS</CODE
> <CODE
CLASS="constant"
>:WAIT</CODE
>)</TT
>
   runs a shell command (including shell built-in commands,
   like <B
CLASS="command"
>DIR</B
> on <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>/<A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>
   and <B
CLASS="command"
>for/do/done</B
> on <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>).</P
><P
ALIGN="justify"
><TT
CLASS="sexp"
>(<A
HREF="#run-prog"
><CODE
CLASS="function"
>EXT:RUN-PROGRAM</CODE
></A
> <VAR
CLASS="replaceable"
>program</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>
    <CODE
CLASS="constant"
>:ARGUMENTS</CODE
> <CODE
CLASS="constant"
>:INPUT</CODE
> <CODE
CLASS="constant"
>:OUTPUT</CODE
> <CODE
CLASS="constant"
>:IF-OUTPUT-EXISTS</CODE
> <CODE
CLASS="constant"
>:WAIT</CODE
>)</TT
>
   runs an external program.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><VAR
CLASS="replaceable"
>command</VAR
></DT
><DD
><P
ALIGN="justify"
>the shell command.</P
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>The shell the command is passed to is the value
       of the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
> <VAR
CLASS="envar"
>SHELL</VAR
>, which normally is <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"
TARGET="_top"
><B
CLASS="command"
>/bin/sh</B
></A
>.
       The command should be a <SPAN
CLASS="QUOTE"
>"simple command"</SPAN
>;
       a <SPAN
CLASS="QUOTE"
>"command list"</SPAN
> should be enclosed in "{
       ... ; }" (for <A
HREF="http://www.opengroup.org/onlinepubs/007904975/utilities/sh.html"
TARGET="_top"
><B
CLASS="command"
>/bin/sh</B
></A
>) or "( ... )" (for <TT
CLASS="filename"
>/bin/csh</TT
>).
     </P
></DD
></DL
></DIV
></DD
><DT
><VAR
CLASS="replaceable"
>program</VAR
></DT
><DD
><P
ALIGN="justify"
>the program.  The directories listed in the
     <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
> <VAR
CLASS="envar"
>PATH</VAR
> will be searched for it.
    </P
></DD
><DT
><CODE
CLASS="constant"
>:ARGUMENTS</CODE
></DT
><DD
><P
ALIGN="justify"
>a list of arguments (strings) that are given to the
     program.</P
></DD
><DT
><CODE
CLASS="constant"
>:INPUT</CODE
></DT
><DD
><P
ALIGN="justify"
>where the program's input is to come from: either
     <CODE
CLASS="constant"
>:TERMINAL</CODE
> (the standard input, default) or
     <CODE
CLASS="constant"
>:STREAM</CODE
> (a Lisp stream to be created) or
     a pathname (an input file) or
     <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (no input at all).</P
></DD
><DT
><CODE
CLASS="constant"
>:OUTPUT</CODE
></DT
><DD
><P
ALIGN="justify"
>where the program's output is to be sent to: either
     <CODE
CLASS="constant"
>:TERMINAL</CODE
> (the standard output, default) or
     <CODE
CLASS="constant"
>:STREAM</CODE
> (a Lisp stream to be created) or
     a pathname (an output file) or
     <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> (ignore the output).</P
></DD
><DT
><CODE
CLASS="constant"
>:IF-OUTPUT-EXISTS</CODE
></DT
><DD
><P
ALIGN="justify"
>what to do if the <CODE
CLASS="constant"
>:OUTPUT</CODE
> file already exists.
     The possible values are <CODE
CLASS="constant"
>:OVERWRITE</CODE
>, <CODE
CLASS="constant"
>:APPEND</CODE
>, <CODE
CLASS="constant"
>:ERROR</CODE
>,
     with the same meaning as for <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN</CODE
></A
>. The default is <CODE
CLASS="constant"
>:OVERWRITE</CODE
>.
    </P
></DD
><DT
><CODE
CLASS="constant"
>:WAIT</CODE
></DT
><DD
><P
ALIGN="justify"
>whether to wait for program termination or not
     (this is useful when no i/o to the process is needed);
     the default is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, i.e., synchronous execution.
    </P
></DD
><DT
><CODE
CLASS="constant"
>:MAY-EXEC</CODE
></DT
><DD
><P
ALIGN="justify"
>pass <B
CLASS="command"
>exec</B
> to the underlying
    shell (<A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> only).</P
></DD
><DT
><CODE
CLASS="constant"
>:INDIRECTP</CODE
></DT
><DD
><P
ALIGN="justify"
>use a shell to run the command, e.g.,
    <TT
CLASS="sexp"
>(<A
HREF="#run-prog"
><CODE
CLASS="function"
>EXT:RUN-PROGRAM</CODE
></A
> "dir" :indirectp <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>)</TT
>
    will run the shell built-in command <B
CLASS="command"
>DIR</B
>.
    (<A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>/<A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
> only).</P
></DD
></DL
></DIV
><P
ALIGN="justify"
>If <CODE
CLASS="constant"
>:STREAM</CODE
> was specified for <CODE
CLASS="constant"
>:INPUT</CODE
> or <CODE
CLASS="constant"
>:OUTPUT</CODE
>, a Lisp
 <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> is returned.
 If <CODE
CLASS="constant"
>:STREAM</CODE
> was specified for both <CODE
CLASS="constant"
>:INPUT</CODE
> and <CODE
CLASS="constant"
>:OUTPUT</CODE
>, three
 Lisp <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>s are returned, as for the function <A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-IO-STREAM</CODE
></A
>.
 This use of <A
HREF="#run-prog"
><CODE
CLASS="function"
>EXT:RUN-PROGRAM</CODE
></A
> can cause
 <A
HREF="#deadlock"
>deadlocks</A
>, see <A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-IO-STREAM</CODE
></A
>.</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="pipe"
>30.9.2. Pipes</A
></H3
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
>, <A
HREF="http://www.os2.org/"
TARGET="_top"
><B
CLASS="emphasis"
>OS/2</B
></A
>, <A
HREF="http://www.willows.com/"
TARGET="_top"
><B
CLASS="emphasis"
>Win32</B
></A
>
    platforms only.</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="sexp"
>(<A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-INPUT-STREAM</CODE
></A
>
    <VAR
CLASS="replaceable"
>command</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> that will supply the output
  from the execution of the given operating system command.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-OUTPUT-STREAM</CODE
></A
>
   <VAR
CLASS="replaceable"
>command</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> that will pass its output as
   input to the execution of the given operating system command.
  </P
></DD
><DT
><TT
CLASS="sexp"
>(<A
HREF="#pipe"
><CODE
CLASS="function"
>EXT:MAKE-PIPE-IO-STREAM</CODE
></A
>
   <VAR
CLASS="replaceable"
>command</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> <A
HREF="#eltype"
><CODE
CLASS="constant"
>:ELEMENT-TYPE</CODE
></A
> <A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
> <A
HREF="#buffered"
><CODE
CLASS="constant"
>:BUFFERED</CODE
></A
>)</TT
></DT
><DD
><P
ALIGN="justify"
>returns three values.
  The first value is a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional"
TARGET="_top"
>bidirectional</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> that will simultaneously pass its output
  as input to the execution of the given operating system command and
  supply the output from this command as input.
  The second and third value will be the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_i.html#input"
TARGET="_top"
>input</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> and the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
> that
  make up the <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional"
TARGET="_top"
>bidirectional</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>, respectively.</P
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>Note that these three streams must be closed
   individually.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="warning"
><A
NAME="deadlock"
></A
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>Note that improper use of this function
   can lead to <I
CLASS="emphasis"
>deadlocks</I
>.
   Use it at your own risk!</P
><P
ALIGN="justify"
>A deadlock occurs if the command and your Lisp program either
   both try to read from each other at the same time or both try to
   write to each other at the same time.</P
><P
ALIGN="justify"
>To avoid deadlocks, it is recommended that you fix a
   protocol between the command and your program and avoid any hidden
   buffering: use <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-char-no-hang.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-CHAR-NO-HANG</CODE
></A
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listen.html"
TARGET="_top"
><CODE
CLASS="function"
>LISTEN</CODE
></A
>,
   <A
HREF="#so-status"
><CODE
CLASS="function"
>SOCKET:SOCKET-STATUS</CODE
></A
> instead of <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_read-line.html"
TARGET="_top"
><CODE
CLASS="function"
>READ-LINE</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_readcm_re_g-whitespace.html"
TARGET="_top"
><CODE
CLASS="function"
>READ</CODE
></A
> on the input side, and
   complete every output operation by a <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_finish-ou_clear-output.html"
TARGET="_top"
><CODE
CLASS="function"
>FINISH-OUTPUT</CODE
></A
>.
   The same precautions must apply to the called command as well.
</P
></TD
></TR
></TABLE
></DIV
></DD
></DL
></DIV
></DD
></DL
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="hardcopy"
>30.9.3. Printing</A
></H3
><P
ALIGN="justify"
>The macro
 <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#hardcopy"
><CODE
CLASS="function"
>EXT:WITH-OUTPUT-TO-PRINTER</CODE
></A
></I
></STRONG
>:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;(<A
HREF="#hardcopy"
><CODE
CLASS="function"
>EXT:WITH-OUTPUT-TO-PRINTER</CODE
></A
> (<VAR
CLASS="replaceable"
>variable</VAR
> [<A
HREF="#extfmt"
><CODE
CLASS="constant"
>:EXTERNAL-FORMAT</CODE
></A
>])
  {<VAR
CLASS="replaceable"
>declaration</VAR
>}*
  {<VAR
CLASS="replaceable"
>form</VAR
>}*)
</PRE
></TD
></TR
></TABLE
>
 binds the variable <VAR
CLASS="replaceable"
>variable</VAR
> to an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_o.html#output"
TARGET="_top"
>output</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>
 that sends its output to the printer.</P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="getenv"
>30.10. Extensions-2.10. Operating System
  Environment.</A
></H2
><P
ALIGN="justify"
>Most modern operating systems support <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>s that associate
 strings (<SPAN
CLASS="QUOTE"
>"variables"</SPAN
>) with other strings
 (<SPAN
CLASS="QUOTE"
>"values"</SPAN
>).  These variables are somewhat similar to the
 <A
HREF="http://www.lisp.org/HyperSpec/Body/dec_special.html"
TARGET="_top"
><TT
CLASS="literal"
>SPECIAL</TT
></A
> variables in <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
>: their values are inherited by the
 processes from their parent process.</P
><P
ALIGN="justify"
>You can access your OS <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>s using the function
<TT
CLASS="sexp"
>(<A
HREF="#getenv"
><CODE
CLASS="function"
>EXT:GETENV</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> <VAR
CLASS="replaceable"
>string</VAR
>)</TT
>,
where <VAR
CLASS="replaceable"
>string</VAR
> is the name of the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>.
When <VAR
CLASS="replaceable"
>string</VAR
> is omitted or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, all the <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>s and their values
are returned in an <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_a.html#association_list"
TARGET="_top"
>alist</A
>.</P
><P
ALIGN="justify"
>You can change the value of existing <A
HREF="http://www.opengroup.org/onlinepubs/007904975/basedefs/xbd_chap08.html"
TARGET="_top"
>environment variable</A
>s or create new
 ones using <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> (<A
HREF="#getenv"
><CODE
CLASS="function"
>EXT:GETENV</CODE
></A
>
 <VAR
CLASS="replaceable"
>string</VAR
>) <VAR
CLASS="replaceable"
>new-value</VAR
>)</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="separate-io"
>30.11. Extensions-2.11. Other</A
></H2
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>Platform dependent: <A
HREF="http://www.amiga.org/"
TARGET="_top"
><B
CLASS="emphasis"
>Amiga</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>To have <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*DEBUG-IO*</VAR
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*ERROR-OUTPUT*</VAR
></A
> point
 to separate console windows (thus keeping your standard console window
 clean from error messages) you can use
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (<A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*ERROR-OUTPUT*</VAR
></A
>
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*DEBUG-IO*</VAR
></A
>
      (<A
HREF="http://www.lisp.org/HyperSpec/Body/fun_open.html"
TARGET="_top"
><CODE
CLASS="function"
>OPEN</CODE
></A
> "CON:0/0/500/300/CLISP-Debugger/AUTO/CLOSE"
            <CODE
CLASS="constant"
>:DIRECTION</CODE
> <CODE
CLASS="constant"
>:IO</CODE
>)))
</PRE
></TD
></TR
></TABLE
></P
></DD
><DT
>Platform dependent: <A
HREF="http://www.UNIX-systems.org/online.html"
TARGET="_top"
><B
CLASS="emphasis"
>UNIX</B
></A
> platforms only.</DT
><DD
><P
ALIGN="justify"
>When running under the <A
HREF="http://www.x.org/"
TARGET="_top"
>X Window System</A
>, you can create
  a <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_b.html#bidirectional"
TARGET="_top"
>bidirectional</A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_stream.html"
TARGET="_top"
><CODE
CLASS="classname"
>STREAM</CODE
></A
>, which uses a new dedicated xterm, using the function
  <STRONG
CLASS="FIRST"
><I
CLASS="firstterm"
><A
HREF="#separate-io"
><CODE
CLASS="function"
>EXT:MAKE-XTERM-IO-STREAM</CODE
></A
></I
></STRONG
>:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="programlisting"
>&#13;  (<A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*ERROR-OUTPUT*</VAR
></A
>
    (<A
HREF="http://www.lisp.org/HyperSpec/Body/spefor_setq.html"
TARGET="_top"
><CODE
CLASS="function"
>SETQ</CODE
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/var_stdebug-i_ace-outputst.html"
TARGET="_top"
><VAR
CLASS="varname"
>*DEBUG-IO*</VAR
></A
>
      (<A
HREF="#separate-io"
><CODE
CLASS="function"
>EXT:MAKE-XTERM-IO-STREAM</CODE
></A
>)))
</PRE
></TD
></TR
></TABLE
></P
></DD
></DL
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="PART"
><A
NAME="internals"
></A
><DIV
CLASS="TITLEPAGE"
><H1
CLASS="title"
>III. Internals of the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> Implementation</H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
>31. <A
HREF="#gc"
>Overview of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>'s Garbage Collection</A
></DT
><DT
>32. <A
HREF="#extend"
>Extending <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</A
></DT
><DT
>33. <A
HREF="#bytecode"
>The <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> bytecode specification</A
></DT
></DL
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="gc"
></A
>Chapter 31. Overview of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>'s Garbage Collection</H1
><FONT
COLOR="RED"
>These are internals, which are of interest only to the
  <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> developers.
  If you are not subscribed to <CODE
CLASS="email"
>&#60;<A
HREF="mailto:clisp-devel@sf.net"
>clisp-devel@sf.net</A
>&#62;</CODE
>,
  this chapter is probably not for you.</FONT
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="internals-intro"
>31.1. Introduction</A
></H2
><P
ALIGN="justify"
>Knowing that most <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
> implementations are buggy and/or slow,
and because <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> needs to perform garbage collection, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> has its
own memory management subsystem in
files <TT
CLASS="filename"
>#P"spvw*.d"</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="lisp-obj-in-c"
>31.2. Lisp objects in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></H2
><P
></P
><P
><B
>Three kinds of storage are distinguished:</B
></P
><UL
><LI
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> data (the "heap"), i.e. storage which contains
  Lisp objects and is managed by the garbage collector.</P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> stack (called <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>), contains <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
  objects</P
></LI
><LI
><P
ALIGN="justify"
><A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> data (including program text, data,
  <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
>ed memory)</P
></LI
></UL
><P
ALIGN="justify"
>A <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> object is one word, containing a tag
 (partial type information) and either immediate data
 (e.g. <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>s or <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_short-flo_m_long-float.html"
TARGET="_top"
><CODE
CLASS="classname"
>SHORT-FLOAT</CODE
></A
>s) or a pointer to storage.
Pointers to <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> data have tag = <TT
CLASS="literal"
>machine_type</TT
> = 0,
pointers to <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> stack have tag = <TT
CLASS="literal"
>system_type</TT
>,
most other pointers point to <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> data.</P
><P
ALIGN="justify"
>Let us turn to these <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects that consume regular <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
memory.  Every <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> object has a size which is determined when the
object is allocated (using one of the <CODE
CLASS="function"
>allocate_*()</CODE
>
routines). The size can be computed from the type tag and - if necessary
- the length field of the object's header. The length field always
contains the number of elements of the object. The number of bytes is
given by the function <CODE
CLASS="function"
>objsize()</CODE
>.</P
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects which contain exactly 2 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects
(i.e. <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
>es, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_complex.html"
TARGET="_top"
><CODE
CLASS="classname"
>COMPLEX</CODE
></A
> numbers, <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_ratio.html"
TARGET="_top"
><CODE
CLASS="classname"
>RATIO</CODE
></A
>s) are
stored in a separate area and occupy 2 words each.
All other <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects have "varying length" (more precisely,
not a fixed length) and include a word for garbage collection purposes
at their beginning.</P
><P
ALIGN="justify"
>The garbage collector is invoked by
 <CODE
CLASS="function"
>allocate_*()</CODE
> calls according to certain heuristics.
It marks all objects which are "live" (may be reached from the "roots"),
compacts these objects and unmarks them.  Non-live objects are lost;
their storage is reclaimed.</P
><P
ALIGN="justify"
>2-pointer objects are compacted by a simple hole-filling
algorithm: fill the left-most object into the right-most hole, and so
on, until the objects are contiguous at the right and the hole is
contiguous at the left.</P
><P
ALIGN="justify"
>Variable-length objects are compacted by sliding them down (their
address decreases).</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="memory-models"
>31.3. Memory Models</A
></H2
><P
ALIGN="justify"
>There are 6 memory models. Which one is used, depends on the
operating system and is determined at build time.</P
><P
></P
><DIV
CLASS="variablelist"
><P
><B
>Memory Models</B
></P
><DL
><DT
>SPVW_MIXED_BLOCKS_OPPOSITE</DT
><DD
><P
ALIGN="justify"
>The heap consists of one block of fixed length
  (allocated at startup).
  The variable-length objects are allocated from the left, the 2-pointer
  objects are allocated from the right.
  There is a hole between them.
  When the hole shrinks to 0, <A
HREF="#gc"
>garbage-collect</A
> is invoked.
  <A
HREF="#gc"
>garbage-collect</A
> slides the variable-length objects to the left and concentrates
  the 2-pointer objects at the right end of the block again.
  When no more room is available, some reserve area beyond the right end
  of the block is halved, and the 2-pointer objects are moved to the
  right accordingly.
  <P
></P
><DIV
CLASS="variablelist"
><P
><B
>overview</B
></P
><DL
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Simple management.
    </P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>No fragmentation at all.
    </P
></DD
><DT
>(-)</DT
><DD
><P
ALIGN="justify"
>The total heap size is limited.
    </P
></DD
></DL
></DIV
>
 </P
></DD
><DT
>SPVW_MIXED_BLOCKS_OPPOSITE &#38; TRIVIALMAP_MEMORY</DT
><DD
><P
ALIGN="justify"
>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  The former one has a hole to the right and is extensible to the right,
  the latter one has a hole to the left and is extensible to the left.
  Similar to the previous model, except that the hole is unmapped.
  <P
></P
><DIV
CLASS="variablelist"
><P
><B
>overview</B
></P
><DL
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Total heap size grows depending on the
     application's needs.</P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>No fragmentation at all.
    </P
></DD
><DT
>(*)</DT
><DD
><P
ALIGN="justify"
>Works only when SINGLEMAP_MEMORY is
     possible as well.</P
></DD
></DL
></DIV
>
 </P
></DD
><DT
>SPVW_MIXED_BLOCKS_STAGGERED &#38; TRIVIALMAP_MEMORY</DT
><DD
><P
ALIGN="justify"
>The heap consists of two big blocks, one for
  variable-length objects and one for 2-pointer objects.
  Both have a hole to the right, but are extensible to the right.
  <P
></P
><DIV
CLASS="variablelist"
><P
><B
>overview</B
></P
><DL
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Total heap size grows depending on the
     application's needs.</P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>No fragmentation at all.
    </P
></DD
><DT
>(*)</DT
><DD
><P
ALIGN="justify"
>Works only when SINGLEMAP_MEMORY is
     possible as well.</P
></DD
></DL
></DIV
>
 </P
></DD
><DT
>SPVW_MIXED_PAGES</DT
><DD
><P
ALIGN="justify"
>The heap consists of many small pages (usually around 8 KB).
  There are two kinds of pages: one for 2-pointer objects, one for
  variable-length objects.
  The set of all pages of a fixed kind is called a "Heap".
  Each page has its hole (free space) at its end.
  For every heap, the pages are kept sorted according to the size of
  their hole, using AVL trees.
  Garbage collection is invoked when the used space has grown by 25%
  since the last GC; until that point new pages are allocated from the
  operating system.
  The GC compacts the data in each page separately:
  data is moved to the left. Emptied pages are given back to the OS.
  If the holes then make up more than 25% of the occupied storage, a
  second GC turn moves objects across pages, from nearly empty ones to
  nearly full ones, with the aim to free as many pages as possible.
  <P
></P
><DIV
CLASS="variablelist"
><P
><B
>overview</B
></P
><DL
><DT
>(-)</DT
><DD
><P
ALIGN="justify"
>every allocation requires AVL tree operations,
     thus slower</P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Total heap size grows depending on the
     application's needs.</P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Works on operating systems which do not provide
     large contiguous areas.</P
></DD
></DL
></DIV
>
 </P
></DD
><DT
>SPVW_PURE_PAGES</DT
><DD
><P
ALIGN="justify"
>Just like SPVW_MIXED_PAGES, except that every page
  contains data of only a single type tag, i.e. there is a Heap for
  every type tag.
  <P
></P
><DIV
CLASS="variablelist"
><P
><B
>overview</B
></P
><DL
><DT
>(-)</DT
><DD
><P
ALIGN="justify"
>every allocation requires AVL tree operations,
     thus slower</P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Total heap size grows depending on the
     application's needs.</P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Works on operating systems which do not provide
     large contiguous areas.</P
></DD
><DT
>(-)</DT
><DD
><P
ALIGN="justify"
>More fragmentation because objects of different
    type never fit into the same page.</P
></DD
></DL
></DIV
></P
></DD
><DT
>SPVW_PURE_BLOCKS</DT
><DD
><P
ALIGN="justify"
>There is a big block of storage for each type tag.
  Each of these blocks has its data to the left and the hole to the
  right, but these blocks are extensible to the right (because there is
  enough room between them).
  A garbage collection is triggered when the allocation amount since the
  last GC reaches 50% of the amount of used space at the last GC, but at
  least 512 KB.
  The garbage collection cleans up each block separately: data is moved left.
  <P
></P
><DIV
CLASS="variablelist"
><P
><B
>overview</B
></P
><DL
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>Total heap size grows depending on the
     application's needs.</P
></DD
><DT
>(+)</DT
><DD
><P
ALIGN="justify"
>No 16 MB total size limit.
    </P
></DD
><DT
>(*)</DT
><DD
><P
ALIGN="justify"
>Works only in combination with SINGLEMAP_MEMORY.
    </P
></DD
></DL
></DIV
>
 </P
></DD
></DL
></DIV
><P
ALIGN="justify"
>In page based memory models, an object larger than a page is the
only object carried by its pages.
There are no small objects in pages belonging to a big object.</P
><P
ALIGN="justify"
>The following combinations of memory model and <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/mmap.html"
TARGET="_top"
><CODE
CLASS="function"
>mmap</CODE
></A
> tricks are
possible (the number indicates the order in which the respective models
have been developed):</P
><DIV
CLASS="table"
><A
NAME="mem-models-comb-typecodes"
></A
><P
><B
>Table 31-1. Memory models with TYPECODES</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>&nbsp;</TH
><TH
>no MAP_MEMORY</TH
><TH
>TRIVIALMAP_MEMORY</TH
><TH
>SINGLEMAP_MEMORY</TH
><TH
>MULTIMAP_MEMORY</TH
><TH
>GENERATIONAL_GC</TH
></TR
></THEAD
><TBODY
><TR
><TD
>SPVW_MIXED_BLOCKS_OPPOSITE</TD
><TD
>1</TD
><TD
>10</TD
><TD
>&nbsp;</TD
><TD
>2</TD
><TD
>9</TD
></TR
><TR
><TD
>SPVW_MIXED_BLOCKS_STAGGERED</TD
><TD
>&nbsp;</TD
><TD
>7</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>8</TD
></TR
><TR
><TD
>SPVW_PURE_BLOCKS</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>5</TD
><TD
>&nbsp;</TD
><TD
>6</TD
></TR
><TR
><TD
>SPVW_MIXED_PAGES</TD
><TD
>3</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
>SPVW_PURE_PAGES</TD
><TD
>4</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="table"
><A
NAME="mem-models-comb-no-typecodes"
></A
><P
><B
>Table 31-2. Memory models with no TYPECODES</B
></P
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><COL><THEAD
><TR
><TH
>&nbsp;</TH
><TH
>no MAP_MEMORY</TH
><TH
>TRIVIALMAP_MEMORY</TH
><TH
>GENERATIONAL_GC</TH
></TR
></THEAD
><TBODY
><TR
><TD
>SPVW_MIXED_BLOCKS_OPPOSITE</TD
><TD
>*</TD
><TD
>*</TD
><TD
>*</TD
></TR
><TR
><TD
>SPVW_MIXED_BLOCKS_STAGGERED</TD
><TD
>&nbsp;</TD
><TD
>*</TD
><TD
>*</TD
></TR
><TR
><TD
>SPVW_MIXED_PAGES</TD
><TD
>*</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
></TBODY
></TABLE
></DIV
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gc-safety"
>31.4. The burden of <A
HREF="#gc"
>garbage-collect</A
>ion upon the rest of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
></A
></H2
><P
ALIGN="justify"
>Every subroutine marked with <I
CLASS="emphasis"
>can trigger GC</I
>
may invoke <A
HREF="#gc"
>garbage-collect</A
>.
<A
HREF="#gc"
>garbage-collect</A
> moves all the <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects and updates the pointers.
But the <A
HREF="#gc"
>garbage-collect</A
> looks only on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> and not in the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>
variables. (Anything else would not be portable.)
Therefore at every "unsafe" point, i.e. every call to such a subroutine,
all the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> variables of type <SPAN
CLASS="type"
>object</SPAN
>
<I
CLASS="emphasis"
>MUST BE ASSUMED TO BECOME GARBAGE</I
>.
(Except for <SPAN
CLASS="type"
>object</SPAN
>s that are known to be unmovable,
 e.g. immediate data or <SPAN
CLASS="type"
>Subr</SPAN
>s.)
Pointers inside <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> data (e.g. to the characters of a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_string.html"
TARGET="_top"
><CODE
CLASS="classname"
>STRING</CODE
></A
>
or to the elements of a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
>) become
<I
CLASS="emphasis"
>INVALID</I
> as well.</P
><P
ALIGN="justify"
>The workaround is usually to allocate all the needed <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> data
first and do the rest of the computation with <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> variables,
without calling unsafe routines, and without worrying about <A
HREF="#gc"
>garbage-collect</A
>.</P
><P
ALIGN="justify"
>Run-time GC-safety checking is available when you build <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
 with a C++ compiler, e.g.:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="screen"
>&#13;bash$ CC=g++ ./configure --with-debug build-g-gxx
</PRE
></TD
></TR
></TABLE
>
When built like this, <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> will abort when you reference GC-unsafe
data after an allocation (which could have triggered a <A
HREF="#gc"
>garbage-collect</A
>ion),
and <A
HREF="http://sources.redhat.com/gdb/"
TARGET="_top"
><B
CLASS="command"
>gdb</B
></A
> will pinpoint the trouble spot.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="foreign-pointers"
>31.5. Foreign Pointers</A
></H2
><P
ALIGN="justify"
>Pointers to <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> functions and to <A
HREF="http://www.opengroup.org/onlinepubs/007904975/functions/malloc.html"
TARGET="_top"
><CODE
CLASS="function"
>malloc</CODE
></A
>ed data can be
hidden in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects of type machine_type; <A
HREF="#gc"
>garbage-collect</A
> will not modify its
value.  But one should not dare to assume that a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> stack pointer
or the address of a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function in a shared library satisfies the
same requirements.</P
><P
ALIGN="justify"
>If another pointer is to be viewed as a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> object, it is best
to box it, e.g. in a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-bit-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-BIT-VECTOR</CODE
></A
> or in an
<SPAN
CLASS="type"
>Fpointer</SPAN
> (using <CODE
CLASS="function"
>allocate_fpointer()</CODE
>.)</P
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="extend"
></A
>Chapter 32. Extending <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>.</H1
><TABLE
BORDER="0"
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
CLASS="EPIGRAPH"
><TR
><TD
WIDTH="45%"
>&nbsp;</TD
><TD
WIDTH="45%"
ALIGN="LEFT"
VALIGN="TOP"
><I
><P
><I
><A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> is a <I
CLASS="emphasis"
>programmable</I
>
  programming language</I
></P
></I
></TD
></TR
><TR
><TD
WIDTH="45%"
>&nbsp;</TD
><TD
WIDTH="45%"
ALIGN="RIGHT"
VALIGN="TOP"
><I
><SPAN
CLASS="attribution"
><A
HREF="http://www.franz.com/~jkf/"
TARGET="_top"
>John
  Foderaro</A
></SPAN
></I
></TD
></TR
></TABLE
><P
ALIGN="justify"
><A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> can be easily extended the same way any other <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
>
 implementation can: create a lisp file with your variables, functions,
 macros, etc.; <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_load.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD</CODE
></A
> it into a running <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>, and save the
 <A
HREF="#image"
>memory image</A
>.</P
><P
ALIGN="justify"
>This method does not work when you need to use some functionality
 not available in <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>, e.g., you want to call a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> function.
 You are urged to use <A
HREF="#modules"
>External Modules</A
>
 instead of adding built-in function.
 Note that <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> comes with an <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> which allows you to access
 <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> libraries in an easy way (including creating
 <A
HREF="#dffi"
><CODE
CLASS="classname"
>FFI:FOREIGN-FUNCTION</CODE
></A
>s dynamically).</P
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="add-fun"
>32.1. Adding a built-in function.</A
></H2
><P
ALIGN="justify"
>In the rare cases when you really need to modify <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
 internals and add a truly built-in function, you should read the
 <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> sources for inspiration and enlightenment, choose a file where
 your brand-new built-in function should go to, and then ...
 <P
></P
><UL
><LI
><P
ALIGN="justify"
>add the <CODE
CLASS="function"
>LISPFUN</CODE
>
    form and the implementation there;</P
></LI
><LI
><P
ALIGN="justify"
>add the <CODE
CLASS="function"
>LISPFUN</CODE
> header to
    file <TT
CLASS="filename"
>#P"subr.d"</TT
>;</P
></LI
><LI
><P
ALIGN="justify"
>declare the function name in file
    <TT
CLASS="filename"
>#P"constsym.d"</TT
> in the appropriate package
    (probably <A
HREF="#ext-pac"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"EXT"</SPAN
></STRONG
></A
>, if there is no specific package);
  </P
></LI
><LI
><P
ALIGN="justify"
>if your function accepts keyword arguments,
    then an appropriate pair of forms must be added
    to <TT
CLASS="filename"
>#P"subrkw.d"</TT
> and you must make sure that the
    keyword symbols are declared in <TT
CLASS="filename"
>#P"constsym.d"</TT
>;
  </P
></LI
><LI
><P
ALIGN="justify"
>export your function name from the appropriate
    package in file <TT
CLASS="filename"
>#P"init.lisp"</TT
>;</P
></LI
><LI
><P
ALIGN="justify"
>when you are done, you should run <B
CLASS="command"
>make
     check-sources</B
> in your build directory: this will check
    that the definitions (source files) and the declarations
    (<TT
CLASS="filename"
>#P"subr.d"</TT
>, <TT
CLASS="filename"
>#P"subrkw.d"</TT
>
    and <TT
CLASS="filename"
>#P"fsubr.d"</TT
>) are in sync.</P
></LI
></UL
></P
><DIV
CLASS="warning"
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>Be very careful with the <I
CLASS="emphasis"
>GC-unsafe</I
>
  functions!  Always remember about <A
HREF="#gc-safety"
>GC-safety</A
>!</P
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>These instructions are intentionally terse - you are encouraged
 to use <A
HREF="#dffi"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"FFI"</SPAN
></STRONG
></A
> instead of adding built-ins directly.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="add-var"
>32.2. Adding a built-in variable.</A
></H2
><P
ALIGN="justify"
>If you must be able to access the variable in the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> code,
 follow these steps:
 <P
></P
><UL
><LI
><P
ALIGN="justify"
>declare the variable name
    in <TT
CLASS="filename"
>#P"constsym.d"</TT
> in the appropriate package
    (probably <A
HREF="#customize"
><STRONG
CLASS="package"
><SPAN
CLASS="QUOTE"
>"CUSTOM"</SPAN
></STRONG
></A
>, if there is no specific package);
  </P
></LI
><LI
><P
ALIGN="justify"
>add a <CODE
CLASS="function"
>define_variable()</CODE
> call
    in function <CODE
CLASS="function"
>init_symbol_values()</CODE
>
    in file <TT
CLASS="filename"
>#P"spvw.d"</TT
>;</P
></LI
><LI
><P
ALIGN="justify"
>export your variable name from the appropriate
    package in file <TT
CLASS="filename"
>#P"init.lisp"</TT
>;
</P
></LI
></UL
></P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="recompile"
>32.3. Recompilation.</A
></H2
><P
ALIGN="justify"
><I
CLASS="emphasis"
>Any</I
> change that forces <B
CLASS="command"
>make</B
>
 to remake <TT
CLASS="filename"
>#P"lisp.run"</TT
>, will force recompilation
 of all <TT
CLASS="filename"
>#P".lisp"</TT
> files and re-dumping of <A
HREF="#image"
><TT
CLASS="filename"
>#P"lispinit.mem"</TT
></A
>, which may be
 time-consuming.  This is not always necessary, depending on what kind
 of change you introduced.</P
><P
ALIGN="justify"
>On the other hand, if you change any of the following files:
 <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><TT
CLASS="filename"
>#P"constobj.d"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>#P"constsym.d"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>#P"fsubr.d"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>#P"subr.d"</TT
></TD
></TR
><TR
><TD
><TT
CLASS="filename"
>#P"subrkw.d"</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
>
 your <A
HREF="#image"
><TT
CLASS="filename"
>#P"lispinit.mem"</TT
></A
> will <I
CLASS="emphasis"
>have</I
> to be re-dumped.</P
><DIV
CLASS="warning"
><A
NAME="byte-version"
></A
><P
></P
><TABLE
CLASS="warning"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/warning.gif"
HSPACE="5"
ALT="Warning"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
ALIGN="justify"
>If you change the signature of any
 system function mentioned in the <VAR
CLASS="varname"
>FUNTAB</VAR
> arrays in
 file <TT
CLASS="filename"
>#P"eval.d"</TT
>, all the <TT
CLASS="filename"
>#P".fas"</TT
> files will
 become obsolete and will need to be recompiled.
 You will need to add a note to that effect to
 the <TT
CLASS="filename"
>#P"NEWS"</TT
> file
 and augment the object <TT
CLASS="literal"
>version</TT
> in
 file <TT
CLASS="filename"
>#P"constsym.d"</TT
>.</P
></TD
></TR
></TABLE
></DIV
></DIV
></DIV
><DIV
CLASS="chapter"
><HR><H1
><A
NAME="bytecode"
></A
>Chapter 33. The <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> bytecode specification</H1
><FONT
COLOR="RED"
>Last modified: 19 September 1998.</FONT
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="byte-intro"
>33.1. Introduction</A
></H2
><P
ALIGN="justify"
>The <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> compiler compiles <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> programs into instruction codes
for a virtual processor.  This bytecode is optimized for saving space in
the most common cases of <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> programs.  The main advantages/drawbacks
of this approach, compared to native code compilation, are:
<P
></P
><UL
><LI
><P
ALIGN="justify"
>Bytecode compiled programs are a lot smaller than
  when compiled to native code.  This results in better use of CPU
  caches, and in less virtual memory paging. Users perceive this as good
  responsiveness.</P
></LI
><LI
><P
ALIGN="justify"
>Maximum execution speed (throughput in tight loops)
   is limited.</P
></LI
><LI
><P
ALIGN="justify"
>Since no bytecode instructions are provided for
   "unsafe" operations (like unchecked array accesses, or "fast"
   <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
>/<A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>), programs run with all safety checks enabled even when
   compiled.</P
></LI
><LI
><P
ALIGN="justify"
>Execution speed of a program can easily be
   understood by looking at the output of the <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_disassemble.html"
TARGET="_top"
><CODE
CLASS="function"
>DISASSEMBLE</CODE
></A
> function.
   A rule of thumb is that every elementary instruction costs 1 time
   unit, whereas a function call costs 3 to 4 time units.
  </P
></LI
><LI
><P
ALIGN="justify"
>Needing to do no type inference, the compiler is
   pretty straightforward and fast.  As a consequence, the definition of
   <B
CLASS="command"
>CLOS</B
> generic functions, which needs to compile small pieces of
   generated code, is not perceived to be slow.</P
></LI
><LI
><P
ALIGN="justify"
>The compiler is independent from the hardware CPU.
   Different back-ends, one for each hardware CPU, are not needed.  As a
   consequence, the compiler is fairly small (and would have been easily
   maintainable if it were written in a less kludgey way...), and it is
   impossible for the compiler writer to introduce CPU dependent bugs.
 </P
></LI
></UL
>
</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="vm"
>33.2. The virtual machine</A
></H2
><P
ALIGN="justify"
>The bytecode can be thought of as being interpreted by a virtual
processor.  The engine which actually interprets the bytecode (the
"implementation of the virtual machine") is actually a <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>
function, but it could as well be a just-in-time compiler which
translates a function's bytecode into hardware CPU instructions the
first time said function is called.</P
><P
ALIGN="justify"
>The virtual machine is a stack machine with two stacks:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
></DT
><DD
><P
ALIGN="justify"
>a stack for <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects and frames
   (<SPAN
CLASS="QUOTE"
>"Lisp stack"</SPAN
>).</P
></DD
><DT
><A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
></DT
><DD
><P
ALIGN="justify"
>a stack for other data and pointers
   (<SPAN
CLASS="QUOTE"
>"Program stack"</SPAN
>).</P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
>This two-stack architecture permits to save an unlimited number of
<A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> (needed for handling of <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>),
without consing.  Also, in a world with a compacting no-ambiguous-roots
garbage collector, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> must only hold <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects, and <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> can
hold all the other data belonging to a frame, which would not fit into
<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> without tagging/untagging overhead.</P
><P
ALIGN="justify"
>The scope of <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> and <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> is only valid for a given function
invocation.  Whereas the amount of <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> space needed for executing a
function (excluding other function calls) is unlimited, the amount of
<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> space needed is known a priori, at compile time.  When a function
is called, no relation is specified between the caller's <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> and the
callee's <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, and between the caller's <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> and the callee's <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>.
The bytecode is designed so that outgoing arguments on the caller's
<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> can be shared by the caller's incoming arguments area (on the
callee's <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>), but a virtual machine implementation may also copy
outgoing arguments to incoming arguments instead of sharing them.</P
><P
ALIGN="justify"
>The virtual machine has a special data structure,
<TT
CLASS="literal"
>values</TT
>, containing the "top of stack", specially
adapted to <A
HREF="http://www.lisp.org"
TARGET="_top"
><B
CLASS="command"
>Common Lisp</B
></A
> <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>an unsigned integer.
  </P
></DD
><DT
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>the first value, a <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> object.
  If <TT
CLASS="literal"
><A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
></TT
> = 0, this is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
  </P
></DD
><DT
><A
HREF="#vm"
><VAR
CLASS="varname"
>mv_space</VAR
></A
></DT
><DD
><P
ALIGN="justify"
>all values except the first one, an array of <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
  objects.</P
></DD
></DL
></DIV
></P
><P
ALIGN="justify"
>The contents of <TT
CLASS="literal"
>values</TT
> is short-lived.
It does not survive a function call, not even a garbage collection.</P
><P
ALIGN="justify"
>The interpretation of some bytecode instructions depends on a
constant, <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.  This is a CPU-dependent number, the value of
<VAR
CLASS="varname"
>SYSTEM::*JMPBUF-SIZE*</VAR
>.  In <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
>, it is defined as
<TT
CLASS="literal"
>ceiling(sizeof(jmp_buf),sizeof(void*))</TT
>.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="comp-fun"
>33.3. The structure of compiled functions</A
></H2
><P
ALIGN="justify"
>A compiled function consists of two objects: The function itself,
containing the references to all <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects needed for the bytecode,
and a byte vector containing only immediate data, including the bytecode
proper.</P
><P
ALIGN="justify"
>Typically, the byte vector is about twice as large as the function
vector.  The separation thus helps the garbage collector (since the byte
vector does not need to be scanned for pointers).</P
><P
ALIGN="justify"
>A function looks like this
 (cf. the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type <TT
CLASS="literal"
>Cclosure</TT
>):
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><A
NAME="func-name"
></A
>name</DT
><DD
><P
ALIGN="justify"
>This is the name of the function, normally a symbol
   or a list of the form <TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/mac_setfcm_psetf.html"
TARGET="_top"
><CODE
CLASS="function"
>SETF</CODE
></A
> <VAR
CLASS="replaceable"
>symbol</VAR
>)</TT
>.
   It is used for printing the function and for error messages.
   This field is immutable.</P
></DD
><DT
><A
NAME="func-codevec"
></A
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>codevec</TT
></A
></DT
><DD
><P
ALIGN="justify"
>This is the byte-code vector, a <TT
CLASS="type"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-array.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-ARRAY</CODE
></A
> (<A
HREF="http://www.lisp.org/HyperSpec/Body/typ_unsigned-byte.html"
TARGET="_top"
><CODE
CLASS="classname"
>UNSIGNED-BYTE</CODE
></A
> 8) (*))</TT
>.
   This field is immutable.</P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[]</DT
><DD
><P
ALIGN="justify"
>The remaining fields in the function object are
   references to other <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
> objects.  These references are immutable,
   which is why they are called "constants".  (The referenced <A
HREF="http://clisp.cons.org"
TARGET="_top"
><B
CLASS="command"
>CLISP</B
></A
>
   objects can be mutable objects, such as <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
>es or <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>VECTOR</CODE
></A
>s,
   however.)</P
></DD
></DL
></DIV
></P
><DIV
CLASS="note"
><P
></P
><TABLE
CLASS="note"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="/usr/share/sgml/docbook/dsssl-stylesheets/images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>The Exception to the Immutability Rule</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>When a generic function's dispatch code is installed, the <A
HREF="#comp-fun"
><TT
CLASS="literal"
>codevec</TT
></A
>
  and <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
> fields are destructively modified.</P
></TD
></TR
></TABLE
></DIV
><P
ALIGN="justify"
>Some of the <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
> can play special roles.
 A function looks like this, in more detail:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>name</DT
><DD
><P
ALIGN="justify"
>see <A
HREF="#func-name"
>above</A
>.
 </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>codevec</TT
></A
></DT
><DD
><P
ALIGN="justify"
>see <A
HREF="#func-codevec"
>above</A
>.
 </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>venv-const</TT
></A
>*</DT
><DD
><P
ALIGN="justify"
>At most one object, representing the closed-up
   variables, representing the variables of the lexical environment in
   which this function was defined.  It is a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
>, which
   looks like this: <TT
CLASS="sexp"
>#(<VAR
CLASS="replaceable"
>next</VAR
>
   <VAR
CLASS="replaceable"
>value<SUB
>1</SUB
></VAR
> ...
   <VAR
CLASS="replaceable"
>value<SUB
>n</SUB
></VAR
>)</TT
>
   where <VAR
CLASS="replaceable"
>value<SUB
>1</SUB
></VAR
>, ...,
   <VAR
CLASS="replaceable"
>value<SUB
>n</SUB
></VAR
>
   are the values of the closed-up variables, and
   <VAR
CLASS="replaceable"
>next</VAR
> is either <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> or a
   <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
> having the same structure.
  </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>block-const</TT
></A
>*</DT
><DD
><P
ALIGN="justify"
>Objects representing closed-up <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> tags,
   representing the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> tags of the lexical environment in which
   this function was defined.  Each is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
> containing in the
   <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
> part: either a frame pointer to the block frame, or <TT
CLASS="literal"
>#&#60;DISABLED&#62;</TT
>.
   The <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
> is the block's name, only for error message purposes.
  </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>tagbody-const</TT
></A
>*</DT
><DD
><P
ALIGN="justify"
>Objects representing closed-up <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> tags,
   representing the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> tags of the lexical environment in which
   this function was defined.  Each is a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_cons.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONS</CODE
></A
> containing in the
   <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
> part: either a frame pointer to the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame, or
   <TT
CLASS="literal"
>#&#60;DISABLED&#62;</TT
> if the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> has already been left.  The <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
> is a
   <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
> containing the names of the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> tags, only
   for the error message purposes.
  </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>keyword-const</TT
></A
>*</DT
><DD
><P
ALIGN="justify"
>If the function was defined with a <A
HREF="#lalist"
>lambda list</A
>
   containing <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>, here come the symbols ("keywords"), in their
   correct order.  They are used by the interpreter during function call.
  </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>other-const</TT
></A
>*</DT
><DD
><P
ALIGN="justify"
>Other objects needed by the function's bytecode.
  </P
></DD
></DL
></DIV
>
</P
><P
ALIGN="justify"
>If <A
HREF="#comp-fun"
><TT
CLASS="literal"
>venv-const</TT
></A
>, <A
HREF="#comp-fun"
><TT
CLASS="literal"
>block-const</TT
></A
>, <A
HREF="#comp-fun"
><TT
CLASS="literal"
>tagbody-const</TT
></A
> are all absent,
the function is called <I
CLASS="emphasis"
>autonomous</I
>.
This is the case if the function does not refer to lexical variables,
blocks or tags defined in compile code outside of the function.
In particular, it is the case if the function is defined in a null
lexical environment.</P
><P
ALIGN="justify"
>If some <A
HREF="#comp-fun"
><TT
CLASS="literal"
>venv-const</TT
></A
>, <A
HREF="#comp-fun"
><TT
CLASS="literal"
>block-const</TT
></A
>, or <A
HREF="#comp-fun"
><TT
CLASS="literal"
>tagbody-const</TT
></A
> are
present, the function (a "closure") is created at runtime.
The compiler only generates a prototype, containing <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> values
instead of each <A
HREF="#comp-fun"
><TT
CLASS="literal"
>venv-const</TT
></A
>, <A
HREF="#comp-fun"
><TT
CLASS="literal"
>block-const</TT
></A
>, <A
HREF="#comp-fun"
><TT
CLASS="literal"
>tagbody-const</TT
></A
>.
At runtime, a function is created by copying this prototype and
replacing the <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> values by the definitive ones.</P
><P
ALIGN="justify"
>The list <TT
CLASS="sexp"
>(<A
HREF="#comp-fun"
><TT
CLASS="literal"
>keyword-const</TT
></A
>*
<A
HREF="#comp-fun"
><TT
CLASS="literal"
>other-const</TT
></A
>*)</TT
> normally does not contain duplicates, because
the compiler removes duplicates when possible.  (Duplicates can occur
nevertheless, through the use of <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_load-time-value.html"
TARGET="_top"
><CODE
CLASS="function"
>LOAD-TIME-VALUE</CODE
></A
>.)</P
><P
ALIGN="justify"
>The <A
HREF="#comp-fun"
><TT
CLASS="literal"
>codevec</TT
></A
> looks like this
 (cf. the <A
HREF="http://www.eskimo.com/~scs/C-faq/top.html"
TARGET="_top"
><B
CLASS="command"
>C</B
></A
> type <TT
CLASS="literal"
>Codevec</TT
>):
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="literal"
>spdepth_1</TT
> (2 bytes)</DT
><DD
><P
ALIGN="justify"
>The 1st part of the maximal <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> depth.
  </P
></DD
><DT
><TT
CLASS="literal"
>spdepth_jmpbufsize</TT
> (2 bytes)</DT
><DD
><P
ALIGN="justify"
>The <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> part of the maximal <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> depth.
   The maximal <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> depth (precomputed by the compiler) is given by
   <TT
CLASS="literal"
>spdepth_1 + spdepth_jmpbufsize * <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
></TT
>.
  </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>numreq</TT
></A
> (2 bytes)</DT
><DD
><P
ALIGN="justify"
>Number of required parameters.
  </P
></DD
><DT
><TT
CLASS="literal"
>numopt</TT
> (2 bytes)</DT
><DD
><P
ALIGN="justify"
>Number of optional parameters.
  </P
></DD
><DT
><A
HREF="#comp-fun"
><TT
CLASS="literal"
>flags</TT
></A
> (1 byte)</DT
><DD
><P
></P
><DIV
CLASS="variablelist"
><DL
><DT
>bit 0</DT
><DD
><P
ALIGN="justify"
>set if the function has an <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> parameter
    </P
></DD
><DT
>bit 7</DT
><DD
><P
ALIGN="justify"
>set if the function has <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> parameters
    </P
></DD
><DT
>bit 6</DT
><DD
><P
ALIGN="justify"
>set if the function has <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;ALLOW-OTHER-KEYS</TT
></A
>
    </P
></DD
><DT
>bit 4</DT
><DD
><P
ALIGN="justify"
>set if the function is a generic function
    </P
></DD
><DT
>bit 3</DT
><DD
><P
ALIGN="justify"
>set if the function is a generic function and its
     effective method shall be returned (instead of being executed)
    </P
></DD
></DL
></DIV
></DD
><DT
><TT
CLASS="literal"
>signature</TT
> (1 byte)</DT
><DD
><P
ALIGN="justify"
>An abbreviation code depending on
    <A
HREF="#comp-fun"
><TT
CLASS="literal"
>numreq</TT
></A
>, <TT
CLASS="literal"
>numopt</TT
>, <A
HREF="#comp-fun"
><TT
CLASS="literal"
>flags</TT
></A
>.
    It is used for speeding up the function
    call.</P
></DD
><DT
><TT
CLASS="literal"
>numkey</TT
> (2 bytes, only if the
     function has <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>)</DT
><DD
><P
ALIGN="justify"
>The number of <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> parameters.
   </P
></DD
><DT
><TT
CLASS="literal"
>keyconsts</TT
> (2 bytes, only if the
     function has <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>)</DT
><DD
><P
ALIGN="justify"
>The offset of the <A
HREF="#comp-fun"
><TT
CLASS="literal"
>keyword-const</TT
></A
> in the function.
   </P
></DD
><DT
><TT
CLASS="literal"
>byte</TT
>* (any number of bytes)</DT
><DD
><P
ALIGN="justify"
>The bytecode instructions.
   </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="intr-struct"
>33.4. The general structure of the instructions</A
></H2
><P
ALIGN="justify"
>All instructions consist of one byte, denoting the opcode, and
some number of operands.</P
><P
ALIGN="justify"
>The conversion from a byte (in the range 0..255) to the opcode is
performed by lookup in the table contained in the file
<TT
CLASS="filename"
>#P"bytecode.d"</TT
>.</P
><P
ALIGN="justify"
>There are the following types of operands, denoted by different
letters:
<P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><VAR
CLASS="replaceable"
>k</VAR
>, <VAR
CLASS="replaceable"
>n</VAR
>, <VAR
CLASS="replaceable"
>m</VAR
>, <VAR
CLASS="replaceable"
>l</VAR
></DT
><DD
><P
ALIGN="justify"
>A (nonnegative) numeric operand.
   The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value (7 bits).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
   together form the value (15 bits).
  </P
></DD
><DT
><VAR
CLASS="replaceable"
>b</VAR
></DT
><DD
><P
ALIGN="justify"
>A (nonnegative) 1-byte operand.
   The next byte is read and is the value.
  </P
></DD
><DT
><VAR
CLASS="replaceable"
>label</VAR
></DT
><DD
><P
ALIGN="justify"
>A label operand.
   A signed numeric operand is read: The next byte is read.
   If its bit 7 is zero, then the bits 6..0 give the value
    (7 bits, sign-extended).
   If its bit 7 is one, then the bits 6..0 and the subsequent byte
    together form the value (15 bits, sign-extended).
   If the latter 15-bit result is zero, then four more bytes are read
    and put together (32 bits, sign-extended).
   Finally, the bytecode pointer for the target is computed as the
   current bytecode pointer (pointing after the operand just read), plus
   the signed numeric operand.
  </P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="intr-set"
>33.5. The instruction set</A
></H2
><DIV
CLASS="section"
><H3
CLASS="section"
><A
NAME="instr-const"
>33.5.1. Instructions for constants</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-const-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>)</TT
></TD
><TD
>Load <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(PUSH-NIL <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Push <VAR
CLASS="replaceable"
>n</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>s into the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.</TD
><TD
><VAR
CLASS="replaceable"
>n</VAR
> times do: *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>)</TT
></TD
><TD
>Load <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONST <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Load the function's <VAR
CLASS="replaceable"
>n</VAR
>th constant into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>],
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-lex-var"
>33.5.2. Instructions for lexical variables</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-lex-var-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Load a directly accessible local variable into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOADI <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Load an indirectly accessible local variable into values.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
              <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := *(*(<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>)+ <VAR
CLASS="replaceable"
>n</VAR
>),
              <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOADC <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Load a closed-up variable, defined in the same function and
             directly accessible, into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>),1+<VAR
CLASS="replaceable"
>m</VAR
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOADV <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Load a closed-up variable, defined in an outer function,
             into values.</TD
><TD
><VAR
CLASS="replaceable"
>v</VAR
> := <A
HREF="#comp-fun"
><TT
CLASS="literal"
>venv-const</TT
></A
>,
             <VAR
CLASS="replaceable"
>m</VAR
> times do: <VAR
CLASS="replaceable"
>v</VAR
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(<VAR
CLASS="replaceable"
>v</VAR
>,0),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(<VAR
CLASS="replaceable"
>v</VAR
>,<VAR
CLASS="replaceable"
>m</VAR
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOADIC <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Load a closed-up variable, defined in the same function and
             indirectly accessible, into values.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(*(*(<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>)+<VAR
CLASS="replaceable"
>n</VAR
>),1+<VAR
CLASS="replaceable"
>m</VAR
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Store values into a directly accessible local variable.</TD
><TD
>*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>) := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(STOREI <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Store values into an indirectly accessible local variable.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
              *(*(<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>)+ <VAR
CLASS="replaceable"
>n</VAR
>) := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
              <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(STOREC <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Store values into a closed-up variable, defined in the same
             function and directly accessible.</TD
><TD
><A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>),1+m) := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(STOREV <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Store values into a closed-up variable, defined in an outer
             function.</TD
><TD
><VAR
CLASS="replaceable"
>v</VAR
> := <A
HREF="#comp-fun"
><TT
CLASS="literal"
>venv-const</TT
></A
>,
             <VAR
CLASS="replaceable"
>m</VAR
> times do: <VAR
CLASS="replaceable"
>v</VAR
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(<VAR
CLASS="replaceable"
>v</VAR
>,0),
             <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(<VAR
CLASS="replaceable"
>v</VAR
>,<VAR
CLASS="replaceable"
>m</VAR
>) := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(STOREIC <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Store values into a closed-up variable, defined in the same
             function and indirectly accessible.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
             <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(*(*(<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>)+<VAR
CLASS="replaceable"
>n</VAR
>),1+<VAR
CLASS="replaceable"
>m</VAR
>) := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-dyn-var"
>33.5.3. Instructions for dynamic variables</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-dyn-var-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(GETVALUE
             <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Load a symbol's value into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := symbol-value(<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>]),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SETVALUE
             <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Store values into a symbol's value.</TD
><TD
>symbol-value(<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>]) := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(BIND
             <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Bind a symbol dynamically.</TD
><TD
>Bind the value of the symbol
             <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>] to <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             implicitly <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= 3,
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNBIND1)</TT
></TD
><TD
>Dissolve one binding frame.</TD
><TD
>Unbind the binding frame <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> is pointing to,
             implicitly <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 3</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNBIND
             <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Dissolve <VAR
CLASS="replaceable"
>n</VAR
> binding frames.</TD
><TD
><VAR
CLASS="replaceable"
>n</VAR
> times do:
              Unbind the binding frame <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> is pointing to, thereby
              incrementing <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>
             Thus, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 1+2*<VAR
CLASS="replaceable"
>n</VAR
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(PROGV)</TT
></TD
><TD
>Bind a set of symbols dynamically to a set of values.</TD
><TD
><VAR
CLASS="replaceable"
>symbols</VAR
> := *<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++,
             *--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>,
             build a single binding frame binding the symbols in
             <VAR
CLASS="replaceable"
>symbols</VAR
> to the values in <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             values undefined</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-stack"
>33.5.4. Instructions for stack operations</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-stack-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(PUSH)</TT
></TD
><TD
>Push one object onto the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.</TD
><TD
>*--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(POP)</TT
></TD
><TD
>Pop one object from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := *<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SKIP <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Restore a previous <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> pointer.
             Remove <VAR
CLASS="replaceable"
>n</VAR
> objects from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.</TD
><TD
><A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> + <VAR
CLASS="replaceable"
>n</VAR
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SKIPI <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Restore a previous <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> pointer. Remove an unknown
             number of objects from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := *(<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>),
             <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>+1,
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> + <VAR
CLASS="replaceable"
>n</VAR
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SKIPSP <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>)</TT
></TD
><TD
>Restore a previous <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> pointer.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
             <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-jump"
>33.5.5. Instructions for control flow, jumps</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-jump-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(SKIP&#38;RET <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Clean up the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, and return from the function.</TD
><TD
><A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>,
            return from the function, returning values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SKIP&#38;RETGF <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Clean up the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, and return from the generic
             function.</TD
><TD
>If bit 3 is set in the function's <A
HREF="#comp-fun"
><TT
CLASS="literal"
>flags</TT
></A
>,
                then <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1,
                     and return from the function.
             Otherwise: if the current function has no <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> argument,
                then <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-<A
HREF="#comp-fun"
><TT
CLASS="literal"
>numreq</TT
></A
>,
                     apply <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> to the <A
HREF="#comp-fun"
><TT
CLASS="literal"
>numreq</TT
></A
> arguments
                           still on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, and
                           return from the function.
                Else <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-<A
HREF="#comp-fun"
><TT
CLASS="literal"
>numreq</TT
></A
>-1,
                     apply <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> to the <A
HREF="#comp-fun"
><TT
CLASS="literal"
>numreq</TT
></A
> arguments and the
                           <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
> argument, all still on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, and
                           return from the function.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMP <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>.</TD
><TD
>PC := <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIF <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is true.</TD
><TD
>If <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is not <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, PC := <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFNOT <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is false.</TD
><TD
>If <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, PC := <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIF1 <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
> and forget secondary values,
             if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is true.</TD
><TD
>If <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is not <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
                <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1, PC := <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFNOT1 <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
> and forget secondary values,
             if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is false.</TD
><TD
>If <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>,
                <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1, PC := <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFATOM <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is not a cons.</TD
><TD
>If <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is not a cons, PC := <VAR
CLASS="replaceable"
>label</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFCONSP <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is a cons.</TD
><TD
>If <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is a cons, PC := <VAR
CLASS="replaceable"
>label</VAR
>.
                values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFEQ <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> to the top-of-stack.</TD
><TD
>If eq(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++), PC := <VAR
CLASS="replaceable"
>label</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFNOTEQ <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> is not <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
>
             to the top-of-stack.</TD
><TD
>If not eq(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++), PC := <VAR
CLASS="replaceable"
>label</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFEQTO <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>,
             if the top-of-stack is <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> to a constant.</TD
><TD
>If eq(*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++,<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>]), PC := <VAR
CLASS="replaceable"
>label</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFNOTEQTO <VAR
CLASS="replaceable"
>n</VAR
>
             <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if the top-of-stack is not <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
>
             to a constant.</TD
><TD
>If not eq(*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++,<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>]), PC := <VAR
CLASS="replaceable"
>label</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPHASH <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Table-driven jump, depending on <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.</TD
><TD
>Lookup <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> in the hash table <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>].
             (The hash table's test is either <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
>.)
             If found, the hash table value is a signed <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>,
             jump to it: PC := PC + value.  Else jump to <VAR
CLASS="replaceable"
>label</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPHASHV <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Table-driven jump, depending on <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>,
             inside a generic function.</TD
><TD
>Lookup <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> in the hash table <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[0],<VAR
CLASS="replaceable"
>n</VAR
>).
             (The hash table's test is either <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eql.html"
TARGET="_top"
><CODE
CLASS="function"
>EQL</CODE
></A
>.)
             If found, the hash table value is a signed <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_fixnum.html"
TARGET="_top"
><CODE
CLASS="classname"
>FIXNUM</CODE
></A
>,
             jump to it: PC := PC + value.  Else jump to <VAR
CLASS="replaceable"
>label</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JSR <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Subroutine call.</TD
><TD
>*--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := function. Then start interpreting the
             bytecode at <VAR
CLASS="replaceable"
>label</VAR
>, with values undefined.
             When a <TT
CLASS="sexp"
>(RET)</TT
> is encountered,
             program execution is resumed at the instruction after
             <TT
CLASS="sexp"
>(JSR <VAR
CLASS="replaceable"
>label</VAR
>)</TT
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPTAIL <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>
             <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Tail subroutine call.</TD
><TD
><VAR
CLASS="replaceable"
>n</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eqcm_sleq__lteqcm_gteq.html"
TARGET="_top"
><CODE
CLASS="function"
>&#62;=</CODE
></A
> <VAR
CLASS="replaceable"
>m</VAR
>.
             The <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> frame of size <VAR
CLASS="replaceable"
>n</VAR
> is reduced to size <VAR
CLASS="replaceable"
>m</VAR
>:
             {*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-<VAR
CLASS="replaceable"
>m</VAR
>), ..., *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-1)} :=
               {*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, ..., *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>m</VAR
>-1)}.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += n-m.
             *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := function.
             Then jump to <VAR
CLASS="replaceable"
>label</VAR
>, with values undefined.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-env"
>33.5.6. Instructions for lexical environment,
   creation of closures</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-env-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(VENV)</TT
></TD
><TD
>Load the <A
HREF="#comp-fun"
><TT
CLASS="literal"
>venv-const</TT
></A
> into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[0], <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(MAKE-VECTOR1&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
> used for closed-up variables.</TD
><TD
><VAR
CLASS="replaceable"
>v</VAR
> := new <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
> of size <VAR
CLASS="replaceable"
>n</VAR
>+1.
             <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(<VAR
CLASS="replaceable"
>v</VAR
>,0) := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.
             *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <VAR
CLASS="replaceable"
>v</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(COPY-CLOSURE <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Create a closure by copying the prototype and filling in
             the lexical environment.</TD
><TD
><VAR
CLASS="replaceable"
>f</VAR
> := copy-function(<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>m</VAR
>]).
             For <VAR
CLASS="replaceable"
>i</VAR
>=0,..,<VAR
CLASS="replaceable"
>n</VAR
>-1:
                 <VAR
CLASS="replaceable"
>f</VAR
>_<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[i] := *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-1-<VAR
CLASS="replaceable"
>i</VAR
>).
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += <VAR
CLASS="replaceable"
>n</VAR
>.
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <VAR
CLASS="replaceable"
>f</VAR
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-funcall"
>33.5.7. Instructions for function calls</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-funcall-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(CALL <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Calls a constant function with <VAR
CLASS="replaceable"
>k</VAR
> arguments.</TD
><TD
>The function <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>] is called
             with the arguments *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>-1), ..., *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0).
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += <VAR
CLASS="replaceable"
>k</VAR
>.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL0 <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Calls a constant function with 0 arguments.</TD
><TD
>The function <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>] is called with 0 arguments.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL1 <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Calls a constant function with 1 argument.</TD
><TD
>The function <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>] is called with one argument *<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 1. The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL2 <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Calls a constant function with 2 arguments.</TD
><TD
>The function <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>] is called
             with two arguments *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+1) and *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0).
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 2. The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS1 <VAR
CLASS="replaceable"
>b</VAR
>)</TT
></TD
><TD
>Calls a system function with no <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
>.</TD
><TD
>Calls the system function FUNTAB[<VAR
CLASS="replaceable"
>b</VAR
>].
             The right number of arguments is already on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>
             (including <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>s in place of absent <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> or
              <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> parameters).
             The arguments are removed from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS2 <VAR
CLASS="replaceable"
>b</VAR
>)</TT
></TD
><TD
>Calls a system function with no <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
>.</TD
><TD
>Calls the system function FUNTAB[256+<VAR
CLASS="replaceable"
>b</VAR
>].
             The right number of arguments is already on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>
             (including <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>s in place of absent <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
> or
              <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> parameters).
             The arguments are removed from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLSR <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>b</VAR
>)</TT
></TD
><TD
>Calls a system function with <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;REST</TT
></A
>.</TD
><TD
>Calls the system function FUNTABR[<VAR
CLASS="replaceable"
>b</VAR
>].
             The minimum number of arguments is already on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>,
             and <VAR
CLASS="replaceable"
>m</VAR
> additional arguments as well.
             The arguments are removed from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLC)</TT
></TD
><TD
>Calls a computed compiled function with no <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>.</TD
><TD
>Calls the compiled function <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.
             The right number of arguments is already on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>
             (including <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>s in place of absent <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
              parameters).
             The arguments are removed from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLCKEY)</TT
></TD
><TD
>Calls a computed compiled function with <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
>.</TD
><TD
>Calls the compiled function <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.
             The right number of arguments is already on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>
             (including <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>s in place of absent <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;OPTIONAL</TT
></A
>
              or <A
HREF="http://www.lisp.org/HyperSpec/Body/sec_3-4-1.html"
TARGET="_top"
><TT
CLASS="literal"
>&#38;KEY</TT
></A
> parameters).
             The arguments are removed from the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(FUNCALL <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Calls a computed function.</TD
><TD
>Calls the function *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>)
             with the arguments *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-1), ..., *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0).
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += <VAR
CLASS="replaceable"
>n</VAR
>+1.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(APPLY <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Calls a computed function with an unknown number of
             arguments.</TD
><TD
>Calls the function *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>)
             with the arguments *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-1), ..., *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0)
             and a list of additional arguments <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += <VAR
CLASS="replaceable"
>n</VAR
>+1.
             The returned values go into values.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-optkey"
>33.5.8. Instructions for optional
  and keyword parameters</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-optkey-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(PUSH-UNBOUND <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Push <VAR
CLASS="replaceable"
>n</VAR
> <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>s into the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.</TD
><TD
><VAR
CLASS="replaceable"
>n</VAR
> times do: *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNLIST <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Destructure a proper <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
>.</TD
><TD
>0 &#8804; <VAR
CLASS="replaceable"
>m</VAR
> &#8804; <VAR
CLASS="replaceable"
>n</VAR
>.
             <VAR
CLASS="replaceable"
>n</VAR
> times do: *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
>(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>).
             During the last <VAR
CLASS="replaceable"
>m</VAR
> iterations, the list <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>
             may already have reached its end;
             in this case, *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>.
             At the end, <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> must be <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNLIST* <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
>Destructure a proper or dotted <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
>.</TD
><TD
>0 &#8804; <VAR
CLASS="replaceable"
>m</VAR
> &#8804; <VAR
CLASS="replaceable"
>n</VAR
>, <VAR
CLASS="replaceable"
>n</VAR
> &#62; 0.
             <VAR
CLASS="replaceable"
>n</VAR
> times do: *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
>(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>).
             During the last <VAR
CLASS="replaceable"
>m</VAR
> iterations, the list <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>
             may already have reached its end;
             in this case, *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>.
             At the end, after <VAR
CLASS="replaceable"
>n</VAR
> <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>s, *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JMPIFBOUNDP <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump to <VAR
CLASS="replaceable"
>label</VAR
>, if a local variable is not unbound.</TD
><TD
>If *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>) is not <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>,
                <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>), <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1, PC := <VAR
CLASS="replaceable"
>label</VAR
>.
             Else: values undefined.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(BOUNDP <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Load <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
> or <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> into values, depending on whether a local
             variable is bound.</TD
><TD
>If *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>) is not <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>,
                <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_t.html"
TARGET="_top"
><CODE
CLASS="constant"
>T</CODE
></A
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.
             Else: <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNBOUND-&#62;NIL <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>If a local variable is unbound, assign a default value
             <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> to it.</TD
><TD
>If *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>) is <TT
CLASS="literal"
>#&#60;UNBOUND&#62;</TT
>,
             *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>) := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-mulval"
>33.5.9. Instructions for <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
></A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-mulval-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(VALUES0)</TT
></TD
><TD
>Load no values into values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 0</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(VALUES1)</TT
></TD
><TD
>Forget secondary values.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>-TO-MV <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Pop the first <VAR
CLASS="replaceable"
>n</VAR
> objects from <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> into values.</TD
><TD
>Load values(*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-1),...,*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0)) into
             values. <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += <VAR
CLASS="replaceable"
>n</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(MV-TO-<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>)</TT
></TD
><TD
>Save values on <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.</TD
><TD
>Push the <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> values onto the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>
             (in order: <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> comes first).
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(NV-TO-<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Save <VAR
CLASS="replaceable"
>n</VAR
> values on <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.</TD
><TD
>Push the first <VAR
CLASS="replaceable"
>n</VAR
> values onto the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>
             (in order: <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> comes first).
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= <VAR
CLASS="replaceable"
>n</VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(MV-TO-LIST)</TT
></TD
><TD
>Convert <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
> into a list.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := list of values, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LIST-TO-MV)</TT
></TD
><TD
>Convert a <A
HREF="http://www.lisp.org/HyperSpec/Body/syscla_list.html"
TARGET="_top"
><CODE
CLASS="classname"
>LIST</CODE
></A
> into <A
HREF="http://www.lisp.org/HyperSpec/Body/glo_m.html#multiple_values"
TARGET="_top"
>multiple values</A
>.</TD
><TD
>Call the function <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_values-list.html"
TARGET="_top"
><CODE
CLASS="function"
>VALUES-LIST</CODE
></A
> with <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> as argument.
             The returned values go into values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(MVCALLP)</TT
></TD
><TD
>Start a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html"
TARGET="_top"
><CODE
CLASS="function"
>MULTIPLE-VALUE-CALL</CODE
></A
> invocation.</TD
><TD
>*--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>. *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(MVCALL)</TT
></TD
><TD
>Finish a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_multiple-value-call.html"
TARGET="_top"
><CODE
CLASS="function"
>MULTIPLE-VALUE-CALL</CODE
></A
> invocation.</TD
><TD
>newSTACK := *<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>++.
             Call the function *(newSTACK-1), passing it
             *(newSTACK-2), ..., *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0) as arguments.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := newSTACK.
             The returned values go into values.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-block"
>33.5.10. Instructions for
   <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_return-from.html"
TARGET="_top"
><CODE
CLASS="function"
>RETURN-FROM</CODE
></A
></A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-block-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(BLOCK-OPEN <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> frame.</TD
><TD
>Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> frame, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= 3, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> -= 2+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
   The topmost (third) object in the block frame is
   <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
TARGET="_top"
><CODE
CLASS="function"
>CONS</CODE
></A
>(<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>],frame-pointer) (its <VAR
CLASS="replaceable"
>block-cons</VAR
>).
   Upon a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_return-from.html"
TARGET="_top"
><CODE
CLASS="function"
>RETURN-FROM</CODE
></A
> to this frame, execution will continue at <VAR
CLASS="replaceable"
>label</VAR
>.
   values undefined.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(BLOCK-CLOSE)</TT
></TD
><TD
>Dissolve a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> frame.</TD
><TD
>Dissolve the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> frame at <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 3,
             <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> += 2+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>. Mark the <VAR
CLASS="replaceable"
>block-cons</VAR
> as invalid.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(RETURN-FROM <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Leave a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> whose <VAR
CLASS="replaceable"
>block-cons</VAR
> is given.</TD
><TD
><VAR
CLASS="replaceable"
>block-cons</VAR
> := <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>].
             If <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>block-cons</VAR
>) = <TT
CLASS="literal"
>#&#60;DISABLED&#62;</TT
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.
             Else <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>block-cons</VAR
>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(RETURN-FROM-I <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Leave a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_block.html"
TARGET="_top"
><CODE
CLASS="function"
>BLOCK</CODE
></A
> whose <VAR
CLASS="replaceable"
>block-cons</VAR
> is indirectly accessible.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
             <VAR
CLASS="replaceable"
>block-cons</VAR
> := *(*(<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>)+<VAR
CLASS="replaceable"
>n</VAR
>).
             If <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>block-cons</VAR
>) = <TT
CLASS="literal"
>#&#60;DISABLED&#62;</TT
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.
             Else <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>block-cons</VAR
>) is a frame-pointer.
             Unwind the stack up to this frame, pass it values.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-tagbody"
>33.5.11. Instructions for <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_go.html"
TARGET="_top"
><CODE
CLASS="function"
>GO</CODE
></A
></A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-tagbody-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(TAGBODY-OPEN <VAR
CLASS="replaceable"
>m</VAR
>
             <VAR
CLASS="replaceable"
>label<SUB
>1</SUB
></VAR
> ...
             <VAR
CLASS="replaceable"
>label<SUB
>n</SUB
></VAR
>)</TT
></TD
><TD
>Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame.</TD
><TD
>Fetch <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>m</VAR
>], this is a <A
HREF="http://www.lisp.org/HyperSpec/Body/typ_simple-vector.html"
TARGET="_top"
><CODE
CLASS="classname"
>SIMPLE-VECTOR</CODE
></A
> with
             <VAR
CLASS="replaceable"
>n</VAR
> elements, then decode <VAR
CLASS="replaceable"
>n</VAR
> label operands.
             Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= 3+<VAR
CLASS="replaceable"
>n</VAR
>, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> -= 1+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
             The third object in the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame is
             <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
TARGET="_top"
><CODE
CLASS="function"
>CONS</CODE
></A
>(<A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>m</VAR
>],frame-pointer) (the <VAR
CLASS="replaceable"
>tagbody-cons</VAR
>)
             Upon a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_go.html"
TARGET="_top"
><CODE
CLASS="function"
>GO</CODE
></A
> to tag <VAR
CLASS="replaceable"
>label</VAR
> of this frame, execution
             will continue at
              <VAR
CLASS="replaceable"
>label<SUB
>l</SUB
></VAR
>.
             values undefined</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(TAGBODY-CLOSE-NIL)</TT
></TD
><TD
>Dissolve a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame, and load <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
> into values.</TD
><TD
>Dissolve the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame at <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>,
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 3+<VAR
CLASS="replaceable"
>m</VAR
>, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> += 1+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
             Mark the <VAR
CLASS="replaceable"
>tagbody-cons</VAR
> as invalid.
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/convar_nil.html"
TARGET="_top"
><CODE
CLASS="constant"
>NIL</CODE
></A
>, <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(TAGBODY-CLOSE)</TT
></TD
><TD
>Dissolve a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame.</TD
><TD
>Dissolve the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> frame at <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>,
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 3+<VAR
CLASS="replaceable"
>m</VAR
>, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> += 1+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
             Mark the <VAR
CLASS="replaceable"
>tagbody-cons</VAR
> as invalid.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(GO <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump into a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> whose <VAR
CLASS="replaceable"
>tagbody-cons</VAR
> is given.</TD
><TD
><VAR
CLASS="replaceable"
>tagbody-cons</VAR
> := <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>].
             If <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>tagbody-cons</VAR
>) = <TT
CLASS="literal"
>#&#60;DISABLED&#62;</TT
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.
             Else <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>tagbody-cons</VAR
>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(GO-I <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Jump into a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_tagbody.html"
TARGET="_top"
><CODE
CLASS="function"
>TAGBODY</CODE
></A
> whose <VAR
CLASS="replaceable"
>tagbody-cons</VAR
> is indirectly
             accessible.</TD
><TD
><VAR
CLASS="replaceable"
>k</VAR
> := <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> + <A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
> * <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
>,
             <VAR
CLASS="replaceable"
>tagbody-cons</VAR
> := *(*(<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>+<VAR
CLASS="replaceable"
>k</VAR
>)+<VAR
CLASS="replaceable"
>n</VAR
>).
             If <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>tagbody-cons</VAR
>) = <TT
CLASS="literal"
>#&#60;DISABLED&#62;</TT
>, <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_signal.html"
TARGET="_top"
><CODE
CLASS="function"
>SIGNAL</CODE
></A
> an <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_error.html"
TARGET="_top"
><CODE
CLASS="classname"
>ERROR</CODE
></A
>.
             Else <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<VAR
CLASS="replaceable"
>tagbody-cons</VAR
>) is a frame-pointer. Unwind the stack up
             to this frame, pass it the number <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-catch"
>33.5.12. Instructions for <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
> and <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_throw.html"
TARGET="_top"
><CODE
CLASS="function"
>THROW</CODE
></A
></A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-catch-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(CATCH-OPEN <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
> frame.</TD
><TD
>Create a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
> frame, with <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> as tag.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= 3, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> -= 2+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
             Upon a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_throw.html"
TARGET="_top"
><CODE
CLASS="function"
>THROW</CODE
></A
> to this tag execution continues at
             <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CATCH-CLOSE)</TT
></TD
><TD
>Dissolve a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
> frame.</TD
><TD
>Dissolve the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
> frame at <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 3, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> += 2+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(THROW)</TT
></TD
><TD
>Non-local exit to a <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
> frame.</TD
><TD
><VAR
CLASS="replaceable"
>tag</VAR
> := *<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++.
             Search the innermost <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_catch.html"
TARGET="_top"
><CODE
CLASS="function"
>CATCH</CODE
></A
> frame with tag
             <VAR
CLASS="replaceable"
>tag</VAR
> on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, unwind the
             stack up to it, pass it values.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-unwind"
>33.5.13. Instructions for <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
></A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-unwind-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(UNWIND-PROTECT-OPEN
             <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
>Create an <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> frame.</TD
><TD
>Create an <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> frame.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= 2, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> -= 2+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
             When the stack will be unwound by a non-local exit,
             values will be saved on <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, and execution will be
             transferred to <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNWIND-PROTECT-NORMAL-EXIT)</TT
></TD
><TD
>Dissolve an <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> frame, and start the cleanup
             code.</TD
><TD
>Dissolve the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> frame at <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 2, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> += 2+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
             *--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := 0, *--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := 0, *--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             Save the values on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>,
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNWIND-PROTECT-CLOSE)</TT
></TD
><TD
>Terminate the cleanup code.</TD
><TD
>newSTACK := *<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>++. Load
             values(*(newSTACK-1), ..., *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0)) into values.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := newSTACK. SPword1 := *<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>++, SPword2 := *<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>++.
             Continue depending on SPword1 and SPword2.
             If both are 0, simply continue execution.
             If SPword2 is 0 but SPword1 is nonzero, interpret it as a
             label and jump to it.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(UNWIND-PROTECT-CLEANUP)</TT
></TD
><TD
>Dissolve an <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> frame, and execute the cleanup
             code like a subroutine call.</TD
><TD
>Dissolve the <A
HREF="http://www.lisp.org/HyperSpec/Body/speope_unwind-protect.html"
TARGET="_top"
><CODE
CLASS="function"
>UNWIND-PROTECT</CODE
></A
> frame at <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>,
             get <VAR
CLASS="replaceable"
>label</VAR
> out of the frame.
             <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 2, <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> += 2+<A
HREF="#vm"
><VAR
CLASS="varname"
>jmpbufsize</VAR
></A
>.
             *--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := 0, *--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := PC, *--<A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> := <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>.
             Save the values on the <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> -= <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
>.
             PC := <VAR
CLASS="replaceable"
>label</VAR
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-handler"
>33.5.14. Instructions for <A
HREF="http://www.lisp.org/HyperSpec/Body/mac_handler-bind.html"
TARGET="_top"
><CODE
CLASS="function"
>HANDLER-BIND</CODE
></A
></A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-handler-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(HANDLER-OPEN <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Create a handler frame.</TD
><TD
>Create a handler frame, using <A
HREF="#comp-fun"
><TT
CLASS="literal"
>consts</TT
></A
>[<VAR
CLASS="replaceable"
>n</VAR
>] which
             contains the <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_condition.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONDITION</CODE
></A
> types, the corresponding labels and
             the current <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> depth (= function entry <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> - current <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
>).
             </TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(HANDLER-BEGIN&#38;PUSH)</TT
></TD
><TD
>Start a handler.</TD
><TD
>Restore the same <A
HREF="#vm"
><TT
CLASS="literal"
>SP</TT
></A
> state as after the HANDLER-OPEN.
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := the <A
HREF="http://www.lisp.org/HyperSpec/Body/contyp_condition.html"
TARGET="_top"
><CODE
CLASS="classname"
>CONDITION</CODE
></A
> that was passed to the handler,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.
             *--<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> := <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-inline"
>33.5.15. Instructions for some inlined
  functions</A
></H3
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-inline-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>description</TH
><TH
>semantics</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(NOT)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_not.html"
TARGET="_top"
><CODE
CLASS="function"
>NOT</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := not(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>), <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(EQ)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_eq.html"
TARGET="_top"
><CODE
CLASS="function"
>EQ</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := eq(*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++,<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CAR)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CAR</CODE
></A
>(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>), <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CDR)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_carcm_cdr_darcm_cddddr.html"
TARGET="_top"
><CODE
CLASS="function"
>CDR</CODE
></A
>(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>), <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONS)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_cons.html"
TARGET="_top"
><CODE
CLASS="function"
>CONS</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := cons(*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++,<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SYMBOL-FUNCTION)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-FUNCTION</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_symbol-function.html"
TARGET="_top"
><CODE
CLASS="function"
>SYMBOL-FUNCTION</CODE
></A
>(<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SVREF)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(*<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>++,<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(SVSET)</TT
></TD
><TD
>Inlined call to <CODE
CLASS="function"
>SYSTEM::SVSTORE</CODE
>.</TD
><TD
><VAR
CLASS="replaceable"
>arg1</VAR
> := *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+1),
             <VAR
CLASS="replaceable"
>arg2</VAR
> := *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0), <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += 2.
             <A
HREF="http://www.lisp.org/HyperSpec/Body/acc_svref.html"
TARGET="_top"
><CODE
CLASS="function"
>SVREF</CODE
></A
>(<VAR
CLASS="replaceable"
>arg2</VAR
>,<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>) :=
                  <VAR
CLASS="replaceable"
>arg1</VAR
>.
             <A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <VAR
CLASS="replaceable"
>arg1</VAR
>,
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LIST <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html"
TARGET="_top"
><CODE
CLASS="function"
>LIST</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html"
TARGET="_top"
><CODE
CLASS="function"
>LIST</CODE
></A
>(*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-1),...,*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0)),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += <VAR
CLASS="replaceable"
>n</VAR
>.</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LIST* <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>Inlined call to <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html"
TARGET="_top"
><CODE
CLASS="function"
>LIST*</CODE
></A
>.</TD
><TD
><A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
> := <A
HREF="http://www.lisp.org/HyperSpec/Body/fun_listcm_listst.html"
TARGET="_top"
><CODE
CLASS="function"
>LIST*</CODE
></A
>(*(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+<VAR
CLASS="replaceable"
>n</VAR
>-1),...,
                                     *(<A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
>+0),<A
HREF="#vm"
><VAR
CLASS="varname"
>value1</VAR
></A
>),
             <A
HREF="#vm"
><VAR
CLASS="varname"
>mv_count</VAR
></A
> := 1, <A
HREF="#vm"
><TT
CLASS="literal"
>STACK</TT
></A
> += <VAR
CLASS="replaceable"
>n</VAR
>.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-combo"
>33.5.16. Combined instructions</A
></H3
><P
ALIGN="justify"
>The most frequent short sequences of instructions have an
equivalent combined instruction.  They are only present for space and
speed optimization. The only exception is
<TT
CLASS="sexp"
>FUNCALL&#38;SKIP&#38;RETGF</TT
>, which is needed for
generic functions.</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-combo-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>equivalent</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(NIL&#38;PUSH)</TT
></TD
><TD
><TT
CLASS="sexp"
>(NIL) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(T&#38;PUSH)</TT
></TD
><TD
><TT
CLASS="sexp"
>(T) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONST&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CONST <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOADI&#38;PUSH <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOADI <VAR
CLASS="replaceable"
>k<SUB
>1</SUB
></VAR
> <VAR
CLASS="replaceable"
>k<SUB
>2</SUB
></VAR
> <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOADC&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOADC <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOADV&#38;PUSH <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOADV <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(POP&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(POP) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(GETVALUE&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(GETVALUE <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(JSR&#38;PUSH <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(JSR <VAR
CLASS="replaceable"
>label</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(COPY-CLOSURE&#38;PUSH <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(COPY-CLOSURE <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL&#38;PUSH <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALL <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL1&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALL1 <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL2&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALL2 <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS1&#38;PUSH <VAR
CLASS="replaceable"
>b</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS1 <VAR
CLASS="replaceable"
>b</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS2&#38;PUSH <VAR
CLASS="replaceable"
>b</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS2 <VAR
CLASS="replaceable"
>b</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLSR&#38;PUSH <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLSR <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLC&#38;PUSH)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLC) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLCKEY&#38;PUSH)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLCKEY) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(FUNCALL&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(FUNCALL <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(APPLY&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(APPLY <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CAR&#38;PUSH)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CAR) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CDR&#38;PUSH)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CDR) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONS&#38;PUSH)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CONS) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LIST&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LIST <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LIST*&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LIST* <VAR
CLASS="replaceable"
>n</VAR
>) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(NIL&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(NIL) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(T&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(T) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;STOREC <VAR
CLASS="replaceable"
>k</VAR
> <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>k</VAR
>) (STOREC <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>m</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS1&#38;STORE <VAR
CLASS="replaceable"
>b</VAR
> <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS1 <VAR
CLASS="replaceable"
>b</VAR
>) (STORE <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS2&#38;STORE <VAR
CLASS="replaceable"
>b</VAR
> <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS2 <VAR
CLASS="replaceable"
>b</VAR
>) (STORE <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLSR&#38;STORE <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLSR <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>) (STORE <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;CDR&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (CDR) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;CONS&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>+1) (CONS) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;INC&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (CALL1 #'1+) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;DEC&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (CALL1 #'1-) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;CAR&#38;STORE <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>m</VAR
>) (CAR) (STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL1&#38;JMPIF <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALL1 <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIF <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL1&#38;JMPIFNOT <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALL1 <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIFNOT <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL2&#38;JMPIF <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALL2 <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIF <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALL2&#38;JMPIFNOT <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALL2 <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIFNOT <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS1&#38;JMPIF <VAR
CLASS="replaceable"
>b</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS1 <VAR
CLASS="replaceable"
>b</VAR
>) (JMPIF <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS1&#38;JMPIFNOT <VAR
CLASS="replaceable"
>b</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS1 <VAR
CLASS="replaceable"
>b</VAR
>) (JMPIFNOT <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS2&#38;JMPIF <VAR
CLASS="replaceable"
>b</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS2 <VAR
CLASS="replaceable"
>b</VAR
>) (JMPIF <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLS2&#38;JMPIFNOT <VAR
CLASS="replaceable"
>b</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLS2 <VAR
CLASS="replaceable"
>b</VAR
>) (JMPIFNOT <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLSR&#38;JMPIF <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLSR <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIF <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CALLSR&#38;JMPIFNOT <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CALLSR <VAR
CLASS="replaceable"
>m</VAR
> <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIFNOT <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;JMPIF <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIF <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;JMPIFNOT <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (JMPIFNOT <VAR
CLASS="replaceable"
>label</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;CAR&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (CAR) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;CDR&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (CDR) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;INC&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (CALL1 #'1+) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;DEC&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>) (CALL1 #'1-) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONST&#38;SYMBOL-FUNCTION <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CONST <VAR
CLASS="replaceable"
>n</VAR
>) (SYMBOL-FUNCTION)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONST&#38;SYMBOL-FUNCTION&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CONST <VAR
CLASS="replaceable"
>n</VAR
>) (SYMBOL-FUNCTION) (PUSH)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONST&#38;SYMBOL-FUNCTION&#38;STORE <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(CONST <VAR
CLASS="replaceable"
>n</VAR
>) (SYMBOL-FUNCTION) (STORE <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(APPLY&#38;SKIP&#38;RET <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(APPLY <VAR
CLASS="replaceable"
>n</VAR
>) (SKIP&#38;RET <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(FUNCALL&#38;SKIP&#38;RETGF <VAR
CLASS="replaceable"
>n</VAR
> <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
><TD
><TT
CLASS="sexp"
>(FUNCALL <VAR
CLASS="replaceable"
>n</VAR
>) (SKIP&#38;RETGF <VAR
CLASS="replaceable"
>k</VAR
>)</TT
></TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="section"
><HR><H3
CLASS="section"
><A
NAME="instr-shortcut"
>33.5.17. Shortcut instructions</A
></H3
><P
ALIGN="justify"
>There are special one-byte instructions (without explicit
operands) for the following frequent instructions:</P
><DIV
CLASS="informaltable"
><P
></P
><A
NAME="instr-shortcut-tab"
></A
><TABLE
BORDER="1"
FRAME="border"
RULES="all"
CLASS="CALSTABLE"
><COL><COL><THEAD
><TR
><TH
>mnemonic</TH
><TH
>operand range</TH
></TR
></THEAD
><TBODY
><TR
><TD
><TT
CLASS="sexp"
>(LOAD <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>0 &#8804; <VAR
CLASS="replaceable"
>n</VAR
> &#60; 15</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(LOAD&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>0 &#8804; <VAR
CLASS="replaceable"
>n</VAR
> &#60; 25</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONST <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>0 &#8804; <VAR
CLASS="replaceable"
>n</VAR
> &#60; 21</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(CONST&#38;PUSH <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>0 &#8804; <VAR
CLASS="replaceable"
>n</VAR
> &#60; 30</TD
></TR
><TR
><TD
><TT
CLASS="sexp"
>(STORE <VAR
CLASS="replaceable"
>n</VAR
>)</TT
></TD
><TD
>0 &#8804; <VAR
CLASS="replaceable"
>n</VAR
> &#60; 8</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
></DIV
></DIV
></DIV
><DIV
CLASS="appendix"
><HR><H1
><A
NAME="gfdl"
></A
>Appendix A. GNU Free Documentation License</H1
><FONT
COLOR="RED"
>Version 1.2, November 2002</FONT
><A
NAME="fsf-copyright"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
ALIGN="justify"
>Copyright (C) 2000,2001,2002  Free Software Foundation, Inc.
59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.</P
></BLOCKQUOTE
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-0"
>A.1. PREAMBLE</A
></H2
><P
ALIGN="justify"
>The purpose of this License is to make a manual, textbook, or
other functional and useful document "free" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it, with
or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible for
modifications made by others.</P
><P
ALIGN="justify"
>This License is a kind of "copyleft", which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft license
designed for free software.</P
><P
ALIGN="justify"
>We have designed this License in order to use it for manuals for
free software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals; it
can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-1"
>A.2. APPLICABILITY AND DEFINITIONS</A
></H2
><P
ALIGN="justify"
>This License applies to any manual or other work, in
any medium, that contains a notice placed by the copyright holder saying
it can be distributed under the terms of this License.  Such a notice
grants a world-wide, royalty-free license, unlimited in duration, to use
that work under the conditions stated herein.  The "Document", below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as "you".  You accept the license if you
copy, modify or distribute the work in a way requiring permission under
copyright law.</P
><P
ALIGN="justify"
>A "Modified Version" of the Document means any
work containing the Document or a portion of it, either copied verbatim,
or with modifications and/or translated into another language.</P
><P
ALIGN="justify"
>A "Secondary Section" is a named appendix or
a front-matter section of the Document that deals exclusively with the
relationship of the publishers or authors of the Document to the
Document's overall subject (or to related matters) and contains nothing
that could fall directly within that overall subject.  (Thus, if the
Document is in part a textbook of mathematics, a Secondary Section may
not explain any mathematics.)  The relationship could be a matter of
historical connection with the subject or with related matters, or of
legal, commercial, philosophical, ethical or political position
regarding them.</P
><P
ALIGN="justify"
>The "Invariant Sections" are certain Secondary
Sections whose titles are designated, as being those of Invariant
Sections, in the notice that says that the Document is released under
this License.  If a section does not fit the above definition of
Secondary then it is not allowed to be designated as Invariant.  The
Document may contain zero Invariant Sections.  If the Document does not
identify any Invariant Sections then there are none.</P
><P
ALIGN="justify"
>The "Cover Texts" are certain short passages of
text that are listed, as Front-Cover Texts or Back-Cover Texts, in the
notice that says that the Document is released under this License.  A
Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at
most 25 words.</P
><P
ALIGN="justify"
>A "Transparent" copy of the Document means a
machine-readable copy, represented in a format whose specification is
available to the general public, that is suitable for revising the
document straightforwardly with generic text editors or (for images
composed of pixels) generic paint programs or (for drawings) some widely
available drawing editor, and that is suitable for input to text
formatters or for automatic translation to a variety of formats suitable
for input to text formatters.  A copy made in an otherwise Transparent
file format whose markup, or absence of markup, has been arranged to
thwart or discourage subsequent modification by readers is not
Transparent.  An image format is not Transparent if used for any
substantial amount of text.  A copy that is not "Transparent" is called
"Opaque".</P
><P
ALIGN="justify"
>Examples of suitable formats for Transparent copies include plain
ASCII without markup, Texinfo input format, LaTeX input format, SGML or
XML using a publicly available DTD, and standard-conforming simple HTML,
PostScript or PDF designed for human modification.  Examples of
transparent image formats include PNG, XCF and JPG.  Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the machine-generated
HTML, PostScript or PDF produced by some word processors for output
purposes only.</P
><P
ALIGN="justify"
>The "Title Page" means, for a printed book,
the title page itself, plus such following pages as are needed to hold,
legibly, the material this License requires to appear in the title page.
For works in formats which do not have any title page as such, "Title
Page" means the text near the most prominent appearance of the work's
title, preceding the beginning of the body of the text.</P
><P
ALIGN="justify"
>A section "Entitled XYZ" means a named subunit
of the Document whose title either is precisely XYZ or contains XYZ in
parentheses following text that translates XYZ in another language.
(Here XYZ stands for a specific section name mentioned below, such as
"Acknowledgements", "Dedications", "Endorsements", or "History".)  To
"Preserve the Title" of such a section when you modify the Document
means that it remains a section "Entitled XYZ" according to this
definition.</P
><P
ALIGN="justify"
>The Document may include Warranty Disclaimers next to the notice
which states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this License,
but only as regards disclaiming warranties: any other implication that
these Warranty Disclaimers may have is void and has no effect on the
meaning of this License.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-2"
>A.3. VERBATIM COPYING</A
></H2
><P
ALIGN="justify"
>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies to
the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further copying
of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</P
><P
ALIGN="justify"
>You may also lend copies, under the same conditions stated above,
and you may publicly display copies.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-3"
>A.4. COPYING IN QUANTITY</A
></H2
><P
ALIGN="justify"
>If you publish printed copies (or copies in media that commonly
have printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back
cover.  Both covers must also clearly and legibly identify you as the
publisher of these copies.  The front cover must present the full title
with all words of the title equally prominent and visible.  You may add
other material on the covers in addition.  Copying with changes limited
to the covers, as long as they preserve the title of the Document and
satisfy these conditions, can be treated as verbatim copying in other
respects.</P
><P
ALIGN="justify"
>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.</P
><P
ALIGN="justify"
>If you publish or distribute Opaque copies of the Document
numbering more than 100, you must either include a machine-readable
Transparent copy along with each Opaque copy, or state in or with each
Opaque copy a computer-network location from which the general
network-using public has access to download using public-standard
network protocols a complete Transparent copy of the Document, free of
added material.  If you use the latter option, you must take reasonably
prudent steps, when you begin distribution of Opaque copies in quantity,
to ensure that this Transparent copy will remain thus accessible at the
stated location until at least one year after the last time you
distribute an Opaque copy (directly or through your agents or retailers)
of that edition to the public.</P
><P
ALIGN="justify"
>It is requested, but not required, that you contact the authors of
the Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-4"
>A.5. MODIFICATIONS</A
></H2
><P
ALIGN="justify"
>You may copy and distribute a Modified Version of the Document
under the conditions of sections 2 and 3 above, provided that you
release the Modified Version under precisely this License, with the
Modified Version filling the role of the Document, thus licensing
distribution and modification of the Modified Version to whoever
possesses a copy of it.  In addition, you must do these things in the
Modified Version:</P
><P
></P
><OL
TYPE="A"
><LI
><P
ALIGN="justify"
>Use in the Title Page (and on the covers, if any) a
  title distinct from that of the Document, and from those of previous
  versions (which should, if there were any, be listed in the History
  section of the Document).  You may use the same title as a previous
  version if the original publisher of that version gives permission.
</P
></LI
><LI
><P
ALIGN="justify"
>List on the Title Page, as authors, one or more
  persons or entities responsible for authorship of the modifications in
  the Modified Version, together with at least five of the principal
  authors of the Document (all of its principal authors, if it has fewer
  than five), unless they release you from this requirement.
</P
></LI
><LI
><P
ALIGN="justify"
>State on the Title page the name of the publisher of
  the Modified Version, as the publisher.</P
></LI
><LI
><P
ALIGN="justify"
>Preserve all the copyright notices of the Document.
</P
></LI
><LI
><P
ALIGN="justify"
>Add an appropriate copyright notice for your
  modifications adjacent to the other copyright notices.
</P
></LI
><LI
><P
ALIGN="justify"
>Include, immediately after the copyright notices, a
  license notice giving the public permission to use the Modified
  Version under the terms of this License, in the form shown in the
  <A
HREF="#gfdl-addendum"
>Addendum</A
> below.
</P
></LI
><LI
><P
ALIGN="justify"
>Preserve in that license notice the full lists of
  Invariant Sections and required Cover Texts given in the Document's
  license notice.</P
></LI
><LI
><P
ALIGN="justify"
>Include an unaltered copy of this License.
</P
></LI
><LI
><P
ALIGN="justify"
>Preserve the section Entitled "History", Preserve its
  Title, and add to it an item stating at least the title, year, new
  authors, and publisher of the Modified Version as given on the Title
  Page.  If there is no section Entitled "History" in the Document,
  create one stating the title, year, authors, and publisher of the
  Document as given on its Title Page, then add an item describing the
  Modified Version as stated in the previous sentence.
</P
></LI
><LI
><P
ALIGN="justify"
>Preserve the network location, if any, given in the
  Document for public access to a Transparent copy of the Document, and
  likewise the network locations given in the Document for previous
  versions it was based on.  These may be placed in the "History"
  section.  You may omit a network location for a work that was
  published at least four years before the Document itself, or if the
  original publisher of the version it refers to gives permission.
</P
></LI
><LI
><P
ALIGN="justify"
>For any section Entitled "Acknowledgements" or
  "Dedications", Preserve the Title of the section, and preserve in the
  section all the substance and tone of each of the contributor
  acknowledgements and/or dedications given therein.
</P
></LI
><LI
><P
ALIGN="justify"
>Preserve all the Invariant Sections of the Document,
  unaltered in their text and in their titles.  Section numbers or the
  equivalent are not considered part of the section titles.
</P
></LI
><LI
><P
ALIGN="justify"
>Delete any section Entitled "Endorsements".
  Such a section may not be included in the Modified Version.
</P
></LI
><LI
><P
ALIGN="justify"
>Do not retitle any existing section to be Entitled
  "Endorsements" or to conflict in title with any Invariant Section.
</P
></LI
><LI
><P
ALIGN="justify"
>Preserve any Warranty Disclaimers.
</P
></LI
></OL
><P
ALIGN="justify"
>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.</P
><P
ALIGN="justify"
>You may add a section Entitled "Endorsements", provided it
contains nothing but endorsements of your Modified Version by various
parties--for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.</P
><P
ALIGN="justify"
>You may add a passage of up to five words as a Front-Cover Text,
and a passage of up to 25 words as a Back-Cover Text, to the end of the
list of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or through
arrangements made by) any one entity.  If the Document already includes
a cover text for the same cover, previously added by you or by
arrangement made by the same entity you are acting on behalf of, you may
not add another; but you may replace the old one, on explicit permission
from the previous publisher that added the old one.</P
><P
ALIGN="justify"
>The author(s) and publisher(s) of the Document do not by this
License give permission to use their names for publicity for or to
assert or imply endorsement of any Modified Version.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-5"
>A.6. COMBINING DOCUMENTS</A
></H2
><P
ALIGN="justify"
>You may combine the Document with other documents released under
this License, under the terms defined in <A
HREF="#gfdl-4"
>section
4</A
> above for modified versions, provided that you include in the
combination all of the Invariant Sections of all of the original
documents, unmodified, and list them all as Invariant Sections of your
combined work in its license notice, and that you preserve all their
Warranty Disclaimers.</P
><P
ALIGN="justify"
>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by adding
at the end of it, in parentheses, the name of the original author or
publisher of that section if known, or else a unique number.  Make the
same adjustment to the section titles in the list of Invariant Sections
in the license notice of the combined work.</P
><P
ALIGN="justify"
>In the combination, you must combine any sections Entitled
"History" in the various original documents, forming one section
Entitled "History"; likewise combine any sections Entitled
"Acknowledgements", and any sections Entitled "Dedications".  You must
delete all sections Entitled "Endorsements".</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-6"
>A.7. COLLECTIONS OF DOCUMENTS</A
></H2
><P
ALIGN="justify"
>You may make a collection consisting of the Document and other
documents released under this License, and replace the individual copies
of this License in the various documents with a single copy that is
included in the collection, provided that you follow the rules of this
License for verbatim copying of each of the documents in all other
respects.</P
><P
ALIGN="justify"
>You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-7"
>A.8. AGGREGATION WITH INDEPENDENT WORKS</A
></H2
><P
ALIGN="justify"
>A compilation of the Document or its derivatives with other
separate and independent documents or works, in or on a volume of a
storage or distribution medium, is called an "aggregate" if the
copyright resulting from the compilation is not used to limit the legal
rights of the compilation's users beyond what the individual works
permit.  When the Document is included in an aggregate, this License does
not apply to the other works in the aggregate which are not themselves
derivative works of the Document.</P
><P
ALIGN="justify"
>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on covers
that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form.  Otherwise
they must appear on printed covers that bracket the whole
aggregate.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-8"
>A.9. TRANSLATION</A
></H2
><P
ALIGN="justify"
>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between the
translation and the original version of this License or a notice or
disclaimer, the original version will prevail.</P
><P
ALIGN="justify"
>If a section in the Document is Entitled "Acknowledgements",
"Dedications", or "History", the requirement (section 4) to Preserve its
Title (section 1) will typically require changing the actual
title.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-9"
>A.10. TERMINATION</A
></H2
><P
ALIGN="justify"
>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided for under this License.  Any other attempt
to copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this License
will not have their licenses terminated so long as such parties remain
in full compliance.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-10"
>A.11. FUTURE REVISIONS OF THIS LICENSE</A
></H2
><P
ALIGN="justify"
>The Free Software Foundation may publish new, revised versions of
the GNU Free Documentation License from time to time.  Such new versions
will be similar in spirit to the present version, but may differ in
detail to address new problems or concerns.  See
http://www.gnu.org/copyleft/.</P
><P
ALIGN="justify"
>Each version of the License is given a distinguishing version
number.  If the Document specifies that a particular numbered version of
this License "or any later version" applies to it, you have the option
of following the terms and conditions either of that specified version
or of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.</P
></DIV
><DIV
CLASS="section"
><HR><H2
CLASS="section"
><A
NAME="gfdl-addendum"
>A.12. ADDENDUM: How to use this License for
  your documents</A
></H2
><P
ALIGN="justify"
>To use this License in a document you have written, include a copy
of the License in the document and put the following copyright and
license notices just after the title page:</P
><A
NAME="copyright-sample"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
ALIGN="justify"
>&#13;    Copyright (c)  YEAR  YOUR NAME.
    Permission is granted to copy, distribute and/or modify this document
    under the terms of the GNU Free Documentation License, Version 1.2
    or any later version published by the Free Software Foundation;
    with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
    A copy of the license is included in the section entitled "GNU
    Free Documentation License".
</P
></BLOCKQUOTE
><P
ALIGN="justify"
>If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the "with...Texts." line with this:</P
><A
NAME="inv-cover-sample"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
ALIGN="justify"
>&#13;    with the Invariant Sections being LIST THEIR TITLES, with the
    Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.
</P
></BLOCKQUOTE
><P
ALIGN="justify"
>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.</P
><P
ALIGN="justify"
>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of free
software license, such as the GNU General Public License, to permit
their use in free software.</P
></DIV
></DIV
><DIV
CLASS="index"
><HR><H1
><A
NAME="idx"
></A
>Index</H1
></DIV
><A
NAME="references"
></A
><HR><H1
><A
NAME="references"
></A
>References</H1
><H2
CLASS="bibliodiv"
><A
NAME="ref-books"
>Books</A
></H2
><DIV
CLASS="biblioentry"
><A
NAME="CLtL1"
></A
><P
>[CLtL1]&nbsp;<SPAN
CLASS="AUTHOR"
>Guy L. Steele, Jr.</SPAN
>, <I
CLASS="citetitle"
>Common Lisp: the Language (1st Edition)</I
>, 1984, 465, 0-201-10088-6, Digital Press.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="biblioentry"
><A
NAME="CLtL2"
></A
><P
>[CLtL2]&nbsp;<SPAN
CLASS="AUTHOR"
>Guy L. Steele, Jr.</SPAN
>, <I
CLASS="citetitle"
><A
HREF="http://www.cs.cmu.edu/afs/cs.cmu.edu/project/ai-repository/ai/html/cltl/cltl2.html"
TARGET="_top"
>Common Lisp: the Language (2nd Edition)</A
></I
>, 1990, 1032, 0-201-10088-6, Digital Press.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="biblioentry"
><A
NAME="amop"
></A
><P
>[Metaobject Protocol]&nbsp;AMOP, <SPAN
CLASS="AUTHOR"
>Gregor Kiczales, </SPAN
><SPAN
CLASS="AUTHOR"
>Jim des Rivieres, </SPAN
><SPAN
CLASS="AUTHOR"
>and Daniel G. Bobrow</SPAN
>, <I
CLASS="citetitle"
><A
HREF="http://www.lisp.org/mop"
TARGET="_top"
>The Art of the Metaobject Protocol</A
></I
>, 1991, 335, 0-262-61074-4, <A
HREF="http://www-mitpress.mit.edu"
TARGET="_top"
>MIT
      Press</A
>.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><HR><H2
CLASS="bibliodiv"
><A
NAME="ref-ansi"
>ANSI standard documents</A
></H2
><DIV
CLASS="biblioentry"
><A
NAME="ansi-cl"
></A
><P
>[ANSI CL standard]&nbsp;ANSI CL, 1994, <I
CLASS="citetitle"
>ANSI Common Lisp standard X3.226-1994 -
       <A
HREF="http://www.ncits.org/tc_home/j13sd4.htm"
TARGET="_top"
>Information
       Technology - Programming Language - Common Lisp</A
></I
>.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
><DIV
CLASS="biblioentry"
><A
NAME="CLHS"
></A
><P
>[Common Lisp HyperSpec]&nbsp;CLHS, <I
CLASS="citetitle"
><A
HREF="http://www.lisp.org/HyperSpec/FrontMatter/"
TARGET="_top"
>Common Lisp HyperSpec</A
></I
>.</P
><DIV
CLASS="BIBLIOENTRYBLOCK"
STYLE="margin-left: 0.5in"
></DIV
></DIV
></DIV
><div
class="custom-footer"
><hr
width="100%"><table
width="100%"
><tr
><td
align="left"
><a
href="http://clisp.cons.org"
><img
src="clisp.png"
width="48"
height="48"
alt="[CLISP home]"></a
></td
><td
align="center"
><a
href="http://www.gnu.org"
><img
src="http://www.gnu.org/graphics/gnubanner.jpg"
width="468"
height="60"
alt="[Come and see what GNU creates for YOU]"></a
></td
><td
align="right"
><a
href="http://sourceforge.net"
><img
src="http://sourceforge.net/sflogo.php?group_id=1355&#38;amp;type=2"
width="125"
height="37"
alt="[SourceForge]"></a
></td
></tr
></table
></div
></BODY
></HTML
>